import{a as z,b as Me,c as Cy,d as x,e as GI,f as ah,g as KI,h as QI,i as YI,j as Dy,k as XI,l as lh,m as ZI,n as ch,o as JI,p as eS,q as rt,r as Ps,s as vi,t as uh,u as lc,v as tS,w as nS,x as Ir,y as Kt}from"./chunk-OHSRKTDT.js";var iS=null;var Iy=1;function Sn(n){let e=iS;return iS=n,e}var rS={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xV(n){if(!(xy(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Iy)){if(!n.producerMustRecompute(n)&&!Sy(n)){n.dirty=!1,n.lastCleanEpoch=Iy;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Iy}}function sS(n){return n&&(n.nextProducerIndex=0),Sn(n)}function oS(n,e){if(Sn(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(xy(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ty(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Sy(n){dh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(xV(t),i!==t.version))return!0}return!1}function aS(n){if(dh(n),xy(n))for(let e=0;e<n.producerNode.length;e++)Ty(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Ty(n,e){if(AV(n),dh(n),n.liveConsumerNode.length===1)for(let i=0;i<n.producerNode.length;i++)Ty(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];dh(r),r.producerIndexOfThis[i]=e}}function xy(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function dh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function AV(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function MV(){throw new Error}var PV=MV;function lS(n){PV=n}function se(n){return typeof n=="function"}function ia(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var hh=ia(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Rs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var yt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(se(i))try{i()}catch(s){e=s instanceof hh?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{cS(s)}catch(o){e=e??[],o instanceof hh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new hh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)cS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Rs(t,e)}remove(e){let{_finalizers:t}=this;t&&Rs(t,e),e instanceof n&&e._removeParent(this)}};yt.EMPTY=(()=>{let n=new yt;return n.closed=!0,n})();var Ay=yt.EMPTY;function fh(n){return n instanceof yt||n&&"closed"in n&&se(n.remove)&&se(n.add)&&se(n.unsubscribe)}function cS(n){se(n)?n():n.unsubscribe()}var ei={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ra={setTimeout(n,e,...t){let{delegate:i}=ra;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ra;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ph(n){ra.setTimeout(()=>{let{onUnhandledError:e}=ei;if(e)e(n);else throw n})}function cc(){}var uS=(()=>My("C",void 0,void 0))();function dS(n){return My("E",void 0,n)}function hS(n){return My("N",n,void 0)}function My(n,e,t){return{kind:n,value:e,error:t}}var ks=null;function sa(n){if(ei.useDeprecatedSynchronousErrorHandling){let e=!ks;if(e&&(ks={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=ks;if(ks=null,t)throw i}}else n()}function fS(n){ei.useDeprecatedSynchronousErrorHandling&&ks&&(ks.errorThrown=!0,ks.error=n)}var Os=class extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,fh(e)&&e.add(this)):this.destination=OV}static create(e,t,i){return new Xi(e,t,i)}next(e){this.isStopped?Ry(hS(e),this):this._next(e)}error(e){this.isStopped?Ry(dS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ry(uS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},RV=Function.prototype.bind;function Py(n,e){return RV.call(n,e)}var ky=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){gh(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){gh(i)}else gh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){gh(t)}}},Xi=class extends Os{constructor(e,t,i){super();let r;if(se(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&ei.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Py(e.next,s),error:e.error&&Py(e.error,s),complete:e.complete&&Py(e.complete,s)}):r=e}this.destination=new ky(r)}};function gh(n){ei.useDeprecatedSynchronousErrorHandling?fS(n):ph(n)}function kV(n){throw n}function Ry(n,e){let{onStoppedNotification:t}=ei;t&&ra.setTimeout(()=>t(n,e))}var OV={closed:!0,next:cc,error:kV,complete:cc};var oa=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function on(n){return n}function Oy(...n){return Ny(n)}function Ny(n){return n.length===0?on:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=FV(t)?t:new Xi(t,i,r);return sa(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=pS(i),new i((r,s)=>{let o=new Xi({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[oa](){return this}pipe(...t){return Ny(t)(this)}toPromise(t){return t=pS(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function pS(n){var e;return(e=n??ei.Promise)!==null&&e!==void 0?e:Promise}function NV(n){return n&&se(n.next)&&se(n.error)&&se(n.complete)}function FV(n){return n&&n instanceof Os||NV(n)&&fh(n)}function Fy(n){return se(n?.lift)}function ye(n){return e=>{if(Fy(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(n,e,t,i,r){return new Ly(n,e,t,i,r)}var Ly=class extends Os{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function aa(){return ye((n,e)=>{let t=null;n._refCount++;let i=ve(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var la=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Fy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yt;let t=this.getSubject();e.add(this.source.subscribe(ve(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yt.EMPTY)}return e}refCount(){return aa()(this)}};var gS=ia(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var vt=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new mh(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new gS}next(t){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){sa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Ay:(this.currentObservers=null,s.push(t),new yt(()=>{this.currentObservers=null,Rs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new mh(e,t),n})(),mh=class extends vt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Ay}};var Lt=class extends vt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var uc={now(){return(uc.delegate||Date).now()},delegate:void 0};var yh=class extends vt{constructor(e=1/0,t=1/0,i=uc){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}};var vh=class extends yt{constructor(e,t){super()}schedule(e,t=0){return this}};var dc={setInterval(n,e,...t){let{delegate:i}=dc;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=dc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ca=class extends vh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return dc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&dc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Rs(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ua=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};ua.now=uc.now;var da=class extends ua{constructor(e,t=ua.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var hc=new da(ca);var _h=class extends ca{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var bh=class extends da{};var Vy=new bh(_h);var pn=new le(n=>n.complete());function mS(n){return n&&se(n.schedule)}function jy(n){return n[n.length-1]}function wh(n){return se(jy(n))?n.pop():void 0}function _i(n){return mS(jy(n))?n.pop():void 0}function yS(n,e){return typeof jy(n)=="number"?n.pop():e}var Eh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ch(n){return se(n?.then)}function Dh(n){return se(n[oa])}function Ih(n){return Symbol.asyncIterator&&se(n?.[Symbol.asyncIterator])}function Sh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function LV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Th=LV();function xh(n){return se(n?.[Th])}function Ah(n){return KI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield ah(t.read());if(r)return yield ah(void 0);yield yield ah(i)}}finally{t.releaseLock()}})}function Mh(n){return se(n?.getReader)}function Je(n){if(n instanceof le)return n;if(n!=null){if(Dh(n))return VV(n);if(Eh(n))return jV(n);if(Ch(n))return BV(n);if(Ih(n))return vS(n);if(xh(n))return UV(n);if(Mh(n))return $V(n)}throw Sh(n)}function VV(n){return new le(e=>{let t=n[oa]();if(se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function jV(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function BV(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ph)})}function UV(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function vS(n){return new le(e=>{zV(n,e).catch(t=>e.error(t))})}function $V(n){return vS(Ah(n))}function zV(n,e){var t,i,r,s;return GI(this,void 0,void 0,function*(){try{for(t=QI(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function gn(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Fn(n,e=0){return ye((t,i)=>{t.subscribe(ve(i,r=>gn(i,n,()=>i.next(r),e),()=>gn(i,n,()=>i.complete(),e),r=>gn(i,n,()=>i.error(r),e)))})}function ti(n,e=0){return ye((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function _S(n,e){return Je(n).pipe(ti(e),Fn(e))}function bS(n,e){return Je(n).pipe(ti(e),Fn(e))}function wS(n,e){return new le(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function ES(n,e){return new le(t=>{let i;return gn(t,e,()=>{i=n[Th](),gn(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>se(i?.return)&&i.return()})}function Ph(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{gn(t,e,()=>{let i=n[Symbol.asyncIterator]();gn(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function CS(n,e){return Ph(Ah(n),e)}function DS(n,e){if(n!=null){if(Dh(n))return _S(n,e);if(Eh(n))return wS(n,e);if(Ch(n))return bS(n,e);if(Ih(n))return Ph(n,e);if(xh(n))return ES(n,e);if(Mh(n))return CS(n,e)}throw Sh(n)}function Pe(n,e){return e?DS(n,e):Je(n)}function Z(...n){let e=_i(n);return Pe(n,e)}function ha(n,e){let t=se(n)?n:()=>n,i=r=>r.error(t());return new le(e?r=>e.schedule(i,0,r):i)}function By(n){return!!n&&(n instanceof le||se(n.lift)&&se(n.subscribe))}var Zi=ia(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function J(n,e){return ye((t,i)=>{let r=0;t.subscribe(ve(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:HV}=Array;function qV(n,e){return HV(e)?n(...e):n(e)}function Rh(n){return J(e=>qV(n,e))}var{isArray:WV}=Array,{getPrototypeOf:GV,prototype:KV,keys:QV}=Object;function kh(n){if(n.length===1){let e=n[0];if(WV(e))return{args:e,keys:null};if(YV(e)){let t=QV(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function YV(n){return n&&typeof n=="object"&&GV(n)===KV}function Oh(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Nh(...n){let e=_i(n),t=wh(n),{args:i,keys:r}=kh(n);if(i.length===0)return Pe([],e);let s=new le(XV(i,e,r?o=>Oh(r,o):on));return t?s.pipe(Rh(t)):s}function XV(n,e,t=on){return i=>{IS(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)IS(e,()=>{let c=Pe(n[l],e),u=!1;c.subscribe(ve(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function IS(n,e,t){n?gn(t,n,e):e()}function SS(n,e,t,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=g=>c<i?p(g):l.push(g),p=g=>{s&&e.next(g),c++;let m=!1;Je(t(g,u++)).subscribe(ve(e,y=>{r?.(y),s?f(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<i;){let y=l.shift();o?gn(e,o,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(ve(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Tt(n,e,t=1/0){return se(e)?Tt((i,r)=>J((s,o)=>e(i,s,r,o))(Je(n(i,r))),t):(typeof e=="number"&&(t=e),ye((i,r)=>SS(i,r,n,t)))}function fc(n=1/0){return Tt(on,n)}function TS(){return fc(1)}function fa(...n){return TS()(Pe(n,_i(n)))}function Fh(n){return new le(e=>{Je(n()).subscribe(e)})}function Uy(...n){let e=wh(n),{args:t,keys:i}=kh(n),r=new le(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;Je(t[u]).subscribe(ve(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?Oh(i,a):a),s.complete())}))}});return e?r.pipe(Rh(e)):r}function pc(...n){let e=_i(n),t=yS(n,1/0),i=n;return i.length?i.length===1?Je(i[0]):fc(t)(Pe(i,e)):pn}function Pt(n,e){return ye((t,i)=>{let r=0;t.subscribe(ve(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Sr(n){return ye((e,t)=>{let i=null,r=!1,s;i=e.subscribe(ve(t,void 0,void 0,o=>{s=Je(n(o,Sr(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function xS(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(ve(o,u=>{let d=c++;l=a?n(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function Tr(n,e){return se(e)?Tt(n,e,1):Tt(n,1)}function xr(n){return ye((e,t)=>{let i=!1;e.subscribe(ve(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ni(n){return n<=0?()=>pn:ye((e,t)=>{let i=0;e.subscribe(ve(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function $y(n){return J(()=>n)}function gc(n,e=on){return n=n??ZV,ye((t,i)=>{let r,s=!0;t.subscribe(ve(i,o=>{let a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function ZV(n,e){return n===e}function Lh(n=JV){return ye((e,t)=>{let i=!1;e.subscribe(ve(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function JV(){return new Zi}function Ar(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ln(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Pt((r,s)=>n(r,s,i)):on,ni(1),t?xr(e):Lh(()=>new Zi))}function pa(n){return n<=0?()=>pn:ye((e,t)=>{let i=[];e.subscribe(ve(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function zy(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Pt((r,s)=>n(r,s,i)):on,pa(1),t?xr(e):Lh(()=>new Zi))}function mc(){return ye((n,e)=>{let t,i=!1;n.subscribe(ve(e,r=>{let s=t;t=r,i&&e.next([s,r]),i=!0}))})}function Ns(n,e){return ye(xS(n,e,arguments.length>=2,!0))}function ga(n={}){let{connector:e=()=>new vt,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=l=void 0,u=d=!1},p=()=>{let g=o;f(),g?.unsubscribe()};return ye((g,m)=>{c++,!d&&!u&&h();let y=l=l??e();m.add(()=>{c--,c===0&&!d&&!u&&(a=Hy(p,r))}),y.subscribe(m),!o&&c>0&&(o=new Xi({next:b=>y.next(b),error:b=>{d=!0,h(),a=Hy(f,t,b),y.error(b)},complete:()=>{u=!0,h(),a=Hy(f,i),y.complete()}}),Je(g).subscribe(o))})(s)}}function Hy(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Xi({next:()=>{i.unsubscribe(),n()}});return Je(e(...t)).subscribe(i)}function Vh(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,ga({connector:()=>new yh(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Fs(...n){let e=_i(n);return ye((t,i)=>{(e?fa(n,t,e):fa(n,t)).subscribe(i)})}function et(n,e){return ye((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(ve(i,l=>{r?.unsubscribe();let c=0,u=s++;Je(n(l,u)).subscribe(r=ve(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function jh(n,e){return se(e)?et(()=>n,e):et(()=>n)}function qy(n){return ye((e,t)=>{Je(n).subscribe(ve(t,()=>t.complete(),cc)),!t.closed&&e.subscribe(t)})}function ht(n,e,t){let i=se(n)||e||t?{next:n,error:e,complete:t}:n;return i?ye((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(ve(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):on}function $e(n){for(let e in n)if(n[e]===$e)return e;throw Error("Could not find renamed property on target object.")}function Bh(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Qt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Qt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function AS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var e2=$e({__forward_ref__:$e});function Zs(n){return n.__forward_ref__=Zs,n.toString=function(){return Qt(this())},n}function an(n){return fT(n)?n():n}function fT(n){return typeof n=="function"&&n.hasOwnProperty(e2)&&n.__forward_ref__===Zs}function pT(n){return n&&!!n.\u0275providers}var gT="https://g.co/ng/security#xss",N=class extends Error{constructor(e,t){super(vf(e,t)),this.code=e}};function vf(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var t2=$e({\u0275cmp:$e}),n2=$e({\u0275dir:$e}),i2=$e({\u0275pipe:$e}),r2=$e({\u0275mod:$e}),Xh=$e({\u0275fac:$e}),yc=$e({__NG_ELEMENT_ID__:$e}),MS=$e({__NG_ENV_ID__:$e});function _f(n){return typeof n=="string"?n:n==null?"":String(n)}function s2(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():_f(n)}function o2(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new N(-200,`Circular dependency in DI detected for ${n}${t}`)}function Jv(n,e){let t=e?` in ${e}`:"";throw new N(-201,!1)}function a2(n,e){n==null&&l2(e,n,null,"!=")}function l2(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(i==null?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Yt(n){return{providers:n.providers||[],imports:n.imports||[]}}function bf(n){return PS(n,yT)||PS(n,vT)}function mT(n){return bf(n)!==null}function PS(n,e){return n.hasOwnProperty(e)?n[e]:null}function c2(n){let e=n&&(n[yT]||n[vT]);return e||null}function RS(n){return n&&(n.hasOwnProperty(kS)||n.hasOwnProperty(u2))?n[kS]:null}var yT=$e({\u0275prov:$e}),kS=$e({\u0275inj:$e}),vT=$e({ngInjectableDef:$e}),u2=$e({ngInjectorDef:$e}),Ce=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ce||{}),av;function d2(){return av}function Vn(n){let e=av;return av=n,e}function _T(n,e,t){let i=bf(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Ce.Optional)return null;if(e!==void 0)return e;Jv(Qt(n),"Injector")}var Ls=globalThis;var G=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var h2={},bc=h2,lv="__NG_DI_FLAG__",Zh="ngTempTokenPath",f2="ngTokenPath",p2=/\n/gm,g2="\u0275",OS="__source",vc;function ma(n){let e=vc;return vc=n,e}function m2(n,e=Ce.Default){if(vc===void 0)throw new N(-203,!1);return vc===null?_T(n,void 0,e):vc.get(n,e&Ce.Optional?null:void 0,e)}function O(n,e=Ce.Default){return(d2()||m2)(an(n),e)}function W(n,e=Ce.Default){return O(n,wf(e))}function wf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function cv(n){let e=[];for(let t=0;t<n.length;t++){let i=an(n[t]);if(Array.isArray(i)){if(i.length===0)throw new N(900,!1);let r,s=Ce.Default;for(let o=0;o<i.length;o++){let a=i[o],l=y2(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(O(r,s))}else e.push(O(i))}return e}function bT(n,e){return n[lv]=e,n.prototype[lv]=e,n}function y2(n){return n[lv]}function v2(n,e,t,i){let r=n[Zh];throw e[OS]&&r.unshift(e[OS]),n.message=_2(`
`+n.message,r,t,i),n[f2]=r,n[Zh]=null,n}function _2(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==g2?n.slice(2):n;let r=Qt(e);if(Array.isArray(e))r=e.map(Qt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Qt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(p2,`
  `)}`}function Tc(n){return{toString:n}.toString()}var wT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(wT||{}),Ci=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ci||{}),wa={},jn=[];function ET(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function uv(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];b2(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function CT(n){return n===3||n===4||n===6}function b2(n){return n.charCodeAt(0)===64}function wc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?NS(n,t,r,null,e[++i]):NS(n,t,r,null,null))}}return n}function NS(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var DT="ng-template";function w2(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if(typeof s=="string"&&r){let o=n[i++];if(t&&s==="class"&&ET(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;i<n.length&&typeof(s=n[i++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(r=!1)}return!1}function IT(n){return n.type===4&&n.value!==DT}function E2(n,e,t){let i=n.type===4&&!t?DT:n.value;return e===i}function C2(n,e,t){let i=4,r=n.attrs||[],s=S2(r),o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!ii(i)&&!ii(l))return!1;if(o&&ii(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!E2(n,l,t)||l===""&&e.length===1){if(ii(i))return!1;o=!0}}else{let c=i&8?l:e[++a];if(i&8&&n.attrs!==null){if(!w2(n.attrs,c,t)){if(ii(i))return!1;o=!0}continue}let u=i&8?"class":l,d=D2(u,r,IT(n),t);if(d===-1){if(ii(i))return!1;o=!0;continue}if(c!==""){let h;d>s?h="":h=r[d+1].toLowerCase();let f=i&8?h:null;if(f&&ET(f,c,0)!==-1||i&2&&c!==h){if(ii(i))return!1;o=!0}}}}return ii(i)||o}function ii(n){return(n&1)===0}function D2(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return T2(e,n)}function I2(n,e,t=!1){for(let i=0;i<e.length;i++)if(C2(n,e[i],t))return!0;return!1}function S2(n){for(let e=0;e<n.length;e++){let t=n[e];if(CT(t))return e}return n.length}function T2(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function FS(n,e){return n?":not("+e.trim()+")":e}function x2(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!ii(o)&&(e+=FS(s,r),r=""),i=o,s=s||!ii(i);t++}return r!==""&&(e+=FS(s,r)),e}function A2(n){return n.map(x2).join(",")}function M2(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!ii(r))break;r=s}i++}return{attrs:e,classes:t}}function he(n){return Tc(()=>{let e=MT(n),t=Me(z({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===wT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ci.Emulated,styles:n.styles||jn,_:null,schemas:n.schemas||null,tView:null,id:""});PT(t);let i=n.dependencies;return t.directiveDefs=VS(i,!1),t.pipeDefs=VS(i,!0),t.id=k2(t),t})}function P2(n){return js(n)||ST(n)}function R2(n){return n!==null}function Xt(n){return Tc(()=>({type:n.type,bootstrap:n.bootstrap||jn,declarations:n.declarations||jn,imports:n.imports||jn,exports:n.exports||jn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function LS(n,e){if(n==null)return wa;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function Rt(n){return Tc(()=>{let e=MT(n);return PT(e),e})}function e_(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function js(n){return n[t2]||null}function ST(n){return n[n2]||null}function TT(n){return n[i2]||null}function xT(n){let e=js(n)||ST(n)||TT(n);return e!==null?e.standalone:!1}function AT(n,e){let t=n[r2]||null;if(!t&&e===!0)throw new Error(`Type ${Qt(n)} does not have '\u0275mod' property.`);return t}function MT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||wa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||jn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:LS(n.inputs,e),outputs:LS(n.outputs),debugInfo:null}}function PT(n){n.features?.forEach(e=>e(n))}function VS(n,e){if(!n)return null;let t=e?TT:P2;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(R2)}function k2(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var nr=0,_e=1,re=2,_t=3,ri=4,ai=5,dv=6,Ec=7,Bn=8,Ea=9,Ca=10,xt=11,Cc=12,jS=13,xa=14,Di=15,xc=16,ya=17,Ei=18,Ef=19,RT=20,_c=21,Wy=22,Bs=23,si=25,kT=1;var Us=7,Jh=8,Da=9,Tn=10,Ia=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n[n.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",n}(Ia||{});function Mr(n){return Array.isArray(n)&&typeof n[kT]=="object"}function oi(n){return Array.isArray(n)&&n[kT]===!0}function OT(n){return(n.flags&4)!==0}function Cf(n){return n.componentOffset>-1}function t_(n){return(n.flags&1)===1}function Pr(n){return!!n.template}function O2(n){return(n[re]&512)!==0}function $s(n,e){let t=n.hasOwnProperty(Xh);return t?n[Xh]:null}var hv=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function kr(){return NT}function NT(n){return n.type.prototype.ngOnChanges&&(n.setInput=F2),N2}kr.ngInherit=!0;function N2(){let n=LT(this),e=n?.current;if(e){let t=n.previous;if(t===wa)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function F2(n,e,t,i){let r=this.declaredInputs[t],s=LT(n)||L2(n,{previous:wa,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new hv(l&&l.currentValue,e,a===wa),n[i]=e}var FT="__ngSimpleChanges__";function LT(n){return n[FT]||null}function L2(n,e){return n[FT]=e}var BS=null;var bi=function(n,e,t){BS?.(n,e,t)},V2="svg",j2="math";function Ii(n){for(;Array.isArray(n);)n=n[nr];return n}function VT(n,e){return Ii(e[n])}function Un(n,e){return Ii(e[n.index])}function jT(n,e){return n.data[e]}function BT(n,e){return n[e]}function Or(n,e){let t=e[n];return Mr(t)?t:t[nr]}function B2(n){return(n[re]&4)===4}function n_(n){return(n[re]&128)===128}function U2(n){return oi(n[_t])}function ef(n,e){return e==null?null:n[e]}function UT(n){n[ya]=0}function $2(n){n[re]&1024||(n[re]|=1024,n_(n)&&Df(n))}function z2(n,e){for(;n>0;)e=e[xa],n--;return e}function $T(n){n[re]&9216&&Df(n)}function Df(n){let e=n[_t];for(;e!==null&&!(oi(e)&&e[re]&Ia.HasChildViewsToRefresh||Mr(e)&&e[re]&8192);){if(oi(e))e[re]|=Ia.HasChildViewsToRefresh;else if(e[re]|=8192,!n_(e))break;e=e[_t]}}function H2(n,e){if((n[re]&256)===256)throw new N(911,!1);n[_c]===null&&(n[_c]=[]),n[_c].push(e)}var Ee={lFrame:YT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function q2(){return Ee.lFrame.elementDepthCount}function W2(){Ee.lFrame.elementDepthCount++}function G2(){Ee.lFrame.elementDepthCount--}function zT(){return Ee.bindingsEnabled}function K2(){return Ee.skipHydrationRootTNode!==null}function Q2(n){return Ee.skipHydrationRootTNode===n}function Y2(){Ee.skipHydrationRootTNode=null}function je(){return Ee.lFrame.lView}function ln(){return Ee.lFrame.tView}function qe(n){return Ee.lFrame.contextLView=n,n[Bn]}function We(n){return Ee.lFrame.contextLView=null,n}function xn(){let n=HT();for(;n!==null&&n.type===64;)n=n.parent;return n}function HT(){return Ee.lFrame.currentTNode}function X2(){let n=Ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ac(n,e){let t=Ee.lFrame;t.currentTNode=n,t.isParent=e}function qT(){return Ee.lFrame.isParent}function Z2(){Ee.lFrame.isParent=!1}function J2(){return Ee.lFrame.contextLView}function WT(){let n=Ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function ej(n){return Ee.lFrame.bindingIndex=n}function i_(){return Ee.lFrame.bindingIndex++}function tj(n){let e=Ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function nj(){return Ee.lFrame.inI18n}function ij(n,e){let t=Ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,fv(e)}function rj(){return Ee.lFrame.currentDirectiveIndex}function fv(n){Ee.lFrame.currentDirectiveIndex=n}function sj(n){let e=Ee.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function GT(){return Ee.lFrame.currentQueryIndex}function r_(n){Ee.lFrame.currentQueryIndex=n}function oj(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[ai]:null}function KT(n,e,t){if(t&Ce.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&Ce.Host);)if(r=oj(s),r===null||(s=s[xa],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=Ee.lFrame=QT();return i.currentTNode=e,i.lView=n,!0}function s_(n){let e=QT(),t=n[_e];Ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function QT(){let n=Ee.lFrame,e=n===null?null:n.child;return e===null?YT(n):e}function YT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function XT(){let n=Ee.lFrame;return Ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var ZT=XT;function o_(){let n=XT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function aj(n){return(Ee.lFrame.contextLView=z2(n,Ee.lFrame.contextLView))[Bn]}function Aa(){return Ee.lFrame.selectedIndex}function zs(n){Ee.lFrame.selectedIndex=n}function a_(){let n=Ee.lFrame;return jT(n.tView,n.selectedIndex)}function lj(){return Ee.lFrame.currentNamespace}var JT=!0;function l_(){return JT}function c_(n){JT=n}function cj(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=NT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function u_(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function qh(n,e,t){ex(n,e,3,t)}function Wh(n,e,t,i){(n[re]&3)===t&&ex(n,e,t,i)}function Gy(n,e){let t=n[re];(t&3)===e&&(t&=16383,t+=1,n[re]=t)}function ex(n,e,t,i){let r=i!==void 0?n[ya]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[ya]+=65536),(a<s||s==-1)&&(uj(n,t,e,l),n[ya]=(n[ya]&4294901760)+l+2),l++}function US(n,e){bi(4,n,e);let t=Sn(null);try{e.call(n)}finally{Sn(t),bi(5,n,e)}}function uj(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[re]>>14<n[ya]>>16&&(n[re]&3)===e&&(n[re]+=16384,US(a,s)):US(a,s)}var ba=-1,Hs=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function dj(n){return n instanceof Hs}function hj(n){return(n.flags&8)!==0}function fj(n){return(n.flags&16)!==0}function tx(n){return n!==ba}function tf(n){let e=n&32767;return n&32767}function pj(n){return n>>16}function nf(n,e){let t=pj(n),i=e;for(;t>0;)i=i[xa],t--;return i}var pv=!0;function rf(n){let e=pv;return pv=n,e}var gj=256,nx=gj-1,ix=5,mj=0,wi={};function yj(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(yc)&&(i=t[yc]),i==null&&(i=t[yc]=mj++);let r=i&nx,s=1<<r;e.data[n+(r>>ix)]|=s}function sf(n,e){let t=rx(n,e);if(t!==-1)return t;let i=e[_e];i.firstCreatePass&&(n.injectorIndex=e.length,Ky(i.data,n),Ky(e,null),Ky(i.blueprint,null));let r=d_(n,e),s=n.injectorIndex;if(tx(r)){let o=tf(r),a=nf(r,e),l=a[_e].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Ky(n,e){n.push(0,0,0,0,0,0,0,0,e)}function rx(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function d_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=cx(r),i===null)return ba;if(t++,r=r[xa],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return ba}function gv(n,e,t){yj(n,e,t)}function vj(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let s=t[r];if(CT(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(s===e)return t[r+1];r=r+2}}}return null}function sx(n,e,t){if(t&Ce.Optional||n!==void 0)return n;Jv(e,"NodeInjector")}function ox(n,e,t,i){if(t&Ce.Optional&&i===void 0&&(i=null),!(t&(Ce.Self|Ce.Host))){let r=n[Ea],s=Vn(void 0);try{return r?r.get(e,i,t&Ce.Optional):_T(e,i,t&Ce.Optional)}finally{Vn(s)}}return sx(i,e,t)}function ax(n,e,t,i=Ce.Default,r){if(n!==null){if(e[re]&2048&&!(i&Ce.Self)){let o=Ej(n,e,t,i,wi);if(o!==wi)return o}let s=lx(n,e,t,i,wi);if(s!==wi)return s}return ox(e,t,i,r)}function lx(n,e,t,i,r){let s=bj(t);if(typeof s=="function"){if(!KT(e,n,i))return i&Ce.Host?sx(r,t,i):ox(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&Ce.Optional))Jv(t);else return o}finally{ZT()}}else if(typeof s=="number"){let o=null,a=rx(n,e),l=ba,c=i&Ce.Host?e[Di][ai]:null;for((a===-1||i&Ce.SkipSelf)&&(l=a===-1?d_(n,e):e[a+8],l===ba||!zS(i,!1)?a=-1:(o=e[_e],a=tf(l),e=nf(l,e)));a!==-1;){let u=e[_e];if($S(s,a,u.data)){let d=_j(a,e,t,o,i,c);if(d!==wi)return d}l=e[a+8],l!==ba&&zS(i,e[_e].data[a+8]===c)&&$S(s,a,e)?(o=u,a=tf(l),e=nf(l,e)):a=-1}}return r}function _j(n,e,t,i,r,s){let o=e[_e],a=o.data[n+8],l=i==null?Cf(a)&&pv:i!=o&&(a.type&3)!==0,c=r&Ce.Host&&s===a,u=Gh(a,o,t,l,c);return u!==null?qs(e,o,u,a):wi}function Gh(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,l=n.directiveStart,c=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let f=d;f<h;f++){let p=o[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(r){let f=o[l];if(f&&Pr(f)&&f.type===t)return l}return null}function qs(n,e,t,i){let r=n[t],s=e.data;if(dj(r)){let o=r;o.resolving&&o2(s2(s[t]));let a=rf(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?Vn(o.injectImpl):null,u=KT(n,i,Ce.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&cj(t,s[t],e)}finally{c!==null&&Vn(c),rf(a),o.resolving=!1,ZT()}}return r}function bj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(yc)?n[yc]:void 0;return typeof e=="number"?e>=0?e&nx:wj:e}function $S(n,e,t){let i=1<<n;return!!(t[e+(n>>ix)]&i)}function zS(n,e){return!(n&Ce.Self)&&!(n&Ce.Host&&e)}var Vs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return ax(this._tNode,this._lView,e,wf(i),t)}};function wj(){return new Vs(xn(),je())}function Ma(n){return Tc(()=>{let e=n.prototype.constructor,t=e[Xh]||mv(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[Xh]||mv(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function mv(n){return fT(n)?()=>{let e=mv(an(n));return e&&e()}:$s(n)}function Ej(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[re]&2048&&!(o[re]&512);){let a=lx(s,o,t,i|Ce.Self,wi);if(a!==wi)return a;let l=s.parent;if(!l){let c=o[RT];if(c){let u=c.get(t,wi,i);if(u!==wi)return u}l=cx(o),o=o[xa]}s=l}return r}function cx(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[ai]:null}function h_(n){return vj(xn(),n)}var Uh="__parameters__";function Cj(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function ux(n,e,t){return Tc(()=>{let i=Cj(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Uh)?l[Uh]:Object.defineProperty(l,Uh,{value:[]})[Uh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Dj(n){return typeof n=="function"}function Ij(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function Sj(n){return n.flat(Number.POSITIVE_INFINITY)}function f_(n,e){n.forEach(t=>Array.isArray(t)?f_(t,e):e(t))}function dx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function of(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Tj(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function xj(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function Aj(n,e,t){let i=Mc(n,e);return i>=0?n[i|1]=t:(i=~i,xj(n,i,e,t)),i}function Qy(n,e){let t=Mc(n,e);if(t>=0)return n[t|1]}function Mc(n,e){return Mj(n,e,1)}function Mj(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var Pa=bT(ux("Optional"),8);var p_=bT(ux("SkipSelf"),4);var Pc=new G("ENVIRONMENT_INITIALIZER"),hx=new G("INJECTOR",-1),fx=new G("INJECTOR_DEF_TYPES"),af=class{get(e,t=bc){if(t===bc){let i=new Error(`NullInjectorError: No provider for ${Qt(e)}!`);throw i.name="NullInjectorError",i}return t}};function Ra(n){return{\u0275providers:n}}function g_(...n){return{\u0275providers:px(!0,n),\u0275fromNgModule:!0}}function px(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return f_(e,o=>{let a=o;yv(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&gx(r,s),t}function gx(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];m_(r,s=>{e(s,i)})}}function yv(n,e,t,i){if(n=an(n),!n)return!1;let r=null,s=RS(n),o=!s&&js(n);if(!s&&!o){let l=n.ngModule;if(s=RS(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)yv(c,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{f_(s.imports,u=>{yv(u,e,t,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&gx(c,e)}if(!a){let c=$s(r)||(()=>new r);e({provide:r,useFactory:c,deps:jn},r),e({provide:fx,useValue:r,multi:!0},r),e({provide:Pc,useValue:()=>O(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=n;m_(l,u=>{e(u,c)})}}else return!1;return r!==n&&n.providers!==void 0}function m_(n,e){for(let t of n)pT(t)&&(t=t.\u0275providers),Array.isArray(t)?m_(t,e):e(t)}var Pj=$e({provide:String,useValue:$e});function mx(n){return n!==null&&typeof n=="object"&&Pj in n}function Rj(n){return!!(n&&n.useExisting)}function kj(n){return!!(n&&n.useFactory)}function Sa(n){return typeof n=="function"}function Oj(n){return!!n.useClass}var If=new G("Set Injector scope."),Kh={},Nj={},Yy;function y_(){return Yy===void 0&&(Yy=new af),Yy}var mn=class{},lf=class extends mn{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_v(e,o=>this.processProvider(o)),this.records.set(hx,va(void 0,this)),r.has("environment")&&this.records.set(mn,va(void 0,this));let s=this.records.get(If);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(fx,jn,Ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=ma(this),i=Vn(void 0),r;try{return e()}finally{ma(t),Vn(i)}}get(e,t=bc,i=Ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(MS))return e[MS](this);i=wf(i);let r,s=ma(this),o=Vn(void 0);try{if(!(i&Ce.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=Bj(e)&&bf(e);c&&this.injectableDefInScope(c)?l=va(vv(e),Kh):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&Ce.Self?y_():this.parent;return t=i&Ce.Optional&&t===bc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Zh]=a[Zh]||[]).unshift(Qt(e)),s)throw a;return v2(a,e,"R3InjectorError",this.source)}else throw a}finally{Vn(o),ma(s)}}resolveInjectorInitializers(){let e=ma(this),t=Vn(void 0),i;try{let r=this.get(Pc,jn,Ce.Self);for(let s of r)s()}finally{ma(e),Vn(t)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Qt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new N(205,!1)}processProvider(e){e=an(e);let t=Sa(e)?e:an(e&&e.provide),i=Lj(e);if(!Sa(e)&&e.multi===!0){let r=this.records.get(t);r||(r=va(void 0,Kh,!0),r.factory=()=>cv(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}else{let r=this.records.get(t)}this.records.set(t,i)}hydrate(e,t){return t.value===Kh&&(t.value=Nj,t.value=t.factory()),typeof t.value=="object"&&t.value&&jj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;let t=an(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function vv(n){let e=bf(n),t=e!==null?e.factory:$s(n);if(t!==null)return t;if(n instanceof G)throw new N(204,!1);if(n instanceof Function)return Fj(n);throw new N(204,!1)}function Fj(n){let e=n.length;if(e>0){let i=Tj(e,"?");throw new N(204,!1)}let t=c2(n);return t!==null?()=>t.factory(n):()=>new n}function Lj(n){if(mx(n))return va(void 0,n.useValue);{let e=yx(n);return va(e,Kh)}}function yx(n,e,t){let i;if(Sa(n)){let r=an(n);return $s(r)||vv(r)}else if(mx(n))i=()=>an(n.useValue);else if(kj(n))i=()=>n.useFactory(...cv(n.deps||[]));else if(Rj(n))i=()=>O(an(n.useExisting));else{let r=an(n&&(n.useClass||n.provide));if(Vj(n))i=()=>new r(...cv(n.deps));else return $s(r)||vv(r)}return i}function va(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vj(n){return!!n.deps}function jj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Bj(n){return typeof n=="function"||typeof n=="object"&&n instanceof G}function _v(n,e){for(let t of n)Array.isArray(t)?_v(t,e):t&&pT(t)?_v(t.\u0275providers,e):e(t)}function HS(n,e=null,t=null,i){let r=vx(n,e,t,i);return r.resolveInjectorInitializers(),r}function vx(n,e=null,t=null,i,r=new Set){let s=[t||jn,g_(n)];return i=i||(typeof n=="object"?void 0:Qt(n)),new lf(s,e||y_(),i||null,r)}var Js=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return HS({name:""},r,i,"");{let s=i.name??"";return HS({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=bc,e.NULL=new af,e.\u0275prov=K({token:e,providedIn:"any",factory:()=>O(hx)}),e.__NG_ELEMENT_ID__=-1;let n=e;return n})();var bv;function _x(n){bv=n}function Uj(){if(bv!==void 0)return bv;if(typeof document<"u")return document;throw new N(210,!1)}var v_=new G("AppId",{providedIn:"root",factory:()=>$j}),$j="ng",__=new G("Platform Initializer"),yn=new G("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var b_=new G("AnimationModuleType"),w_=new G("CSP nonce",{providedIn:"root",factory:()=>Uj().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function bx(n){return n instanceof Function?n():n}function wx(n){return(n.flags&128)===128}var Ji=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ji||{});var Ex=new Map,zj=0;function Hj(){return zj++}function qj(n){Ex.set(n[Ef],n)}function Wj(n){Ex.delete(n[Ef])}var qS="__ngContext__";function Ws(n,e){Mr(e)?(n[qS]=e[Ef],qj(e)):n[qS]=e}var Gj;function E_(n,e){return Gj(n,e)}function C_(n){let e=n[_t];return oi(e)?e[_t]:e}function Cx(n){return Ix(n[Cc])}function Dx(n){return Ix(n[ri])}function Ix(n){for(;n!==null&&!oi(n);)n=n[ri];return n}function _a(n,e,t,i,r){if(i!=null){let s,o=!1;oi(i)?s=i:Mr(i)&&(o=!0,i=i[nr]);let a=Ii(i);n===0&&t!==null?r==null?Ax(e,t,a):cf(e,t,a,r||null,!0):n===1&&t!==null?cf(e,t,a,r||null,!0):n===2?dB(e,a,o):n===3&&e.destroyNode(a),s!=null&&fB(e,n,s,t,r)}}function Kj(n,e){return n.createText(e)}function Qj(n,e,t){n.setValue(e,t)}function Sx(n,e,t){return n.createElement(e,t)}function Yj(n,e){let t=e[xt];Rc(n,e,t,2,null,null),e[nr]=null,e[ai]=null}function Xj(n,e,t,i,r,s){i[nr]=r,i[ai]=e,Rc(n,i,t,1,r,s)}function Zj(n,e){Rc(n,e,e[xt],2,null,null)}function Jj(n){let e=n[Cc];if(!e)return Xy(n[_e],n);for(;e;){let t=null;if(Mr(e))t=e[Cc];else{let i=e[Tn];i&&(t=i)}if(!t){for(;e&&!e[ri]&&e!==n;)Mr(e)&&Xy(e[_e],e),e=e[_t];e===null&&(e=n),Mr(e)&&Xy(e[_e],e),t=e&&e[ri]}e=t}}function eB(n,e,t,i){let r=Tn+i,s=t.length;i>0&&(t[r-1][ri]=e),i<s-Tn?(e[ri]=t[r],dx(t,Tn+i,e)):(t.push(e),e[ri]=null),e[_t]=t;let o=e[xc];o!==null&&t!==o&&tB(o,e);let a=e[Ei];a!==null&&a.insertView(n),$T(e),e[re]|=128}function tB(n,e){let t=n[Da],r=e[_t][_t][Di];e[Di]!==r&&(n[re]|=Ia.HasTransplantedViews),t===null?n[Da]=[e]:t.push(e)}function Tx(n,e){let t=n[Da],i=t.indexOf(e),r=e[_t];t.splice(i,1)}function wv(n,e){if(n.length<=Tn)return;let t=Tn+e,i=n[t];if(i){let r=i[xc];r!==null&&r!==n&&Tx(r,i),e>0&&(n[t-1][ri]=i[ri]);let s=of(n,Tn+e);Yj(i[_e],i);let o=s[Ei];o!==null&&o.detachView(s[_e]),i[_t]=null,i[ri]=null,i[re]&=-129}return i}function xx(n,e){if(!(e[re]&256)){let t=e[xt];e[Bs]&&aS(e[Bs]),t.destroyNode&&Rc(n,e,t,3,null,null),Jj(e)}}function Xy(n,e){if(!(e[re]&256)){e[re]&=-129,e[re]|=256,iB(n,e),nB(n,e),e[_e].type===1&&e[xt].destroy();let t=e[xc];if(t!==null&&oi(e[_t])){t!==e[_t]&&Tx(t,e);let i=e[Ei];i!==null&&i.detachView(n)}Wj(e)}}function nB(n,e){let t=n.cleanup,i=e[Ec];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[t[s+1]];t[s].call(o)}i!==null&&(e[Ec]=null);let r=e[_c];if(r!==null){e[_c]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function iB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Hs)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];bi(4,a,l);try{l.call(a)}finally{bi(5,a,l)}}else{bi(4,r,s);try{s.call(r)}finally{bi(5,r,s)}}}}}function rB(n,e,t){return sB(n,e.parent,t)}function sB(n,e,t){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return t[nr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===Ci.None||s===Ci.Emulated)return null}return Un(i,t)}}function cf(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Ax(n,e,t){n.appendChild(e,t)}function WS(n,e,t,i,r){i!==null?cf(n,e,t,i,r):Ax(n,e,t)}function oB(n,e,t,i){n.removeChild(e,t,i)}function D_(n,e){return n.parentNode(e)}function aB(n,e){return n.nextSibling(e)}function lB(n,e,t){return uB(n,e,t)}function cB(n,e,t){return n.type&40?Un(n,t):null}var uB=cB,GS;function I_(n,e,t,i){let r=rB(n,i,e),s=e[xt],o=i.parent||e[ai],a=lB(o,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)WS(s,r,t[l],a,!1);else WS(s,r,t,a,!1);GS!==void 0&&GS(s,i,e,t,r)}function Qh(n,e){if(e!==null){let t=e.type;if(t&3)return Un(e,n);if(t&4)return Ev(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Qh(n,i);{let r=n[e.index];return oi(r)?Ev(-1,r):Ii(r)}}else{if(t&32)return E_(e,n)()||Ii(n[e.index]);{let i=Mx(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=C_(n[Di]);return Qh(r,i)}else return Qh(n,e.next)}}}return null}function Mx(n,e){if(e!==null){let i=n[Di][ai],r=e.projection;return i.projection[r]}return null}function Ev(n,e){let t=Tn+n+1;if(t<e.length){let i=e[t],r=i[_e].firstChild;if(r!==null)return Qh(i,r)}return e[Us]}function dB(n,e,t){let i=D_(n,e);i&&oB(n,i,e,t)}function S_(n,e,t,i,r,s,o){for(;t!=null;){let a=i[t.index],l=t.type;if(o&&e===0&&(a&&Ws(Ii(a),i),t.flags|=2),(t.flags&32)!==32)if(l&8)S_(n,e,t.child,i,r,s,!1),_a(e,n,r,a,s);else if(l&32){let c=E_(t,i),u;for(;u=c();)_a(e,n,r,u,s);_a(e,n,r,a,s)}else l&16?hB(n,e,i,t,r,s):_a(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Rc(n,e,t,i,r,s){S_(t,i,n.firstChild,e,r,s,!1)}function hB(n,e,t,i,r,s){let o=t[Di],l=o[ai].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];_a(e,n,r,u,s)}else{let c=l,u=o[_t];wx(i)&&(c.flags|=128),S_(n,e,c,u,r,s,!0)}}function fB(n,e,t,i,r){let s=t[Us],o=Ii(t);s!==o&&_a(e,n,i,s,r);for(let a=Tn;a<t.length;a++){let l=t[a];Rc(l[_e],l,n,e,i,s)}}function pB(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:Ji.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ji.Important),n.setStyle(t,i,r,s))}}function gB(n,e,t){n.setAttribute(e,"style",t)}function Px(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Rx(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&uv(n,e,i),r!==null&&Px(n,e,r),s!==null&&gB(n,e,s)}var $h;function mB(){if($h===void 0&&($h=null,Ls.trustedTypes))try{$h=Ls.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return $h}function KS(n){return mB()?.createScriptURL(n)||n}var uf=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gT})`}};function kc(n){return n instanceof uf?n.changingThisBreaksApplicationSecurity:n}function T_(n,e){let t=yB(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gT})`)}return t===e}function yB(n){return n instanceof uf&&n.getTypeName()||null}var vB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kx(n){return n=String(n),n.match(vB)?n:"unsafe:"+n}var Sf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Sf||{});function Nr(n){let e=Nx();return e?e.sanitize(Sf.URL,n)||"":T_(n,"URL")?kc(n):kx(_f(n))}function _B(n){let e=Nx();if(e)return KS(e.sanitize(Sf.RESOURCE_URL,n)||"");if(T_(n,"ResourceURL"))return KS(kc(n));throw new N(904,!1)}function bB(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?_B:Nr}function Ox(n,e,t){return bB(e,t)(n)}function Nx(){let n=je();return n&&n[Ca].sanitizer}var wB="h",EB="b";var CB=(n,e,t)=>null;function x_(n,e,t=!1){return CB(n,e,t)}var Cv=class{},df=class{};function DB(n){let e=Error(`No component factory found for ${Qt(n)}.`);return e[IB]=n,e}var IB="ngComponent";var Dv=class{resolveComponentFactory(e){throw DB(e)}},Tf=(()=>{let e=class e{};e.NULL=new Dv;let n=e;return n})();function SB(){return ka(xn(),je())}function ka(n,e){return new $n(Un(n,e))}var $n=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=SB;let n=e;return n})();function TB(n){return n instanceof $n?n.nativeElement:n}var Gs=class{},Fr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>xB();let n=e;return n})();function xB(){let n=je(),e=xn(),t=Or(e.index,n);return(Mr(t)?t:n)[xt]}var AB=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>null});let n=e;return n})(),er=class{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}},A_=new er("17.0.4"),Zy={};function Fx(n){return M_(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function MB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function M_(n){return n!==null&&(typeof n=="function"||typeof n=="object")}var Iv=class{constructor(){}supports(e){return Fx(e)}create(e){return new Sv(e)}},PB=(n,e)=>e,Sv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||PB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<QS(i,r,s)?t:i,a=QS(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<c&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Fx(e))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,MB(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Tv(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new hf),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Tv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},xv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},hf=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new xv,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function QS(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}var Av=class{constructor(){}supports(e){return e instanceof Map||M_(e)}create(){return new Mv}},Mv=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||M_(e)))throw new N(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,t);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new Pv(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}},Pv=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function YS(){return new xf([new Iv])}var xf=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||YS()),deps:[[e,new p_,new Pa]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r!=null)return r;throw new N(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:YS});let n=e;return n})();function XS(){return new P_([new Av])}var P_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||XS()),deps:[[e,new p_,new Pa]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r)return r;throw new N(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:XS});let n=e;return n})();function ff(n,e,t,i,r=!1){for(;t!==null;){let s=e[t.index];s!==null&&i.push(Ii(s)),oi(s)&&RB(s,i);let o=t.type;if(o&8)ff(n,e,t.child,i);else if(o&32){let a=E_(t,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=Mx(e,t);if(Array.isArray(a))i.push(...a);else{let l=C_(e[Di]);ff(l[_e],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function RB(n,e){for(let t=Tn;t<n.length;t++){let i=n[t],r=i[_e].firstChild;r!==null&&ff(i[_e],i,r,e)}n[Us]!==n[nr]&&e.push(n[Us])}var Lx=[];function kB(n){return n[Bs]??OB(n)}function OB(n){let e=Lx.pop()??Object.create(FB);return e.lView=n,e}function NB(n){n.lView[Bs]!==n&&(n.lView=null,Lx.push(n))}var FB=Me(z({},rS),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Df(n.lView)},consumerOnSignalRead(){this.lView[Bs]=this}}),LB="ngOriginalError";function Jy(n){return n[LB]}var tr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Jy(e);for(;t&&Jy(t);)t=Jy(t);return t||null}};var Vx=!1,VB=new G("",{providedIn:"root",factory:()=>Vx});var Lr={};function k(n){jx(ln(),je(),Aa()+n,!1)}function jx(n,e,t,i){if(!i)if((e[re]&3)===3){let s=n.preOrderCheckHooks;s!==null&&qh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Wh(e,s,0,t)}zs(t)}function q(n,e=Ce.Default){let t=je();if(t===null)return O(n,e);let i=xn();return ax(i,t,an(n),e)}function jB(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)zs(~r);else{let s=r,o=t[++i],a=t[++i];ij(o,s);let l=e[s];a(2,l)}}}finally{zs(-1)}}function Af(n,e,t,i,r,s,o,a,l,c,u){let d=e.blueprint.slice();return d[nr]=r,d[re]=i|4|128|8,(c!==null||n&&n[re]&2048)&&(d[re]|=2048),UT(d),d[_t]=d[xa]=n,d[Bn]=t,d[Ca]=o||n&&n[Ca],d[xt]=a||n&&n[xt],d[Ea]=l||n&&n[Ea]||null,d[ai]=s,d[Ef]=Hj(),d[dv]=u,d[RT]=c,d[Di]=e.type==2?n[Di]:d,d}function Mf(n,e,t,i,r){let s=n.data[e];if(s===null)s=BB(n,e,t,i,r),nj()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=X2();s.injectorIndex=o===null?-1:o.injectorIndex}return Ac(s,!0),s}function BB(n,e,t,i,r){let s=HT(),o=qT(),a=o?s:s&&s.parent,l=n.data[e]=WB(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function Bx(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Ux(n,e,t,i,r){let s=Aa(),o=i&2;try{zs(-1),o&&e.length>si&&jx(n,e,si,!1),bi(o?2:0,r),t(i,r)}finally{zs(s),bi(o?3:1,r)}}function $x(n,e,t){if(OT(e)){let i=Sn(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{Sn(i)}}}function zx(n,e,t){zT()&&(ZB(n,e,t,Un(t,e)),(t.flags&64)===64&&Qx(n,e,t))}function Hx(n,e,t=Un){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function qx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=R_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function R_(n,e,t,i,r,s,o,a,l,c,u){let d=si+i,h=d+r,f=UB(d,h),p=typeof c=="function"?c():c;return f[_e]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function UB(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Lr);return t}function $B(n,e,t,i){let s=i.get(VB,Vx)||t===Ci.ShadowDom,o=n.selectRootElement(e,s);return zB(o),o}function zB(n){HB(n)}var HB=n=>null;function qB(n,e,t,i){let r=Jx(e);r.push(t),n.firstCreatePass&&eA(n).push(i,r.length-1)}function WB(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return K2()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ZS(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=t===null?{}:t;let s=n[r];i===null?JS(t,e,r,s):i.hasOwnProperty(r)&&JS(t,e,i[r],s)}return t}function JS(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function GB(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let d=s[u],h=t?t.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=ZS(d.inputs,u,l,f),c=ZS(d.outputs,u,c,p);let g=l!==null&&o!==null&&!IT(e)?cU(l,u,o):null;a.push(g)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function KB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Wx(n,e,t,i,r,s,o,a){let l=Un(e,t),c=e.inputs,u;!a&&c!=null&&(u=c[i])?(k_(n,t,u,i,r),Cf(e)&&QB(t,e.index)):e.type&3?(i=KB(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(l,i,r)):e.type&12}function QB(n,e){let t=Or(e,n);t[re]&16||(t[re]|=64)}function Gx(n,e,t,i){if(zT()){let r=i===null?null:{"":-1},s=eU(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Kx(n,e,t,o,r,a),r&&tU(t,i,r)}t.mergedAttrs=wc(t.mergedAttrs,t.attrs)}function Kx(n,e,t,i,r,s){for(let c=0;c<i.length;c++)gv(sf(t,e),n,i[c].type);iU(t,n.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=Bx(n,e,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];t.mergedAttrs=wc(t.mergedAttrs,u.hostAttrs),rU(n,t,e,l,u),nU(l,u,r),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}GB(n,t,s)}function YB(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;XB(o)!=a&&o.push(a),o.push(t,i,s)}}function XB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ZB(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;Cf(t)&&sU(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||sf(t,e),Ws(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let l=n.data[a],c=qs(e,n,a,t);if(Ws(c,e),o!==null&&lU(e,a-r,c,l,t,o),Pr(l)){let u=Or(t.index,e);u[Bn]=qs(e,n,a,t)}}}function Qx(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=rj();try{zs(s);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];fv(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&JB(l,c)}}finally{zs(-1),fv(o)}}function JB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function eU(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(I2(e,o.selectors,!1))if(i||(i=[]),Pr(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let l=a.length;Rv(n,e,l)}else i.unshift(o),Rv(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function Rv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function tU(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new N(-301,!1);i.push(e[r],s)}}}function nU(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Pr(e)&&(t[""]=n)}}function iU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function rU(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=$s(r.type,!0)),o=new Hs(s,Pr(r),q);n.blueprint[i]=o,t[i]=o,YB(n,e,i,Bx(n,t,r.hostVars,Lr),r)}function sU(n,e,t){let i=Un(e,n),r=qx(t),s=n[Ca].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Pf(n,Af(n,r,null,o,i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=a}function oU(n,e,t,i,r,s){let o=Un(n,e);aU(e[xt],o,s,n.value,t,i,r)}function aU(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?_f(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function lU(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++];Yx(i,t,l,c,u)}}function Yx(n,e,t,i,r){let s=Sn(null);try{let o=n.inputTransforms;o!==null&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),n.setInput!==null?n.setInput(e,r,t,i):e[i]=r}finally{Sn(s)}}function cU(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}return i}function Xx(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Zx(n,e){let t=n.contentQueries;if(t!==null){let i=Sn(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];r_(s),a.contentQueries(2,e[o],o)}}}finally{Sn(i)}}}function Pf(n,e){return n[Cc]?n[jS][ri]=e:n[Cc]=e,n[jS]=e,e}function kv(n,e,t){r_(0);let i=Sn(null);try{e(n,t)}finally{Sn(i)}}function Jx(n){return n[Ec]||(n[Ec]=[])}function eA(n){return n.cleanup||(n.cleanup=[])}function tA(n,e){let t=n[Ea],i=t?t.get(tr,null):null;i&&i.handleError(e)}function k_(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],l=e[o],c=n.data[o];Yx(c,l,i,a,r)}}function uU(n,e,t){let i=VT(e,n);Qj(n[xt],i,t)}var dU=100;function hU(n,e=!0){let t=n[Ca],i=t.rendererFactory,r=t.afterRenderEventManager,s=!1;s||(i.begin?.(),r?.begin());try{let o=n[_e],a=n[Bn];nA(o,n,o.template,a),fU(n)}catch(o){throw e&&tA(n,o),o}finally{s||(i.end?.(),t.inlineEffectRunner?.flush(),r?.end())}}function fU(n){let e=0;for(;n[re]&9216||n[Bs]?.dirty;){if(e===dU)throw new N(103,!1);e++,sA(n,1)}}function nA(n,e,t,i){let r=e[re];if((r&256)===256)return;let s=!1;!s&&e[Ca].inlineEffectRunner?.flush(),s_(e);let o=null,a=null;!s&&pU(n)&&(a=kB(e),o=sS(a));try{UT(e),ej(n.bindingStartIndex),t!==null&&Ux(n,e,t,2,i);let l=(r&3)===3;if(!s)if(l){let d=n.preOrderCheckHooks;d!==null&&qh(e,d,null)}else{let d=n.preOrderHooks;d!==null&&Wh(e,d,0,null),Gy(e,0)}if(gU(e),iA(e,0),n.contentQueries!==null&&Zx(n,e),!s)if(l){let d=n.contentCheckHooks;d!==null&&qh(e,d)}else{let d=n.contentHooks;d!==null&&Wh(e,d,1),Gy(e,1)}jB(n,e);let c=n.components;c!==null&&oA(e,c,0);let u=n.viewQuery;if(u!==null&&kv(2,u,i),!s)if(l){let d=n.viewCheckHooks;d!==null&&qh(e,d)}else{let d=n.viewHooks;d!==null&&Wh(e,d,2),Gy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wy]){for(let d of e[Wy])d();e[Wy]=null}s||(e[re]&=-73)}catch(l){throw Df(e),l}finally{a!==null&&(oS(a,o),NB(a)),o_()}}function pU(n){return n.type!==2}function iA(n,e){for(let t=Cx(n);t!==null;t=Dx(t)){t[re]&=~Ia.HasChildViewsToRefresh;for(let i=Tn;i<t.length;i++){let r=t[i];rA(r,e)}}}function gU(n){for(let e=Cx(n);e!==null;e=Dx(e)){if(!(e[re]&Ia.HasTransplantedViews))continue;let t=e[Da];for(let i=0;i<t.length;i++){let r=t[i],s=r[_t];$2(r)}}}function mU(n,e,t){let i=Or(e,n);rA(i,t)}function rA(n,e){n_(n)&&sA(n,e)}function sA(n,e){let i=n[_e],r=n[re],s=n[Bs],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&Sy(s)),s&&(s.dirty=!1),n[re]&=-9217,o)nA(i,n,i.template,n[Bn]);else if(r&8192){iA(n,1);let a=i.components;a!==null&&oA(n,a,1)}}function oA(n,e,t){for(let i=0;i<e.length;i++)mU(n,e[i],t)}function O_(n){for(;n;){n[re]|=64;let e=C_(n);if(O2(n)&&!e)return n;n=e}return null}var Ks=class{get rootNodes(){let e=this._lView,t=e[_e];return ff(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bn]}set context(e){this._lView[Bn]=e}get destroyed(){return(this._lView[re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_t];if(oi(e)){let t=e[Jh],i=t?t.indexOf(this):-1;i>-1&&(wv(e,i),of(t,i))}this._attachedToViewContainer=!1}xx(this._lView[_e],this._lView)}onDestroy(e){H2(this._lView,e)}markForCheck(){O_(this._cdRefInjectingView||this._lView)}detach(){this._lView[re]&=-129}reattach(){$T(this._lView),this._lView[re]|=128}detectChanges(){hU(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new N(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Zj(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new N(902,!1);this._appRef=e}},Oa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=yU;let n=e;return n})();function yU(n){return vU(xn(),je(),(n&16)===16)}function vU(n,e,t){if(Cf(n)&&!t){let i=Or(n.index,e);return new Ks(i,i)}else if(n.type&47){let i=e[Di];return new Ks(i,e)}return null}var eT=new Set;function N_(n){eT.has(n)||(eT.add(n),performance?.mark?.("mark_use_counter",{detail:{feature:n}}))}var Ov=class extends vt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=ev(s),r&&(r=ev(r)),o&&(o=ev(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof yt&&e.add(a),a}};function ev(n){return e=>{setTimeout(n,void 0,e)}}var Vt=Ov;function tT(...n){}function _U(){let n=typeof Ls.requestAnimationFrame=="function",e=Ls[n?"requestAnimationFrame":"setTimeout"],t=Ls[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Ne=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vt(!1),this.onMicrotaskEmpty=new Vt(!1),this.onStable=new Vt(!1),this.onError=new Vt(!1),typeof Zone>"u")throw new N(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=_U().nativeRequestAnimationFrame,EU(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new N(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new N(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,bU,tT,tT);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},bU={};function F_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function wU(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ls,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Nv(n),n.isCheckStableRunning=!0,F_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Nv(n))}function EU(n){let e=()=>{wU(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(CU(a))return t.invokeTask(r,s,o,a);try{return nT(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),iT(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return nT(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),iT(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Nv(n),F_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Nv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function iT(n){n._nesting--,F_(n)}var aA=new G("",{providedIn:"root",factory:lA});function lA(){let n=W(Ne),e=!0,t=new le(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),i=new le(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});let o=n.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}});return pc(t,i.pipe(ga()))}function CU(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var DU=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let i of this.internalCallbacks)i();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function IU(n,e){let t=Or(e,n),i=t[_e];SU(i,t);let r=t[nr];r!==null&&t[dv]===null&&(t[dv]=x_(r,t[Ea])),L_(i,t,t[Bn])}function SU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function L_(n,e,t){s_(e);try{let i=n.viewQuery;i!==null&&kv(1,i,t);let r=n.template;r!==null&&Ux(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Zx(n,e),n.staticViewQueries&&kv(2,n.viewQuery,t);let s=n.components;s!==null&&TU(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[re]&=-5,o_()}}function TU(n,e){for(let t=0;t<e.length;t++)IU(n,e[t])}function Fv(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=AS(r,a);else if(s==2){let l=a,c=e[++o];i=AS(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var pf=class extends Tf{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=js(e);return new Dc(t,this.ngModule)}};function rT(n){let e=[];for(let t in n)if(n.hasOwnProperty(t)){let i=n[t];e.push({propName:i,templateName:t})}return e}function xU(n){let e=n.toLowerCase();return e==="svg"?V2:e==="math"?j2:null}var Lv=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=wf(i);let r=this.injector.get(e,Zy,i);return r!==Zy||t===Zy?r:this.parentInjector.get(e,t,i)}},Dc=class extends df{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=rT(e.inputs);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return rT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=A2(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){r=r||this.ngModule;let s=r instanceof mn?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new Lv(e,s):e,a=o.get(Gs,null);if(a===null)throw new N(407,!1);let l=o.get(AB,null),c=o.get(DU,null),u={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",f=i?$B(d,i,this.componentDef.encapsulation,o):Sx(d,h,xU(h)),p=4608,g=this.componentDef.onPush?576:528,m=this.componentDef.signals?p:g,y=null;f!==null&&(y=x_(f,o,!0));let b=R_(0,null,null,1,0,null,null,null,null,null,null),w=Af(null,b,null,m,null,null,u,d,o,null,y);s_(w);let C,D;try{let I=this.componentDef,A,M=null;I.findHostDirectiveDefs?(A=[],M=new Map,I.findHostDirectiveDefs(I,A,M),A.push(I)):A=[I];let $=AU(w,f),te=MU($,f,I,A,w,u,d);D=jT(b,si),f&&kU(d,I,f,i),t!==void 0&&OU(D,this.ngContentSelectors,t),C=RU(te,I,A,M,w,[NU]),L_(b,w,null)}finally{o_()}return new Vv(this.componentType,C,ka(D,w),w,D)}},Vv=class extends Cv{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ks(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;k_(s[_e],s,r,e,t),this.previousInputValues.set(e,t);let o=Or(this._tNode.index,s);O_(o)}}get injector(){return new Vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function AU(n,e){let t=n[_e],i=si;return n[i]=e,Mf(t,i,2,"#host",null)}function MU(n,e,t,i,r,s,o){let a=r[_e];PU(i,n,e,o);let l=null;e!==null&&(l=x_(e,r[Ea]));let c=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=Af(r,qx(t),null,u,r[n.index],n,s,c,null,null,l);return a.firstCreatePass&&Rv(a,n,i.length-1),Pf(r,d),r[n.index]=d}function PU(n,e,t,i){for(let r of n)e.mergedAttrs=wc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Fv(e,e.mergedAttrs,!0),t!==null&&Rx(i,t,e))}function RU(n,e,t,i,r,s){let o=xn(),a=r[_e],l=Un(o,r);Kx(a,r,o,t,null,i);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,h=qs(r,a,d,o);Ws(h,r)}Qx(a,r,o),l&&Ws(l,r);let c=qs(r,a,o.directiveStart+o.componentOffset,o);if(n[Bn]=r[Bn]=c,s!==null)for(let u of s)u(c,e);return $x(a,o,n),c}function kU(n,e,t,i){if(i)uv(n,t,["ng-version",A_.full]);else{let{attrs:r,classes:s}=M2(e.selectors[0]);r&&uv(n,t,r),s&&s.length>0&&Px(n,t,s.join(" "))}}function OU(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function NU(){let n=xn();u_(je()[_e],n)}function FU(n){return Object.getPrototypeOf(n.prototype).constructor}function ir(n){let e=FU(n.type),t=!0,i=[n];for(;e;){let r;if(Pr(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new N(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=zh(n.inputs),o.inputTransforms=zh(n.inputTransforms),o.declaredInputs=zh(n.declaredInputs),o.outputs=zh(n.outputs);let a=r.hostBindings;a&&BU(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&VU(n,l),c&&jU(n,c),Bh(n.inputs,r.inputs),Bh(n.declaredInputs,r.declaredInputs),Bh(n.outputs,r.outputs),r.inputTransforms!==null&&(o.inputTransforms===null&&(o.inputTransforms={}),Bh(o.inputTransforms,r.inputTransforms)),Pr(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ir&&(t=!1)}}e=Object.getPrototypeOf(e)}LU(i)}function LU(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=wc(r.hostAttrs,t=wc(t,r.hostAttrs))}}function zh(n){return n===wa?{}:n===jn?[]:n}function VU(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function jU(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function BU(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function V_(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function cA(n,e,t){return n[e]=t}function Qs(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function UU(n,e,t,i){let r=Qs(n,e,t);return Qs(n,e+1,i)||r}function Oc(n,e,t,i){let r=je(),s=i_();if(Qs(r,s,e)){let o=ln(),a=a_();oU(a,r,n,e,t,i)}return Oc}function uA(n,e,t,i){return Qs(n,i_(),t)?e+_f(t)+i:Lr}function Hh(n,e){return n<<17|e<<2}function Ys(n){return n>>17&32767}function $U(n){return(n&2)==2}function zU(n,e){return n&131071|e<<17}function jv(n){return n|2}function Ta(n){return(n&131068)>>2}function tv(n,e){return n&-131069|e<<2}function HU(n){return(n&1)===1}function Bv(n){return n|1}function qU(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Ys(o),l=Ta(o);n[i]=t;let c=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Mc(d,u)>0)&&(c=!0)}else u=t;if(r)if(l!==0){let h=Ys(n[a+1]);n[i+1]=Hh(h,a),h!==0&&(n[h+1]=tv(n[h+1],i)),n[a+1]=zU(n[a+1],i)}else n[i+1]=Hh(a,0),a!==0&&(n[a+1]=tv(n[a+1],i)),a=i;else n[i+1]=Hh(l,0),a===0?a=i:n[l+1]=tv(n[l+1],i),l=i;c&&(n[i+1]=jv(n[i+1])),sT(n,u,i,!0,s),sT(n,u,i,!1,s),WU(e,u,n,i,s),o=Hh(a,l),s?e.classBindings=o:e.styleBindings=o}function WU(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Mc(s,e)>=0&&(t[i+1]=Bv(t[i+1]))}function sT(n,e,t,i,r){let s=n[t+1],o=e===null,a=i?Ys(s):Ta(s),l=!1;for(;a!==0&&(l===!1||o);){let c=n[a],u=n[a+1];GU(c,e)&&(l=!0,n[a+1]=i?Bv(u):jv(u)),a=i?Ys(u):Ta(u)}l&&(n[t+1]=i?jv(s):Bv(s))}function GU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Mc(n,e)>=0:!1}function X(n,e,t){let i=je(),r=i_();if(Qs(i,r,e)){let s=ln(),o=a_();Wx(s,o,i,n,e,i[xt],t,!1)}return X}function oT(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";k_(n,t,s[o],o,i)}function Rf(n,e){return KU(n,e,null,!0),Rf}function KU(n,e,t,i){let r=je(),s=ln(),o=tj(2);if(s.firstUpdatePass&&YU(s,n,o,i),e!==Lr&&Qs(r,o,e)){let a=s.data[Aa()];t$(s,a,r,r[xt],n,r[o+1]=n$(e,t),i,o)}}function QU(n,e){return e>=n.expandoStartIndex}function YU(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[Aa()],o=QU(n,t);i$(s,i)&&e===null&&!o&&(e=!1),e=XU(r,s,e,i),qU(r,s,e,t,o,i)}}function XU(n,e,t,i){let r=sj(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=nv(null,n,e,t,i),t=Ic(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=nv(r,n,e,t,i),s===null){let l=ZU(n,e,i);l!==void 0&&Array.isArray(l)&&(l=nv(null,n,e,l[1],i),l=Ic(l,e.attrs,i),JU(n,e,i,l))}else s=e$(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function ZU(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Ta(i)!==0)return n[Ys(i)]}function JU(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ys(r)]=i}function e$(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=Ic(i,o,t)}return Ic(i,e.attrs,t)}function nv(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=Ic(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Ic(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Aj(n,o,t?!0:e[++s]))}return n===void 0?null:n}function t$(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=HU(c)?aT(l,e,t,r,Ta(c),o):void 0;if(!gf(u)){gf(s)||$U(c)&&(s=aT(l,null,t,r,a,o));let d=VT(Aa(),t);pB(i,o,d,r,s)}}function aT(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=t[r+1];h===Lr&&(h=d?jn:void 0);let f=d?Qy(h,i):u===i?h:void 0;if(c&&!gf(f)&&(f=Qy(l,i)),gf(f)&&(a=f,o))return a;let p=n[r+1];r=o?Ys(p):Ta(p)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Qy(l,i))}return a}function gf(n){return n!==void 0}function n$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Qt(kc(n)))),n}function i$(n,e){return(n.flags&(e?8:16))!==0}var lie=new RegExp(`^(\\d+)*(${EB}|${wB})*(.*)`);var r$=(n,e)=>null;function lT(n,e){return r$(n,e)}function s$(n,e,t,i){let r=e.tView,o=n[re]&4096?4096:16,a=Af(n,r,t,o,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null),l=n[e.index];a[xc]=l;let c=n[Ei];return c!==null&&(a[Ei]=c.createEmbeddedView(r)),L_(r,a,t),a}function cT(n,e){return!e||wx(n)}function o$(n,e,t,i=!0){let r=e[_e];if(eB(r,e,n,t),i){let s=Ev(t,n),o=e[xt],a=D_(o,n[Us]);a!==null&&Xj(r,n[ai],o,e,a,s)}}var Vr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=a$;let n=e;return n})();function a$(){let n=xn();return hA(n,je())}var l$=Vr,dA=class extends l${constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return ka(this._hostTNode,this._hostLView)}get injector(){return new Vs(this._hostTNode,this._hostLView)}get parentInjector(){let e=d_(this._hostTNode,this._hostLView);if(tx(e)){let t=nf(e,this._hostLView),i=tf(e),r=t[_e].data[i+8];return new Vs(r,t)}else return new Vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=uT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Tn}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=lT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,cT(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!Dj(e),a;if(o)a=t;else{let p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let l=o?e:new Dc(js(e)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let g=(o?c:this.parentInjector).get(mn,null);g&&(s=g)}let u=js(l.componentType??{}),d=lT(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,r,h,s);return this.insertImpl(f.hostView,a,cT(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(U2(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[_t],c=new dA(l,l[ai],l[_t]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return o$(o,r,s,i),e.attachToViewContainerRef(),dx(iv(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=uT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=wv(this._lContainer,t);i&&(of(iv(this._lContainer),t),xx(i[_e],i))}detach(e){let t=this._adjustIndex(e,-1),i=wv(this._lContainer,t);return i&&of(iv(this._lContainer),t)!=null?new Ks(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function uT(n){return n[Jh]}function iv(n){return n[Jh]||(n[Jh]=[])}function hA(n,e){let t,i=e[n.index];return oi(i)?t=i:(t=Xx(i,e,null,n),e[n.index]=t,Pf(e,t)),u$(t,e,n,i),new dA(t,n,e)}function c$(n,e){let t=n[xt],i=t.createComment(""),r=Un(e,n),s=D_(t,r);return cf(t,s,i,aB(t,r),!1),i}var u$=f$,d$=(n,e,t)=>!1;function h$(n,e,t){return d$(n,e,t)}function f$(n,e,t,i){if(n[Us])return;let r;t.type&8?r=Ii(i):r=c$(e,t),n[Us]=r}function p$(n,e,t,i,r,s,o,a,l){let c=e.consts,u=Mf(e,n,4,o||null,ef(c,a));Gx(e,t,u,ef(c,l)),u_(e,u);let d=u.tView=R_(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function Re(n,e,t,i,r,s,o,a){let l=je(),c=ln(),u=n+si,d=c.firstCreatePass?p$(u,c,l,e,t,i,r,s,o):c.data[u];Ac(d,!1);let h=g$(c,l,d,n);l_()&&I_(c,l,h,d),Ws(h,l);let f=Xx(h,l,h,d);return l[u]=f,Pf(l,f),h$(f,d,l),t_(d)&&zx(c,l,d),o!=null&&Hx(l,d,a),Re}var g$=m$;function m$(n,e,t,i){return c_(!0),e[xt].createComment("")}function y$(n,e,t,i,r,s){let o=e.consts,a=ef(o,r),l=Mf(e,n,2,i,a);return Gx(e,t,l,ef(o,s)),l.attrs!==null&&Fv(l,l.attrs,!1),l.mergedAttrs!==null&&Fv(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function v(n,e,t,i){let r=je(),s=ln(),o=si+n,a=r[xt],l=s.firstCreatePass?y$(o,s,r,e,t,i):s.data[o],c=v$(s,r,l,a,e,n);r[o]=c;let u=t_(l);return Ac(l,!0),Rx(a,c,l),(l.flags&32)!==32&&l_()&&I_(s,r,c,l),q2()===0&&Ws(c,r),W2(),u&&(zx(s,r,l),$x(s,l,r)),i!==null&&Hx(r,l),v}function _(){let n=xn();qT()?Z2():(n=n.parent,Ac(n,!1));let e=n;Q2(e)&&Y2(),G2();let t=ln();return t.firstCreatePass&&(u_(t,n),OT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&hj(e)&&oT(t,e,je(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&fj(e)&&oT(t,e,je(),e.stylesWithoutHost,!1),_}function V(n,e,t,i){return v(n,e,t,i),_(),V}var v$=(n,e,t,i,r,s)=>(c_(!0),Sx(i,r,lj()));function bt(){return je()}var mf="en-US";var _$=mf;function b$(n){a2(n,"Expected localeId to be defined"),typeof n=="string"&&(_$=n.toLowerCase().replace(/_/g,"-"))}function eo(n){return!!n&&typeof n.then=="function"}function fA(n){return!!n&&typeof n.subscribe=="function"}function ne(n,e,t,i){let r=je(),s=ln(),o=xn();return E$(s,r,r[xt],o,n,e,i),ne}function w$(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[Ec],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function E$(n,e,t,i,r,s,o){let a=t_(i),c=n.firstCreatePass&&eA(n),u=e[Bn],d=Jx(e),h=!0;if(i.type&3||o){let g=Un(i,e),m=o?o(g):g,y=d.length,b=o?C=>o(Ii(C[i.index])):i.index,w=null;if(!o&&a&&(w=w$(n,e,r,i.index)),w!==null){let C=w.__ngLastListenerFn__||w;C.__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,h=!1}else{s=hT(i,e,u,s,!1);let C=t.listen(m,r,s);d.push(s,C),c&&c.push(r,b,y,y+1)}}else s=hT(i,e,u,s,!1);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let y=p[m],b=p[m+1],D=e[y][b].subscribe(s),I=d.length;d.push(s,D),c&&c.push(r,i.index,I,-(I+1))}}}function dT(n,e,t,i){try{return bi(6,e,t),t(i)!==!1}catch(r){return tA(n,r),!1}finally{bi(7,e,t)}}function hT(n,e,t,i,r){return function s(o){if(o===Function)return i;let a=n.componentOffset>-1?Or(n.index,e):e;O_(a);let l=dT(e,t,i,o),c=s.__ngNextListenerFn__;for(;c;)l=dT(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return r&&l===!1&&o.preventDefault(),l}}function be(n=1){return aj(n)}function rr(n,e,t){return pA(n,"",e,"",t),rr}function pA(n,e,t,i,r){let s=je(),o=uA(s,e,t,i);if(o!==Lr){let a=ln(),l=a_();Wx(a,l,s,n,o,s[xt],r,!1)}return pA}function C$(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function kf(n){let e=J2();return BT(e,si+n)}function E(n,e=""){let t=je(),i=ln(),r=n+si,s=i.firstCreatePass?Mf(i,r,1,e,null):i.data[r],o=D$(i,t,s,e,n);t[r]=o,l_()&&I_(i,t,o,s),Ac(s,!1)}var D$=(n,e,t,i,r)=>(c_(!0),Kj(e[xt],i));function we(n){return vn("",n,""),we}function vn(n,e,t){let i=je(),r=uA(i,n,e,t);return r!==Lr&&uU(i,Aa(),r),vn}function I$(n,e,t){let i=ln();if(i.firstCreatePass){let r=Pr(n);Uv(t,i.data,i.blueprint,r,!0),Uv(e,i.data,i.blueprint,r,!1)}}function Uv(n,e,t,i,r){if(n=an(n),Array.isArray(n))for(let s=0;s<n.length;s++)Uv(n[s],e,t,i,r);else{let s=ln(),o=je(),a=xn(),l=Sa(n)?n:an(n.provide),c=yx(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Sa(n)||!n.multi){let f=new Hs(c,r,q),p=sv(l,e,r?u:u+h,d);p===-1?(gv(sf(a,o),s,l),rv(s,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{let f=sv(l,e,u+h,d),p=sv(l,e,u,u+h),g=f>=0&&t[f],m=p>=0&&t[p];if(r&&!m||!r&&!g){gv(sf(a,o),s,l);let y=x$(r?T$:S$,t.length,r,i,c);!r&&m&&(t[p].providerFactory=y),rv(s,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),o.push(y)}else{let y=gA(t[r?p:f],c,!r&&i);rv(s,n,f>-1?f:p,y)}!r&&i&&m&&t[p].componentProviders++}}}function rv(n,e,t,i){let r=Sa(e),s=Oj(e);if(r||s){let l=(s?an(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function gA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function sv(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function S$(n,e,t,i){return $v(this.multi,[])}function T$(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=qs(t,t[_e],this.providerFactory.index,i);s=a.slice(0,o),$v(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],$v(r,s);return s}function $v(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function x$(n,e,t,i,r){let s=new Hs(n,t,q);return s.multi=[],s.index=e,s.componentProviders=0,gA(s,r,i&&!t),s}function Nc(n,e=[]){return t=>{t.providersResolver=(i,r)=>I$(i,r?r(n):n,e)}}var Rr=class{},Sc=class{};var zv=class extends Rr{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pf(this);let r=AT(e);this._bootstrapComponents=bx(r.bootstrap),this._r3Injector=vx(e,t,[{provide:Rr,useValue:this},{provide:Tf,useValue:this.componentFactoryResolver},...i],Qt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Hv=class extends Sc{constructor(e){super(),this.moduleType=e}create(e){return new zv(this.moduleType,e,[])}};var yf=class extends Rr{constructor(e){super(),this.componentFactoryResolver=new pf(this),this.instance=null;let t=new lf([...e.providers,{provide:Rr,useValue:this},{provide:Tf,useValue:this.componentFactoryResolver}],e.parent||y_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function j_(n,e,t=null){return new yf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var A$=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=px(!1,i.type),s=r.length>0?j_([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=K({token:e,providedIn:"environment",factory:()=>new e(O(mn))});let n=e;return n})();function fe(n){N_("NgStandalone"),n.getStandaloneInjector=e=>e.get(A$).getOrCreateStandaloneInjector(n)}function B_(n,e,t,i){return M$(je(),WT(),n,e,t,i)}function mA(n,e){let t=n[e];return t===Lr?void 0:t}function M$(n,e,t,i,r,s){let o=e+t;return Qs(n,o,r)?cA(n,o+1,s?i.call(s,r):i(r)):mA(n,o+1)}function P$(n,e,t,i,r,s,o){let a=e+t;return UU(n,a,r,s)?cA(n,a+2,o?i.call(o,r,s):i(r,s)):mA(n,a+2)}function U_(n,e){let t=ln(),i,r=n+si;t.firstCreatePass?(i=R$(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let s=i.factory||(i.factory=$s(i.type,!0)),o,a=Vn(q);try{let l=rf(!1),c=s();return rf(l),C$(t,je(),r,c),c}finally{Vn(a)}}function R$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function $_(n,e,t,i){let r=n+si,s=je(),o=BT(s,r);return k$(s,r)?P$(s,WT(),e,o.transform,t,i,o):o.transform(t,i)}function k$(n,e){return n[_e].data[e].pure}function O$(){return this._results[Symbol.iterator]()}var qv=class n{get changes(){return this._changes||(this._changes=new Vt)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=O$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=Sj(e);(this._changesDetected=!Ij(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}},Xs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=L$;let n=e;return n})(),N$=Xs,F$=class extends N${constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=s$(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:i});return new Ks(r)}};function L$(){return z_(xn(),je())}function z_(n,e){return n.type&4?new F$(e,n,ka(n,e)):null}var Wv=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Gv=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)vA(e,t).matches!==null&&this.queries[t].setDirty()}},Kv=class{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}},Qv=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Yv=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,V$(t,s)),this.matchTNodeWithReadOption(e,t,Gh(t,e,s,!1,!1))}else i===Xs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Gh(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===$n||r===Vr||r===Xs&&t.type&4)this.addMatch(t.index,-2);else{let s=Gh(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function V$(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function j$(n,e){return n.type&11?ka(n,e):n.type&4?z_(n,e):null}function B$(n,e,t,i){return t===-1?j$(e,n):t===-2?U$(n,e,i):qs(n,n[_e],t,e)}function U$(n,e,t){if(t===$n)return ka(e,n);if(t===Xs)return z_(e,n);if(t===Vr)return hA(e,n)}function yA(n,e,t,i){let r=e[Ei].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(B$(e,u,o[l+1],t.metadata.read))}}r.matches=a}return r.matches}function Xv(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=yA(n,e,r,t);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let d=Tn;d<u.length;d++){let h=u[d];h[xc]===h[_t]&&Xv(h[_e],h,c,i)}if(u[Da]!==null){let d=u[Da];for(let h=0;h<d.length;h++){let f=d[h];Xv(f[_e],f,c,i)}}}}}return i}function Fc(n){let e=je(),t=ln(),i=GT();r_(i+1);let r=vA(t,i);if(n.dirty&&B2(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=r.crossesNgTemplate?Xv(t,e,i,[]):yA(t,e,r,i);n.reset(s,TB),n.notifyOnChanges()}return!0}return!1}function Of(n,e,t){let i=ln();i.firstCreatePass&&(H$(i,new Kv(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),z$(i,je(),e)}function Lc(){return $$(je(),GT())}function $$(n,e){return n[Ei].queries[e].queryList}function z$(n,e,t){let i=new qv((t&4)===4);qB(n,e,i,i.destroy),e[Ei]===null&&(e[Ei]=new Gv),e[Ei].queries.push(new Wv(i))}function H$(n,e,t){n.queries===null&&(n.queries=new Qv),n.queries.track(new Yv(e,t))}function vA(n,e){return n.queries.getByIndex(e)}var _A=new G("Application Initializer"),bA=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=W(_A,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(eo(o))i.push(o);else if(fA(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Nf=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function q$(){return typeof $localize<"u"&&$localize.locale||mf}var H_=new G("LocaleId",{providedIn:"root",factory:()=>W(H_,Ce.Optional|Ce.SkipSelf)||q$()});var Na=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Lt(!1)}add(){this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Zv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},q_=(()=>{let e=class e{compileModuleSync(i){return new Hv(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=AT(i),o=bx(s.declarations).reduce((a,l)=>{let c=js(l);return c&&a.push(new Dc(c)),a},[]);return new Zv(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var wA=new G("");var Yh=null;var EA=new G("PlatformDestroyListeners"),Ff=new G("appBootstrapListener");function W$(){lS(()=>{throw new N(600,!1)})}function G$(n){return n.isBoundToModule}function K$(n=[]){if(Yh)return Yh;let e=Y$(n);return Yh=e,W$(),Q$(e),e}function Q$(n){n.get(__,null)?.forEach(t=>t())}function CA(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=K$(i),s=[n4(),...t||[]],a=new yf({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Ne);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(tr,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:f=>{c.handleError(f)}})});let d=()=>a.destroy(),h=r.get(EA);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),Z$(c,l,()=>{let f=a.get(bA);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(H_,mf);b$(p||mf);let g=a.get(jr);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function Y$(n=[],e){return Js.create({name:e,providers:[{provide:If,useValue:"platform"},{provide:EA,useValue:new Set([()=>Yh=null])},...n]})}function X$(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}function Z$(n,e,t){try{let i=t();return eo(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var jr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=W(DA),this.zoneIsStable=W(aA),this.componentTypes=[],this.components=[],this.isStable=W(Na).hasPendingTasks.pipe(et(i=>i?Z(!1):this.zoneIsStable),gc(),ga()),this._injector=W(mn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof df;if(!this._injector.get(bA).done){let p="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&xT(i)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new N(405,!1)}let a;s?a=i:a=this._injector.get(Tf).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=G$(a)?void 0:this._injector.get(Rr),c=r||a.selector,u=a.create(Js.NULL,[],c,l),d=u.location.nativeElement,h=u.injector.get(wA,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),ov(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new N(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;ov(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Ff,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>ov(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new N(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function ov(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var DA=new G("",{providedIn:"root",factory:()=>W(tr).handleError.bind(void 0)});function J$(){let n=W(Ne),e=W(tr);return t=>n.runOutsideAngular(()=>e.handleError(t))}var e4=(()=>{let e=class e{constructor(){this.zone=W(Ne),this.applicationRef=W(jr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function t4(n){return[{provide:Ne,useFactory:n},{provide:Pc,multi:!0,useFactory:()=>{let e=W(e4,{optional:!0});return()=>e.initialize()}},{provide:DA,useFactory:J$},{provide:aA,useFactory:lA}]}function n4(n){let e=t4(()=>new Ne(X$(n)));return Ra([[],e])}function W_(){return!1}function Br(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var K_=null;function sr(){return K_}function MA(n){K_||(K_=n)}var Lf=class{},jt=new G("DocumentToken"),PA=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:()=>(()=>W(i4))(),providedIn:"platform"});let n=e;return n})();var i4=(()=>{let e=class e extends PA{constructor(){super(),this._doc=W(jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sr().getBaseHref(this._doc)}onPopState(i){let r=sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=sr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let n=e;return n})();function RA(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function IA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function to(n){return n&&n[0]!=="?"?"?"+n:n}var La=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:()=>(()=>W(kA))(),providedIn:"root"});let n=e;return n})(),r4=new G("appBaseHref"),kA=(()=>{let e=class e extends La{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??W(jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return RA(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+to(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+to(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+to(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(O(PA),O(r4,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Vc=(()=>{let e=class e{constructor(i){this._subject=new Vt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=a4(IA(SA(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+to(r))}normalize(i){return e.stripTrailingSlash(o4(this._basePath,SA(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+to(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+to(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=to,e.joinWithSlash=RA,e.stripTrailingSlash=IA,e.\u0275fac=function(r){return new(r||e)(O(La))},e.\u0275prov=K({token:e,factory:()=>s4(),providedIn:"root"});let n=e;return n})();function s4(){return new Vc(O(La))}function o4(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SA(n){return n.replace(/\/index.html$/,"")}function a4(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Vf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var G_=/\s+/,TA=[],OA=(()=>{let e=class e{constructor(i,r,s,o){this._iterableDiffers=i,this._keyValueDiffers=r,this._ngEl=s,this._renderer=o,this.initialClasses=TA,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(G_):TA}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(G_):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(G_).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(q(xf),q(P_),q($n),q(Fr))},e.\u0275dir=Rt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var Q_=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zt=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(!1)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(s.previousIndex==null)r.createEmbeddedView(this._template,new Q_(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let l=r.get(o);r.move(l,a),xA(l,s)}});for(let s=0,o=r.length;s<o;s++){let l=r.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{let o=r.get(s.currentIndex);xA(o,s)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(q(Vr),q(Xs),q(xf))},e.\u0275dir=Rt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function xA(n,e){n.context.$implicit=e.item}var zn=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new Y_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){AA("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){AA("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(q(Vr),q(Xs))},e.\u0275dir=Rt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),Y_=class{constructor(){this.$implicit=null,this.ngIf=null}};function AA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Qt(e)}'.`)}var ge=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Yt({});let n=e;return n})(),NA="browser",l4="server";function no(n){return n===l4}var Fa=class{};var Bc=class{},Bf=class{},io=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Z_=class{encodeKey(e){return FA(e)}encodeValue(e){return FA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function d4(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}var h4=/%(\d[a-f0-9])/gi,f4={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function FA(n){return encodeURIComponent(n).replace(h4,(e,t)=>f4[t]??e)}function jf(n){return`${n}`}var Ur=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Z_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=d4(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(jf):[jf(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(jf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(jf(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var J_=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function p4(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function LA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function VA(n){return typeof Blob<"u"&&n instanceof Blob}function jA(n){return typeof FormData<"u"&&n instanceof FormData}function g4(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var jc=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(p4(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers||(this.headers=new io),this.context||(this.context=new J_),!this.params)this.params=new Ur,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:LA(this.body)||VA(this.body)||jA(this.body)||g4(this.body)||typeof this.body=="string"?this.body:this.body instanceof Ur?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||jA(this.body)?null:VA(this.body)?this.body.type||null:LA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ur?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,l=e.headers||this.headers,c=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new n(t,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}},Va=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Va||{}),Uc=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new io,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},e0=class n extends Uc{constructor(e={}){super(e),this.type=Va.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Uf=class n extends Uc{constructor(e={}){super(e),this.type=Va.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},$f=class extends Uc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function X_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var t0=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof jc)o=i;else{let c;s.headers instanceof io?c=s.headers:c=new io(s.headers);let u;s.params&&(s.params instanceof Ur?u=s.params:u=new Ur({fromObject:s.params})),o=new jc(i,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=Z(o).pipe(Tr(c=>this.handler.handle(c)));if(i instanceof jc||s.observe==="events")return a;let l=a.pipe(Pt(c=>c instanceof Uf));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(J(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(J(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(J(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(J(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Ur().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,X_(s,r))}post(i,r,s={}){return this.request("POST",i,X_(s,r))}put(i,r,s={}){return this.request("PUT",i,X_(s,r))}};e.\u0275fac=function(r){return new(r||e)(O(Bc))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function zA(n,e){return e(n)}function m4(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function y4(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}var v4=new G(""),n0=new G(""),_4=new G(""),b4=new G("");function w4(){let n=null;return(e,t)=>{n===null&&(n=(W(v4,{optional:!0})??[]).reduceRight(m4,zA));let i=W(Na),r=i.add();return n(e,t).pipe(Ar(()=>i.remove(r)))}}var BA=(()=>{let e=class e extends Bc{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=W(Na);let s=W(b4,{optional:!0});this.backend=s??i}handle(i){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(n0),...this.injector.get(_4,[])]));this.chain=s.reduceRight((o,a)=>y4(o,a,this.injector),zA)}let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(Ar(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(O(Bf),O(mn))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();var E4=/^\)\]\}',?\n/;function C4(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var UA=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new N(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Pe(r.\u0275loadImpl()):Z(null)).pipe(et(()=>new le(o=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((m,y)=>a.setRequestHeader(m,y.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let m=i.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(i.responseType){let m=i.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let l=i.serializeBody(),c=null,u=()=>{if(c!==null)return c;let m=a.statusText||"OK",y=new io(a.getAllResponseHeaders()),b=C4(a)||i.url;return c=new e0({headers:y,status:a.status,statusText:m,url:b}),c},d=()=>{let{headers:m,status:y,statusText:b,url:w}=u(),C=null;y!==204&&(C=typeof a.response>"u"?a.responseText:a.response),y===0&&(y=C?200:0);let D=y>=200&&y<300;if(i.responseType==="json"&&typeof C=="string"){let I=C;C=C.replace(E4,"");try{C=C!==""?JSON.parse(C):null}catch(A){C=I,D&&(D=!1,C={error:A,text:C})}}D?(o.next(new Uf({body:C,headers:m,status:y,statusText:b,url:w||void 0})),o.complete()):o.error(new $f({error:C,headers:m,status:y,statusText:b,url:w||void 0}))},h=m=>{let{url:y}=u(),b=new $f({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:y||void 0});o.error(b)},f=!1,p=m=>{f||(o.next(u()),f=!0);let y={type:Va.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(y.total=m.total),i.responseType==="text"&&a.responseText&&(y.partialText=a.responseText),o.next(y)},g=m=>{let y={type:Va.UploadProgress,loaded:m.loaded};m.lengthComputable&&(y.total=m.total),o.next(y)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),i.reportProgress&&(a.addEventListener("progress",p),l!==null&&a.upload&&a.upload.addEventListener("progress",g)),a.send(l),o.next({type:Va.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),i.reportProgress&&(a.removeEventListener("progress",p),l!==null&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(O(Fa))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),HA=new G("XSRF_ENABLED"),D4="XSRF-TOKEN",I4=new G("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>D4}),S4="X-XSRF-TOKEN",T4=new G("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>S4}),zf=class{},x4=(()=>{let e=class e{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vf(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(O(jt),O(yn),O(I4))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function A4(n,e){let t=n.url.toLowerCase();if(!W(HA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=W(zf).getToken(),r=W(T4);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var qA=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(qA||{});function M4(n,e){return{\u0275kind:n,\u0275providers:e}}function P4(...n){let e=[t0,UA,BA,{provide:Bc,useExisting:BA},{provide:Bf,useExisting:UA},{provide:n0,useValue:A4,multi:!0},{provide:HA,useValue:!0},{provide:zf,useClass:x4}];for(let t of n)e.push(...t.\u0275providers);return Ra(e)}var $A=new G("LEGACY_INTERCEPTOR_FN");function R4(){return M4(qA.LegacyInterceptors,[{provide:$A,useFactory:w4},{provide:n0,useExisting:$A,multi:!0}])}var Hf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Yt({providers:[P4(R4())]});let n=e;return n})();var s0=class extends Lf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},o0=class n extends s0{static makeCurrent(){MA(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=O4();return t==null?null:N4(t)}resetBaseElement(){$c=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Vf(document.cookie,e)}},$c=null;function O4(){return $c=$c||document.querySelector("base"),$c?$c.getAttribute("href"):null}var qf;function N4(n){qf=qf||document.createElement("a"),qf.setAttribute("href",n);let e=qf.pathname;return e.charAt(0)==="/"?e:`/${e}`}var F4=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),a0=new G("EventManagerPlugins"),KA=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new N(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(O(a0),O(Ne))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Wf=class{constructor(e){this._doc=e}},i0="ng-app-id",QA=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=no(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${i0}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(i0),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(i0,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(O(jt),O(v_),O(w_,8),O(yn))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),r0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},c0=/%COMP%/g,YA="%COMP%",L4=`_nghost-${YA}`,V4=`_ngcontent-${YA}`,j4=!0,B4=new G("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>j4});function U4(n){return V4.replace(c0,n)}function $4(n){return L4.replace(c0,n)}function XA(n,e){return e.map(t=>t.replace(c0,n))}var Gf=(()=>{let e=class e{constructor(i,r,s,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=no(l),this.defaultRenderer=new zc(i,a,c,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ci.ShadowDom&&(r=Me(z({},r),{encapsulation:Ci.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Kf?s.applyToHost(i):s instanceof Hc&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Ci.Emulated:o=new Kf(c,u,r,this.appId,d,a,l,h);break;case Ci.ShadowDom:return new l0(c,u,i,r,a,l,this.nonce,h);default:o=new Hc(c,u,r,d,a,l,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(O(KA),O(QA),O(v_),O(B4),O(jt),O(yn),O(Ne),O(w_))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),zc=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(r0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(WA(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(WA(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new N(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=r0[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=r0[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ji.DashCase|Ji.Important)?e.style.setProperty(t,i,r&Ji.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ji.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=sr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function WA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var l0=class extends zc{constructor(e,t,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=XA(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Hc=class extends zc{constructor(e,t,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?XA(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Kf=class extends Hc{constructor(e,t,i,r,s,o,a,l){let c=r+"-"+i.id;super(e,t,i,s,o,a,l,c),this.contentAttr=U4(c),this.hostAttr=$4(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},z4=(()=>{let e=class e extends Wf{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(O(jt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),GA=["alt","control","meta","shift"],H4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},q4={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},W4=(()=>{let e=class e extends Wf{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sr().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),GA.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(i,r){let s=H4[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),GA.forEach(a=>{if(a!==s){let l=q4[a];l(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(O(jt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function ZA(n,e){return CA(z({rootComponent:n},G4(e)))}function G4(n){return{appProviders:[...Z4,...n?.providers??[]],platformProviders:X4}}function K4(){o0.makeCurrent()}function Q4(){return new tr}function Y4(){return _x(document),document}var X4=[{provide:yn,useValue:NA},{provide:__,useValue:K4,multi:!0},{provide:jt,useFactory:Y4,deps:[]}];var Z4=[{provide:If,useValue:"root"},{provide:tr,useFactory:Q4,deps:[]},{provide:a0,useClass:z4,multi:!0,deps:[jt,Ne,yn]},{provide:a0,useClass:W4,multi:!0,deps:[jt]},Gf,QA,KA,{provide:Gs,useExisting:Gf},{provide:Fa,useClass:F4,deps:[]},[]];function J4(){return new u0(O(jt))}var u0=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(O(jt))},e.\u0275prov=K({token:e,factory:function(r){let s=null;return r?s=new r:s=J4(),s},providedIn:"root"});let n=e;return n})();var me="primary",su=Symbol("RouteTitle"),g0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function za(n){return new g0(n)}function tz(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function nz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Si(n[t],e[t]))return!1;return!0}function Si(n,e){let t=n?m0(n):void 0,i=e?m0(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!sM(n[r],e[r]))return!1;return!0}function m0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function sM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function oM(n){return n.length>0?n[n.length-1]:null}function qr(n){return By(n)?n:eo(n)?Pe(Promise.resolve(n)):Z(n)}var iz={exact:lM,subset:cM},aM={exact:rz,subset:sz,ignored:()=>!0};function JA(n,e,t){return iz[t.paths](n.root,e.root,t.matrixParams)&&aM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function rz(n,e){return Si(n,e)}function lM(n,e,t){if(!so(n.segments,e.segments)||!Xf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!lM(n.children[i],e.children[i],t))return!1;return!0}function sz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>sM(n[t],e[t]))}function cM(n,e,t){return uM(n,e,e.segments,t)}function uM(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!so(r,t)||e.hasChildren()||!Xf(r,t,i))}else if(n.segments.length===t.length){if(!so(n.segments,t)||!Xf(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!cM(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!so(n.segments,r)||!Xf(n.segments,r,i)||!n.children[me]?!1:uM(n.children[me],e,s,i)}}function Xf(n,e,t){return e.every((i,r)=>aM[t](n[r].parameters,i.parameters))}var $r=class{constructor(e=new Fe([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=za(this.queryParams)),this._queryParamMap}toString(){return lz.serialize(this)}},Fe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zf(this)}},ro=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=za(this.parameters)),this._parameterMap}toString(){return hM(this)}};function oz(n,e){return so(n,e)&&n.every((t,i)=>Si(t.parameters,e[i].parameters))}function so(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function az(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===me&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==me&&(t=t.concat(e(r,i)))}),t}var U0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:()=>(()=>new ep)(),providedIn:"root"});let n=e;return n})(),ep=class{parse(e){let t=new v0(e);return new $r(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${qc(e.root,!0)}`,i=dz(e.queryParams),r=typeof e.fragment=="string"?`#${cz(e.fragment)}`:"";return`${t}${i}${r}`}},lz=new ep;function Zf(n){return n.segments.map(e=>hM(e)).join("/")}function qc(n,e){if(!n.hasChildren())return Zf(n);if(e){let t=n.children[me]?qc(n.children[me],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==me&&i.push(`${r}:${qc(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=az(n,(i,r)=>r===me?[qc(n.children[me],!1)]:[`${r}:${qc(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[me]!=null?`${Zf(n)}/${t[0]}`:`${Zf(n)}/(${t.join("//")})`}}function dM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qf(n){return dM(n).replace(/%3B/gi,";")}function cz(n){return encodeURI(n)}function y0(n){return dM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jf(n){return decodeURIComponent(n)}function eM(n){return Jf(n.replace(/\+/g,"%20"))}function hM(n){return`${y0(n.path)}${uz(n.parameters)}`}function uz(n){return Object.keys(n).map(e=>`;${y0(e)}=${y0(n[e])}`).join("")}function dz(n){let e=Object.keys(n).map(t=>{let i=n[t];return Array.isArray(i)?i.map(r=>`${Qf(t)}=${Qf(r)}`).join("&"):`${Qf(t)}=${Qf(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}var hz=/^[^\/()?;#]+/;function d0(n){let e=n.match(hz);return e?e[0]:""}var fz=/^[^\/()?;=#]+/;function pz(n){let e=n.match(fz);return e?e[0]:""}var gz=/^[^=?&#]+/;function mz(n){let e=n.match(gz);return e?e[0]:""}var yz=/^[^&#]+/;function vz(n){let e=n.match(yz);return e?e[0]:""}var v0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fe([],{}):new Fe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[me]=new Fe(e,t)),i}parseSegment(){let e=d0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new N(4009,!1);return this.capture(e),new ro(Jf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=pz(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=d0(this.remaining);r&&(i=r,this.capture(i))}e[Jf(t)]=Jf(i)}parseQueryParam(e){let t=mz(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=vz(this.remaining);o&&(i=o,this.capture(i))}let r=eM(t),s=eM(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=d0(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new N(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=me);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[me]:new Fe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new N(4011,!1)}};function fM(n){return n.segments.length>0?new Fe([],{[me]:n}):n}function pM(n){let e={};for(let i of Object.keys(n.children)){let r=n.children[i],s=pM(r);if(i===me&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new Fe(n.segments,e);return _z(t)}function _z(n){if(n.numberOfChildren===1&&n.children[me]){let e=n.children[me];return new Fe(n.segments.concat(e.segments),e.children)}return n}function Ha(n){return n instanceof $r}function bz(n,e,t=null,i=null){let r=gM(n);return mM(r,e,t,i)}function gM(n){let e;function t(s){let o={};for(let l of s.children){let c=t(l);o[l.outlet]=c}let a=new Fe(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=fM(i);return e??r}function mM(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return h0(r,r,r,t,i);let s=wz(e);if(s.toRoot())return h0(r,r,new Fe([],{}),t,i);let o=Ez(s,r,n),a=o.processChildren?Kc(o.segmentGroup,o.index,s.commands):vM(o.segmentGroup,o.index,s.commands);return h0(r,o.segmentGroup,a,t,i)}function tp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Xc(n){return typeof n=="object"&&n!=null&&n.outlets}function h0(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;n===e?o=t:o=yM(n,e,t);let a=fM(pM(o));return new $r(a,s,r)}function yM(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=yM(s,e,t)}),new Fe(n.segments,i)}var np=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&tp(i[0]))throw new N(4003,!1);let r=i.find(Xc);if(r&&r!==oM(i))throw new N(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new np(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new np(t,e,i)}var Ua=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Ez(n,e,t){if(n.isAbsolute)return new Ua(e,!0,0);if(!t)return new Ua(e,!1,NaN);if(t.parent===null)return new Ua(t,!0,0);let i=tp(n.commands[0])?0:1,r=t.segments.length-1+i;return Cz(t,r,n.numberOfDoubleDots)}function Cz(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new N(4005,!1);r=i.segments.length}return new Ua(i,!1,r-s)}function Dz(n){return Xc(n[0])?n[0].outlets:{[me]:n}}function vM(n,e,t){if(n||(n=new Fe([],{})),n.segments.length===0&&n.hasChildren())return Kc(n,e,t);let i=Iz(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Fe(n.segments.slice(0,i.pathIndex),{});return s.children[me]=new Fe(n.segments.slice(i.pathIndex),n.children),Kc(s,0,r)}else return i.match&&r.length===0?new Fe(n.segments,{}):i.match&&!n.hasChildren()?_0(n,e,t):i.match?Kc(n,0,r):_0(n,e,t)}function Kc(n,e,t){if(t.length===0)return new Fe(n.segments,{});{let i=Dz(t),r={};if(Object.keys(i).some(s=>s!==me)&&n.children[me]&&n.numberOfChildren===1&&n.children[me].segments.length===0){let s=Kc(n.children[me],e,t);return new Fe(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=vM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Fe(n.segments,r)}}function Iz(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(Xc(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!nM(l,c,o))return s;i+=2}else{if(!nM(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function _0(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Xc(s)){let l=Sz(s.outlets);return new Fe(i,l)}if(r===0&&tp(t[0])){let l=n.segments[e];i.push(new ro(l.path,tM(t[0]))),r++;continue}let o=Xc(s)?s.outlets[me]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&tp(a)?(i.push(new ro(o,tM(a))),r+=2):(i.push(new ro(o,{})),r++)}return new Fe(i,{})}function Sz(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=_0(new Fe([],{}),0,i))}),e}function tM(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function nM(n,e,t){return n==t.path&&Si(e,t.parameters)}var Qc="imperative",qn=class{constructor(e,t){this.id=e,this.url=t}},Zc=class extends qn{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zr=class extends qn{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Hr=class extends qn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},oo=class extends qn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}},Jc=class extends qn{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ip=class extends qn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b0=class extends qn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},w0=class extends qn{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},E0=class extends qn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},C0=class extends qn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},D0=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},I0=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},S0=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},T0=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},x0=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},A0=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var eu=class{},tu=class{constructor(e){this.url=e}};var M0=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new cp,this.attachRef=null}},cp=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new M0,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),rp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=P0(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=P0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=R0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return R0(e,this._root).map(t=>t.value)}};function P0(n,e){if(n===e.value)return e;for(let t of e.children){let i=P0(n,t);if(i)return i}return null}function R0(n,e){if(n===e.value)return[e];for(let t of e.children){let i=R0(n,t);if(i.length)return i.unshift(e),i}return[]}var An=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ba(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var sp=class extends rp{constructor(e,t){super(e),this.snapshot=t,z0(this,e)}toString(){return this.snapshot.toString()}};function _M(n,e){let t=Tz(n,e),i=new Lt([new ro("",{})]),r=new Lt({}),s=new Lt({}),o=new Lt({}),a=new Lt(""),l=new ao(i,r,o,a,s,me,e,t.root);return l.snapshot=t.root,new sp(new An(l,[]),t)}function Tz(n,e){let t={},i={},r={},s="",o=new nu([],t,r,s,i,me,e,null,{});return new op("",new An(o,[]))}var ao=class{constructor(e,t,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(J(c=>c[su]))??Z(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(J(e=>za(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(J(e=>za(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function $0(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:z(z({},e.params),n.params),data:z(z({},e.data),n.data),resolve:z(z(z(z({},n.data),e.data),r?.data),n._resolvedData)}:i={params:n.params,data:n.data,resolve:z(z({},n.data),n._resolvedData??{})},r&&wM(r)&&(i.resolve[su]=r.title),i}var nu=class{get title(){return this.data?.[su]}constructor(e,t,i,r,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=za(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=za(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},op=class extends rp{constructor(e,t){super(t),this.url=e,z0(this,t)}toString(){return bM(this._root)}};function z0(n,e){e.value._routerState=n,e.children.forEach(t=>z0(n,t))}function bM(n){let e=n.children.length>0?` { ${n.children.map(bM).join(", ")} } `:"";return`${n.value}${e}`}function f0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Si(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Si(e.params,t.params)||n.paramsSubject.next(t.params),nz(e.url,t.url)||n.urlSubject.next(t.url),Si(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function k0(n,e){let t=Si(n.params,e.params)&&oz(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||k0(n.parent,e.parent))}function wM(n){return typeof n.title=="string"||n.title===null}var ou=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=me,this.activateEvents=new Vt,this.deactivateEvents=new Vt,this.attachEvents=new Vt,this.detachEvents=new Vt,this.parentContexts=W(cp),this.location=W(Vr),this.changeDetector=W(Oa),this.environmentInjector=W(mn),this.inputBinder=W(H0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new N(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new N(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new N(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new N(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new O0(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Rt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[kr]});let n=e;return n})(),O0=class{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ao?this.route:e===cp?this.childContexts:this.parent.get(e,t)}},H0=new G("");function xz(n,e,t){let i=iu(n,e._root,t?t._root:void 0);return new sp(i,e)}function iu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=Az(n,e,t);return new An(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>iu(n,a)),o}}let i=Mz(e.value),r=e.children.map(s=>iu(n,s));return new An(i,r)}}function Az(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return iu(n,i,r);return iu(n,i)})}function Mz(n){return new ao(new Lt(n.url),new Lt(n.params),new Lt(n.queryParams),new Lt(n.fragment),new Lt(n.data),n.outlet,n.component,n)}var EM="ngNavigationCancelingError";function CM(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Ha(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=DM(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function DM(n,e,t){let i=new Error("NavigationCancelingError: "+(n||""));return i[EM]=!0,i.cancellationCode=e,t&&(i.url=t),i}function Pz(n){return IM(n)&&Ha(n.url)}function IM(n){return n&&n[EM]}var Rz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["ng-component"]],standalone:!0,features:[fe],decls:1,vars:0,template:function(r,s){r&1&&V(0,"router-outlet")},dependencies:[ou],encapsulation:2});let n=e;return n})();function kz(n,e){return n.providers&&!n._injector&&(n._injector=j_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function q0(n){let e=n.children&&n.children.map(q0),t=e?Me(z({},n),{children:e}):z({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==me&&(t.component=Rz),t}function Ti(n){return n.outlet||me}function Oz(n,e){let t=n.filter(i=>Ti(i)===e);return t.push(...n.filter(i=>Ti(i)!==e)),t}function au(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Nz=(n,e,t,i)=>J(r=>(new N0(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),N0=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),f0(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Ba(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ba(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Ba(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Ba(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new A0(s.value.snapshot))}),e.children.length&&this.forwardEvent(new T0(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(f0(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),f0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=au(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},ap=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},$a=class{constructor(e,t){this.component=e,this.route=t}};function Fz(n,e,t){let i=n._root,r=e?e._root:null;return Wc(i,r,t,[i.value])}function Lz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Wa(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!mT(n)?n:e.get(n):i}function Wc(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ba(e);return n.children.forEach(o=>{Vz(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yc(a,t.getContext(o),r)),r}function Vz(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=jz(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ap(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Wc(n,e,a?a.children:null,i,r):Wc(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new $a(a.outlet.component,o))}else o&&Yc(e,a,r),r.canActivateChecks.push(new ap(i)),s.component?Wc(n,null,a?a.children:null,i,r):Wc(n,null,t,i,r);return r}function jz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!so(n.url,e.url);case"pathParamsOrQueryParamsChange":return!so(n.url,e.url)||!Si(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!k0(n,e)||!Si(n.queryParams,e.queryParams);case"paramsChange":default:return!k0(n,e)}}function Yc(n,e,t){let i=Ba(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Yc(o,e.children.getContext(s),t):Yc(o,null,t):Yc(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new $a(e.outlet.component,r)):t.canDeactivateChecks.push(new $a(null,r)):t.canDeactivateChecks.push(new $a(null,r))}function lu(n){return typeof n=="function"}function Bz(n){return typeof n=="boolean"}function Uz(n){return n&&lu(n.canLoad)}function $z(n){return n&&lu(n.canActivate)}function zz(n){return n&&lu(n.canActivateChild)}function Hz(n){return n&&lu(n.canDeactivate)}function qz(n){return n&&lu(n.canMatch)}function SM(n){return n instanceof Zi||n?.name==="EmptyError"}var Yf=Symbol("INITIAL_VALUE");function qa(){return et(n=>Nh(n.map(e=>e.pipe(ni(1),Fs(Yf)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===Yf)return Yf;if(t===!1||t instanceof $r)return t}return!0}),Pt(e=>e!==Yf),ni(1)))}function Wz(n,e){return Tt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Z(Me(z({},t),{guardsResult:!0})):Gz(o,i,r,n).pipe(Tt(a=>a&&Bz(a)?Kz(i,s,n,e):Z(a)),J(a=>Me(z({},t),{guardsResult:a})))})}function Gz(n,e,t,i){return Pe(n).pipe(Tt(r=>Jz(r.component,r.route,t,e,i)),Ln(r=>r!==!0,!0))}function Kz(n,e,t,i){return Pe(e).pipe(Tr(r=>fa(Yz(r.route.parent,i),Qz(r.route,i),Zz(n,r.path,t),Xz(n,r.route,t))),Ln(r=>r!==!0,!0))}function Qz(n,e){return n!==null&&e&&e(new x0(n)),Z(!0)}function Yz(n,e){return n!==null&&e&&e(new S0(n)),Z(!0)}function Xz(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Z(!0);let r=i.map(s=>Fh(()=>{let o=au(e)??t,a=Wa(s,o),l=$z(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n));return qr(l).pipe(Ln())}));return Z(r).pipe(qa())}function Zz(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Lz(o)).filter(o=>o!==null).map(o=>Fh(()=>{let a=o.guards.map(l=>{let c=au(o.node)??t,u=Wa(l,c),d=zz(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n));return qr(d).pipe(Ln())});return Z(a).pipe(qa())}));return Z(s).pipe(qa())}function Jz(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let l=au(e)??r,c=Wa(a,l),u=Hz(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i));return qr(u).pipe(Ln())});return Z(o).pipe(qa())}function eH(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Z(!0);let s=r.map(o=>{let a=Wa(o,n),l=Uz(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t));return qr(l)});return Z(s).pipe(qa(),TM(i))}function TM(n){return Oy(ht(e=>{if(Ha(e))throw CM(n,e)}),J(e=>e===!0))}function tH(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Z(!0);let s=r.map(o=>{let a=Wa(o,n),l=qz(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t));return qr(l)});return Z(s).pipe(qa(),TM(i))}var ru=class{constructor(e){this.segmentGroup=e||null}},lp=class extends Error{constructor(e){super(),this.urlTree=e}};function ja(n){return ha(new ru(n))}function nH(n){return ha(new N(4e3,!1))}function iH(n){return ha(DM(!1,3))}var F0=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new N(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Z(i);if(r.numberOfChildren>1||!r.children[me])return nH(e.redirectTo);r=r.children[me]}}applyRedirectCommands(e,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new lp(r);return r}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new $r(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new Fe(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new N(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},L0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rH(n,e,t,i,r){let s=W0(n,e,t);return s.matched?(i=kz(e,i),tH(i,e,t,r).pipe(J(o=>o===!0?s:z({},L0)))):Z(s)}function W0(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?z({},L0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||tz)(t,n,e);if(!r)return z({},L0);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?z(z({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function iM(n,e,t,i){return t.length>0&&aH(n,t,i)?{segmentGroup:new Fe(e,oH(i,new Fe(t,n.children))),slicedSegments:[]}:t.length===0&&lH(n,t,i)?{segmentGroup:new Fe(n.segments,sH(n,e,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Fe(n.segments,n.children),slicedSegments:t}}function sH(n,e,t,i,r){let s={};for(let o of i)if(up(n,t,o)&&!r[Ti(o)]){let a=new Fe([],{});s[Ti(o)]=a}return z(z({},r),s)}function oH(n,e){let t={};t[me]=e;for(let i of n)if(i.path===""&&Ti(i)!==me){let r=new Fe([],{});t[Ti(i)]=r}return t}function aH(n,e,t){return t.some(i=>up(n,e,i)&&Ti(i)!==me)}function lH(n,e,t){return t.some(i=>up(n,e,i))}function up(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function cH(n,e,t,i){return Ti(n)!==i&&(i===me||!up(e,t,n))?!1:n.path==="**"?!0:W0(e,n,t).matched}function uH(n,e,t){return e.length===0&&!n.children[t]}var V0=class{};function dH(n,e,t,i,r,s,o="emptyOnly"){return new j0(n,e,t,i,r,o,s).recognize()}var hH=31,j0=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new F0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new N(4002,!1)}recognize(){let e=iM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(t=>{let i=new nu([],Object.freeze({}),Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,{},me,this.rootComponentType,null,{}),r=new An(i,t),s=new op("",r),o=bz(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,me).pipe(Sr(i=>{if(i instanceof lp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ru?this.noMatchError(i):i}))}inheritParamsAndData(e,t){let i=e.value,r=$0(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(J(s=>s instanceof An?[s]:[]))}processChildren(e,t,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Pe(r).pipe(Tr(s=>{let o=i.children[s],a=Oz(t,s);return this.processSegmentGroup(e,a,o,s)}),Ns((s,o)=>(s.push(...o),s)),xr(null),zy(),Tt(s=>{if(s===null)return ja(i);let o=xM(s);return fH(o),Z(o)}))}processSegment(e,t,i,r,s,o){return Pe(t).pipe(Tr(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(Sr(l=>{if(l instanceof ru)return Z(null);throw l}))),Ln(a=>!!a),Sr(a=>{if(SM(a))return uH(i,r,s)?Z(new V0):ja(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return cH(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):ja(r):ja(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=r.path==="**"?rM(s):W0(t,r,s);if(!a)return ja(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hH&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,c);return this.applyRedirects.lineralizeSegments(r,d).pipe(Tt(h=>this.processSegment(e,i,t,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){let o;return i.path==="**"?(o=Z(rM(r)),t.children={}):o=rH(t,i,r,e,this.urlSerializer),o.pipe(et(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(et(({routes:l})=>{let c=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new nu(u,h,Object.freeze(z({},this.urlTree.queryParams)),this.urlTree.fragment,gH(i),Ti(i),i.component??i._loadedComponent??null,i,mH(i)),{segmentGroup:p,slicedSegments:g}=iM(t,u,d,l);if(g.length===0&&p.hasChildren())return this.processChildren(c,l,p).pipe(J(y=>y===null?null:new An(f,y)));if(l.length===0&&g.length===0)return Z(new An(f,[]));let m=Ti(i)===s;return this.processSegment(c,l,p,g,m?me:s,!0).pipe(J(y=>new An(f,y instanceof An?[y]:[])))}))):ja(t)))}getChildConfig(e,t,i){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):eH(e,t,i,this.urlSerializer).pipe(Tt(r=>r?this.configLoader.loadChildren(e,t).pipe(ht(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):iH(t))):Z({routes:[],injector:e})}};function fH(n){n.sort((e,t)=>e.value.outlet===me?-1:t.value.outlet===me?1:e.value.outlet.localeCompare(t.value.outlet))}function pH(n){let e=n.value.routeConfig;return e&&e.path===""}function xM(n){let e=[],t=new Set;for(let i of n){if(!pH(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=xM(i.children);e.push(new An(i.value,r))}return e.filter(i=>!t.has(i))}function gH(n){return n.data||{}}function mH(n){return n.resolve||{}}function rM(n){return{matched:!0,parameters:n.length>0?oM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function yH(n,e,t,i,r,s){return Tt(o=>dH(n,e,t,i,o.extractedUrl,r,s).pipe(J(({state:a,tree:l})=>Me(z({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function vH(n,e){return Tt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Z(t);let s=r.map(c=>c.route),o=new Set(s),a=AM(s[0].parent).slice(1),l=0;return Pe(a).pipe(Tr(c=>o.has(c)?_H(c,i,n,e):(c.data=$0(c,c.parent,n).resolve,Z(void 0))),ht(()=>l++),pa(1),Tt(c=>l===a.length?Z(t):pn))})}function AM(n){let e=n.children.map(t=>AM(t)).flat();return[n,...e]}function _H(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!wM(r)&&(s[su]=r.title),bH(s,n,e,i).pipe(J(o=>(n._resolvedData=o,n.data=$0(n,n.parent,t).resolve,null)))}function bH(n,e,t,i){let r=m0(n);if(r.length===0)return Z({});let s={};return Pe(r).pipe(Tt(o=>wH(n[o],e,t,i).pipe(Ln(),ht(a=>{s[o]=a}))),pa(1),$y(s),Sr(o=>SM(o)?pn:ha(o)))}function wH(n,e,t,i){let r=au(e)??i,s=Wa(n,r),o=s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t));return qr(o)}function p0(n){return et(e=>{let t=n(e);return t?Pe(t).pipe(J(()=>e)):Z(e)})}var MM=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===me);return r}getResolvedTitleForRoute(i){return i.data[su]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:()=>(()=>W(EH))(),providedIn:"root"});let n=e;return n})(),EH=(()=>{let e=class e extends MM{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(O(u0))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),G0=new G("",{providedIn:"root",factory:()=>({})}),K0=new G("ROUTES"),CH=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=W(q_)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Z(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=qr(i.loadComponent()).pipe(J(PM),ht(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Ar(()=>{this.componentLoaders.delete(i)})),s=new la(r,()=>new vt).pipe(aa());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=DH(r,this.compiler,i,this.onLoadEndListener).pipe(Ar(()=>{this.childrenLoaders.delete(r)})),a=new la(o,()=>new vt).pipe(aa());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function DH(n,e,t,i){return qr(n.loadChildren()).pipe(J(PM),Tt(r=>r instanceof Sc||Array.isArray(r)?Z(r):Pe(e.compileModuleAsync(r))),J(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(K0,[],{optional:!0,self:!0}).flat()),{routes:o.map(q0),injector:s}}))}function IH(n){return n&&typeof n=="object"&&"default"in n}function PM(n){return IH(n)?n.default:n}var Q0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:()=>(()=>W(SH))(),providedIn:"root"});let n=e;return n})(),SH=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),TH=new G("");var xH=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new vt,this.transitionAbortSubject=new vt,this.configLoader=W(CH),this.environmentInjector=W(mn),this.urlSerializer=W(U0),this.rootContexts=W(cp),this.location=W(Vc),this.inputBindingEnabled=W(H0,{optional:!0})!==null,this.titleStrategy=W(MM),this.options=W(G0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=W(Q0),this.createViewTransition=W(TH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let i=s=>this.events.next(new D0(s)),r=s=>this.events.next(new I0(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Me(z(z({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Lt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Qc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pt(o=>o.id!==0),J(o=>Me(z({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),et(o=>{this.currentTransition=o;let a=!1,l=!1;return Z(o).pipe(ht(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Me(z({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),et(c=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new oo(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),pn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(et(h=>{let f=this.transitions?.getValue();return this.events.next(new Zc(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?pn:Promise.resolve(h)}),yH(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),ht(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Me(z({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new ip(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=c,y=new Zc(h,this.urlSerializer.serialize(f),p,g);this.events.next(y);let b=_M(f,this.rootComponentType).snapshot;return this.currentTransition=o=Me(z({},c),{targetSnapshot:b,urlAfterRedirects:f,extras:Me(z({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Z(o)}else{let h="";return this.events.next(new oo(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),pn}}),ht(c=>{let u=new b0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),J(c=>(this.currentTransition=o=Me(z({},c),{guards:Fz(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Wz(this.environmentInjector,c=>this.events.next(c)),ht(c=>{if(o.guardsResult=c.guardsResult,Ha(c.guardsResult))throw CM(this.urlSerializer,c.guardsResult);let u=new w0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Pt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",3),!1)),p0(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(ht(u=>{let d=new E0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),et(u=>{let d=!1;return Z(u).pipe(vH(this.paramsInheritanceStrategy,this.environmentInjector),ht({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",2)}}))}),ht(u=>{let d=new C0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),p0(c=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ht(f=>{d.component=f}),J(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Nh(u(c.targetSnapshot.root)).pipe(xr(),ni(1))}),p0(()=>this.afterPreactivation()),et(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?Pe(d).pipe(J(()=>o)):Z(o)}),J(c=>{let u=xz(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Me(z({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),ht(()=>{this.events.next(new eu)}),Nz(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ni(1),ht({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),qy(this.transitionAbortSubject.pipe(ht(c=>{throw c}))),Ar(()=>{if(!a&&!l){let c="";this.cancelNavigationTransition(o,c,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Sr(c=>{if(l=!0,IM(c))this.events.next(new Hr(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Pz(c)?this.events.next(new tu(c.url)):o.resolve(!1);else{this.events.next(new Jc(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(c))}catch(u){o.reject(u)}}return pn}))}))}cancelNavigationTransition(i,r,s){let o=new Hr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function AH(n){return n!==Qc}var MH=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:()=>(()=>W(PH))(),providedIn:"root"});let n=e;return n})(),B0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},PH=(()=>{let e=class e extends B0{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ma(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),RM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:()=>(()=>W(RH))(),providedIn:"root"});let n=e;return n})(),RH=(()=>{let e=class e extends RM{constructor(){super(...arguments),this.location=W(Vc),this.urlSerializer=W(U0),this.options=W(G0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=W(Q0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $r,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=_M(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Zc)this.stateMemento=this.createStateMemento();else if(i instanceof oo)this.rawUrlTree=r.initialUrl;else if(i instanceof ip){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof eu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Hr&&(i.code===3||i.code===2)?this.restoreHistory(r):i instanceof Jc?this.restoreHistory(r,!0):i instanceof zr&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=z(z({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=z(z({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ma(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Gc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Gc||{});function kH(n,e){n.events.pipe(Pt(t=>t instanceof zr||t instanceof Hr||t instanceof Jc||t instanceof oo),J(t=>t instanceof zr||t instanceof oo?Gc.COMPLETE:(t instanceof Hr?t.code===0||t.code===1:!1)?Gc.REDIRECTING:Gc.FAILED),Pt(t=>t!==Gc.REDIRECTING),ni(1)).subscribe(()=>{e()})}function OH(n){throw n}var NH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},FH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Bt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=W(Nf),this.stateManager=W(RM),this.options=W(G0,{optional:!0})||{},this.pendingTasks=W(Na),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=W(xH),this.urlSerializer=W(U0),this.location=W(Vc),this.urlHandlingStrategy=W(Q0),this._events=new vt,this.errorHandler=this.options.errorHandler||OH,this.navigated=!1,this.routeReuseStrategy=W(MH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=W(K0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!W(H0,{optional:!0}),this.eventsSubscription=new yt,this.isNgZoneEnabled=W(Ne)instanceof Ne&&Ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hr&&r.code!==0&&r.code!==1)this.navigated=!0;else if(r instanceof zr)this.navigated=!0;else if(r instanceof tu){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||AH(s.source)};this.scheduleNavigation(a,Qc,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}VH(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)}))}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=z({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(q0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=z(z({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=gM(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return mM(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Ha(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Qc,null,r)}navigate(i,r={skipLocationChange:!1}){return LH(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=z({},NH):r===!1?s=z({},FH):s=r,Ha(i))return JA(this.currentUrlTree,i,s);let o=this.parseUrl(i);return JA(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.keys(i).reduce((r,s)=>{let o=i[s];return o!=null&&(r[s]=o),r},{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,f)=>{l=h,c=f});let d=this.pendingTasks.add();return kH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function LH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new N(4008,!1)}function VH(n){return!(n instanceof eu)&&!(n instanceof tu)}var xi=(()=>{let e=class e{constructor(i,r,s,o,a,l){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new vt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof zr&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let i=this.href===null?null:Ox(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(q(Bt),q(ao),h_("tabindex"),q(Fr),q($n),q(La))},e.\u0275dir=Rt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&ne("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Oc("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Br],skipLocationChange:["skipLocationChange","skipLocationChange",Br],replaceUrl:["replaceUrl","replaceUrl",Br],routerLink:"routerLink"},standalone:!0,features:[V_,kr]});let n=e;return n})();var jH=new G("");function kM(n,...e){return Ra([{provide:K0,multi:!0,useValue:n},[],{provide:ao,useFactory:BH,deps:[Bt]},{provide:Ff,multi:!0,useFactory:UH},e.map(t=>t.\u0275providers)])}function BH(n){return n.routerState.root}function UH(){let n=W(Js);return e=>{let t=n.get(jr);if(e!==t.components[0])return;let i=n.get(Bt),r=n.get($H);n.get(zH)===1&&i.initialNavigation(),n.get(HH,null,Ce.Optional)?.setUpPreloading(),n.get(jH,null,Ce.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var $H=new G("",{factory:()=>new vt}),zH=new G("",{providedIn:"root",factory:()=>1});var HH=new G("");var OM={firebase:{apiKey:"AIzaSyAG0hszH-LeA5KP1PQUYzZuPRp98ump2Ow",authDomain:"test-fb550.firebaseapp.com",databaseURL:"https://test-fb550-default-rtdb.europe-west1.firebasedatabase.app",projectId:"test-fb550",storageBucket:"test-fb550.appspot.com",messagingSenderId:"422343817880",appId:"1:422343817880:web:91df2b92b6f6663c9faeed"},production:!0,useEmulators:!1};var Ai="*";function NM(n,e=null){return{type:2,steps:n,options:e}}function Y0(n){return{type:6,styles:n,offset:null}}var Wr=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},cu=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},dp="!";function FM(n){return new N(3e3,!1)}function qH(){return new N(3100,!1)}function WH(){return new N(3101,!1)}function GH(n){return new N(3001,!1)}function KH(n){return new N(3003,!1)}function QH(n){return new N(3004,!1)}function YH(n,e){return new N(3005,!1)}function XH(){return new N(3006,!1)}function ZH(){return new N(3007,!1)}function JH(n,e){return new N(3008,!1)}function e3(n){return new N(3002,!1)}function t3(n,e,t,i,r){return new N(3010,!1)}function n3(){return new N(3011,!1)}function i3(){return new N(3012,!1)}function r3(){return new N(3200,!1)}function s3(){return new N(3202,!1)}function o3(){return new N(3013,!1)}function a3(n){return new N(3014,!1)}function l3(n){return new N(3015,!1)}function c3(n){return new N(3016,!1)}function u3(n,e){return new N(3404,!1)}function d3(n){return new N(3502,!1)}function h3(n){return new N(3503,!1)}function f3(){return new N(3300,!1)}function p3(n){return new N(3504,!1)}function g3(n){return new N(3301,!1)}function m3(n,e){return new N(3302,!1)}function y3(n){return new N(3303,!1)}function v3(n,e){return new N(3400,!1)}function _3(n){return new N(3401,!1)}function b3(n){return new N(3402,!1)}function w3(n,e){return new N(3505,!1)}function Gr(n){switch(n.length){case 0:return new Wr;case 1:return n[0];default:return new cu(n)}}function YM(n,e,t=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((h,f)=>{let p=f,g=h;if(f!=="offset")switch(p=n.normalizePropertyName(p,r),g){case dp:g=t.get(f);break;case Ai:g=i.get(f);break;default:g=n.normalizeStyleValue(f,p,g,r);break}d.set(p,g)}),u||s.push(d),a=d,o=c}),r.length)throw d3(r);return s}function vb(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&X0(t,"start",n)));break;case"done":n.onDone(()=>i(t&&X0(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&X0(t,"destroy",n)));break}}function X0(n,e,t){let i=t.totalTime,r=!!t.disabled,s=_b(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),o=n._data;return o!=null&&(s._data=o),s}function _b(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Pn(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function LM(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var E3=(()=>typeof document>"u"?null:document.documentElement)();function bb(n){let e=n.parentNode||n.host||null;return e===E3?null:e}function C3(n){return n.substring(1,6)=="ebkit"}var co=null,VM=!1;function D3(n){co||(co=I3()||{},VM=co.style?"WebkitAppearance"in co.style:!1);let e=!0;return co.style&&!C3(n)&&(e=n in co.style,!e&&VM&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in co.style)),e}function I3(){return typeof document<"u"?document.body:null}function XM(n,e){for(;e;){if(e===n)return!0;e=bb(e)}return!1}function ZM(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var wb=(()=>{let e=class e{validateStyleProperty(i){return D3(i)}matchesElement(i,r){return!1}containsElement(i,r){return XM(i,r)}getParentElement(i){return bb(i)}query(i,r,s){return ZM(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,o,a,l=[],c){return new Wr(s,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),mu=(()=>{let e=class e{};e.NOOP=new wb;let n=e;return n})(),fo=class{};var S3=1e3,JM="{{",T3="}}",e1="ng-enter",ib="ng-leave",hp="ng-trigger",yp=".ng-trigger",jM="ng-animating",rb=".ng-animating";function or(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:sb(parseFloat(e[1]),e[2])}function sb(n,e){switch(e){case"s":return n*S3;default:return n}}function vp(n,e,t){return n.hasOwnProperty("duration")?n:x3(n,e,t)}function x3(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(FM(n)),{duration:0,delay:0,easing:""};r=sb(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=sb(parseFloat(l),a[4]));let c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(qH()),a=!0),s<0&&(e.push(WH()),a=!0),a&&e.splice(l,0,FM(n))}return{duration:r,delay:s,easing:o}}function yu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function t1(n){let e=new Map;return Object.keys(n).forEach(t=>{let i=n[t];e.set(t,i)}),e}function A3(n){return n.length?n[0]instanceof Map?n:n.map(e=>t1(e)):[]}function Ka(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Mi(n,e,t){e.forEach((i,r)=>{let s=Eb(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function ho(n,e){e.forEach((t,i)=>{let r=Eb(i);n.style[r]=""})}function uu(n){return Array.isArray(n)?n.length==1?n[0]:NM(n):n}function M3(n,e,t){let i=e.params||{},r=n1(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(GH(s))})}var ob=new RegExp(`${JM}\\s*(.+?)\\s*${T3}`,"g");function n1(n){let e=[];if(typeof n=="string"){let t;for(;t=ob.exec(n);)e.push(t[1]);ob.lastIndex=0}return e}function hu(n,e,t){let i=n.toString(),r=i.replace(ob,(s,o)=>{let a=e[o];return a==null&&(t.push(KH(o)),a=""),a.toString()});return r==i?n:r}function _p(n){let e=[],t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}var P3=/-+([a-z0-9])/g;function Eb(n){return n.replace(P3,(...e)=>e[1].toUpperCase())}function R3(n,e){return n===0||e===0}function k3(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,i1(n,a)))}}return e}function Mn(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw QH(e.type)}}function i1(n,e){return window.getComputedStyle(n)[e]}var O3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),bp=class extends fo{normalizePropertyName(e,t){return Eb(e)}normalizeStyleValue(e,t,i,r){let s="",o=i.toString().trim();if(O3.has(t)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(YH(e,i))}return o+s}};var wp="*";function N3(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>F3(i,t,e)):t.push(n),t}function F3(n,e,t){if(n[0]==":"){let l=L3(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(l3(n)),e;let r=i[1],s=i[2],o=i[3];e.push(BM(r,o));let a=r==wp&&o==wp;s[0]=="<"&&!a&&e.push(BM(o,r))}function L3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(c3(n)),"* => *"}}var fp=new Set(["true","1"]),pp=new Set(["false","0"]);function BM(n,e){let t=fp.has(n)||pp.has(n),i=fp.has(e)||pp.has(e);return(r,s)=>{let o=n==wp||n==r,a=e==wp||e==s;return!o&&t&&typeof r=="boolean"&&(o=r?fp.has(n):pp.has(n)),!a&&i&&typeof s=="boolean"&&(a=s?fp.has(e):pp.has(e)),o&&a}}var r1=":self",V3=new RegExp(`s*${r1}s*,?`,"g");function s1(n,e,t,i){return new ab(n).build(e,t,i)}var UM="",ab=class{constructor(e){this._driver=e}build(e,t,i){let r=new lb(t);return this._resetContextStyleTimingState(r),Mn(this,uu(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=UM,e.collectedStyles=new Map,e.collectedStyles.set(UM,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(XH()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==0){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(a.type==1){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(ZH())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};if(i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{n1(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size){let a=_p(s.values());t.errors.push(JH(e.name,a))}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Mn(this,uu(e.animation),t);return{type:1,matchers:N3(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:uo(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Mn(this,i,t)),options:uo(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,s=e.steps.map(o=>{t.currentTime=i;let a=Mn(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:uo(e.options)}}visitAnimate(e,t){let i=$3(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Y0({});if(s.type==5)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let c={};i.easing&&(c.easing=i.easing),o=Y0(c)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Ai?i.push(a):t.errors.push(e3(a)):i.push(t1(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(JM)>=0){s=!0;break}}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(t3(l,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),t.options&&M3(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(n3()),i;let r=1,s=0,o=[],a=!1,l=!1,c=0,u=e.steps.map(y=>{let b=this._makeStyleAst(y,t),w=b.offset!=null?b.offset:U3(b.styles),C=0;return w!=null&&(s++,C=b.offset=w),l=l||C<0||C>1,a=a||C<c,c=C,o.push(C),b});l&&t.errors.push(i3()),a&&t.errors.push(r3());let d=e.steps.length,h=0;s>0&&s<d?t.errors.push(s3()):s==0&&(h=r/(d-1));let f=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((y,b)=>{let w=h>0?b==f?1:h*b:o[b],C=w*m;t.currentTime=p+g.delay+C,g.duration=C,this._validateStyleAst(y,t),y.offset=w,i.styles.push(y)}),i}visitReference(e,t){return{type:8,animation:Mn(this,uu(e.animation),t),options:uo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:uo(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:uo(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=j3(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Pn(t.collectedStyles,t.currentQuerySelector,new Map);let a=Mn(this,uu(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:uo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(o3());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:vp(e.timings,t.errors,!0);return{type:12,animation:Mn(this,uu(e.animation),t),timings:i,options:null}}};function j3(n){let e=!!n.split(/\s*,\s*/).find(t=>t==r1);return e&&(n=n.replace(V3,"")),n=n.replace(/@\*/g,yp).replace(/@\w+/g,t=>yp+"-"+t.slice(1)).replace(/:animating/g,rb),[n,e]}function B3(n){return n?yu(n):null}var lb=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function U3(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function $3(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=vp(n,e).duration;return Z0(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Z0(0,0,"");return s.dynamic=!0,s.strValue=t,s}let r=vp(t,e);return Z0(r.duration,r.delay,r.easing)}function uo(n){return n?(n=yu(n),n.params&&(n.params=B3(n.params))):n={},n}function Z0(n,e,t){return{duration:n,delay:e,easing:t}}function Cb(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var fu=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},z3=1,H3=":enter",q3=new RegExp(H3,"g"),W3=":leave",G3=new RegExp(W3,"g");function o1(n,e,t,i,r,s=new Map,o=new Map,a,l,c=[]){return new cb().buildKeyframes(n,e,t,i,r,s,o,a,l,c)}var cb=class{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new fu;let d=new ub(e,t,c,r,s,u,[]);d.options=l;let h=l.delay?or(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),Mn(this,i,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){let m=f[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,l)}return f.length?f.map(p=>p.buildKeyframes()):[Cb(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:or(hu(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime,o=i.duration!=null?or(i.duration):null,a=i.delay!=null?or(i.delay):null;return o!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Mn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==6&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ep);let o=or(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Mn(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,s=e.options&&e.options.delay?or(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Mn(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?hu(i,t.params,t.errors):i;return vp(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==5?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?or(r.delay):0;s&&(t.previousNode.type===6||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ep);let o=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,c);s&&d.delayNextStep(s),c===t.element&&(l=d.currentTimeline),Mn(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;Mn(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},Ep={},ub=class n{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ep,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Cp(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=or(i.duration)),i.delay!=null&&(r.delay=or(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=hu(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ep,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new db(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(q3,"."+this._enterClassName),e=e.replace(G3,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,e,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&a.length==0&&o.push(a3(t)),a}},Cp=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=z3,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Ai),this._currentKeyframe.set(t,Ai);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let s=r&&r.params||{},o=K3(e,this._globalTimelineStyles);for(let[a,l]of o){let c=hu(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Ai),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=Ka(a,new Map,this._backFill);c.forEach((u,d)=>{u===dp?e.add(d):u===Ai&&t.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});let s=e.size?_p(e.values()):[],o=t.size?_p(t.values()):[];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return Cb(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},db=class extends Cp{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=i+t,a=t/o,l=Ka(e[0]);l.set("offset",0),s.push(l);let c=Ka(e[0]);c.set("offset",$M(a)),s.push(c);let u=e.length-1;for(let d=1;d<=u;d++){let h=Ka(e[d]),f=h.get("offset"),p=t+f*i;h.set("offset",$M(p/o)),s.push(h)}i=o,t=0,r="",e=s}return Cb(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function $M(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function K3(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i=i||e.keys();for(let s of i)t.set(s,Ai)}else Ka(r,t)}),t}function zM(n,e,t,i,r,s,o,a,l,c,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}var J0={},Dp=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Q3(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,c,u){let d=[],h=this.ast.options&&this.ast.options.params||J0,f=a&&a.params||J0,p=this.buildStyles(i,f,d),g=l&&l.params||J0,m=this.buildStyles(r,g,d),y=new Set,b=new Map,w=new Map,C=r==="void",D={params:Y3(g,h),delay:this.ast.options?.delay},I=u?[]:o1(e,t,this.ast.animation,s,o,p,m,D,c,d),A=0;if(I.forEach($=>{A=Math.max($.duration+$.delay,A)}),d.length)return zM(t,this._triggerName,i,r,C,p,m,[],[],b,w,A,d);I.forEach($=>{let te=$.element,ae=Pn(b,te,new Set);$.preStyleProps.forEach(Xe=>ae.add(Xe));let de=Pn(w,te,new Set);$.postStyleProps.forEach(Xe=>de.add(Xe)),te!==t&&y.add(te)});let M=_p(y.values());return zM(t,this._triggerName,i,r,C,p,m,I,M,b,w,A)}};function Q3(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}function Y3(n,e){let t=yu(e);for(let i in n)n.hasOwnProperty(i)&&n[i]!=null&&(t[i]=n[i]);return t}var hb=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=yu(this.defaultParams);return Object.keys(e).forEach(s=>{let o=e[s];o!==null&&(r[s]=o)}),this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=hu(o,r,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}};function X3(n,e,t){return new fb(n,e,t)}var fb=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new hb(r.style,s,i))}),HM(this.states,"true","1"),HM(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new Dp(e,r,this.states))}),this.fallbackTransition=Z3(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Z3(n,e,t){let s={type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0};return new Dp(n,s,e)}function HM(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var J3=new fu,pb=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],s=s1(this._driver,t,i,r);if(i.length)throw h3(i);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,i){let r=e.element,s=YM(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=o1(this._driver,t,s,e1,ib,new Map,new Map,i,J3,r),o.forEach(u=>{let d=Pn(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(f3()),o=[]),r.length)throw p3(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Ai))})});let l=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=Gr(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw g3(e);return t}listen(e,t,i,r){let s=_b(t,"","","");return vb(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},qM="ng-animate-queued",e5=".ng-animate-queued",eb="ng-animate-disabled",t5=".ng-animate-disabled",n5="ng-star-inserted",i5=".ng-star-inserted",r5=[],a1={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},s5={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},li="__ng_removed",pu=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=a5(r),i){let s=yu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},du="void",tb=new pu(du),gb=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Wn(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw m3(i,t);if(i==null||i.length==0)throw y3(t);if(!l5(i))throw v3(i,t);let s=Pn(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);let a=Pn(this._engine.statesByElement,e,new Map);return a.has(t)||(Wn(e,hp),Wn(e,hp+"-"+t),a.set(t,tb)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw _3(e);return t}trigger(e,t,i,r=!0){let s=this._getTrigger(t),o=new gu(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Wn(e,hp),Wn(e,hp+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new pu(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=tb),!(c.value===du)&&l.value===c.value){if(!d5(l.params,c.params)){let g=[],m=s.matchStyles(l.value,l.params,g),y=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{ho(e,m),Mi(e,y)})}return}let h=Pn(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(l.value,c.value,e,c.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:l,toState:c,player:o,isFallbackTransition:p}),p||(Wn(e,qM),o.onStart(()=>{Ga(e,qM)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let m=this._engine.playersByElement.get(e);if(m){let y=m.indexOf(o);y>=0&&m.splice(y,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,yp,!0);i.forEach(r=>{if(r[li])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,du,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Gr(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let l=this._triggers.get(o).fallbackTransition,c=i.get(o)||tb,u=new pu(du),d=new gu(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let s=e[li];(!s||s===a1)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Wn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let l=_b(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,vb(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},mb=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new gb(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}}return t}trigger(e,t,i,r){if(gp(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!gp(t))return;let s=t[li];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Wn(e,eb)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Ga(e,eb))}removeNode(e,t,i){if(gp(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[li]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return gp(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,yp,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,rb,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gr(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[li];if(t&&t.setForRemoval){if(e[li]=a1,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(eb)&&this.markElementAsDisabled(e,!1),this.driver.query(e,t5,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Wn(r,n5)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Gr(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw b3(e)}_flushAnimations(e,t){let i=new fu,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(F=>{u.add(F);let j=this.driver.query(F,e5,!0);for(let Q=0;Q<j.length;Q++)u.add(j[Q])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=KM(h,this.collectedEnterElements),p=new Map,g=0;f.forEach((F,j)=>{let Q=e1+g++;p.set(j,Q),F.forEach(ie=>Wn(ie,Q))});let m=[],y=new Set,b=new Set;for(let F=0;F<this.collectedLeaveElements.length;F++){let j=this.collectedLeaveElements[F],Q=j[li];Q&&Q.setForRemoval&&(m.push(j),y.add(j),Q.hasAnimation?this.driver.query(j,i5,!0).forEach(ie=>y.add(ie)):b.add(j))}let w=new Map,C=KM(h,Array.from(y));C.forEach((F,j)=>{let Q=ib+g++;w.set(j,Q),F.forEach(ie=>Wn(ie,Q))}),e.push(()=>{f.forEach((F,j)=>{let Q=p.get(j);F.forEach(ie=>Ga(ie,Q))}),C.forEach((F,j)=>{let Q=w.get(j);F.forEach(ie=>Ga(ie,Q))}),m.forEach(F=>{this.processLeaveNode(F)})});let D=[],I=[];for(let F=this._namespaceList.length-1;F>=0;F--)this._namespaceList[F].drainQueuedTransitions(t).forEach(Q=>{let ie=Q.player,Ze=Q.element;if(D.push(ie),this.collectedEnterElements.length){let Gt=Ze[li];if(Gt&&Gt.setForMove){if(Gt.previousTriggersValues&&Gt.previousTriggersValues.has(Q.triggerName)){let Ms=Gt.previousTriggersValues.get(Q.triggerName),Nn=this.statesByElement.get(Q.element);if(Nn&&Nn.has(Q.triggerName)){let oh=Nn.get(Q.triggerName);oh.value=Ms,Nn.set(Q.triggerName,oh)}}ie.destroy();return}}let sn=!d||!this.driver.containsElement(d,Ze),mt=w.get(Ze),fn=p.get(Ze),Ve=this._buildInstruction(Q,i,fn,mt,sn);if(Ve.errors&&Ve.errors.length){I.push(Ve);return}if(sn){ie.onStart(()=>ho(Ze,Ve.fromStyles)),ie.onDestroy(()=>Mi(Ze,Ve.toStyles)),r.push(ie);return}if(Q.isFallbackTransition){ie.onStart(()=>ho(Ze,Ve.fromStyles)),ie.onDestroy(()=>Mi(Ze,Ve.toStyles)),r.push(ie);return}let Dr=[];Ve.timelines.forEach(Gt=>{Gt.stretchStartingKeyframe=!0,this.disabledNodes.has(Gt.element)||Dr.push(Gt)}),Ve.timelines=Dr,i.append(Ze,Ve.timelines);let As={instruction:Ve,player:ie,element:Ze};o.push(As),Ve.queriedElements.forEach(Gt=>Pn(a,Gt,[]).push(ie)),Ve.preStyleProps.forEach((Gt,Ms)=>{if(Gt.size){let Nn=l.get(Ms);Nn||l.set(Ms,Nn=new Set),Gt.forEach((oh,Ey)=>Nn.add(Ey))}}),Ve.postStyleProps.forEach((Gt,Ms)=>{let Nn=c.get(Ms);Nn||c.set(Ms,Nn=new Set),Gt.forEach((oh,Ey)=>Nn.add(Ey))})});if(I.length){let F=[];I.forEach(j=>{F.push(w3(j.triggerName,j.errors))}),D.forEach(j=>j.destroy()),this.reportError(F)}let A=new Map,M=new Map;o.forEach(F=>{let j=F.element;i.has(j)&&(M.set(j,j),this._beforeAnimationBuild(F.player.namespaceId,F.instruction,A))}),r.forEach(F=>{let j=F.element;this._getPreviousPlayers(j,!1,F.namespaceId,F.triggerName,null).forEach(ie=>{Pn(A,j,[]).push(ie),ie.destroy()})});let $=m.filter(F=>QM(F,l,c)),te=new Map;GM(te,this.driver,b,c,Ai).forEach(F=>{QM(F,l,c)&&$.push(F)});let de=new Map;f.forEach((F,j)=>{GM(de,this.driver,new Set(F),l,dp)}),$.forEach(F=>{let j=te.get(F),Q=de.get(F);te.set(F,new Map([...j?.entries()??[],...Q?.entries()??[]]))});let Xe=[],Wt=[],Oe={};o.forEach(F=>{let{element:j,player:Q,instruction:ie}=F;if(i.has(j)){if(u.has(j)){Q.onDestroy(()=>Mi(j,ie.toStyles)),Q.disabled=!0,Q.overrideTotalTime(ie.totalTime),r.push(Q);return}let Ze=Oe;if(M.size>1){let mt=j,fn=[];for(;mt=mt.parentNode;){let Ve=M.get(mt);if(Ve){Ze=Ve;break}fn.push(mt)}fn.forEach(Ve=>M.set(Ve,Ze))}let sn=this._buildAnimation(Q.namespaceId,ie,A,s,de,te);if(Q.setRealPlayer(sn),Ze===Oe)Xe.push(Q);else{let mt=this.playersByElement.get(Ze);mt&&mt.length&&(Q.parentPlayer=Gr(mt)),r.push(Q)}}else ho(j,ie.fromStyles),Q.onDestroy(()=>Mi(j,ie.toStyles)),Wt.push(Q),u.has(j)&&r.push(Q)}),Wt.forEach(F=>{let j=s.get(F.element);if(j&&j.length){let Q=Gr(j);F.setRealPlayer(Q)}}),r.forEach(F=>{F.parentPlayer?F.syncPlayerEvents(F.parentPlayer):F.destroy()});for(let F=0;F<m.length;F++){let j=m[F],Q=j[li];if(Ga(j,ib),Q&&Q.hasAnimation)continue;let ie=[];if(a.size){let sn=a.get(j);sn&&sn.length&&ie.push(...sn);let mt=this.driver.query(j,rb,!0);for(let fn=0;fn<mt.length;fn++){let Ve=a.get(mt[fn]);Ve&&Ve.length&&ie.push(...Ve)}}let Ze=ie.filter(sn=>!sn.destroyed);Ze.length?c5(this,j,Ze):this.processLeaveNode(j)}return m.length=0,Xe.forEach(F=>{this.players.push(F),F.onDone(()=>{F.destroy();let j=this.players.indexOf(F);this.players.splice(j,1)}),F.play()}),Xe}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==du;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){let r=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,u=c!==s,d=Pn(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}ho(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){let a=t.triggerName,l=t.element,c=[],u=new Set,d=new Set,h=t.timelines.map(p=>{let g=p.element;u.add(g);let m=g[li];if(m&&m.removedBeforeQueried)return new Wr(p.duration,p.delay);let y=g!==l,b=u5((i.get(g)||r5).map(A=>A.getRealPlayer())).filter(A=>{let M=A;return M.element?M.element===g:!1}),w=s.get(g),C=o.get(g),D=YM(this._normalizer,p.keyframes,w,C),I=this._buildPlayer(p,D,b);if(p.subTimeline&&r&&d.add(g),y){let A=new gu(e,a,g);A.setRealPlayer(I),c.push(A)}return I});c.forEach(p=>{Pn(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>o5(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>Wn(p,jM));let f=Gr(h);return f.onDestroy(()=>{u.forEach(p=>Ga(p,jM)),Mi(l,t.toStyles)}),d.forEach(p=>{Pn(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Wr(e.duration,e.delay)}},gu=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Wr,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>vb(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Pn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function o5(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function a5(n){return n??null}function gp(n){return n&&n.nodeType===1}function l5(n){return n=="start"||n=="done"}function WM(n,e){let t=n.style.display;return n.style.display=e??"none",t}function GM(n,e,t,i,r){let s=[];t.forEach(l=>s.push(WM(l)));let o=[];i.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let h=e.computeStyle(c,d,r);u.set(d,h),(!h||h.length==0)&&(c[li]=s5,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>WM(l,s[a++])),o}function KM(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let l=s.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:r.has(c)?l=i:l=o(c),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==i&&t.get(l).push(a)}),t}function Wn(n,e){n.classList?.add(e)}function Ga(n,e){n.classList?.remove(e)}function c5(n,e,t){Gr(t).onDone(()=>n.processLeaveNode(e))}function u5(n){let e=[];return l1(n,e),e}function l1(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof cu?l1(i.players,e):e.push(i)}}function d5(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function QM(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}var Qa=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new mb(e.body,t,i),this._timelineEngine=new pb(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let l=[],c=[],u=s1(this._driver,s,l,c);if(l.length)throw u3(r,l);c.length&&void 0,a=X3(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[s,o]=LM(i),a=r;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if(i.charAt(0)=="@"){let[o,a]=LM(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function h5(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=nb(e[0]),e.length>1&&(i=nb(e[e.length-1]))):e instanceof Map&&(t=nb(e)),t||i?new f5(n,t,i):null}var f5=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._startStyles=r,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(i);o||e.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Mi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Mi(this._element,this._initialStyles),this._endStyles&&(Mi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ho(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ho(this._element,this._endStyles),this._endStyles=null),Mi(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let n=e;return n})();function nb(n){let e=null;return n.forEach((t,i)=>{p5(i)&&(e=e||new Map,e.set(i,t))}),e}function p5(n){return n==="display"||n==="position"}var Ip=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:i1(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Sp=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return XM(e,t)}getParentElement(e){return bb(e)}query(e,t,i){return ZM(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};s&&(l.easing=s);let c=new Map,u=o.filter(f=>f instanceof Ip);R3(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>c.set(g,p))});let d=A3(t).map(f=>Ka(f));d=k3(e,d,c);let h=h5(e,d);return new Ip(e,d,l,h)}};var mp="@",c1="@.disabled",Tp=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==mp&&t==c1?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},yb=class extends Tp{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==mp?t.charAt(1)=="."&&t==c1?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==mp){let r=g5(e),s=t.slice(1),o="";return s.charAt(0)!=mp&&([s,o]=m5(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,i,a)})}return this.delegate.listen(e,t,i)}};function g5(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function m5(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var xp=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,s)=>{let o=s?.parentNode(r);o&&s.removeChild(o,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let d=()=>c.delete(r);u=new Tp(i,r,this.engine,d),c.set(r,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return t.data.animation.forEach(a),new yb(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var v5=(()=>{let e=class e extends Qa{constructor(i,r,s,o){super(i,r,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(O(jt),O(mu),O(fo),O(jr))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function _5(){return new bp}function b5(n,e,t){return new xp(n,e,t)}var u1=[{provide:fo,useFactory:_5},{provide:Qa,useClass:v5},{provide:Gs,useFactory:b5,deps:[Gf,Qa,Ne]}],w5=[{provide:mu,useFactory:()=>new Sp},{provide:b_,useValue:"BrowserAnimations"},...u1],ese=[{provide:mu,useClass:wb},{provide:b_,useValue:"NoopAnimations"},...u1];function Db(){return[...w5]}var d1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-navbar"]],standalone:!0,features:[fe],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-lg"],[1,"container"],[1,"col-4","d-flex","justify-content-start"],[1,"navbar-nav","menu"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link","active"],["routerLink","/about",1,"nav-link"],["routerLink","/contact",1,"nav-link"],[1,"col-4","d-flex","justify-content-center"],["routerLink","/",1,"title"],[1,"col-4","d-flex","justify-content-end"],["routerLink","/",1,"nav-link"],["routerLink","/login",1,"btn","btn-light"]],template:function(r,s){r&1&&(v(0,"nav",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),E(6,"Home"),_()(),v(7,"li",4)(8,"a",6),E(9,"About"),_()(),v(10,"li",4)(11,"a",7),E(12,"Contact"),_()()()(),v(13,"div",8)(14,"a",9),E(15,"EDUCLASH"),_()(),v(16,"div",10)(17,"ul",3)(18,"li",4)(19,"a",11),E(20,"Testo 1"),_()(),v(21,"li",4)(22,"a",11),E(23,"Testo 2"),_()(),v(24,"li",4)(25,"button",12),E(26,"Login"),_()()()()()())},dependencies:[ge,xi],styles:[".navbar[_ngcontent-%COMP%]{background:white}.navbar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:25px 0;border-bottom:1px solid purple}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#4a148c}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px}.navbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#4a148c;font-size:40px;cursor:pointer;text-decoration:none;font-weight:600}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{list-style:none;display:flex;gap:25px}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0;margin:0}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#4a148c;transition:color .3s;font-size:20px}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:purple;font-weight:700}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:2px solid #4a148c;color:#4a148c;font-size:18px;background-color:transparent}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(to bottom,#4a148c,purple);font-weight:700;color:#fff}"]});let n=e;return n})();var h1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-footer"]],standalone:!0,features:[fe],decls:59,vars:1,consts:[[1,"footer"],[1,"container"],[1,"row"],[1,"col-4"],[1,"ms-4"],[1,"d-flex","mt-5","link"],["routerLink","/",1,"me-5"],["routerLink","/"],[1,"d-flex","mt-3","link"],["routerLink","/privacy"],[1,"ms-4","mt-5","newsletter"],[1,"mb-5"],[1,"d-flex"],["type","text","maxlength","500","placeholder","Email address"],[1,"btn","btn-light","ms-3"],[1,"col-4","logo"],[1,"d-flex","mt-5","contacts"],[1,"me-5"],[1,"d-flex","mt-3","contacts"],[1,"ms-4","social","d-flex","mt-5"],["routerLink","/",1,"me-4"],[1,"bi","bi-facebook","fs-4"],[1,"bi","bi-instagram","fs-4"],[1,"bi","bi-twitter","fs-4"],[1,"bi","bi-linkedin","fs-4"],[1,"ms-4","mt-4"]],template:function(r,s){r&1&&(v(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),E(6,"Educlah"),_(),v(7,"div",5)(8,"a",6),E(9,"Testo 1"),_(),v(10,"a",7),E(11,"Testo 2"),_()(),v(12,"div",8)(13,"a",6),E(14,"Testo 3"),_(),v(15,"a",9),E(16,"Privacy Policy"),_()()(),v(17,"div",10)(18,"h2",11),E(19,"Newsletter our"),_(),v(20,"div",12),V(21,"input",13),v(22,"button",14),E(23,"go"),_()()()(),v(24,"div",15)(25,"p"),E(26," Educlash - Lorem ipsum dolor sit amet consectetur, adipisicing elit. "),_(),v(27,"h1"),E(28,"Educlash"),_(),v(29,"p"),E(30," Educlash - Lorem ipsum dolor sit amet consectetur, adipisicing elit. "),_()(),v(31,"div",3)(32,"div",4)(33,"h2"),E(34,"Contacts"),_(),v(35,"div",16)(36,"p",17),E(37,"IT: +39 123456789"),_(),v(38,"p"),E(39,"www.educlash.it"),_()(),v(40,"div",18)(41,"p",17),E(42),_(),v(43,"p"),E(44,"Italy, Rome"),_()()(),v(45,"div",19)(46,"a",20),V(47,"i",21),_(),v(48,"a",20),V(49,"i",22),_(),v(50,"a",20),V(51,"i",23),_(),v(52,"a",7),V(53,"i",24),_()(),v(54,"div",25)(55,"p"),E(56," Lorem ipsum dolor "),_(),v(57,"p"),E(58," \xA9 2023 Educlash "),_()()()()()()),r&2&&(k(42),vn("educlash","@","gmail.com"))},dependencies:[ge,xi],styles:[".footer[_ngcontent-%COMP%]{display:flex;background-color:#fff;padding:70px 20px;color:#4a148c;position:relative;width:100%;bottom:0;cursor:pointer}.footer[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px;text-decoration:none;color:#4a148c}.footer[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:purple;font-weight:700}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:3.5rem;margin-bottom:0;padding-left:1.5rem;border:2px solid #4a148c;border-radius:.75rem;background-color:transparent;color:#4a148c;font-size:18px}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#4a148c}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid purple}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border-radius:.75rem;background:linear-gradient(to bottom,#4a148c,purple);color:#fff;font-size:20px;text-transform:uppercase;padding-left:14px;padding-right:14px}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);font-weight:700}.footer[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{border-left:1px dashed purple;border-right:1px dashed purple;text-align:center}.footer[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:80px 0}.footer[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}.footer[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#4a148c;margin:0}.footer[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:purple;font-weight:700}.footer[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:2px solid #4a148c;padding:8px 14px;border-radius:13px;color:#4a148c}.footer[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:linear-gradient(to bottom,#4a148c,purple);color:#fff}"]});let n=e;return n})();var f1=(()=>{let e=class e{ngOnInit(){localStorage.clear()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[fe],decls:33,vars:0,consts:[[1,"landing-page"],[1,"header"],[1,"section","features"],[1,"feature"],[1,"fas","fa-graduation-cap"],[1,"fas","fa-lightbulb"],[1,"section","mission"],[1,"section","call-to-action"],[1,"btn-primary"]],template:function(r,s){r&1&&(V(0,"app-navbar"),v(1,"section",0)(2,"div",1)(3,"h1"),E(4,"Welcome to Our Project"),_(),v(5,"p"),E(6,"Empowering Young Entrepreneurs"),_()(),v(7,"div",2)(8,"div",3),V(9,"i",4),v(10,"h2"),E(11,"Free for Schools"),_(),v(12,"p"),E(13,"We offer our program free of charge to schools."),_()(),v(14,"div",3),V(15,"i",5),v(16,"h2"),E(17,"Incubating Innovation"),_(),v(18,"p"),E(19,'Every class becomes a "mini startup" to promote creativity and entrepreneurship.'),_()()(),v(20,"div",6)(21,"h2"),E(22,"Our Mission"),_(),v(23,"p"),E(24," We are dedicated to nurturing the next generation of entrepreneurs by providing educational resources, mentorship, and a platform for young minds to turn their ideas into reality. "),_()(),v(25,"div",7)(26,"h2"),E(27,"Join Us Today!"),_(),v(28,"p"),E(29,"Unlock the potential of your students and schools."),_(),v(30,"button",8),E(31,"Get Started"),_()()(),V(32,"app-footer"))},dependencies:[d1,ge,h1],styles:[".landing-page[_ngcontent-%COMP%]{background-color:#fff;text-align:center;padding:40px}.landing-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px}.landing-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#777}.landing-page[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-top:40px}.landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px}.landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{text-align:left}.landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px;color:#4a148c}.landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}.landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#777}.landing-page[_ngcontent-%COMP%]   .section.mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:20px}.landing-page[_ngcontent-%COMP%]   .section.mission[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#777}.landing-page[_ngcontent-%COMP%]   .section.call-to-action[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px}.landing-page[_ngcontent-%COMP%]   .section.call-to-action[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#777;margin-bottom:20px}.landing-page[_ngcontent-%COMP%]   .section.call-to-action[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#4a148c;color:#fff;padding:10px 20px;font-size:1.2rem;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.landing-page[_ngcontent-%COMP%]   .section.call-to-action[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#7b1fa2}"]});let n=e;return n})();var E1=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(q(Fr),q($n))},e.\u0275dir=Rt({type:e});let n=e;return n})(),E5=(()=>{let e=class e extends E1{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ma(e)))(s||e)}})(),e.\u0275dir=Rt({type:e,features:[ir]});let n=e;return n})(),C1=new G("NgValueAccessor");var C5={provide:C1,useExisting:Zs(()=>Kr),multi:!0};function D5(){let n=sr()?sr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var I5=new G("CompositionEventMode"),Kr=(()=>{let e=class e extends E1{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!D5())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(q(Fr),q($n),q(I5,8))},e.\u0275dir=Rt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&ne("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Nc([C5]),ir]});let n=e;return n})();function S5(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Sb=new G("NgValidators"),D1=new G("NgAsyncValidators");function T5(n){return S5(n.value)?{required:!0}:null}function p1(n){return null}function I1(n){return n!=null}function S1(n){return eo(n)?Pe(n):n}function T1(n){let e={};return n.forEach(t=>{e=t!=null?z(z({},e),t):e}),Object.keys(e).length===0?null:e}function x1(n,e){return e.map(t=>t(n))}function x5(n){return!n.validate}function A1(n){return n.map(e=>x5(e)?e:t=>e.validate(t))}function A5(n){if(!n)return null;let e=n.filter(I1);return e.length==0?null:function(t){return T1(x1(t,e))}}function Tb(n){return n!=null?A5(A1(n)):null}function M5(n){if(!n)return null;let e=n.filter(I1);return e.length==0?null:function(t){let i=x1(t,e).map(S1);return Uy(i).pipe(J(T1))}}function xb(n){return n!=null?M5(A1(n)):null}function g1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function P5(n){return n._rawValidators}function R5(n){return n._rawAsyncValidators}function Ib(n){return n?Array.isArray(n)?n:[n]:[]}function Mp(n,e){return Array.isArray(n)?n.includes(e):n===e}function m1(n,e){let t=Ib(e);return Ib(n).forEach(r=>{Mp(t,r)||t.push(r)}),t}function y1(n,e){return Ib(e).filter(t=>!Mp(n,t))}var Pp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Tb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Xa=class extends Pp{get formDirective(){return null}get path(){return null}},wu=class extends Pp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Rp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},k5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Tse=Me(z({},k5),{"[class.ng-submitted]":"isSubmitted"}),Za=(()=>{let e=class e extends Rp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(q(wu,2))},e.\u0275dir=Rt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Rf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[ir]});let n=e;return n})(),Np=(()=>{let e=class e extends Rp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(q(Xa,10))},e.\u0275dir=Rt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Rf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[ir]});let n=e;return n})();var vu="VALID",Ap="INVALID",Ya="PENDING",_u="DISABLED";function M1(n){return(Fp(n)?n.validators:n)||null}function O5(n){return Array.isArray(n)?Tb(n):n||null}function P1(n,e){return(Fp(e)?e.asyncValidators:n)||null}function N5(n){return Array.isArray(n)?xb(n):n||null}function Fp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function F5(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new N(1e3,"");if(!i[t])throw new N(1001,"")}function L5(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new N(1002,"")})}var kp=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===vu}get invalid(){return this.status===Ap}get pending(){return this.status==Ya}get disabled(){return this.status===_u}get enabled(){return this.status!==_u}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(m1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(m1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(y1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(y1(e,this._rawAsyncValidators))}hasValidator(e){return Mp(this._rawValidators,e)}hasAsyncValidator(e){return Mp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ya,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=_u,this.errors=null,this._forEachChild(i=>{i.disable(Me(z({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Me(z({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vu,this._forEachChild(i=>{i.enable(Me(z({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Me(z({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===vu||this.status===Ya)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?_u:vu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ya,this._hasOwnPendingAsyncValidator=!0;let t=S1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Vt,this.statusChanges=new Vt}_calculateStatus(){return this._allControlsDisabled()?_u:this.errors?Ap:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ya)?Ya:this._anyControlsHaveStatus(Ap)?Ap:vu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=O5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=N5(this._rawAsyncValidators)}},Op=class extends kp{constructor(e,t,i){super(M1(t),P1(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){L5(this,!0,e),Object.keys(e).forEach(i=>{F5(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ab=new G("CallSetDisabledState",{providedIn:"root",factory:()=>Mb}),Mb="always";function V5(n,e){return[...e.path,n]}function R1(n,e,t=Mb){k1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),B5(n,e),$5(n,e),U5(n,e),j5(n,e)}function v1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function j5(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function k1(n,e){let t=P5(n);e.validator!==null?n.setValidators(g1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=R5(n);e.asyncValidator!==null?n.setAsyncValidators(g1(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();v1(e._rawValidators,r),v1(e._rawAsyncValidators,r)}function B5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&O1(n,e)})}function U5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&O1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function O1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $5(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function z5(n,e){n==null,k1(n,e)}function H5(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function q5(n){return Object.getPrototypeOf(n.constructor)===E5}function W5(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function G5(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Kr?t=s:q5(s)?i=s:r=s}),r||i||t||null}var K5={provide:Xa,useExisting:Zs(()=>Eu)},bu=(()=>Promise.resolve())(),Eu=(()=>{let e=class e extends Xa{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Vt,this.form=new Op({},Tb(i),xb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){bu.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),R1(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){bu.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){bu.then(()=>{let r=this._findContainer(i.path),s=new Op({});z5(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){bu.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){bu.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,W5(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(q(Sb,10),q(D1,10),q(Ab,8))},e.\u0275dir=Rt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&ne("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Nc([K5]),ir]});let n=e;return n})();function _1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function b1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Q5=class extends kp{constructor(e=null,t,i){super(M1(t),P1(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(b1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){b1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Y5={provide:wu,useExisting:Zs(()=>po)},w1=(()=>Promise.resolve())(),po=(()=>{let e=class e extends wu{constructor(i,r,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Q5,this._registered=!1,this.name="",this.update=new Vt,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=G5(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),H5(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){R1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){w1.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Br(r);w1.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?V5(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(q(Xa,9),q(Sb,10),q(D1,10),q(C1,10),q(Oa,8),q(Ab,8))},e.\u0275dir=Rt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Nc([Y5]),ir,kr]});let n=e;return n})(),Lp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Rt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var X5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Yt({});let n=e;return n})();var Z5=(()=>{let e=class e{constructor(){this._validator=p1}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):p1,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Rt({type:e,features:[kr]});let n=e;return n})();var J5={provide:Sb,useExisting:Zs(()=>Cu),multi:!0};var Cu=(()=>{let e=class e extends Z5{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Br,this.createValidator=i=>T5}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Ma(e)))(s||e)}})(),e.\u0275dir=Rt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&Oc("required",s._enabled?"":null)},inputs:{required:"required"},features:[Nc([J5]),ir]});let n=e;return n})();var eq=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Yt({imports:[X5]});let n=e;return n})();var Ja=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Ab,useValue:i.callSetDisabledState??Mb}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Xt({type:e}),e.\u0275inj=Yt({imports:[eq]});let n=e;return n})();var tq="firebase",nq="10.7.0";Kt.registerVersion(tq,nq,"app-compat");var iq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ui={},B,Jb=Jb||{},oe=iq||self;function Xp(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function Lu(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function rq(n){return Object.prototype.hasOwnProperty.call(n,Rb)&&n[Rb]||(n[Rb]=++sq)}var Rb="closure_uid_"+(1e9*Math.random()>>>0),sq=0;function oq(n,e,t){return n.call.apply(n.bind,arguments)}function aq(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Jt(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Jt=oq:Jt=aq,Jt.apply(null,arguments)}function Vp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Ot(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Qr(){this.s=this.s,this.o=this.o}var lq=0;Qr.prototype.s=!1;Qr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),lq!=0)&&rq(this)};Qr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var G1=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function ew(n){let e=n.length;if(0<e){let t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function N1(n,e){for(let t=1;t<arguments.length;t++){let i=arguments[t];if(Xp(i)){let r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function en(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}en.prototype.h=function(){this.defaultPrevented=!0};var cq=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{let t=()=>{};oe.addEventListener("test",t,e),oe.removeEventListener("test",t,e)}catch{}return n}();function Au(n){return/^[\s\xa0]*$/.test(n)}function Zp(){var n=oe.navigator;return n&&(n=n.userAgent)?n:""}function Pi(n){return Zp().indexOf(n)!=-1}function tw(n){return tw[" "](n),n}tw[" "]=function(){};function uq(n,e){var t=Zq;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var dq=Pi("Opera"),il=Pi("Trident")||Pi("MSIE"),K1=Pi("Edge"),Lb=K1||il,Q1=Pi("Gecko")&&!(Zp().toLowerCase().indexOf("webkit")!=-1&&!Pi("Edge"))&&!(Pi("Trident")||Pi("MSIE"))&&!Pi("Edge"),hq=Zp().toLowerCase().indexOf("webkit")!=-1&&!Pi("Edge");function Y1(){var n=oe.document;return n?n.documentMode:void 0}var Vb;e:{if(jp="",Bp=function(){var n=Zp();if(Q1)return/rv:([^\);]+)(\)|;)/.exec(n);if(K1)return/Edge\/([\d\.]+)/.exec(n);if(il)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(hq)return/WebKit\/(\S+)/.exec(n);if(dq)return/(?:Version)[ \/]?(\S+)/.exec(n)}(),Bp&&(jp=Bp?Bp[1]:""),il&&(Up=Y1(),Up!=null&&Up>parseFloat(jp))){Vb=String(Up);break e}Vb=jp}var jp,Bp,Up,jb;oe.document&&il?(kb=Y1(),jb=kb||parseInt(Vb,10)||void 0):jb=void 0;var kb,fq=jb;function Mu(n,e){if(en.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Q1){e:{try{tw(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:pq[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Mu.$.h.call(this)}}Ot(Mu,en);var pq={2:"touch",3:"pen",4:"mouse"};Mu.prototype.h=function(){Mu.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Vu="closure_listenable_"+(1e6*Math.random()|0),gq=0;function mq(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++gq,this.fa=this.ia=!1}function Jp(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function nw(n,e,t){for(let i in n)e.call(t,n[i],i,n)}function yq(n,e){for(let t in n)e.call(void 0,n[t],t,n)}function X1(n){let e={};for(let t in n)e[t]=n[t];return e}var F1="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z1(n,e){let t,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(t in i)n[t]=i[t];for(let s=0;s<F1.length;s++)t=F1[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function eg(n){this.src=n,this.g={},this.h=0}eg.prototype.add=function(n,e,t,i,r){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=Ub(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new mq(e,this.src,s,!!i,r),e.ia=t,n.push(e)),e};function Bb(n,e){var t=e.type;if(t in n.g){var i=n.g[t],r=G1(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(Jp(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Ub(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}var iw="closure_lm_"+(1e6*Math.random()|0),Ob={};function J1(n,e,t,i,r){if(i&&i.once)return tP(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)J1(n,e[s],t,i,r);return null}return t=ow(t),n&&n[Vu]?n.O(e,t,Lu(i)?!!i.capture:!!i,r):eP(n,e,t,!1,i,r)}function eP(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=Lu(r)?!!r.capture:!!r,a=sw(n);if(a||(n[iw]=a=new eg(n)),t=a.add(e,t,i,o,s),t.proxy)return t;if(i=vq(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)cq||(r=o),r===void 0&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(iP(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function vq(){function n(t){return e.call(n.src,n.listener,t)}let e=_q;return n}function tP(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)tP(n,e[s],t,i,r);return null}return t=ow(t),n&&n[Vu]?n.P(e,t,Lu(i)?!!i.capture:!!i,r):eP(n,e,t,!0,i,r)}function nP(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)nP(n,e[s],t,i,r);else i=Lu(i)?!!i.capture:!!i,t=ow(t),n&&n[Vu]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=Ub(s,t,i,r),-1<t&&(Jp(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=sw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Ub(e,t,i,r)),(t=-1<n?e[n]:null)&&rw(t))}function rw(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[Vu])Bb(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(iP(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=sw(e))?(Bb(t,n),t.h==0&&(t.src=null,e[iw]=null)):Jp(n)}}}function iP(n){return n in Ob?Ob[n]:Ob[n]="on"+n}function _q(n,e){if(n.fa)n=!0;else{e=new Mu(e,this);var t=n.listener,i=n.la||n.src;n.ia&&rw(n),n=t.call(i,e)}return n}function sw(n){return n=n[iw],n instanceof eg?n:null}var Nb="__closure_events_fn_"+(1e9*Math.random()>>>0);function ow(n){return typeof n=="function"?n:(n[Nb]||(n[Nb]=function(e){return n.handleEvent(e)}),n[Nb])}function kt(){Qr.call(this),this.i=new eg(this),this.S=this,this.J=null}Ot(kt,Qr);kt.prototype[Vu]=!0;kt.prototype.removeEventListener=function(n,e,t,i){nP(this,n,e,t,i)};function $t(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,typeof e=="string")e=new en(e,n);else if(e instanceof en)e.target=e.target||n;else{var r=e;e=new en(i,n),Z1(e,r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=$p(o,i,!0,e)&&r}if(o=e.g=n,r=$p(o,i,!0,e)&&r,r=$p(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)o=e.g=t[s],r=$p(o,i,!1,e)&&r}kt.prototype.N=function(){if(kt.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Jp(t[i]);delete n.g[e],n.h--}}this.J=null};kt.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};kt.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function $p(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&Bb(n.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var aw=oe.JSON.stringify,$b=class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function bq(){var n=lw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var zb=class{constructor(){this.h=this.g=null}add(e,t){let i=rP.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},rP=new $b(()=>new Hb,n=>n.reset()),Hb=class{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}};function wq(n){var e=1;n=n.split(":");let t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Eq(n){oe.setTimeout(()=>{throw n},0)}var Pu,Ru=!1,lw=new zb,sP=()=>{let n=oe.Promise.resolve(void 0);Pu=()=>{n.then(Cq)}},Cq=()=>{for(var n;n=bq();){try{n.h.call(n.g)}catch(t){Eq(t)}var e=rP;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ru=!1};function tg(n,e){kt.call(this),this.h=n||1,this.g=e||oe,this.j=Jt(this.qb,this),this.l=Date.now()}Ot(tg,kt);B=tg.prototype;B.ga=!1;B.T=null;B.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$t(this,"tick"),this.ga&&(cw(this),this.start()))}};B.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function cw(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}B.N=function(){tg.$.N.call(this),cw(this),delete this.g};function uw(n,e,t){if(typeof n=="function")t&&(n=Jt(n,t));else if(n&&typeof n.handleEvent=="function")n=Jt(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:oe.setTimeout(n,e||0)}function oP(n){n.g=uw(()=>{n.g=null,n.i&&(n.i=!1,oP(n))},n.j);let e=n.h;n.h=null,n.m.apply(null,e)}var qb=class extends Qr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oP(this)}N(){super.N(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function ku(n){Qr.call(this),this.h=n,this.g={}}Ot(ku,Qr);var L1=[];function aP(n,e,t,i){Array.isArray(t)||(t&&(L1[0]=t.toString()),t=L1);for(var r=0;r<t.length;r++){var s=J1(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function lP(n){nw(n.g,function(e,t){this.g.hasOwnProperty(t)&&rw(e)},n),n.g={}}ku.prototype.N=function(){ku.$.N.call(this),lP(this)};ku.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ng(){this.g=!0}ng.prototype.Ea=function(){this.g=!1};function Dq(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+t+`
`+o})}function Iq(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+t+`
`+s+" "+o})}function tl(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+Tq(n,t)+(i?" "+i:"")})}function Sq(n,e){n.info(function(){return"TIMEOUT: "+e})}ng.prototype.info=function(){};function Tq(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return aw(t)}catch{return e}}var vo={},V1=null;function ig(){return V1=V1||new kt}vo.Ta="serverreachability";function cP(n){en.call(this,vo.Ta,n)}Ot(cP,en);function Ou(n){let e=ig();$t(e,new cP(e))}vo.STAT_EVENT="statevent";function uP(n,e){en.call(this,vo.STAT_EVENT,n),this.stat=e}Ot(uP,en);function cn(n){let e=ig();$t(e,new uP(e,n))}vo.Ua="timingevent";function dP(n,e){en.call(this,vo.Ua,n),this.size=e}Ot(dP,en);function ju(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){n()},e)}var rg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},hP={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function dw(){}dw.prototype.h=null;function j1(n){return n.h||(n.h=n.i())}function fP(){}var Bu={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function hw(){en.call(this,"d")}Ot(hw,en);function fw(){en.call(this,"c")}Ot(fw,en);var Wb;function sg(){}Ot(sg,dw);sg.prototype.g=function(){return new XMLHttpRequest};sg.prototype.i=function(){return{}};Wb=new sg;function Uu(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new ku(this),this.P=xq,n=Lb?125:void 0,this.V=new tg(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new pP}function pP(){this.i=null,this.g="",this.h=!1}var xq=45e3,gP={},Gb={};B=Uu.prototype;B.setTimeout=function(n){this.P=n};function Kb(n,e,t){n.L=1,n.A=ag(lr(e)),n.u=t,n.S=!0,mP(n,null)}function mP(n,e){n.G=Date.now(),$u(n),n.B=lr(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),DP(t.i,"t",i),n.o=0,t=n.l.J,n.h=new pP,n.g=qP(n.l,t?e:null,!n.u),0<n.O&&(n.M=new qb(Jt(n.Pa,n,n.g),n.O)),aP(n.U,n.g,"readystatechange",n.nb),e=n.I?X1(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),Ou(),Dq(n.j,n.v,n.B,n.m,n.W,n.u)}B.nb=function(n){n=n.target;let e=this.M;e&&Ri(n)==3?e.l():this.Pa(n)};B.Pa=function(n){try{if(n==this.g)e:{let u=Ri(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||Lb||this.g&&(this.h.h||this.g.ja()||z1(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?Ou(3):Ou(2)),og(this);var t=this.g.da();this.ca=t;t:if(yP(this)){var i=z1(this.g);n="";var r=i.length,s=Ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){go(this),xu(this);var o="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,Iq(this.j,this.v,this.B,this.m,this.W,u,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Au(a)){var c=a;break t}}c=null}if(t=c)tl(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qb(this,t);else{this.i=!1,this.s=3,cn(12),go(this),xu(this);break e}}this.S?(vP(this,u,o),Lb&&this.i&&u==3&&(aP(this.U,this.V,"tick",this.mb),this.V.start())):(tl(this.j,this.m,o,null),Qb(this,o)),u==4&&go(this),this.i&&!this.J&&(u==4?UP(this.l,this):(this.i=!1,$u(this)))}else Qq(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),go(this),xu(this)}}}catch{}finally{}};function yP(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function vP(n,e,t){let i=!0,r;for(;!n.J&&n.o<t.length;)if(r=Aq(n,t),r==Gb){e==4&&(n.s=4,cn(14),i=!1),tl(n.j,n.m,null,"[Incomplete Response]");break}else if(r==gP){n.s=4,cn(15),tl(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else tl(n.j,n.m,r,null),Qb(n,r);yP(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,cn(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),_w(e),e.M=!0,cn(11))):(tl(n.j,n.m,t,"[Invalid Chunked Response]"),go(n),xu(n))}B.mb=function(){if(this.g){var n=Ri(this.g),e=this.g.ja();this.o<e.length&&(og(this),vP(this,n,e),this.i&&n!=4&&$u(this))}};function Aq(n,e){var t=n.o,i=e.indexOf(`
`,t);return i==-1?Gb:(t=Number(e.substring(t,i)),isNaN(t)?gP:(i+=1,i+t>e.length?Gb:(e=e.slice(i,i+t),n.o=i+t,e)))}B.cancel=function(){this.J=!0,go(this)};function $u(n){n.Y=Date.now()+n.P,_P(n,n.P)}function _P(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=ju(Jt(n.lb,n),e)}function og(n){n.C&&(oe.clearTimeout(n.C),n.C=null)}B.lb=function(){this.C=null;let n=Date.now();0<=n-this.Y?(Sq(this.j,this.B),this.L!=2&&(Ou(),cn(17)),go(this),this.s=2,xu(this)):_P(this,this.Y-n)};function xu(n){n.l.H==0||n.J||UP(n.l,n)}function go(n){og(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,cw(n.V),lP(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Qb(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||Yb(t.i,n))){if(!n.K&&Yb(t.i,n)&&t.H==3){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Gp(t),ug(t);else break e;vw(t),cn(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&t.A==0&&!t.v&&(t.v=ju(Jt(t.ib,t),6e3));if(1>=TP(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else mo(t,11)}else if((n.K||t.g==n)&&Gp(t),!Au(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(t.V=c[0],c=c[1],t.H==2)if(c[0]=="c"){t.K=c[1],t.pa=c[2];let u=c[3];u!=null&&(t.ra=u,t.l.info("VER="+t.ra));let d=c[4];d!=null&&(t.Ga=d,t.l.info("SVER="+t.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,t.L=i,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;let f=n.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(pw(s,s.h),s.h=null))}if(i.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,tt(i.I,i.F,g))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),i=t;var o=n;if(i.wa=HP(i,i.J?i.pa:null,i.Y),o.K){xP(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(og(a),$u(a)),i.g=o}else jP(i);0<t.j.length&&dg(t)}else c[0]!="stop"&&c[0]!="close"||mo(t,7);else t.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?mo(t,7):yw(t):c[0]!="noop"&&t.h&&t.h.Aa(c),t.A=0)}}Ou(4)}catch{}}function Mq(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(Xp(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function Pq(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Xp(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(let i in n)e[t++]=i;return e}}}function bP(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(Xp(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=Pq(n),i=Mq(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}var wP=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Rq(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function yo(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof yo){this.h=n.h,qp(this,n.j),this.s=n.s,this.g=n.g,Wp(this,n.m),this.l=n.l;var e=n.i,t=new Nu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),B1(this,t),this.o=n.o}else n&&(e=String(n).match(wP))?(this.h=!1,qp(this,e[1]||"",!0),this.s=Su(e[2]||""),this.g=Su(e[3]||"",!0),Wp(this,e[4]),this.l=Su(e[5]||"",!0),B1(this,e[6]||"",!0),this.o=Su(e[7]||"")):(this.h=!1,this.i=new Nu(null,this.h))}yo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Tu(e,U1,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Tu(e,U1,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Tu(t,t.charAt(0)=="/"?Nq:Oq,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Tu(t,Lq)),n.join("")};function lr(n){return new yo(n)}function qp(n,e,t){n.j=t?Su(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Wp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function B1(n,e,t){e instanceof Nu?(n.i=e,Vq(n.i,n.h)):(t||(e=Tu(e,Fq)),n.i=new Nu(e,n.h))}function tt(n,e,t){n.i.set(e,t)}function ag(n){return tt(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Su(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Tu(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,kq),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function kq(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var U1=/[#\/\?@]/g,Oq=/[#\?:]/g,Nq=/[#\?]/g,Fq=/[#\?@]/g,Lq=/#/g;function Nu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yr(n){n.g||(n.g=new Map,n.h=0,n.i&&Rq(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}B=Nu.prototype;B.add=function(n,e){Yr(this),this.i=null,n=rl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function EP(n,e){Yr(n),e=rl(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function CP(n,e){return Yr(n),e=rl(n,e),n.g.has(e)}B.forEach=function(n,e){Yr(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)};B.ta=function(){Yr(this);let n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){let r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t};B.Z=function(n){Yr(this);let e=[];if(typeof n=="string")CP(this,n)&&(e=e.concat(this.g.get(rl(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};B.set=function(n,e){return Yr(this),this.i=null,n=rl(this,n),CP(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};B.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function DP(n,e,t){EP(n,e),0<t.length&&(n.i=null,n.g.set(rl(n,e),ew(t)),n.h+=t.length)}B.toString=function(){if(this.i)return this.i;if(!this.g)return"";let n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};function rl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Vq(n,e){e&&!n.j&&(Yr(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(EP(this,i),DP(this,r,t))},n)),n.j=e}var jq=class{constructor(n,e){this.g=n,this.map=e}};function IP(n){this.l=n||Bq,oe.PerformanceNavigationTiming?(n=oe.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(oe.g&&oe.g.Ka&&oe.g.Ka()&&oe.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Bq=10;function SP(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function TP(n){return n.h?1:n.g?n.g.size:0}function Yb(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function pw(n,e){n.g?n.g.add(e):n.h=e}function xP(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}IP.prototype.cancel=function(){if(this.i=AP(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let n of this.g.values())n.cancel();this.g.clear()}};function AP(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(let t of n.g.values())e=e.concat(t.F);return e}return ew(n.i)}var Uq=class{stringify(n){return oe.JSON.stringify(n,void 0)}parse(n){return oe.JSON.parse(n,void 0)}};function $q(){this.g=new Uq}function zq(n,e,t){let i=t||"";try{bP(n,function(r,s){let o=r;Lu(r)&&(o=aw(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function Hq(n,e){let t=new ng;if(oe.Image){let i=new Image;i.onload=Vp(zp,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Vp(zp,t,i,"TestLoadImage: error",!1,e),i.onabort=Vp(zp,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Vp(zp,t,i,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function zp(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function zu(n){this.l=n.ec||null,this.j=n.ob||!1}Ot(zu,dw);zu.prototype.g=function(){return new lg(this.l,this.j)};zu.prototype.i=function(n){return function(){return n}}({});function lg(n,e){kt.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=gw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ot(lg,kt);var gw=0;B=lg.prototype;B.open=function(n,e){if(this.readyState!=gw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Fu(this)};B.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||oe).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};B.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hu(this)),this.readyState=gw};B.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Fu(this)),this.g&&(this.readyState=3,Fu(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof oe.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;MP(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function MP(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}B.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Hu(this):Fu(this),this.readyState==3&&MP(this)}};B.Za=function(n){this.g&&(this.response=this.responseText=n,Hu(this))};B.Ya=function(n){this.g&&(this.response=n,Hu(this))};B.ka=function(){this.g&&Hu(this)};function Hu(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Fu(n)}B.setRequestHeader=function(n,e){this.v.append(n,e)};B.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};B.getAllResponseHeaders=function(){if(!this.h)return"";let n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function Fu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(lg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var qq=oe.JSON.parse;function lt(n){kt.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=PP,this.L=this.M=!1}Ot(lt,kt);var PP="",Wq=/^https?$/i,Gq=["POST","PUT"];B=lt.prototype;B.Oa=function(n){this.M=n};B.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Wb.g(),this.C=this.u?j1(this.u):j1(Wb),this.g.onreadystatechange=Jt(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){$1(this,s);return}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())t.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),r=oe.FormData&&n instanceof oe.FormData,!(0<=G1(Gq,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{OP(this),0<this.B&&((this.L=Kq(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jt(this.ua,this)):this.A=uw(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){$1(this,s)}};function Kq(n){return il&&typeof n.timeout=="number"&&n.ontimeout!==void 0}B.ua=function(){typeof Jb<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$t(this,"timeout"),this.abort(8))};function $1(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,RP(n),cg(n)}function RP(n){n.F||(n.F=!0,$t(n,"complete"),$t(n,"error"))}B.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,$t(this,"complete"),$t(this,"abort"),cg(this))};B.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),cg(this,!0)),lt.$.N.call(this)};B.La=function(){this.s||(this.G||this.v||this.l?kP(this):this.kb())};B.kb=function(){kP(this)};function kP(n){if(n.h&&typeof Jb<"u"&&(!n.C[1]||Ri(n)!=4||n.da()!=2)){if(n.v&&Ri(n)==4)uw(n.La,0,n);else if($t(n,"readystatechange"),Ri(n)==4){n.h=!1;try{let o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=o===0){var r=String(n.I).match(wP)[1]||null;!r&&oe.self&&oe.self.location&&(r=oe.self.location.protocol.slice(0,-1)),i=!Wq.test(r?r.toLowerCase():"")}t=i}if(t)$t(n,"complete"),$t(n,"success");else{n.m=6;try{var s=2<Ri(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",RP(n)}}finally{cg(n)}}}}function cg(n,e){if(n.g){OP(n);let t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||$t(n,"ready");try{t.onreadystatechange=i}catch{}}}function OP(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(oe.clearTimeout(n.A),n.A=null)}B.isActive=function(){return!!this.g};function Ri(n){return n.g?n.g.readyState:0}B.da=function(){try{return 2<Ri(this)?this.g.status:-1}catch{return-1}};B.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};B.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),qq(e)}};function z1(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case PP:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Qq(n){let e={};n=(n.g&&2<=Ri(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<n.length;i++){if(Au(n[i]))continue;var t=wq(n[i]);let r=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();let s=e[r]||[];e[r]=s,s.push(t)}yq(e,function(i){return i.join(", ")})}B.Ia=function(){return this.m};B.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function NP(n){let e="";return nw(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function mw(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=NP(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):tt(n,e,t))}function Du(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function FP(n){this.Ga=0,this.j=[],this.l=new ng,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Du("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Du("baseRetryDelayMs",5e3,n),this.hb=Du("retryDelaySeedMs",1e4,n),this.eb=Du("forwardChannelMaxRetries",2,n),this.xa=Du("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new IP(n&&n.concurrentRequestLimit),this.Ja=new $q,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}B=FP.prototype;B.ra=8;B.H=1;function yw(n){if(LP(n),n.H==3){var e=n.W++,t=lr(n.I);if(tt(t,"SID",n.K),tt(t,"RID",e),tt(t,"TYPE","terminate"),qu(n,t),e=new Uu(n,n.l,e),e.L=2,e.A=ag(lr(t)),t=!1,oe.navigator&&oe.navigator.sendBeacon)try{t=oe.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&oe.Image&&(new Image().src=e.A,t=!0),t||(e.g=qP(e.l,null),e.g.ha(e.A)),e.G=Date.now(),$u(e)}zP(n)}function ug(n){n.g&&(_w(n),n.g.cancel(),n.g=null)}function LP(n){ug(n),n.u&&(oe.clearTimeout(n.u),n.u=null),Gp(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&oe.clearTimeout(n.m),n.m=null)}function dg(n){if(!SP(n.i)&&!n.m){n.m=!0;var e=n.Na;Pu||sP(),Ru||(Pu(),Ru=!0),lw.add(e,n),n.C=0}}function Yq(n,e){return TP(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=ju(Jt(n.Na,n,e),$P(n,n.C)),n.C++,!0)}B.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;let r=new Uu(this,this.l,n),s=this.s;if(this.U&&(s?(s=X1(s),Z1(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var i=this.j[t];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=VP(this,r,e),t=lr(this.I),tt(t,"RID",n),tt(t,"CVER",22),this.F&&tt(t,"X-HTTP-Session-Id",this.F),qu(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(NP(s)))+"&"+e:this.o&&mw(t,this.o,s)),pw(this.i,r),this.bb&&tt(t,"TYPE","init"),this.P?(tt(t,"$req",e),tt(t,"SID","null"),r.aa=!0,Kb(r,t,null)):Kb(r,t,e),this.H=2}}else this.H==3&&(n?H1(this,n):this.j.length==0||SP(this.i)||H1(this))};function H1(n,e){var t;e?t=e.m:t=n.W++;let i=lr(n.I);tt(i,"SID",n.K),tt(i,"RID",t),tt(i,"AID",n.V),qu(n,i),n.o&&n.s&&mw(i,n.o,n.s),t=new Uu(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=VP(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),pw(n.i,t),Kb(t,i,e)}function qu(n,e){n.na&&nw(n.na,function(t,i){tt(e,i,t)}),n.h&&bP({},function(t,i){tt(e,i,t)})}function VP(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Jt(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){let o=["count="+t];s==-1?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=r[l].g,u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{zq(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function jP(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Pu||sP(),Ru||(Pu(),Ru=!0),lw.add(e,n),n.A=0}}function vw(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=ju(Jt(n.Ma,n),$P(n,n.A)),n.A++,!0)}B.Ma=function(){if(this.u=null,BP(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=ju(Jt(this.jb,this),n)}};B.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,cn(10),ug(this),BP(this))};function _w(n){n.B!=null&&(oe.clearTimeout(n.B),n.B=null)}function BP(n){n.g=new Uu(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=lr(n.wa);tt(e,"RID","rpc"),tt(e,"SID",n.K),tt(e,"AID",n.V),tt(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&tt(e,"TO",n.qa),tt(e,"TYPE","xmlhttp"),qu(n,e),n.o&&n.s&&mw(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=ag(lr(e)),t.u=null,t.S=!0,mP(t,n)}B.ib=function(){this.v!=null&&(this.v=null,ug(this),vw(this),cn(19))};function Gp(n){n.v!=null&&(oe.clearTimeout(n.v),n.v=null)}function UP(n,e){var t=null;if(n.g==e){Gp(n),_w(n),n.g=null;var i=2}else if(Yb(n.i,e))t=e.F,xP(n.i,e),i=1;else return;if(n.H!=0){if(e.i)if(i==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;i=ig(),$t(i,new dP(i,t)),dg(n)}else jP(n);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&Yq(n,e)||i==2&&vw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:mo(n,5);break;case 4:mo(n,10);break;case 3:mo(n,6);break;default:mo(n,2)}}}function $P(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function mo(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var i=Jt(n.pb,n);t||(t=new yo("//www.google.com/images/cleardot.gif"),oe.location&&oe.location.protocol=="http"||qp(t,"https"),ag(t)),Hq(t.toString(),i)}else cn(2);n.H=0,n.h&&n.h.za(e),zP(n),LP(n)}B.pb=function(n){n?(this.l.info("Successfully pinged google.com"),cn(2)):(this.l.info("Failed to ping google.com"),cn(1))};function zP(n){if(n.H=0,n.ma=[],n.h){let e=AP(n.i);(e.length!=0||n.j.length!=0)&&(N1(n.ma,e),N1(n.ma,n.j),n.i.i.length=0,ew(n.j),n.j.length=0),n.h.ya()}}function HP(n,e,t){var i=t instanceof yo?lr(t):new yo(t);if(i.g!="")e&&(i.g=e+"."+i.g),Wp(i,i.m);else{var r=oe.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new yo(null);i&&qp(s,i),e&&(s.g=e),r&&Wp(s,r),t&&(s.l=t),i=s}return t=n.F,e=n.Da,t&&e&&tt(i,t,e),tt(i,"VER",n.ra),qu(n,i),i}function qP(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new lt(new zu({ob:t})):new lt(n.va),e.Oa(n.J),e}B.isActive=function(){return!!this.h&&this.h.isActive(this)};function WP(){}B=WP.prototype;B.Ba=function(){};B.Aa=function(){};B.za=function(){};B.ya=function(){};B.isActive=function(){return!0};B.Va=function(){};function Kp(){if(il&&!(10<=Number(fq)))throw Error("Environmental error: no available transport.")}Kp.prototype.g=function(n,e){return new Rn(n,e)};function Rn(n,e){kt.call(this),this.g=new FP(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Au(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Au(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new sl(this)}Ot(Rn,kt);Rn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;cn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=HP(n,null,n.Y),dg(n)};Rn.prototype.close=function(){yw(this.g)};Rn.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=aw(n),n=t);e.j.push(new jq(e.fb++,n)),e.H==3&&dg(e)};Rn.prototype.N=function(){this.g.h=null,delete this.j,yw(this.g),delete this.g,Rn.$.N.call(this)};function GP(n){hw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(let t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}Ot(GP,hw);function KP(){fw.call(this),this.status=1}Ot(KP,fw);function sl(n){this.g=n}Ot(sl,WP);sl.prototype.Ba=function(){$t(this.g,"a")};sl.prototype.Aa=function(n){$t(this.g,new GP(n))};sl.prototype.za=function(n){$t(this.g,new KP)};sl.prototype.ya=function(){$t(this.g,"b")};function Xq(){this.blockSize=-1}function ci(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Ot(ci,Xq);ci.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Fb(n,e,t){t||(t=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],r=n.g[2];var s=n.g[3],o=e+(s^t&(r^s))+i[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[3]+3250441966&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[7]+4249261313&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[11]+2304563134&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[15]+1236535329&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(t^r))+i[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[0]+3921069994&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[4]+3889429448&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[8]+1163531501&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[12]+2368359562&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(t^r^s)+i[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[14]+4259657740&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[10]+3200236656&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[6]+76029189&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[2]+3299628645&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(r^(t|~s))+i[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[5]+4237533241&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[1]+2240044497&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[13]+1309151649&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}ci.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=t;)Fb(this,n,s),s+=this.blockSize;if(typeof n=="string"){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){Fb(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){Fb(this,i),r=0;break}}this.h=r,this.i+=e};ci.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};function Be(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=n[r]|0;i&&s==e||(t[r]=s,i=!1)}this.g=t}var Zq={};function bw(n){return-128<=n&&128>n?uq(n,function(e){return new Be([e|0],0>e?-1:0)}):new Be([n|0],0>n?-1:0)}function ki(n){if(isNaN(n)||!isFinite(n))return nl;if(0>n)return Ut(ki(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=Xb;return new Be(e,0)}function QP(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return Ut(QP(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ki(Math.pow(e,8)),i=nl,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=ki(Math.pow(e,s)),i=i.R(s).add(ki(o))):(i=i.R(t),i=i.add(ki(o)))}return i}var Xb=4294967296,nl=bw(0),Zb=bw(1),q1=bw(16777216);B=Be.prototype;B.ea=function(){if(Gn(this))return-Ut(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:Xb+i)*e,e*=Xb}return n};B.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(ar(this))return"0";if(Gn(this))return"-"+Ut(this).toString(n);for(var e=ki(Math.pow(n,6)),t=this,i="";;){var r=Yp(t,e).g;t=Qp(t,r.R(e));var s=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=r,ar(t))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};B.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function ar(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function Gn(n){return n.h==-1}B.X=function(n){return n=Qp(this,n),Gn(n)?-1:ar(n)?0:1};function Ut(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Be(t,~n.h).add(Zb)}B.abs=function(){return Gn(this)?Ut(this):this};B.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(n.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,t[r]=o<<16|s}return new Be(t,t[t.length-1]&-2147483648?-1:0)};function Qp(n,e){return n.add(Ut(e))}B.R=function(n){if(ar(this)||ar(n))return nl;if(Gn(this))return Gn(n)?Ut(this).R(Ut(n)):Ut(Ut(this).R(n));if(Gn(n))return Ut(this.R(Ut(n)));if(0>this.X(q1)&&0>n.X(q1))return ki(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=n.D(r)>>>16,l=n.D(r)&65535;t[2*i+2*r]+=o*l,Hp(t,2*i+2*r),t[2*i+2*r+1]+=s*l,Hp(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,Hp(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,Hp(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Be(t,0)};function Hp(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Iu(n,e){this.g=n,this.h=e}function Yp(n,e){if(ar(e))throw Error("division by zero");if(ar(n))return new Iu(nl,nl);if(Gn(n))return e=Yp(Ut(n),e),new Iu(Ut(e.g),Ut(e.h));if(Gn(e))return e=Yp(n,Ut(e)),new Iu(Ut(e.g),e.h);if(30<n.g.length){if(Gn(n)||Gn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Zb,i=e;0>=i.X(n);)t=W1(t),i=W1(i);var r=el(t,1),s=el(i,1);for(i=el(i,2),t=el(t,2);!ar(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=el(i,1),t=el(t,1)}return e=Qp(n,r.R(e)),new Iu(r,e)}for(r=nl;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=Math.ceil(Math.log(t)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=ki(t),o=s.R(e);Gn(o)||0<o.X(n);)t-=i,s=ki(t),o=s.R(e);ar(s)&&(s=Zb),r=r.add(s),n=Qp(n,o)}return new Iu(r,n)}B.gb=function(n){return Yp(this,n).h};B.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Be(t,this.h&n.h)};B.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Be(t,this.h|n.h)};B.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Be(t,this.h^n.h)};function W1(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Be(t,n.h)}function el(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Be(r,n.h)}Kp.prototype.createWebChannel=Kp.prototype.g;Rn.prototype.send=Rn.prototype.u;Rn.prototype.open=Rn.prototype.m;Rn.prototype.close=Rn.prototype.close;rg.NO_ERROR=0;rg.TIMEOUT=8;rg.HTTP_ERROR=6;hP.COMPLETE="complete";fP.EventType=Bu;Bu.OPEN="a";Bu.CLOSE="b";Bu.ERROR="c";Bu.MESSAGE="d";kt.prototype.listen=kt.prototype.O;lt.prototype.listenOnce=lt.prototype.P;lt.prototype.getLastError=lt.prototype.Sa;lt.prototype.getLastErrorCode=lt.prototype.Ia;lt.prototype.getStatus=lt.prototype.da;lt.prototype.getResponseJson=lt.prototype.Wa;lt.prototype.getResponseText=lt.prototype.ja;lt.prototype.send=lt.prototype.ha;lt.prototype.setWithCredentials=lt.prototype.Oa;ci.prototype.digest=ci.prototype.l;ci.prototype.reset=ci.prototype.reset;ci.prototype.update=ci.prototype.j;Be.prototype.add=Be.prototype.add;Be.prototype.multiply=Be.prototype.R;Be.prototype.modulo=Be.prototype.gb;Be.prototype.compare=Be.prototype.X;Be.prototype.toNumber=Be.prototype.ea;Be.prototype.toString=Be.prototype.toString;Be.prototype.getBits=Be.prototype.D;Be.fromNumber=ki;Be.fromString=QP;var YP=ui.createWebChannelTransport=function(){return new Kp},XP=ui.getStatEventTarget=function(){return ig()},hg=ui.ErrorCode=rg,ZP=ui.EventType=hP,JP=ui.Event=vo,ww=ui.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},kse=ui.FetchXmlHttpFactory=zu,Wu=ui.WebChannel=fP,eR=ui.XhrIo=lt,tR=ui.Md5=ci,_o=ui.Integer=Be;var nR="@firebase/firestore";var Ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");var Nl="10.7.0";var is=new uh("@firebase/firestore");function ul(){return is.logLevel}function tk(n){is.setLogLevel(n)}function R(n,...e){if(is.logLevel<=vi.DEBUG){let t=e.map(EC);is.debug(`Firestore (${Nl}): ${n}`,...t)}}function ft(n,...e){if(is.logLevel<=vi.ERROR){let t=e.map(EC);is.error(`Firestore (${Nl}): ${n}`,...t)}}function Qn(n,...e){if(is.logLevel<=vi.WARN){let t=e.map(EC);is.warn(`Firestore (${Nl}): ${n}`,...t)}}function EC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: `+n;throw ft(e),new Error(e)}function Y(n,e){n||H()}function nk(n,e){n||H()}function U(n,e){return n}var T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends JI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Dt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Cg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Sw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ct.UNAUTHENTICATED))}shutdown(){}},Tw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},xw=class{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new Dt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Dt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>x(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{R("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(R("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Dt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(R("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Y(typeof i.accessToken=="string"),new Cg(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new Ct(e)}},Aw=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Mw=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Aw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Pw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Rw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&R("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,R("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{R("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):R("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string"),this.R=t.token,new Pw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function t9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Dg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=t9(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function ce(n,e){return n<e?-1:n>e?1:0}function _l(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function ik(n){return n+"\0"}var st=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new st(0,0))}static max(){return new n(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ig=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&H(),i===void 0?i=e.length-t:i>e.length-t&&H(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ke=class n extends Ig{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new P(T.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},n9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,pt=class n extends Ig{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return n9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new P(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new P(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new P(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new P(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var L=class n{constructor(e){this.path=e}static fromPath(e){return new n(ke.fromString(e))}static fromName(e){return new n(ke.fromString(e).popFirst(5))}static empty(){return new n(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ke(e.slice()))}};var bl=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};function kw(n){return n.fields.find(e=>e.kind===2)}function wo(n){return n.fields.filter(e=>e.kind!==2)}bl.UNKNOWN_ID=-1;var ml=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var rd=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Yn.min())}};function rk(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ee.fromTimestamp(i===1e9?new st(t+1,0):new st(t,i));return new Yn(r,L.empty(),e)}function sk(n){return new Yn(n.readTime,n.key,-1)}var Yn=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(ee.min(),L.empty(),-1)}static max(){return new n(ee.max(),L.empty(),-1)}};function CC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=L.comparator(n.documentKey,e.documentKey),t!==0?t:ce(n.largestBatchId,e.largestBatchId))}var ok="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ps(n){return x(this,null,function*(){if(n.code!==T.FAILED_PRECONDITION||n.message!==ok)throw n;R("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};var Tg=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Dt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new To(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=DC(i.target.error);this.V.reject(new To(e,r))}}static open(e,t,i,r){try{return new n(t,e.transaction(r,i))}catch(s){throw new To(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(R("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Nw(t)}},rs=class n{constructor(e,t,i){this.name=e,this.version=t,this.p=i,n.S(lh())===12.2&&ft("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return R("SimpleDb","Removing database:",e),Eo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ch())return!1;if(n.C())return!0;let e=lh(),t=n.S(e),i=0<t&&t<10,r=n.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return x(this,null,function*(){return this.db||(R("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;t(o)},r.onblocked=()=>{i(new To(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new P(T.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new P(T.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new To(e,o))},r.onupgradeneeded=s=>{R("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{R("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){return x(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=Tg.open(this.db,e,s?"readonly":"readwrite",i),l=r(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),S.reject(c))).toPromise();return l.catch(()=>{}),yield a.m,l}catch(a){let l=a,c=l.name!=="FirebaseError"&&o<3;if(R("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Ow=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Eo(this.k.delete())}},To=class extends P{constructor(e,t){super(T.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function gs(n){return n.name==="IndexedDbTransactionError"}var Nw=class{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(R("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(R("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Eo(i)}add(e){return R("SimpleDb","ADD",this.store.name,e,e),Eo(this.store.add(e))}get(e){return Eo(this.store.get(e)).next(t=>(t===void 0&&(t=null),R("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return R("SimpleDb","DELETE",this.store.name,e),Eo(this.store.delete(e))}count(){return R("SimpleDb","COUNT",this.store.name),Eo(this.store.count())}W(e,t){let i=this.options(e,t);if(i.index||typeof this.store.getAll!="function"){let r=this.cursor(i),s=[];return this.G(r,(o,a)=>{s.push(a)}).next(()=>s)}{let r=this.store.getAll(i.range);return new S((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}j(e,t){let i=this.store.getAll(e,t===null?void 0:t);return new S((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,t){R("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,t);i.J=!1;let r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,t){let i;t?i=e:(i={},t=e);let r=this.cursor(i);return this.G(r,t)}Z(e){let t=this.cursor({});return new S((i,r)=>{t.onerror=s=>{let o=DC(s.target.error);r(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,t){let i=[];return new S((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let l=new Ow(a),c=t(a.primaryKey,a.value,l);if(c instanceof S){let u=c.catch(d=>(l.done(),S.reject(d)));i.push(u)}l.isDone?r():l.$===null?a.continue():a.continue(l.$)}}).next(()=>S.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Eo(n){return new S((e,t)=>{n.onsuccess=i=>{let r=i.target.result;e(r)},n.onerror=i=>{let r=DC(i.target.error);t(r)}})}var iR=!1;function DC(n){let e=rs.S(lh());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let i=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return iR||(iR=!0,setTimeout(()=>{throw i},0)),i}}return n}var Fw=class{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){R("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>x(this,null,function*(){this.task=null;try{R("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(t){gs(t)?R("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):yield ps(t)}yield this.ee(6e4)}))}},Lw=class{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){return x(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ne(t,e))})}ne(e,t){let i=new Set,r=t,s=!0;return S.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return R("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}re(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(r,s)).next(a=>(R("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let i=e;return t.changes.forEach((r,s)=>{let o=sk(s);CC(o,i)>0&&(i=o)}),new Yn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}};var kn=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function xd(n){return n==null}function sd(n){return n===0&&1/n==-1/0}function ak(n){return typeof n=="number"&&Number.isInteger(n)&&!sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function un(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rR(e)),e=i9(n.get(t),e);return rR(e)}function i9(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function rR(n){return n+""}function Oi(n){let e=n.length;if(Y(e>=2),e===2)return Y(n.charAt(0)===""&&n.charAt(1)===""),ke.emptyPath();let t=e-2,i=[],r="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&H(),n.charAt(o+1)){case"":let a=n.substring(s,o),l;r.length===0?l=a:(r+=a,l=r,r=""),i.push(l);break;case"":r+=n.substring(s,o),r+="\0";break;case"":r+=n.substring(s,o+1);break;default:H()}s=o+2}return new ke(i)}var sR=["userId","batchId"];function yg(n,e){return[n,un(e)]}function lk(n,e,t){return[n,un(e),t]}var r9={},s9=["prefixPath","collectionGroup","readTime","documentId"],o9=["prefixPath","collectionGroup","documentId"],a9=["collectionGroup","readTime","prefixPath","documentId"],l9=["canonicalId","targetId"],c9=["targetId","path"],u9=["path","targetId"],d9=["collectionId","parent"],h9=["indexId","uid"],f9=["uid","sequenceNumber"],p9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],g9=["indexId","uid","orderedDocumentKey"],m9=["userId","collectionPath","documentId"],y9=["userId","collectionPath","largestBatchId"],v9=["userId","collectionGroup","largestBatchId"],ck=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_9=[...ck,"documentOverlays"],uk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dk=uk,b9=[...dk,"indexConfiguration","indexState","indexEntries"];var od=class extends Sg{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}};function Ft(n,e){let t=U(n);return rs.M(t.ae,e)}function oR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function hk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var nt=class n{constructor(e,t){this.comparator=e,this.root=t||Fi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Fi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gl(this.root,e,this.comparator,!1)}getReverseIterator(){return new gl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gl(this.root,e,this.comparator,!0)}},gl=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Fi=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};Fi.EMPTY=null,Fi.RED=!0,Fi.BLACK=!1;Fi.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Fi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ze=class n{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xg(this.data.getIterator())}getIteratorFrom(e){return new xg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},xg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ol(n){return n.hasNext()?n.getNext():void 0}var On=class n{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new n([])}unionWith(e){let t=new ze(pt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return _l(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Ag=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function fk(){return typeof atob<"u"}var Nt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ag("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Nt.EMPTY_BYTE_STRING=new Nt("");var w9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(n){if(Y(!!n),typeof n=="string"){let e=0,t=w9.exec(n);if(Y(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(n.seconds),nanos:ct(n.nanos)}}function ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function os(n){return typeof n=="string"?Nt.fromBase64String(n):Nt.fromUint8Array(n)}function _m(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function IC(n){let e=n.mapValue.fields.__previous_value__;return _m(e)?IC(e):e}function ad(n){let e=ss(n.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}var Vw=class{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},as=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ts={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},vg={nullValue:"NULL_VALUE"};function xo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?_m(n)?4:pk(n)?9007199254740991:10:H()}function ji(n,e){if(n===e)return!0;let t=xo(n);if(t!==xo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ad(n).isEqual(ad(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=ss(r.timestampValue),a=ss(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return os(r.bytesValue).isEqual(os(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ct(r.geoPointValue.latitude)===ct(s.geoPointValue.latitude)&&ct(r.geoPointValue.longitude)===ct(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ct(r.integerValue)===ct(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=ct(r.doubleValue),a=ct(s.doubleValue);return o===a?sd(o)===sd(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return _l(n.arrayValue.values||[],e.arrayValue.values||[],ji);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(oR(o)!==oR(a))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ji(o[l],a[l])))return!1;return!0}(n,e);default:return H()}}function ld(n,e){return(n.values||[]).find(t=>ji(t,e))!==void 0}function ls(n,e){if(n===e)return 0;let t=xo(n),i=xo(e);if(t!==i)return ce(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ct(s.integerValue||s.doubleValue),l=ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return aR(n.timestampValue,e.timestampValue);case 4:return aR(ad(n),ad(e));case 5:return ce(n.stringValue,e.stringValue);case 6:return function(s,o){let a=os(s),l=os(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){let u=ce(a[c],l[c]);if(u!==0)return u}return ce(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ce(ct(s.latitude),ct(o.latitude));return a!==0?a:ce(ct(s.longitude),ct(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){let u=ls(a[c],l[c]);if(u)return u}return ce(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ts.mapValue&&o===ts.mapValue)return 0;if(s===ts.mapValue)return 1;if(o===ts.mapValue)return-1;let a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){let h=ce(l[d],u[d]);if(h!==0)return h;let f=ls(a[l[d]],c[u[d]]);if(f!==0)return f}return ce(l.length,u.length)}(n.mapValue,e.mapValue);default:throw H()}}function aR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ce(n,e);let t=ss(n),i=ss(e),r=ce(t.seconds,i.seconds);return r!==0?r:ce(t.nanos,i.nanos)}function wl(n){return jw(n)}function jw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=ss(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return os(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return L.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=jw(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${jw(t.fields[o])}`;return r+"}"}(n.mapValue):H()}function Ao(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bw(n){return!!n&&"integerValue"in n}function cd(n){return!!n&&"arrayValue"in n}function lR(n){return!!n&&"nullValue"in n}function cR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _g(n){return!!n&&"mapValue"in n}function Ju(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return jo(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ju(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ju(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function E9(n){return"nullValue"in n?vg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ao(as.empty(),L.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:H()}function C9(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ao(as.empty(),L.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ts:H()}function uR(n,e){let t=ls(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function dR(n,e){let t=ls(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var nn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!_g(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ju(t)}setAll(e){let t=pt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Ju(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());_g(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];_g(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){jo(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Ju(this.value))}};function gk(n){let e=[];return jo(n.fields,(t,i)=>{let r=new pt([t]);if(_g(i)){let s=gk(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new On(e)}var It=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),nn.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,ee.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Bi=class{constructor(e,t){this.position=e,this.inclusive=t}};function hR(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=L.comparator(L.fromName(o.referenceValue),t.key):i=ls(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function fR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ji(n.position[t],e.position[t]))return!1;return!0}var Mo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function D9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Mg=class{},Se=class n extends Mg{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new zw(e,t,i):t==="array-contains"?new Ww(e,i):t==="in"?new Pg(e,i):t==="not-in"?new Gw(e,i):t==="array-contains-any"?new Kw(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Hw(e,i):new qw(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ls(t,this.value)):t!==null&&xo(this.value)===xo(t)&&this.matchesComparison(ls(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ue=class n extends Mg{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new n(e,t)}matches(e){return El(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function El(n){return n.op==="and"}function Uw(n){return n.op==="or"}function SC(n){return mk(n)&&El(n)}function mk(n){for(let e of n.filters)if(e instanceof Ue)return!1;return!0}function $w(n){if(n instanceof Se)return n.field.canonicalString()+n.op.toString()+wl(n.value);if(SC(n))return n.filters.map(e=>$w(e)).join(",");{let e=n.filters.map(t=>$w(t)).join(",");return`${n.op}(${e})`}}function yk(n,e){return n instanceof Se?function(i,r){return r instanceof Se&&i.op===r.op&&i.field.isEqual(r.field)&&ji(i.value,r.value)}(n,e):n instanceof Ue?function(i,r){return r instanceof Ue&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&yk(o,r.filters[a]),!0):!1}(n,e):void H()}function vk(n,e){let t=n.filters.concat(e);return Ue.create(t,n.op)}function _k(n){return n instanceof Se?function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`}(n):n instanceof Ue?function(t){return t.op.toString()+" {"+t.getFilters().map(_k).join(" ,")+"}"}(n):"Filter"}var zw=class extends Se{constructor(e,t,i){super(e,t,i),this.key=L.fromName(i.referenceValue)}matches(e){let t=L.comparator(e.key,this.key);return this.matchesComparison(t)}},Hw=class extends Se{constructor(e,t){super(e,"in",t),this.keys=bk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},qw=class extends Se{constructor(e,t){super(e,"not-in",t),this.keys=bk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>L.fromName(i.referenceValue))}var Ww=class extends Se{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return cd(t)&&ld(t.arrayValue,this.value)}},Pg=class extends Se{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ld(this.value.arrayValue,t)}},Gw=class extends Se{constructor(e,t){super(e,"not-in",t)}matches(e){if(ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ld(this.value.arrayValue,t)}},Kw=class extends Se{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!cd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ld(this.value.arrayValue,i))}};var Qw=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Yw(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Qw(n,e,t,i,r,s,o)}function Po(n){let e=U(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>$w(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),xd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>wl(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>wl(i)).join(",")),e.ce=t}return e.ce}function Ad(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!D9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!yk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fR(n.startAt,e.startAt)&&fR(n.endAt,e.endAt)}function Rg(n){return L.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function kg(n,e){return n.filters.filter(t=>t instanceof Se&&t.field.isEqual(e))}function pR(n,e,t){let i=vg,r=!0;for(let s of kg(n,e)){let o=vg,a=!0;switch(s.op){case"<":case"<=":o=E9(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=vg}uR({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];uR({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}function gR(n,e,t){let i=ts,r=!0;for(let s of kg(n,e)){let o=ts,a=!0;switch(s.op){case">=":case">":o=C9(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ts}dR({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];dR({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}var di=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function wk(n,e,t,i,r,s,o,a){return new di(n,e,t,i,r,s,o,a)}function Fl(n){return new di(n)}function mR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function TC(n){return n.collectionGroup!==null}function yl(n){let e=U(n);if(e.le===null){e.le=[];let t=new Set;for(let s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ze(pt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new Mo(s,i))}),t.has(pt.keyField().canonicalString())||e.le.push(new Mo(pt.keyField(),i))}return e.le}function dn(n){let e=U(n);return e.he||(e.he=I9(e,yl(n))),e.he}function I9(n,e){if(n.limitType==="F")return Yw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Mo(r.field,s)});let t=n.endAt?new Bi(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Bi(n.startAt.position,n.startAt.inclusive):null;return Yw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Xw(n,e){let t=n.filters.concat([e]);return new di(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Og(n,e,t){return new di(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Md(n,e){return Ad(dn(n),dn(e))&&n.limitType===e.limitType}function Ek(n){return`${Po(dn(n))}|lt:${n.limitType}`}function dl(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>_k(r)).join(", ")}]`),xd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>wl(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>wl(r)).join(",")),`Target(${i})`}(dn(n))}; limitType=${n.limitType})`}function Pd(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):L.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of yl(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){let c=hR(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,yl(i),r)||i.endAt&&!function(o,a,l){let c=hR(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,yl(i),r))}(n,e)}function Ck(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Dk(n){return(e,t)=>{let i=!1;for(let r of yl(n)){let s=S9(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function S9(n,e,t){let i=n.field.isKeyField()?L.comparator(e.key,t.key):function(s,o,a){let l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ls(l,c):H()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return H()}}var Ui=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){jo(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return hk(this.inner)}size(){return this.innerSize}};var T9=new nt(L.comparator);function _n(){return T9}var Ik=new nt(L.comparator);function Xu(...n){let e=Ik;for(let t of n)e=e.insert(t.key,t);return e}function Sk(n){let e=Ik;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ni(){return ed()}function Tk(){return ed()}function ed(){return new Ui(n=>n.toString(),(n,e)=>n.isEqual(e))}var x9=new nt(L.comparator),A9=new ze(L.comparator);function pe(...n){let e=A9;for(let t of n)e=e.add(t);return e}var M9=new ze(ce);function xC(){return M9}function xk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function Ak(n){return{integerValue:""+n}}function Mk(n,e){return ak(e)?Ak(e):xk(n,e)}var Cl=class{constructor(){this._=void 0}};function P9(n,e,t){return n instanceof cs?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&_m(s)&&(s=IC(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof dr?Rk(n,e):n instanceof hr?kk(n,e):function(r,s){let o=Pk(r,s),a=yR(o)+yR(r.Ie);return Bw(o)&&Bw(r.Ie)?Ak(a):xk(r.serializer,a)}(n,e)}function R9(n,e,t){return n instanceof dr?Rk(n,e):n instanceof hr?kk(n,e):t}function Pk(n,e){return n instanceof us?function(i){return Bw(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var cs=class extends Cl{},dr=class extends Cl{constructor(e){super(),this.elements=e}};function Rk(n,e){let t=Ok(e);for(let i of n.elements)t.some(r=>ji(r,i))||t.push(i);return{arrayValue:{values:t}}}var hr=class extends Cl{constructor(e){super(),this.elements=e}};function kk(n,e){let t=Ok(e);for(let i of n.elements)t=t.filter(r=>!ji(r,i));return{arrayValue:{values:t}}}var us=class extends Cl{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function yR(n){return ct(n.integerValue||n.doubleValue)}function Ok(n){return cd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ro=class{constructor(e,t){this.field=e,this.transform=t}};function k9(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof dr&&r instanceof dr||i instanceof hr&&r instanceof hr?_l(i.elements,r.elements,ji):i instanceof us&&r instanceof us?ji(i.Ie,r.Ie):i instanceof cs&&r instanceof cs}(n.transform,e.transform)}var Zw=class{constructor(e,t){this.version=e,this.transformResults=t}},ut=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function bg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Dl=class{};function Nk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hs(n.key,ut.none()):new ds(n.key,n.data,ut.none());{let t=n.data,i=nn.empty(),r=new ze(pt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new hi(n.key,i,new On(r.toArray()),ut.none())}}function O9(n,e,t){n instanceof ds?function(r,s,o){let a=r.value.clone(),l=_R(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof hi?function(r,s,o){if(!bg(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=_R(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Fk(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function td(n,e,t,i){return n instanceof ds?function(s,o,a,l){if(!bg(s.precondition,o))return a;let c=s.value.clone(),u=bR(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof hi?function(s,o,a,l){if(!bg(s.precondition,o))return a;let c=bR(s.fieldTransforms,l,o),u=o.data;return u.setAll(Fk(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,i):function(s,o,a){return bg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function N9(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=Pk(i.transform,r||null);s!=null&&(t===null&&(t=nn.empty()),t.set(i.field,s))}return t||null}function vR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&_l(i,r,(s,o)=>k9(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ds=class extends Dl{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},hi=class extends Dl{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Fk(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function _R(n,e,t){let i=new Map;Y(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,R9(o,a,t[r]))}return i}function bR(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,P9(s,o,e))}return i}var hs=class extends Dl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ud=class extends Dl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var dd=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&O9(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=td(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=td(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=Tk();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let l=Nk(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(ee.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&_l(this.mutations,e.mutations,(t,i)=>vR(t,i))&&_l(this.baseMutations,e.baseMutations,(t,i)=>vR(t,i))}},Jw=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Y(e.mutations.length===i.length);let r=function(){return x9}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var hd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var eE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var wt,Te;function Lk(n){switch(n){default:return H();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function Vk(n){if(n===void 0)return ft("GRPC error has no .code"),T.UNKNOWN;switch(n){case wt.OK:return T.OK;case wt.CANCELLED:return T.CANCELLED;case wt.UNKNOWN:return T.UNKNOWN;case wt.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case wt.INTERNAL:return T.INTERNAL;case wt.UNAVAILABLE:return T.UNAVAILABLE;case wt.UNAUTHENTICATED:return T.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case wt.NOT_FOUND:return T.NOT_FOUND;case wt.ALREADY_EXISTS:return T.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return T.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case wt.ABORTED:return T.ABORTED;case wt.OUT_OF_RANGE:return T.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return T.UNIMPLEMENTED;case wt.DATA_LOSS:return T.DATA_LOSS;default:return H()}}(Te=wt||(wt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var wR=null;function jk(){return new TextEncoder}var F9=new _o([4294967295,4294967295],0);function ER(n){let e=jk().encode(n),t=new tR;return t.update(e),new Uint8Array(t.digest())}function CR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new _o([t,i],0),new _o([r,s],0)]}var tE=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new So(`Invalid padding: ${t}`);if(i<0)throw new So(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new So(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=_o.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(_o.fromNumber(i)));return r.compare(F9)===1&&(r=new _o([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=ER(e),[i,r]=CR(t);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let t=ER(e),[i,r]=CR(t);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);this.Re(o)}}Re(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},So=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fd=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,pd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(ee.min(),r,new nt(ce),_n(),pe())}},pd=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,pe(),pe(),pe())}};var vl=class{constructor(e,t,i,r){this.Ve=e,this.removedTargetIds=t,this.key=i,this.me=r}},Ng=class{constructor(e,t){this.targetId=e,this.fe=t}},Fg=class{constructor(e,t,i=Nt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Lg=class{constructor(){this.ge=0,this.pe=IR(),this.ye=Nt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=pe(),t=pe(),i=pe();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:H()}}),new pd(this.ye,this.we,e,t,i)}Fe(){this.Se=!1,this.pe=IR()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Y(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},nE=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=_n(),this.Qe=DR(),this.Ke=new nt(ce)}$e(e){for(let t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(let t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{let i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(t);break;case 3:this.je(t)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.Ce(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){let t=e.targetId,i=e.fe.count,r=this.Ye(t);if(r){let s=r.target;if(Rg(s))if(i===0){let o=new L(s.path);this.We(t,o,It.newNoDocument(o,ee.min()))}else Y(i===1);else{let o=this.Ze(t);if(o!==i){let a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}wR?.tt(function(u,d,h,f,p){var g,m,y,b,w,C;let D={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},I=d.unchangedNames;return I&&(D.bloomFilter={applied:p===0,hashCount:(g=I?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(b=(y=(m=I?.bits)===null||m===void 0?void 0:m.bitmap)===null||y===void 0?void 0:y.length)!==null&&b!==void 0?b:0,padding:(C=(w=I?.bits)===null||w===void 0?void 0:w.padding)!==null&&C!==void 0?C:0,mightContain:A=>{var M;return(M=f?.mightContain(A))!==null&&M!==void 0&&M}}),D}(o,e.fe,this.Le.nt(),a,l))}}}}Xe(e){let t=e.fe.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=os(i).toUint8Array()}catch(l){if(l instanceof Ag)return Qn("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new tE(o,r,s)}catch(l){return Qn(l instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,i){return t.fe.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),r++)}),r}it(e){let t=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&Rg(a.target)){let l=new L(a.target.path);this.qe.get(l)!==null||this.st(o,l)||this.We(o,l,It.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let i=pe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let r=new fd(e,t,this.Ke,this.qe,i);return this.qe=_n(),this.Qe=DR(),this.Ke=new nt(ce),r}Ue(e,t){if(!this.je(e))return;let i=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,i),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),i&&(this.qe=this.qe.insert(t,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Lg,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new ze(ce),this.Qe=this.Qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||R("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Lg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function DR(){return new nt(L.comparator)}function IR(){return new nt(L.comparator)}var L9=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),V9=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),j9=(()=>({and:"AND",or:"OR"}))(),iE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function rE(n,e){return n.useProto3Json||xd(e)?e:{value:e}}function Il(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bk(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function B9(n,e){return Il(n,e.toTimestamp())}function gt(n){return Y(!!n),ee.fromTimestamp(function(t){let i=ss(t);return new st(i.seconds,i.nanos)}(n))}function AC(n,e){return function(i){return new ke(["projects",i.projectId,"databases",i.database])}(n).child("documents").child(e).canonicalString()}function Uk(n){let e=ke.fromString(n);return Y(Yk(e)),e}function gd(n,e){return AC(n.databaseId,e.path)}function Li(n,e){let t=Uk(e);if(t.get(1)!==n.databaseId.projectId)throw new P(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new L(zk(t))}function sE(n,e){return AC(n.databaseId,e)}function $k(n){let e=Uk(n);return e.length===4?ke.emptyPath():zk(e)}function md(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zk(n){return Y(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function SR(n,e,t){return{name:gd(n,e),fields:t.value.mapValue.fields}}function Hk(n,e,t){let i=Li(n,e.name),r=gt(e.updateTime),s=e.createTime?gt(e.createTime):ee.min(),o=new nn({mapValue:{fields:e.fields}}),a=It.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function U9(n,e){return"found"in e?function(i,r){Y(!!r.found),r.found.name,r.found.updateTime;let s=Li(i,r.found.name),o=gt(r.found.updateTime),a=r.found.createTime?gt(r.found.createTime):ee.min(),l=new nn({mapValue:{fields:r.found.fields}});return It.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(i,r){Y(!!r.missing),Y(!!r.readTime);let s=Li(i,r.missing),o=gt(r.readTime);return It.newNoDocument(s,o)}(n,e):H()}function $9(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Y(u===void 0||typeof u=="string"),Nt.fromBase64String(u||"")):(Y(u===void 0||u instanceof Uint8Array),Nt.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){let u=c.code===void 0?T.UNKNOWN:Vk(c.code);return new P(u,c.message||"")}(o);t=new Fg(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Li(n,i.document.name),s=gt(i.document.updateTime),o=i.document.createTime?gt(i.document.createTime):ee.min(),a=new nn({mapValue:{fields:i.document.fields}}),l=It.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];t=new vl(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Li(n,i.document),s=i.readTime?gt(i.readTime):ee.min(),o=It.newNoDocument(r,s),a=i.removedTargetIds||[];t=new vl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Li(n,i.document),s=i.removedTargetIds||[];t=new vl([],s,r,null)}else{if(!("filter"in e))return H();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new eE(r,s),a=i.targetId;t=new Ng(a,o)}}return t}function yd(n,e){let t;if(e instanceof ds)t={update:SR(n,e.key,e.value)};else if(e instanceof hs)t={delete:gd(n,e.key)};else if(e instanceof hi)t={update:SR(n,e.key,e.data),updateMask:K9(e.fieldMask)};else{if(!(e instanceof ud))return H();t={verify:gd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof cs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof dr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof us)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw H()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:B9(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(n,e.precondition)),t}function oE(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?ut.updateTime(gt(s.updateTime)):s.exists!==void 0?ut.exists(s.exists):ut.none()}(e.currentDocument):ut.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let l=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),l=new cs;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];l=new dr(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];l=new hr(u)}else"increment"in a?l=new us(o,a.increment):H();let c=pt.fromServerFormat(a.fieldPath);return new Ro(c,l)}(n,r)):[];if(e.update){e.update.name;let r=Li(n,e.update.name),s=new nn({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(l){let c=l.fieldPaths||[];return new On(c.map(u=>pt.fromServerFormat(u)))}(e.updateMask);return new hi(r,s,o,t,i)}return new ds(r,s,t,i)}if(e.delete){let r=Li(n,e.delete);return new hs(r,t)}if(e.verify){let r=Li(n,e.verify);return new ud(r,t)}return H()}function z9(n,e){return n&&n.length>0?(Y(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?gt(r.updateTime):gt(s);return o.isEqual(ee.min())&&(o=gt(s)),new Zw(o,r.transformResults||[])}(t,e))):[]}function qk(n,e){return{documents:[sE(n,e.path)]}}function Wk(n,e){let t={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(t.parent=sE(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=sE(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);let r=function(l){if(l.length!==0)return Qk(Ue.create(l,"and"))}(e.filters);r&&(t.structuredQuery.where=r);let s=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:hl(d.field),direction:q9(d.dir)}}(c))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let o=rE(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),t}function Gk(n){let e=$k(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Y(i===1);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){let h=Kk(d);return h instanceof Ue&&SC(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(h=>function(p){return new Mo(fl(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,xd(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(d){let h=!!d.before,f=d.values||[];return new Bi(f,h)}(t.startAt));let c=null;return t.endAt&&(c=function(d){let h=!d.before,f=d.values||[];return new Bi(f,h)}(t.endAt)),wk(e,r,o,s,a,"F",l,c)}function H9(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Kk(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=fl(t.unaryFilter.field);return Se.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=fl(t.unaryFilter.field);return Se.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=fl(t.unaryFilter.field);return Se.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=fl(t.unaryFilter.field);return Se.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return Se.create(fl(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ue.create(t.compositeFilter.filters.map(i=>Kk(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function q9(n){return L9[n]}function W9(n){return V9[n]}function G9(n){return j9[n]}function hl(n){return{fieldPath:n.canonicalString()}}function fl(n){return pt.fromServerFormat(n.fieldPath)}function Qk(n){return n instanceof Se?function(t){if(t.op==="=="){if(cR(t.value))return{unaryFilter:{field:hl(t.field),op:"IS_NAN"}};if(lR(t.value))return{unaryFilter:{field:hl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cR(t.value))return{unaryFilter:{field:hl(t.field),op:"IS_NOT_NAN"}};if(lR(t.value))return{unaryFilter:{field:hl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hl(t.field),op:W9(t.op),value:t.value}}}(n):n instanceof Ue?function(t){let i=t.getFilters().map(r=>Qk(r));return i.length===1?i[0]:{compositeFilter:{op:G9(t.op),filters:i}}}(n):H()}function K9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Yk(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Sl=class n{constructor(e,t,i,r,s=ee.min(),o=ee.min(),a=Nt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Vg=class{constructor(e){this.ut=e}};function Q9(n,e){let t;if(e.document)t=Hk(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=L.fromSegments(e.noDocument.path),r=Oo(e.noDocument.readTime);t=It.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return H();{let i=L.fromSegments(e.unknownDocument.path),r=Oo(e.unknownDocument.version);t=It.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){let s=new st(r[0],r[1]);return ee.fromTimestamp(s)}(e.readTime)),t}function TR(n,e){let t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:gd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Il(s,o.version.toTimestamp()),createTime:Il(s,o.createTime.toTimestamp())}}(n.ut,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ko(e.version)};else{if(!e.isUnknownDocument())return H();i.unknownDocument={path:t.path.toArray(),version:ko(e.version)}}return i}function jg(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ko(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Oo(n){let e=new st(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function Co(n,e){let t=(e.baseMutations||[]).map(s=>oE(n.ut,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>oE(n.ut,s)),r=st.fromMillis(e.localWriteTimeMs);return new dd(e.batchId,r,t,i)}function Zu(n){let e=Oo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Oo(n.lastLimboFreeSnapshotVersion):ee.min(),i;return i=function(s){return s.documents!==void 0}(n.query)?function(s){return Y(s.documents.length===1),dn(Fl($k(s.documents[0])))}(n.query):function(s){return dn(Gk(s))}(n.query),new Sl(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Nt.fromBase64String(n.resumeToken))}function Xk(n,e){let t=ko(e.snapshotVersion),i=ko(e.lastLimboFreeSnapshotVersion),r;r=Rg(e.target)?qk(n.ut,e.target):Wk(n.ut,e.target);let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Po(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function MC(n){let e=Gk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Og(e,e.limit,"L"):e}function Ew(n,e){return new hd(e.largestBatchId,oE(n.ut,e.overlayMutation))}function xR(n,e){let t=e.path.lastSegment();return[n,un(e.path.popLast()),t]}function AR(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ko(i.readTime),documentKey:un(i.documentKey.path),largestBatchId:i.largestBatchId}}var aE=class{getBundleMetadata(e,t){return MR(e).get(t).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:Oo(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,t){return MR(e).put(function(r){return{bundleId:r.id,createTime:ko(gt(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return PR(e).get(t).next(i=>{if(i)return function(s){return{name:s.name,query:MC(s.bundledQuery),readTime:Oo(s.readTime)}}(i)})}saveNamedQuery(e,t){return PR(e).put(function(r){return{name:r.name,readTime:ko(gt(r.readTime)),bundledQuery:r.bundledQuery}}(t))}};function MR(n){return Ft(n,"bundles")}function PR(n){return Ft(n,"namedQueries")}var Bg=class n{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){let i=t.uid||"";return new n(e,i)}getOverlay(e,t){return Gu(e).get(xR(this.userId,t)).next(i=>i?Ew(this.serializer,i):null)}getOverlays(e,t){let i=Ni();return S.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){let r=[];return i.forEach((s,o)=>{let a=new hd(t,o);r.push(this.lt(e,a))}),S.waitFor(r)}removeOverlaysForBatchId(e,t,i){let r=new Set;t.forEach(o=>r.add(un(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Gu(e).H("collectionPathOverlayIndex",a))}),S.waitFor(s)}getOverlaysForCollection(e,t,i){let r=Ni(),s=un(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Gu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let l of a){let c=Ew(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(e,t,i,r){let s=Ni(),o,a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gu(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{let d=Ew(this.serializer,c);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}lt(e,t){return Gu(e).put(function(r,s,o){let[a,l,c]=xR(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:yd(r.ut,o.mutation)}}(this.serializer,this.userId,t))}};function Gu(n){return Ft(n,"documentOverlays")}var cr=class{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(ct(e.integerValue));else if("doubleValue"in e){let i=ct(e.doubleValue);isNaN(i)?this.Tt(t,13):(this.Tt(t,15),sd(i)?t.Et(0):t.Et(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Tt(t,20),typeof i=="string"?t.dt(i):(t.dt(`${i.seconds||""}`),t.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(os(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?pk(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):H()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){let i=e.fields||{};this.Tt(t,55);for(let r of Object.keys(i))this.At(r,t),this.Pt(i[r],t)}yt(e,t){let i=e.values||[];this.Tt(t,50);for(let r of i)this.Pt(r,t)}ft(e,t){this.Tt(t,37),L.fromName(e).path.forEach(i=>{this.Tt(t,60),this.wt(i,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}};cr.St=new cr;function Y9(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function RR(n){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=Y9(255&i[s]);if(r+=o,o!==8)break}return r}(n);return Math.ceil(e/8)}var lE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Dt(i.value),i=t.next();this.Ct()}vt(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{let r=t.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){let t=this.Bt(e),i=RR(t);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){let t=this.Bt(e),i=RR(t);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Dt(e){let t=255&e;t===0?(this.Qt(0),this.Qt(255)):t===255?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){let t=255&e;t===0?(this.$t(0),this.$t(255)):t===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},cE=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},uE=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},Do=class{constructor(){this.Wt=new lE,this.Gt=new cE(this.Wt),this.zt=new uE(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var Io=class n{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ht(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function Xr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=kR(n.arrayValue,e.arrayValue),t!==0?t:(t=kR(n.directionalValue,e.directionalValue),t!==0?t:L.comparator(n.documentKey,e.documentKey)))}function kR(n,e){for(let t=0;t<n.length&&t<e.length;++t){let i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}var Ug=class{constructor(e){this.Jt=new ze((t,i)=>pt.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let t of e.filters){let i=t;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(Y(e.collectionGroup===this.collectionId),this.Xt)return!1;let t=kw(e);if(t!==void 0&&!this.tn(t))return!1;let i=wo(e),r=new Set,s=0,o=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=i[s];if(!this.nn(a,l)||!this.rn(this.Yt[o++],l))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new ze(pt.comparator),t=[];for(let i of this.Zt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new ml(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new ml(i.field,0))}for(let i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new ml(i.field,i.dir==="asc"?0:1)));return new bl(bl.UNKNOWN_ID,this.collectionId,t,rd.empty())}tn(e){for(let t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Zk(n){var e,t;if(Y(n instanceof Se||n instanceof Ue),n instanceof Se){if(n instanceof Pg){let r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Se.create(n.field,"==",s)))||[];return Ue.create(r,"or")}return n}let i=n.filters.map(r=>Zk(r));return Ue.create(i,n.op)}function X9(n){if(n.getFilters().length===0)return[];let e=fE(Zk(n));return Y(Jk(e)),dE(e)||hE(e)?[e]:e.getFilters()}function dE(n){return n instanceof Se}function hE(n){return n instanceof Ue&&SC(n)}function Jk(n){return dE(n)||hE(n)||function(t){if(t instanceof Ue&&Uw(t)){for(let i of t.getFilters())if(!dE(i)&&!hE(i))return!1;return!0}return!1}(n)}function fE(n){if(Y(n instanceof Se||n instanceof Ue),n instanceof Se)return n;if(n.filters.length===1)return fE(n.filters[0]);let e=n.filters.map(i=>fE(i)),t=Ue.create(e,n.op);return t=$g(t),Jk(t)?t:(Y(t instanceof Ue),Y(El(t)),Y(t.filters.length>1),t.filters.reduce((i,r)=>PC(i,r)))}function PC(n,e){let t;return Y(n instanceof Se||n instanceof Ue),Y(e instanceof Se||e instanceof Ue),t=n instanceof Se?e instanceof Se?function(r,s){return Ue.create([r,s],"and")}(n,e):OR(n,e):e instanceof Se?OR(e,n):function(r,s){if(Y(r.filters.length>0&&s.filters.length>0),El(r)&&El(s))return vk(r,s.getFilters());let o=Uw(r)?r:s,a=Uw(r)?s:r,l=o.filters.map(c=>PC(c,a));return Ue.create(l,"or")}(n,e),$g(t)}function OR(n,e){if(El(e))return vk(e,n.getFilters());{let t=e.filters.map(i=>PC(n,i));return Ue.create(t,"or")}}function $g(n){if(Y(n instanceof Se||n instanceof Ue),n instanceof Se)return n;let e=n.getFilters();if(e.length===1)return $g(e[0]);if(mk(n))return n;let t=e.map(r=>$g(r)),i=[];return t.forEach(r=>{r instanceof Se?i.push(r):r instanceof Ue&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ue.create(i,n.op)}var pE=class{constructor(){this.on=new vd}addToCollectionParentIndex(e,t){return this.on.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Yn.min())}updateCollectionGroup(e,t,i){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},vd=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new ze(ke.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new ze(ke.comparator)).toArray()}};var fg=new Uint8Array(0),gE=class{constructor(e,t){this.user=e,this.databaseId=t,this._n=new vd,this.an=new Ui(i=>Po(i),(i,r)=>Ad(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){let i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});let s={collectionId:i,parent:un(r)};return NR(e).put(s)}return S.resolve()}getCollectionParents(e,t){let i=[],r=IDBKeyRange.bound([t,""],[ik(t),""],!1,!0);return NR(e).W(r).next(s=>{for(let o of s){if(o.collectionId!==t)break;i.push(Oi(o.parent))}return i})}addFieldIndex(e,t){let i=Ku(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(t);delete r.indexId;let s=i.add(r);if(t.indexState){let o=ll(e);return s.next(a=>{o.put(AR(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let i=Ku(e),r=ll(e),s=al(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Ku(e),i=al(e),r=ll(e);return t.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,t){return S.forEach(this.un(t),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new Ug(i).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let i=al(e),r=!0,s=new Map;return S.forEach(this.un(t),o=>this.cn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=pe(),a=[];return S.forEach(s,(l,c)=>{R("IndexedDbIndexManager",`Using index ${function(w){return`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(C=>`${C.fieldPath}:${C.kind}`).join(",")}`}(l)} to execute ${Po(t)}`);let u=function(w,C){let D=kw(C);if(D===void 0)return null;for(let I of kg(w,D.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(c,l),d=function(w,C){let D=new Map;for(let I of wo(C))for(let A of kg(w,I.fieldPath))switch(A.op){case"==":case"in":D.set(I.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return D.set(I.fieldPath.canonicalString(),A.value),Array.from(D.values())}return null}(c,l),h=function(w,C){let D=[],I=!0;for(let A of wo(C)){let M=A.kind===0?pR(w,A.fieldPath,w.startAt):gR(w,A.fieldPath,w.startAt);D.push(M.value),I&&(I=M.inclusive)}return new Bi(D,I)}(c,l),f=function(w,C){let D=[],I=!0;for(let A of wo(C)){let M=A.kind===0?gR(w,A.fieldPath,w.endAt):pR(w,A.fieldPath,w.endAt);D.push(M.value),I&&(I=M.inclusive)}return new Bi(D,I)}(c,l),p=this.ln(l,c,h),g=this.ln(l,c,f),m=this.hn(l,c,d),y=this.Pn(l.indexId,u,p,h.inclusive,g,f.inclusive,m);return S.forEach(y,b=>i.j(b,t.limit).next(w=>{w.forEach(C=>{let D=L.fromSegments(C.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return S.resolve(null)})}un(e){let t=this.an.get(e);return t||(e.filters.length===0?t=[e]:t=X9(Ue.create(e.filters,"and")).map(i=>Yw(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,i,r,s,o,a){let l=(t!=null?t.length:1)*Math.max(i.length,s.length),c=l/(t!=null?t.length:1),u=[];for(let d=0;d<l;++d){let h=t?this.In(t[d/c]):fg,f=this.Tn(e,h,i[d%c],r),p=this.En(e,h,s[d%c],o),g=a.map(m=>this.Tn(e,h,m,!0));u.push(...this.createRange(f,p,g))}return u}Tn(e,t,i,r){let s=new Io(e,L.empty(),t,i);return r?s:s.Ht()}En(e,t,i,r){let s=new Io(e,L.empty(),t,i);return r?s.Ht():s}cn(e,t){let i=new Ug(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let a of s)i.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2,r=this.un(t);return S.forEach(r,s=>this.cn(e,s).next(o=>{o?i!==0&&o.fields.length<function(l){let c=new ze(pt.comparator),u=!1;for(let d of l.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:c=c.add(h.field));for(let d of l.orderBy)d.field.isKeyField()||(c=c.add(d.field));return c.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(t)&&r.length>1&&i===2?1:i)}dn(e,t){let i=new Do;for(let r of wo(e)){let s=t.data.field(r.fieldPath);if(s==null)return null;let o=i.jt(r.kind);cr.St.ht(s,o)}return i.Ut()}In(e){let t=new Do;return cr.St.ht(e,t.jt(0)),t.Ut()}An(e,t){let i=new Do;return cr.St.ht(Ao(this.databaseId,t),i.jt(function(s){let o=wo(s);return o.length===0?0:o[o.length-1].kind}(e))),i.Ut()}hn(e,t,i){if(i===null)return[];let r=[];r.push(new Do);let s=0;for(let o of wo(e)){let a=i[s++];for(let l of r)if(this.Rn(t,o.fieldPath)&&cd(a))r=this.Vn(r,o,a);else{let c=l.jt(o.kind);cr.St.ht(a,c)}}return this.mn(r)}ln(e,t,i){return this.hn(e,t,i.position)}mn(e){let t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Ut();return t}Vn(e,t,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let l=new Do;l.seed(a.Ut()),cr.St.ht(o,l.jt(t.kind)),s.push(l)}return s}Rn(e,t){return!!e.filters.find(i=>i instanceof Se&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){let i=Ku(e),r=ll(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{let o=[];return S.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(function(u,d){let h=d?new rd(d.sequenceNumber,new Yn(Oo(d.readTime),new L(Oi(d.documentKey)),d.largestBatchId)):rd.empty(),f=u.fields.map(([p,g])=>new ml(pt.fromServerFormat(p),g));return new bl(u.indexId,u.collectionGroup,f,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ce(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){let r=Ku(e),s=ll(e);return this.fn(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,l=>s.put(AR(l.indexId,this.user,o,i)))))}updateIndexEntries(e,t){let i=new Map;return S.forEach(t,(r,s)=>{let o=i.get(r.collectionGroup);return(o?S.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),S.forEach(a,l=>this.gn(e,r,l).next(c=>{let u=this.pn(s,l);return c.isEqual(u)?S.resolve():this.yn(e,s,l,c,u)}))))})}wn(e,t,i,r){return al(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,i,r){return al(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,t.key),t.key.path.toArray()])}gn(e,t,i){let r=al(e),s=new ze(Xr);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,t)])},(o,a)=>{s=s.add(new Io(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,t){let i=new ze(Xr),r=this.dn(t,e);if(r==null)return i;let s=kw(t);if(s!=null){let o=e.data.field(s.fieldPath);if(cd(o))for(let a of o.arrayValue.values||[])i=i.add(new Io(t.indexId,e.key,this.In(a),r))}else i=i.add(new Io(t.indexId,e.key,fg,r));return i}yn(e,t,i,r,s){R("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(l,c,u,d,h){let f=l.getIterator(),p=c.getIterator(),g=ol(f),m=ol(p);for(;g||m;){let y=!1,b=!1;if(g&&m){let w=u(g,m);w<0?b=!0:w>0&&(y=!0)}else g!=null?b=!0:y=!0;y?(d(m),m=ol(p)):b?(h(g),g=ol(f)):(g=ol(f),m=ol(p))}}(r,s,Xr,a=>{o.push(this.wn(e,t,i,a))},a=>{o.push(this.Sn(e,t,i,a))}),S.waitFor(o)}fn(e){let t=1;return ll(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>Xr(o,a)).filter((o,a,l)=>!a||Xr(o,l[a-1])!==0);let r=[];r.push(e);for(let o of i){let a=Xr(o,e),l=Xr(o,t);if(a===0)r[0]=e.Ht();else if(a>0&&l<0)r.push(o),r.push(o.Ht());else if(l>0)break}r.push(t);let s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,fg,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,fg,[]];s.push(IDBKeyRange.bound(a,l))}return s}bn(e,t){return Xr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(FR)}getMinOffset(e,t){return S.mapArray(this.un(t),i=>this.cn(e,i).next(r=>r||H())).next(FR)}};function NR(n){return Ft(n,"collectionParents")}function al(n){return Ft(n,"indexEntries")}function Ku(n){return Ft(n,"indexConfiguration")}function ll(n){return Ft(n,"indexState")}function FR(n){Y(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;CC(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Yn(e.readTime,e.documentKey,t)}var LR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Kn=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function eO(n,e,t){let i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,l=i.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(l.next(()=>{Y(a===1)}));let c=[];for(let u of t.mutations){let d=lk(e,u.key.path,t.batchId);s.push(r.delete(d)),c.push(u.key)}return S.waitFor(s).next(()=>c)}function zg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw H();e=n.noDocument}return JSON.stringify(e).length}Kn.DEFAULT_COLLECTION_PERCENTILE=10,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kn.DEFAULT=new Kn(41943040,Kn.DEFAULT_COLLECTION_PERCENTILE,Kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kn.DISABLED=new Kn(-1,0,0);var Hg=class n{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,t,i,r){Y(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,i,r)}checkEmpty(e){let t=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zr(e).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){let s=pl(e),o=Zr(e);return o.add({}).next(a=>{Y(typeof a=="number");let l=new dd(a,t,i,r),c=function(f,p,g){let m=g.baseMutations.map(b=>yd(f.ut,b)),y=g.mutations.map(b=>yd(f.ut,b));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:m,mutations:y}}(this.serializer,this.userId,l),u=[],d=new ze((h,f)=>ce(h.canonicalString(),f.canonicalString()));for(let h of r){let f=lk(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(c)),u.push(s.put(f,r9))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=l.keys()}),S.waitFor(u).next(()=>l)})}lookupMutationBatch(e,t){return Zr(e).get(t).next(i=>i?(Y(i.userId===this.userId),Co(this.serializer,i)):null)}Cn(e,t){return this.Dn[t]?S.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){let r=i.keys();return this.Dn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return Zr(e).Y({index:"userMutationsIndex",range:r},(o,a,l)=>{a.userId===this.userId&&(Y(a.batchId>=i),s=Co(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Zr(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zr(e).W("userMutationsIndex",t).next(i=>i.map(r=>Co(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){let i=yg(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return pl(e).Y({range:r},(o,a,l)=>{let[c,u,d]=o,h=Oi(u);if(c===this.userId&&t.path.isEqual(h))return Zr(e).get(d).next(f=>{if(!f)throw H();Y(f.userId===this.userId),s.push(Co(this.serializer,f))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ze(ce),r=[];return t.forEach(s=>{let o=yg(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=pl(e).Y({range:a},(c,u,d)=>{let[h,f,p]=c,g=Oi(f);h===this.userId&&s.path.isEqual(g)?i=i.add(p):d.done()});r.push(l)}),S.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=yg(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new ze(ce);return pl(e).Y({range:o},(l,c,u)=>{let[d,h,f]=l,p=Oi(h);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.vn(e,a))}vn(e,t){let i=[],r=[];return t.forEach(s=>{r.push(Zr(e).get(s).next(o=>{if(o===null)throw H();Y(o.userId===this.userId),i.push(Co(this.serializer,o))}))}),S.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return eO(e.ae,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),S.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return pl(e).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){let l=Oi(s[1]);r.push(l)}else a.done()}).next(()=>{Y(r.length===0)})})}containsKey(e,t){return tO(e,this.userId,t)}Mn(e){return nO(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function tO(n,e,t){let i=yg(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return pl(n).Y({range:s,J:!0},(a,l,c)=>{let[u,d,h]=a;u===e&&d===r&&(o=!0),c.done()}).next(()=>o)}function Zr(n){return Ft(n,"mutations")}function pl(n){return Ft(n,"documentMutations")}function nO(n){return Ft(n,"mutationQueues")}var Tl=class n{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new n(0)}static Nn(){return new n(-1)}};var mE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{let i=new Tl(t.highestTargetId);return t.highestTargetId=i.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>ee.fromTimestamp(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(t,i),this.Ln(e,i))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>cl(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(Y(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,t,i){let r=0,s=[];return cl(e).Y((o,a)=>{let l=Zu(a);l.sequenceNumber<=t&&i.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(e,l)))}).next(()=>S.waitFor(s)).next(()=>r)}forEachTarget(e,t){return cl(e).Y((i,r)=>{let s=Zu(r);t(s)})}Bn(e){return VR(e).get("targetGlobalKey").next(t=>(Y(t!==null),t))}Ln(e,t){return VR(e).put("targetGlobalKey",t)}kn(e,t){return cl(e).put(Xk(this.serializer,t))}qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){let i=Po(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return cl(e).Y({range:r,index:"queryTargetsIndex"},(o,a,l)=>{let c=Zu(a);Ad(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,i){let r=[],s=Jr(e);return t.forEach(o=>{let a=un(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),S.waitFor(r)}removeMatchingKeys(e,t,i){let r=Jr(e);return S.forEach(t,s=>{let o=un(s.path);return S.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){let i=Jr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){let i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Jr(e),s=pe();return r.Y({range:i,J:!0},(o,a,l)=>{let c=Oi(o[1]),u=new L(c);s=s.add(u)}).next(()=>s)}containsKey(e,t){let i=un(t.path),r=IDBKeyRange.bound([i],[ik(i)],!1,!0),s=0;return Jr(e).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}_t(e,t){return cl(e).get(t).next(i=>i?Zu(i):null)}};function cl(n){return Ft(n,"targets")}function VR(n){return Ft(n,"targetGlobal")}function Jr(n){return Ft(n,"targetDocuments")}function jR([n,e],[t,i]){let r=ce(n,t);return r===0?ce(e,i):r}var yE=class{constructor(e){this.Qn=e,this.buffer=new ze(jR),this.Kn=0}$n(){return++this.Kn}Un(e){let t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();jR(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},vE=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){R("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){gs(t)?R("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ps(t)}yield this.Gn(3e5)}))}},_E=class{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return S.resolve(kn._e);let i=new yE(t);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(R("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(LR)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(R("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LR):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let i,r,s,o,a,l,c,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(R("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(c=Date.now(),ul()<=vi.DEBUG&&R("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function Z9(n,e){return new _E(n,e)}var bE=class{constructor(e,t){this.db=e,this.garbageCollector=Z9(this,t)}jn(e){let t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Yn(e){let t=0;return this.Hn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(i,r)=>t(r))}addReference(e,t,i){return pg(e,i)}removeReference(e,t,i){return pg(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return pg(e,t)}Xn(e,t){return function(r,s){let o=!1;return nO(r).Z(a=>tO(r,a,s).next(l=>(l&&(o=!0),S.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.Zn(e,(o,a)=>{if(a<=t){let l=this.Xn(e,o).next(c=>{if(!c)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,ee.min()),Jr(e).delete(function(d){return[0,un(d.path)]}(o))))});r.push(l)}}).next(()=>S.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return pg(e,t)}Zn(e,t){let i=Jr(e),r,s=kn._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==kn._e&&t(new L(Oi(r)),s),s=c,r=l):s=kn._e}).next(()=>{s!==kn._e&&t(new L(Oi(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function pg(n,e){return Jr(n).put(function(i,r){return{targetId:0,path:un(i.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}var qg=class{constructor(){this.changes=new Ui(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,It.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?S.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var wE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return bo(e).put(i)}removeEntry(e,t,i){return bo(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],jg(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.er(e,i)))}getEntry(e,t){let i=It.newInvalidDocument(t);return bo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qu(t))},(r,s)=>{i=this.tr(t,s)}).next(()=>i)}nr(e,t){let i={size:0,document:It.newInvalidDocument(t)};return bo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Qu(t))},(r,s)=>{i={document:this.tr(t,s),size:zg(s)}}).next(()=>i)}getEntries(e,t){let i=_n();return this.rr(e,t,(r,s)=>{let o=this.tr(r,s);i=i.insert(r,o)}).next(()=>i)}ir(e,t){let i=_n(),r=new nt(L.comparator);return this.rr(e,t,(s,o)=>{let a=this.tr(s,o);i=i.insert(s,a),r=r.insert(s,zg(o))}).next(()=>({documents:i,sr:r}))}rr(e,t,i){if(t.isEmpty())return S.resolve();let r=new ze($R);t.forEach(l=>r=r.add(l));let s=IDBKeyRange.bound(Qu(r.first()),Qu(r.last())),o=r.getIterator(),a=o.getNext();return bo(e).Y({index:"documentKeyIndex",range:s},(l,c,u)=>{let d=L.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&$R(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?u.U(Qu(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),jg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bo(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let u=_n();for(let d of c){let h=this.tr(L.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Pd(t,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,t,i,r){let s=_n(),o=UR(t,i),a=UR(t,Yn.max());return bo(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{let d=this.tr(L.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new EE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return BR(e).get("remoteDocumentGlobalKey").next(t=>(Y(!!t),t))}er(e,t){return BR(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){let i=Q9(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(ee.min())))return i}return It.newInvalidDocument(e)}};function iO(n){return new wE(n)}var EE=class extends qg{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Ui(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let t=[],i=0,r=new ze((s,o)=>ce(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ar.get(s);if(t.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){let l=TR(this._r.serializer,o);r=r.add(s.path.popLast());let c=zg(l);i+=c-a.size,t.push(this._r.addEntry(e,s,l))}else if(i-=a.size,this.trackRemovals){let l=TR(this._r.serializer,o.convertToNoDocument(ee.min()));t.push(this._r.addEntry(e,s,l))}}),r.forEach(s=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),t.push(this._r.updateMetadata(e,i)),S.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(i=>(this.ar.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:i,sr:r})=>(r.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function BR(n){return Ft(n,"remoteDocumentGlobal")}function bo(n){return Ft(n,"remoteDocumentsV14")}function Qu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function UR(n,e){let t=e.documentKey.path.toArray();return[n,jg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function $R(n,e){let t=n.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=ce(t[s],i[s]),r)return r;return r=ce(t.length,i.length),r||(r=ce(t[t.length-2],i[i.length-2]),r||ce(t[t.length-1],i[i.length-1]))}var CE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Wg=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&td(i.mutation,r,On.empty(),st.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,pe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=pe()){let r=Ni();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Xu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=Ni();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,pe()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=_n(),o=ed(),a=function(){return ed()}();return t.forEach((l,c)=>{let u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof hi)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),td(u.mutation,c,u.mutation.getFieldMask(),st.now())):o.set(c.key,On.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new CE(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let i=ed(),r=new nt((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=t.get(l);if(c===null)return;let u=i.get(l)||On.empty();u=a.applyToLocalView(c,u),i.set(l,u);let d=(r.get(a.batchId)||pe()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,u=l.value,d=Tk();u.forEach(h=>{if(!s.has(h)){let f=Nk(t.get(h),i.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return S.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return L.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):TC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):S.resolve(Ni()),a=-1,l=s;return o.next(c=>S.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?S.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,pe())).next(u=>({batchId:a,changes:Sk(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new L(t)).next(i=>{let r=Xu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Xu();return this.indexManager.getCollectionParents(e,s).next(a=>S.forEach(a,l=>{let c=function(d,h){return new di(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{let u=c.getKey();o.get(u)===null&&(o=o.insert(u,It.newInvalidDocument(u)))});let a=Xu();return o.forEach((l,c)=>{let u=s.get(l);u!==void 0&&td(u.mutation,c,On.empty(),st.now()),Pd(t,c)&&(a=a.insert(l,c))}),a})}};var DE=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return S.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(r){return{id:r.id,version:r.version,createTime:gt(r.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(r){return{name:r.name,query:MC(r.bundledQuery),readTime:gt(r.readTime)}}(t)),S.resolve()}};var IE=class{constructor(){this.overlays=new nt(L.comparator),this.lr=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Ni();return S.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.lt(e,t,s)}),S.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),S.resolve()}getOverlaysForCollection(e,t,i){let r=Ni(),s=t.length+1,o=new L(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return S.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new nt((c,u)=>c-u),o=this.overlays.getIterator();for(;o.hasNext();){let c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Ni(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}let a=Ni(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return S.resolve(a)}lt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new hd(t,i));let s=this.lr.get(t);s===void 0&&(s=pe(),this.lr.set(t,s)),this.lr.set(t,s.add(i.key))}};var _d=class{constructor(){this.hr=new ze(Et.Pr),this.Ir=new ze(Et.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){let i=new Et(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new Et(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){let t=new L(new ke([])),i=new Et(t,e),r=new Et(t,e+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let t=new L(new ke([])),i=new Et(t,e),r=new Et(t,e+1),s=pe();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Et(e,0),i=this.hr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Et=class{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return L.comparator(e.key,t.key)||ce(e.gr,t.gr)}static Tr(e,t){return ce(e.gr,t.gr)||L.comparator(e.key,t.key)}};var SE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new ze(Et.Pr)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new dd(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.yr=this.yr.add(new Et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,t){return S.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Sr(i),s=r<0?0:r;return S.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Et(t,0),r=new Et(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{let a=this.wr(o.gr);s.push(a)}),S.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new ze(ce);return t.forEach(r=>{let s=new Et(r,0),o=new Et(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),S.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;L.isDocumentKey(s)||(s=s.child(""));let o=new Et(new L(s),0),a=new ze(ce);return this.yr.forEachWhile(l=>{let c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.gr)),!0)},o),S.resolve(this.br(a))}br(e){let t=[];return e.forEach(i=>{let r=this.wr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Y(this.Dr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return S.forEach(t.mutations,r=>{let s=new Et(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){let i=new Et(t,0),r=this.yr.firstAfterOrEqual(i);return S.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var TE=class{constructor(e){this.Cr=e,this.docs=function(){return new nt(L.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return S.resolve(i?i.document.mutableCopy():It.newInvalidDocument(t))}getEntries(e,t){let i=_n();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():It.newInvalidDocument(r))}),S.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=_n(),o=t.path,a=new L(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||CC(sk(u),i)<=0||(r.has(u.key)||Pd(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return S.resolve(s)}getAllFromCollectionGroup(e,t,i,r){H()}vr(e,t){return S.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new xE(this)}getSize(e){return S.resolve(this.size)}},xE=class extends qg{constructor(e){super(),this._r=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),S.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}};var AE=class{constructor(e){this.persistence=e,this.Fr=new Ui(t=>Po(t),Ad),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Mr=0,this.Or=new _d,this.targetCount=0,this.Nr=Tl.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),S.resolve()}kn(e){this.Fr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Nr=new Tl(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.kn(t),S.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),S.waitFor(s).next(()=>r)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let i=this.Fr.get(t)||null;return S.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),S.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),S.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Or.mr(t);return S.resolve(i)}containsKey(e,t){return S.resolve(this.Or.containsKey(t))}};var Gg=class{constructor(e,t){this.Br={},this.overlays={},this.Lr=new kn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new AE(this),this.indexManager=new pE,this.remoteDocumentCache=function(r){return new TE(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new Vg(t),this.Kr=new DE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new SE(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){R("MemoryPersistence","Starting transaction:",e);let r=new ME(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,t){return S.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}},ME=class extends Sg{constructor(e){super(),this.currentSequenceNumber=e}},Kg=class n{constructor(e){this.persistence=e,this.Gr=new _d,this.zr=null}static jr(e){return new n(e)}get Hr(){if(this.zr)return this.zr;throw H()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),S.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Hr,i=>{let r=L.fromPath(i);return this.Jr(e,r).next(s=>{s||t.removeEntry(r,ee.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return S.or([()=>S.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}};var PE=class{constructor(e){this.serializer=e}N(e,t,i,r){let s=new Tg("createOrUpgrade",t);i<1&&r>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sR,{unique:!0}),l.createObjectStore("documentMutations")}(e),zR(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=S.resolve();return i<3&&r>=3&&(i!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),zR(e)),o=o.next(()=>function(l){let c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").W().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sR,{unique:!0});let d=c.store("mutations"),h=u.map(f=>d.put(f));return S.waitFor(h)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Zr(s))),i<6&&r>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),i<7&&r>=7&&(o=o.next(()=>this.ei(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.ni(s))),i<11&&r>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(l){let c=l.createObjectStore("documentOverlays",{keyPath:m9});c.createIndex("collectionPathOverlayIndex",y9,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",v9,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(l){let c=l.createObjectStore("remoteDocumentsV14",{keyPath:s9});c.createIndex("documentKeyIndex",o9),c.createIndex("collectionGroupIndex",a9)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ii(e,s))),i<15&&r>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:h9}).createIndex("sequenceNumberIndex",f9,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:p9}).createIndex("documentKeyIndex",g9,{unique:!1})}(e))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y((i,r)=>{t+=zg(r)}).next(()=>{let i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){let t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>S.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>S.forEach(a,l=>{Y(l.userId===s.userId);let c=Co(this.serializer,l);return eO(e,s.userId,c).next(()=>{})}))}))}ei(e){let t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.Y((o,a)=>{let l=new ke(o),c=function(d){return[0,un(d)]}(l);s.push(t.get(c).next(u=>u?S.resolve():(d=>t.put({targetId:0,path:un(d),sequenceNumber:r.highestListenSequenceNumber}))(l)))}).next(()=>S.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:d9});let i=t.store("collectionParents"),r=new vd,s=o=>{if(r.add(o)){let a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:un(l)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{let l=new ke(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,l],c)=>{let u=Oi(a);return s(u.popLast())}))}ni(e){let t=e.store("targets");return t.Y((i,r)=>{let s=Zu(r),o=Xk(this.serializer,s);return t.put(o)})}ri(e,t){let i=t.store("remoteDocuments"),r=[];return i.Y((s,o)=>{let a=t.store("remoteDocumentsV14"),l=function(d){return d.document?new L(ke.fromString(d.document.name).popFirst(5)):d.noDocument?L.fromSegments(d.noDocument.path):d.unknownDocument?L.fromSegments(d.unknownDocument.path):H()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(c))}).next(()=>S.waitFor(r))}ii(e,t){let i=t.store("mutations"),r=iO(this.serializer),s=new Gg(Kg.jr,this.serializer.ut);return i.W().next(o=>{let a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:pe();Co(this.serializer,l).keys().forEach(d=>u=u.add(d)),a.set(l.userId,u)}),S.forEach(a,(l,c)=>{let u=new Ct(c),d=Bg.ct(this.serializer,u),h=s.getIndexManager(u),f=Hg.ct(u,this.serializer,h,s.referenceDelegate);return new Wg(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new od(t,kn._e),l).next()})})}};function zR(n){n.createObjectStore("targetDocuments",{keyPath:c9}).createIndex("documentTargetsIndex",u9,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",l9,{unique:!0}),n.createObjectStore("targetGlobal")}var Cw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",RE=class n{constructor(e,t,i,r,s,o,a,l,c,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.si=s,this.window=o,this.document=a,this.oi=c,this._i=u,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!n.D())throw new P(T.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bE(this,r),this.Ii=t+"main",this.serializer=new Vg(l),this.Ti=new rs(this.Ii,this.ai,new PE(this.serializer)),this.qr=new mE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iO(this.serializer),this.Kr=new aE,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,u===!1&&ft("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(T.FAILED_PRECONDITION,Cw);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new kn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=t=>x(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(t=>x(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>x(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>gg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(gs(e))return R("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return R("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Yu(e).get("owner").next(t=>S.resolve(this.wi(t)))}Si(e){return gg(e).delete(this.clientId)}bi(){return x(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let i=Ft(t,"clientMetadata");return i.W().next(r=>{let s=this.Ci(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return S.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(let t of e)this.Ei.removeItem(this.vi(t.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?S.resolve(!0):Yu(e).get("owner").next(t=>{if(t!==null&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new P(T.FAILED_PRECONDITION,Cw);return!1}}return!(!this.networkEnabled||!this.inForeground)||gg(e).W().next(i=>this.Ci(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&R("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return x(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new od(e,kn._e);return this.pi(t).next(()=>this.Si(t))}),this.Ti.close(),this.Ni()})}Ci(e,t){return e.filter(i=>this.Di(i.updateTimeMs,t)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>gg(e).W().next(t=>this.Ci(t,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return Hg.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gE(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Bg.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,i){R("IndexedDbPersistence","Starting transaction:",e);let r=t==="readonly"?"readonly":"readwrite",s=function(l){return l===15?b9:l===14?dk:l===13?uk:l===12?_9:l===11?ck:void H()}(this.ai),o;return this.Ti.runTransaction(e,r,s,a=>(o=new od(a,this.Lr?this.Lr.next():kn._e),t==="readwrite-primary"?this.fi(o).next(l=>!!l||this.gi(o)).next(l=>{if(!l)throw ft(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new P(T.FAILED_PRECONDITION,ok);return i(o)}).next(l=>this.yi(o).next(()=>l)):this.Li(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Yu(e).get("owner").next(t=>{if(t!==null&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(T.FAILED_PRECONDITION,Cw)})}yi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yu(e).put("owner",t)}static D(){return rs.D()}pi(e){let t=Yu(e);return t.get("owner").next(i=>this.wi(i)?(R("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Di(e,t){let i=Date.now();return!(e<i-t)&&(!(e>i)||(ft(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let t=/(?:Version|Mobile)\/1[456]/;ZI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{let i=((t=this.Ei)===null||t===void 0?void 0:t.getItem(this.vi(e)))!==null;return R("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ft("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ft("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Yu(n){return Ft(n,"owner")}function gg(n){return Ft(n,"clientMetadata")}function RC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var kE=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=pe(),r=pe();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var OE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Qg=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new OE;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?(ul()<=vi.DEBUG&&R("QueryEngine","SDK will not create cache indexes for query:",dl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),S.resolve()):(ul()<=vi.DEBUG&&R("QueryEngine","Query:",dl(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(ul()<=vi.DEBUG&&R("QueryEngine","The SDK decides to create cache indexes for query:",dl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(t))):S.resolve())}zi(e,t){if(mR(t))return S.resolve(null);let i=dn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Og(t,null,"F"),i=dn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=pe(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{let c=this.Yi(t,a);return this.Zi(t,c,o,l.readTime)?this.zi(e,Og(t,null,"F")):this.Xi(e,c,t,l)}))})))}ji(e,t,i,r){return mR(t)||r.isEqual(ee.min())?S.resolve(null):this.Gi.getDocuments(e,i).next(s=>{let o=this.Yi(t,s);return this.Zi(t,o,i,r)?S.resolve(null):(ul()<=vi.DEBUG&&R("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),dl(t)),this.Xi(e,o,t,rk(r,-1)).next(a=>a))})}Yi(e,t){let i=new ze(Dk(e));return t.forEach((r,s)=>{Pd(e,s)&&(i=i.add(s))}),i}Zi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,t,i){return ul()<=vi.DEBUG&&R("QueryEngine","Using full collection scan to execute query:",dl(t)),this.Gi.getDocumentsMatchingQuery(e,t,Yn.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var NE=class{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new nt(ce),this.ns=new Ui(s=>Po(s),Ad),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wg(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}};function rO(n,e,t,i){return new NE(n,e,t,i)}function sO(n,e){return x(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],l=pe();for(let c of r){o.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}for(let c of s){a.push(c.batchId);for(let u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({_s:c,removedBatchIds:o,addedBatchIds:a}))})})})}function J9(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){let d=c.batch,h=d.keys(),f=S.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(l,p)).next(g=>{let m=c.docVersions.get(p);Y(m!==null),g.version.compareTo(m)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function oO(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function e6(n,e){let t=U(n),i=e.snapshotVersion,r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(t.qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Nt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(g,m,y){return g.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,f,u)&&a.push(t.qr.updateTargetData(s,f))});let l=_n(),c=pe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(aO(s,o,e.documentUpdates).next(u=>{l=u.us,c=u.cs})),!i.isEqual(ee.min())){let u=t.qr.getLastRemoteSnapshotVersion(s).next(d=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return S.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ts=r,s))}function aO(n,e,t){let i=pe(),r=pe();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=_n();return t.forEach((a,l)=>{let c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):R("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{us:o,cs:r}})}function t6(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function xl(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(s=>s?(r=s,S.resolve(r)):t.qr.allocateTargetId(i).next(o=>(r=new Sl(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}function Al(n,e,t){return x(this,null,function*(){let i=U(n),r=i.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!gs(o))throw o;R("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)})}function Yg(n,e,t){let i=U(n),r=ee.min(),s=pe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){let d=U(l),h=d.ns.get(u);return h!==void 0?S.resolve(d.ts.get(h)):d.qr.getTargetData(c,u)}(i,o,dn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.es.getDocumentsMatchingQuery(o,e,t?r:ee.min(),t?s:pe())).next(a=>(uO(i,Ck(e),a),{documents:a,ls:s})))}function lO(n,e){let t=U(n),i=U(t.qr),r=t.ts.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(o=>o?o.target:null))}function cO(n,e){let t=U(n),i=t.rs.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.ss.getAllFromCollectionGroup(r,e,rk(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(uO(t,e,r),r))}function uO(n,e,t){let i=n.rs.get(e)||ee.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.rs.set(e,i)}function n6(n,e,t,i){return x(this,null,function*(){let r=U(n),s=pe(),o=_n();for(let c of t){let u=e.hs(c.metadata.name);c.document&&(s=s.add(u));let d=e.Ps(c);d.setReadTime(e.Is(c.metadata.readTime)),o=o.insert(u,d)}let a=r.ss.newChangeBuffer({trackRemovals:!0}),l=yield xl(r,function(u){return dn(Fl(ke.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>aO(c,a,o).next(u=>(a.apply(c),u)).next(u=>r.qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.qr.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,u.us,u.cs)).next(()=>u.us)))})}function i6(i,r){return x(this,arguments,function*(n,e,t=pe()){let s=yield xl(n,dn(MC(e.bundledQuery))),o=U(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let l=gt(e.readTime);if(s.snapshotVersion.compareTo(l)>=0)return o.Kr.saveNamedQuery(a,e);let c=s.withResumeToken(Nt.EMPTY_BYTE_STRING,l);return o.ts=o.ts.insert(c.targetId,c),o.qr.updateTargetData(a,c).next(()=>o.qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.qr.addMatchingKeys(a,t,s.targetId)).next(()=>o.Kr.saveNamedQuery(a,e))})})}function HR(n,e){return`firestore_clients_${n}_${e}`}function qR(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Dw(n,e){return`firestore_targets_${n}_${e}`}var Xg=class n{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ts(e,t,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new P(r.error.code,r.error.message))),o?new n(e,t,r.state,s):(ft("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},nd=class n{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ts(e,t){let i=JSON.parse(t),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new P(i.error.code,i.error.message))),s?new n(e,i.state,r):(ft("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Zg=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){let i=JSON.parse(t),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=xC();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=ak(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new n(e,s):(ft("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},FE=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ft("SharedClientState",`Failed to parse online state: ${e}`),null)}},bd=class{constructor(){this.activeTargetIds=xC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},id=class{constructor(e,t,i,r,s){this.window=e,this.si=t,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new nt(ce),this.started=!1,this.ps=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=HR(this.persistenceKey,this.Rs),this.ws=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new bd),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.vs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return x(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Rs)continue;let r=this.getItem(HR(this.persistenceKey,i));if(r){let s=Zg.Ts(i,r);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();let t=this.storage.getItem(this.Cs);if(t){let i=this.Ms(t);i&&this.xs(i)}for(let i of this.ps)this.fs(i);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,i){this.Ns(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Dw(this.persistenceKey,e));if(i){let r=nd.Ts(e,i);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Dw(this.persistenceKey,e))}updateQueryState(e,t,i){this.ks(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return R("SharedClientState","READ",e,t),t}setItem(e,t){R("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){R("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let t=e;if(t.storageArea===this.storage){if(R("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void ft("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>x(this,null,function*(){if(this.started){if(t.key!==null){if(this.Ss.test(t.key)){if(t.newValue==null){let i=this.Ks(t.key);return this.$s(i,null)}{let i=this.Us(t.key,t.newValue);if(i)return this.$s(i.clientId,i)}}else if(this.bs.test(t.key)){if(t.newValue!==null){let i=this.Ws(t.key,t.newValue);if(i)return this.Gs(i)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){let i=this.zs(t.key,t.newValue);if(i)return this.js(i)}}else if(t.key===this.Cs){if(t.newValue!==null){let i=this.Ms(t.newValue);if(i)return this.xs(i)}}else if(t.key===this.ws){let i=function(s){let o=kn._e;if(s!=null)try{let a=JSON.parse(s);Y(typeof a=="number"),o=a}catch(a){ft("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);i!==kn._e&&this.sequenceNumberHandler(i)}else if(t.key===this.vs){let i=this.Hs(t.newValue);yield Promise.all(i.map(r=>this.syncEngine.Js(r)))}}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,i){let r=new Xg(this.currentUser,e,t,i),s=qR(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Es())}Bs(e){let t=qR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){let t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,i){let r=Dw(this.persistenceKey,e),s=new nd(e,t,i);this.setItem(r,s.Es())}Qs(e){let t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){let t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){let i=this.Ks(e);return Zg.Ts(i,t)}Ws(e,t){let i=this.bs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Xg.Ts(new Ct(s),r,t)}zs(e,t){let i=this.Ds.exec(e),r=Number(i[1]);return nd.Ts(r,t)}Ms(e){return FE.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return x(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);R("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){let i=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),s=this.Os(i),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=xC();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}},Jg=class{constructor(){this.eo=new bd,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new bd,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var LE=class{ro(e){}shutdown(){}};var em=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){R("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){R("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var mg=null;function Iw(){return mg===null?mg=function(){return 268435456+Math.round(2147483648*Math.random())}():mg++,"0x"+mg.toString(16)}var r6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var VE=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var tn="WebChannelConnection",jE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+t.host,this.fo=`projects/${r}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(t,i,r,s,o){let a=Iw(),l=this.So(t,i);R("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);let c={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(c,s,o),this.Do(t,l,c,r).then(u=>(R("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw Qn("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}Co(t,i,r,s,o,a){return this.wo(t,i,r,s,o)}bo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nl}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}So(t,i){let r=r6[t];return`${this.mo}/v1/${i}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,i,r){let s=Iw();return new Promise((o,a)=>{let l=new eR;l.setWithCredentials(!0),l.listenOnce(ZP.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case hg.NO_ERROR:let u=l.getResponseJson();R(tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case hg.TIMEOUT:R(tn,`RPC '${e}' ${s} timed out`),a(new P(T.DEADLINE_EXCEEDED,"Request time out"));break;case hg.HTTP_ERROR:let d=l.getStatus();if(R(tn,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(m){let y=m.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(y)>=0?y:T.UNKNOWN}(f.status);a(new P(p,f.message))}else a(new P(T.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new P(T.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{R(tn,`RPC '${e}' ${s} completed.`)}});let c=JSON.stringify(r);R(tn,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}vo(e,t,i){let r=Iw(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=YP(),a=XP(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.bo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let u=s.join("");R(tn,`Creating RPC '${e}' stream ${r}: ${u}`,l);let d=o.createWebChannel(u,l),h=!1,f=!1,p=new VE({co:m=>{f?R(tn,`Not sending because RPC '${e}' stream ${r} is closed:`,m):(h||(R(tn,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),R(tn,`RPC '${e}' stream ${r} sending:`,m),d.send(m))},lo:()=>d.close()}),g=(m,y,b)=>{m.listen(y,w=>{try{b(w)}catch(C){setTimeout(()=>{throw C},0)}})};return g(d,Wu.EventType.OPEN,()=>{f||R(tn,`RPC '${e}' stream ${r} transport opened.`)}),g(d,Wu.EventType.CLOSE,()=>{f||(f=!0,R(tn,`RPC '${e}' stream ${r} transport closed`),p.Ro())}),g(d,Wu.EventType.ERROR,m=>{f||(f=!0,Qn(tn,`RPC '${e}' stream ${r} transport errored:`,m),p.Ro(new P(T.UNAVAILABLE,"The operation could not be completed")))}),g(d,Wu.EventType.MESSAGE,m=>{var y;if(!f){let b=m.data[0];Y(!!b);let w=b,C=w.error||((y=w[0])===null||y===void 0?void 0:y.error);if(C){R(tn,`RPC '${e}' stream ${r} received error:`,C);let D=C.status,I=function($){let te=wt[$];if(te!==void 0)return Vk(te)}(D),A=C.message;I===void 0&&(I=T.INTERNAL,A="Unknown error status: "+D+" with message "+C.message),f=!0,p.Ro(new P(I,A)),d.close()}else R(tn,`RPC '${e}' stream ${r} received:`,b),p.Vo(b)}}),g(a,JP.STAT_EVENT,m=>{m.stat===ww.PROXY?R(tn,`RPC '${e}' stream ${r} detected buffering proxy`):m.stat===ww.NOPROXY&&R(tn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}};function dO(){return typeof window<"u"?window:null}function wg(){return typeof document<"u"?document:null}function Rd(n){return new iE(n,!0)}var wd=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let t=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-i);r>0&&R("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var tm=class{constructor(e,t,i,r,s,o,a,l){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new wd(e,t)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return x(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return x(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){return x(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():t&&t.code===T.RESOURCE_EXHAUSTED?(ft(t.toString()),ft("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(t)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===t&&this.s_(i,r)},i=>{e(()=>{let r=new P(T.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,t){let i=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(()=>x(this,null,function*(){this.state=0,this.start()}))}o_(e){return R("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(R("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},BE=class extends tm{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();let t=$9(this.serializer,e),i=function(s){if(!("targetChange"in s))return ee.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?gt(o.readTime):ee.min()}(e);return this.listener.a_(t,i)}u_(e){let t={};t.database=md(this.serializer),t.addTarget=function(s,o){let a,l=o.target;if(a=Rg(l)?{documents:qk(s,l)}:{query:Wk(s,l)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Bk(s,o.resumeToken);let c=rE(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=Il(s,o.snapshotVersion.toTimestamp());let c=rE(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);let i=H9(this.serializer,e);i&&(t.labels=i),this.e_(t)}c_(e){let t={};t.database=md(this.serializer),t.removeTarget=e,this.e_(t)}},UE=class extends tm{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let t=z9(e.writeResults,e.commitTime),i=gt(e.commitTime);return this.listener.I_(i,t)}return Y(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=md(this.serializer),this.e_(e)}P_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>yd(this.serializer,i))};this.e_(t)}};var $E=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new P(T.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,t,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new P(T.UNKNOWN,r.toString())})}Co(e,t,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,t,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(T.UNKNOWN,s.toString())})}terminate(){this.d_=!0}};var zE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ft(t),this.f_=!1):R("OnlineStateTracker",t)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var HE=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{i.enqueueAndForget(()=>x(this,null,function*(){ms(this)&&(R("RemoteStore","Restarting streams for network reachability change."),yield function(l){return x(this,null,function*(){let c=U(l);c.C_.add(4),yield Ll(c),c.M_.set("Unknown"),c.C_.delete(4),yield kd(c)})}(this))}))}),this.M_=new zE(i,r)}};function kd(n){return x(this,null,function*(){if(ms(n))for(let e of n.v_)yield e(!0)})}function Ll(n){return x(this,null,function*(){for(let e of n.v_)yield e(!1)})}function bm(n,e){let t=U(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),NC(t)?OC(t):jl(t).Ho()&&kC(t,e))}function Ed(n,e){let t=U(n),i=jl(t);t.D_.delete(e),i.Ho()&&hO(t,e),t.D_.size===0&&(i.Ho()?i.Zo():ms(t)&&t.M_.set("Unknown"))}function kC(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(n).u_(e)}function hO(n,e){n.x_.Oe(e),jl(n).c_(e)}function OC(n){n.x_=new nE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),jl(n).start(),n.M_.g_()}function NC(n){return ms(n)&&!jl(n).jo()&&n.D_.size>0}function ms(n){return U(n).C_.size===0}function fO(n){n.x_=void 0}function s6(n){return x(this,null,function*(){n.D_.forEach((e,t)=>{kC(n,e)})})}function o6(n,e){return x(this,null,function*(){fO(n),NC(n)?(n.M_.w_(e),OC(n)):n.M_.set("Unknown")})}function a6(n,e,t){return x(this,null,function*(){if(n.M_.set("Online"),e instanceof Fg&&e.state===2&&e.cause)try{yield function(r,s){return x(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.D_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.D_.delete(a),r.x_.removeTarget(a))})}(n,e)}catch(i){R("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield nm(n,i)}else if(e instanceof vl?n.x_.$e(e):e instanceof Ng?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(ee.min()))try{let i=yield oO(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let a=s.x_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let u=s.D_.get(c);u&&s.D_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{let u=s.D_.get(l);if(!u)return;s.D_.set(l,u.withResumeToken(Nt.EMPTY_BYTE_STRING,u.snapshotVersion)),hO(s,l);let d=new Sl(u.target,l,c,u.sequenceNumber);kC(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){R("RemoteStore","Failed to raise snapshot:",i),yield nm(n,i)}})}function nm(n,e,t){return x(this,null,function*(){if(!gs(e))throw e;n.C_.add(1),yield Ll(n),n.M_.set("Offline"),t||(t=()=>oO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){R("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield kd(n)}))})}function pO(n,e){return e().catch(t=>nm(n,t,e))}function Vl(n){return x(this,null,function*(){let e=U(n),t=fs(e),i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;l6(e);)try{let r=yield t6(e.localStore,i);if(r===null){e.b_.length===0&&t.Zo();break}i=r.batchId,c6(e,r)}catch(r){yield nm(e,r)}gO(e)&&mO(e)})}function l6(n){return ms(n)&&n.b_.length<10}function c6(n,e){n.b_.push(e);let t=fs(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function gO(n){return ms(n)&&!fs(n).jo()&&n.b_.length>0}function mO(n){fs(n).start()}function u6(n){return x(this,null,function*(){fs(n).E_()})}function d6(n){return x(this,null,function*(){let e=fs(n);for(let t of n.b_)e.P_(t.mutations)})}function h6(n,e,t){return x(this,null,function*(){let i=n.b_.shift(),r=Jw.from(i,e,t);yield pO(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Vl(n)})}function f6(n,e){return x(this,null,function*(){e&&fs(n).h_&&(yield function(i,r){return x(this,null,function*(){if(function(o){return Lk(o)&&o!==T.ABORTED}(r.code)){let s=i.b_.shift();fs(i).Yo(),yield pO(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Vl(i)}})}(n,e)),gO(n)&&mO(n)})}function WR(n,e){return x(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),R("RemoteStore","RemoteStore received new credentials");let i=ms(t);t.C_.add(3),yield Ll(t),i&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield kd(t)})}function qE(n,e){return x(this,null,function*(){let t=U(n);e?(t.C_.delete(2),yield kd(t)):e||(t.C_.add(2),yield Ll(t),t.M_.set("Unknown"))})}function jl(n){return n.O_||(n.O_=function(t,i,r){let s=U(t);return s.A_(),new BE(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:s6.bind(null,n),Io:o6.bind(null,n),a_:a6.bind(null,n)}),n.v_.push(e=>x(this,null,function*(){e?(n.O_.Yo(),NC(n)?OC(n):n.M_.set("Unknown")):(yield n.O_.stop(),fO(n))}))),n.O_}function fs(n){return n.N_||(n.N_=function(t,i,r){let s=U(t);return s.A_(),new UE(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:u6.bind(null,n),Io:f6.bind(null,n),T_:d6.bind(null,n),I_:h6.bind(null,n)}),n.v_.push(e=>x(this,null,function*(){e?(n.N_.Yo(),yield Vl(n)):(yield n.N_.stop(),n.b_.length>0&&(R("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))}))),n.N_}var WE=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Bl(n,e){if(ft("AsyncQueue",`${e}: ${n}`),gs(n))return new P(T.UNAVAILABLE,`${e}: ${n}`);throw n}var im=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||L.comparator(t.key,i.key):(t,i)=>L.comparator(t.key,i.key),this.keyedMap=Xu(),this.sortedSet=new nt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var rm=class{constructor(){this.B_=new nt(L.comparator)}track(e){let t=e.doc.key,i=this.B_.get(t);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(t,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(t):e.type===1&&i.type===2?this.B_=this.B_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):H():this.B_=this.B_.insert(t,e)}L_(){let e=[];return this.B_.inorderTraversal((t,i)=>{e.push(i)}),e}},Ml=class n{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,im.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var GE=class{constructor(){this.k_=void 0,this.listeners=[]}},KE=class{constructor(){this.queries=new Ui(e=>Ek(e),Md),this.onlineState="Unknown",this.q_=new Set}};function FC(n,e){return x(this,null,function*(){let t=U(n),i=e.query,r=!1,s=t.queries.get(i);if(s||(r=!0,s=new GE),r)try{s.k_=yield t.onListen(i)}catch(o){let a=Bl(o,`Initialization of query '${dl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Q_(t.onlineState),s.k_&&e.K_(s.k_)&&VC(t)})}function LC(n,e){return x(this,null,function*(){let t=U(n),i=e.query,r=!1,s=t.queries.get(i);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return t.queries.delete(i),t.onUnlisten(i)})}function p6(n,e){let t=U(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.listeners)a.K_(r)&&(i=!0);o.k_=r}}i&&VC(t)}function g6(n,e,t){let i=U(n),r=i.queries.get(e);if(r)for(let s of r.listeners)s.onError(t);i.queries.delete(e)}function VC(n){n.q_.forEach(e=>{e.next()})}var Cd=class{constructor(e,t,i){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ml(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;let i=t!=="Offline";return(!this.options.J_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}H_(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var QE=class{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}};var sm=class{constructor(e){this.serializer=e}hs(e){return Li(this.serializer,e)}Ps(e){return e.metadata.exists?Hk(this.serializer,e.document,!1):It.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return gt(e)}},YE=class{constructor(e,t,i){this.X_=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=yO(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;let i=ke.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){let t=new Map,i=new sm(this.serializer);for(let r of e)if(r.metadata.queries){let s=i.hs(r.metadata.name);for(let o of r.metadata.queries){let a=(t.get(o)||pe()).add(s);t.set(o,a)}}return t}complete(){return x(this,null,function*(){let e=yield n6(this.localStore,new sm(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(let i of this.queries)yield i6(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function yO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var om=class{constructor(e){this.key=e}},am=class{constructor(e){this.key=e}},lm=class{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=pe(),this.mutatedKeys=pe(),this._a=Dk(e),this.aa=new im(this._a)}get ua(){return this.ia}ca(e,t){let i=t?t.la:new rm,r=t?t.aa:this.aa,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=Pd(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),m=!0):this.ha(h,f)||(i.track({type:2,doc:f}),m=!0,(l&&this._a(f,l)>0||c&&this._a(f,c)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),m=!0):h&&!f&&(i.track({type:1,doc:h}),m=!0,(l||c)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{aa:o,la:i,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let o=e.la.L_();o.sort((u,d)=>function(f,p){let g=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return g(f)-g(p)}(u.type,d.type)||this._a(u.doc,d.doc)),this.Pa(i),r=r!=null&&r;let a=t&&!r?this.Ia():[],l=this.oa.size===0&&this.current&&!r?1:0,c=l!==this.sa;return this.sa=l,o.length!==0||c?{snapshot:new Ml(this.query,e.aa,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new rm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=pe(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});let t=[];return e.forEach(i=>{this.oa.has(i)||t.push(new am(i))}),this.oa.forEach(i=>{e.has(i)||t.push(new om(i))}),t}da(e){this.ia=e.ls,this.oa=pe();let t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Ml.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},XE=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},ZE=class{constructor(e){this.key=e,this.Ra=!1}},JE=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Ui(a=>Ek(a),Md),this.fa=new Map,this.ga=new Set,this.pa=new nt(L.comparator),this.ya=new Map,this.wa=new _d,this.Sa={},this.ba=new Map,this.Da=Tl.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function m6(n,e){return x(this,null,function*(){let t=zC(n),i,r,s=t.ma.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{let o=yield xl(t.localStore,dn(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield jC(t,e,i,a==="current",o.resumeToken),t.isPrimaryClient&&bm(t.remoteStore,o)}return r})}function jC(n,e,t,i,r){return x(this,null,function*(){n.va=(d,h,f)=>function(g,m,y,b){return x(this,null,function*(){let w=m.view.ca(y);w.Zi&&(w=yield Yg(g.localStore,m.query,!1).then(({documents:A})=>m.view.ca(A,w)));let C=b&&b.targetChanges.get(m.targetId),D=b&&b.targetMismatches.get(m.targetId)!=null,I=m.view.applyChanges(w,g.isPrimaryClient,C,D);return eC(g,m.targetId,I.Ta),I.snapshot})}(n,d,h,f);let s=yield Yg(n.localStore,e,!0),o=new lm(e,s.ls),a=o.ca(s.documents),l=pd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);eC(n,t,c.Ta);let u=new XE(e,t,o);return n.ma.set(e,u),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),c.snapshot})}function y6(n,e){return x(this,null,function*(){let t=U(n),i=t.ma.get(e),r=t.fa.get(i.targetId);if(r.length>1)return t.fa.set(i.targetId,r.filter(s=>!Md(s,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Al(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),Ed(t.remoteStore,i.targetId),Pl(t,i.targetId)}).catch(ps))):(Pl(t,i.targetId),yield Al(t.localStore,i.targetId,!0))})}function v6(n,e,t){return x(this,null,function*(){let i=HC(n);try{let r=yield function(o,a){let l=U(o),c=st.now(),u=a.reduce((f,p)=>f.add(p.key),pe()),d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=_n(),g=pe();return l.ss.getEntries(f,u).next(m=>{p=m,p.forEach((y,b)=>{b.isValidDocument()||(g=g.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(f,p)).next(m=>{d=m;let y=[];for(let b of a){let w=N9(b,d.get(b.key).overlayedDocument);w!=null&&y.push(new hi(b.key,w,gk(w.value.mapValue),ut.exists(!0)))}return l.mutationQueue.addMutationBatch(f,c,y,a)}).next(m=>{h=m;let y=m.applyToLocalDocumentSet(d,g);return l.documentOverlayCache.saveOverlays(f,m.batchId,y)})}).then(()=>({batchId:h.batchId,changes:Sk(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Sa[o.currentUser.toKey()];c||(c=new nt(ce)),c=c.insert(a,l),o.Sa[o.currentUser.toKey()]=c}(i,r.batchId,t),yield gr(i,r.changes),yield Vl(i.remoteStore)}catch(r){let s=Bl(r,"Failed to persist write");t.reject(s)}})}function vO(n,e){return x(this,null,function*(){let t=U(n);try{let i=yield e6(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.ya.get(s);o&&(Y(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ra=!0:r.modifiedDocuments.size>0?Y(o.Ra):r.removedDocuments.size>0&&(Y(o.Ra),o.Ra=!1))}),yield gr(t,i,e)}catch(i){yield ps(i)}})}function GR(n,e,t){let i=U(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.ma.forEach((s,o)=>{let a=o.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let l=U(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(let h of d.listeners)h.Q_(a)&&(c=!0)}),c&&VC(l)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function _6(n,e,t){return x(this,null,function*(){let i=U(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.ya.get(e),s=r&&r.key;if(s){let o=new nt(L.comparator);o=o.insert(s,It.newNoDocument(s,ee.min()));let a=pe().add(s),l=new fd(ee.min(),new Map,new nt(ce),o,a);yield vO(i,l),i.pa=i.pa.remove(s),i.ya.delete(e),$C(i)}else yield Al(i.localStore,e,!1).then(()=>Pl(i,e,t)).catch(ps)})}function b6(n,e){return x(this,null,function*(){let t=U(n),i=e.batch.batchId;try{let r=yield J9(t.localStore,e);UC(t,i,null),BC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield gr(t,r)}catch(r){yield ps(r)}})}function w6(n,e,t){return x(this,null,function*(){let i=U(n);try{let r=yield function(o,a){let l=U(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(Y(d!==null),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);UC(i,e,t),BC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield gr(i,r)}catch(r){yield ps(r)}})}function E6(n,e){return x(this,null,function*(){let t=U(n);ms(t.remoteStore)||R("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(o){let a=U(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(i===-1)return void e.resolve();let r=t.ba.get(i)||[];r.push(e),t.ba.set(i,r)}catch(i){let r=Bl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function BC(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function UC(n,e,t){let i=U(n),r=i.Sa[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function Pl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.fa.get(e))n.ma.delete(i),t&&n.Va.Fa(i,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(i=>{n.wa.containsKey(i)||_O(n,i)})}function _O(n,e){n.ga.delete(e.path.canonicalString());let t=n.pa.get(e);t!==null&&(Ed(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),$C(n))}function eC(n,e,t){for(let i of t)i instanceof om?(n.wa.addReference(i.key,e),C6(n,i)):i instanceof am?(R("SyncEngine","Document no longer in limbo: "+i.key),n.wa.removeReference(i.key,e),n.wa.containsKey(i.key)||_O(n,i.key)):H()}function C6(n,e){let t=e.key,i=t.path.canonicalString();n.pa.get(t)||n.ga.has(i)||(R("SyncEngine","New document in limbo: "+t),n.ga.add(i),$C(n))}function $C(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){let e=n.ga.values().next().value;n.ga.delete(e);let t=new L(ke.fromString(e)),i=n.Da.next();n.ya.set(i,new ZE(t)),n.pa=n.pa.insert(t,i),bm(n.remoteStore,new Sl(dn(Fl(t.path)),i,"TargetPurposeLimboResolution",kn._e))}}function gr(n,e,t){return x(this,null,function*(){let i=U(n),r=[],s=[],o=[];i.ma.isEmpty()||(i.ma.forEach((a,l)=>{o.push(i.va(l,e,t).then(c=>{if((c||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){r.push(c);let u=kE.Qi(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),i.Va.a_(r),yield function(l,c){return x(this,null,function*(){let u=U(l);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>S.forEach(c,h=>S.forEach(h.ki,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>S.forEach(h.qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!gs(d))throw d;R("LocalStore","Failed to update sequence numbers: "+d)}for(let d of c){let h=d.targetId;if(!d.fromCache){let f=u.ts.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);u.ts=u.ts.insert(h,g)}}})}(i.localStore,s))})}function D6(n,e){return x(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){R("SyncEngine","User change. New user:",e.toKey());let i=yield sO(t.localStore,e);t.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(l=>{l.reject(new P(T.CANCELLED,o))})}),s.ba.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield gr(t,i._s)}})}function I6(n,e){let t=U(n),i=t.ya.get(e);if(i&&i.Ra)return pe().add(i.key);{let r=pe(),s=t.fa.get(e);if(!s)return r;for(let o of s){let a=t.ma.get(o);r=r.unionWith(a.view.ua)}return r}}function S6(n,e){return x(this,null,function*(){let t=U(n),i=yield Yg(t.localStore,e.query,!0),r=e.view.da(i);return t.isPrimaryClient&&eC(t,e.targetId,r.Ta),r})}function T6(n,e){return x(this,null,function*(){let t=U(n);return cO(t.localStore,e).then(i=>gr(t,i))})}function x6(n,e,t,i){return x(this,null,function*(){let r=U(n),s=yield function(a,l){let c=U(a),u=U(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Cn(d,l).next(h=>h?c.localDocuments.getDocuments(d,h):S.resolve(null)))}(r.localStore,e);s!==null?(t==="pending"?yield Vl(r.remoteStore):t==="acknowledged"||t==="rejected"?(UC(r,e,i||null),BC(r,e),function(a,l){U(U(a).mutationQueue).Fn(l)}(r.localStore,e)):H(),yield gr(r,s)):R("SyncEngine","Cannot apply mutation batch with id: "+e)})}function A6(n,e){return x(this,null,function*(){let t=U(n);if(zC(t),HC(t),e===!0&&t.Ca!==!0){let i=t.sharedClientState.getAllActiveQueryTargets(),r=yield KR(t,i.toArray());t.Ca=!0,yield qE(t.remoteStore,!0);for(let s of r)bm(t.remoteStore,s)}else if(e===!1&&t.Ca!==!1){let i=[],r=Promise.resolve();t.fa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(Pl(t,o),Al(t.localStore,o,!0))),Ed(t.remoteStore,o)}),yield r,yield KR(t,i),function(o){let a=U(o);a.ya.forEach((l,c)=>{Ed(a.remoteStore,c)}),a.wa.Vr(),a.ya=new Map,a.pa=new nt(L.comparator)}(t),t.Ca=!1,yield qE(t.remoteStore,!1)}})}function KR(n,e,t){return x(this,null,function*(){let i=U(n),r=[],s=[];for(let o of e){let a,l=i.fa.get(o);if(l&&l.length!==0){a=yield xl(i.localStore,dn(l[0]));for(let c of l){let u=i.ma.get(c),d=yield S6(i,u);d.snapshot&&s.push(d.snapshot)}}else{let c=yield lO(i.localStore,o);a=yield xl(i.localStore,c),yield jC(i,bO(c),o,!1,a.resumeToken)}r.push(a)}return i.Va.a_(s),r})}function bO(n){return wk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function M6(n){return function(t){return U(U(t).persistence).Bi()}(U(n).localStore)}function P6(n,e,t,i){return x(this,null,function*(){let r=U(n);if(r.Ca)return void R("SyncEngine","Ignoring unexpected query state notification.");let s=r.fa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield cO(r.localStore,Ck(s[0])),a=fd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Nt.EMPTY_BYTE_STRING);yield gr(r,o,a);break}case"rejected":yield Al(r.localStore,e,!0),Pl(r,e,i);break;default:H()}})}function R6(n,e,t){return x(this,null,function*(){let i=zC(n);if(i.Ca){for(let r of e){if(i.fa.has(r)){R("SyncEngine","Adding an already active target "+r);continue}let s=yield lO(i.localStore,r),o=yield xl(i.localStore,s);yield jC(i,bO(s),o.targetId,!1,o.resumeToken),bm(i.remoteStore,o)}for(let r of t)i.fa.has(r)&&(yield Al(i.localStore,r,!1).then(()=>{Ed(i.remoteStore,r),Pl(i,r)}).catch(ps))}})}function zC(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_6.bind(null,e),e.Va.a_=p6.bind(null,e.eventManager),e.Va.Fa=g6.bind(null,e.eventManager),e}function HC(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w6.bind(null,e),e}function k6(n,e,t){let i=U(n);(function(s,o,a){return x(this,null,function*(){try{let l=yield o.getMetadata();if(yield function(f,p){let g=U(f),m=gt(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",y=>g.Kr.getBundleMetadata(y,p.id)).then(y=>!!y&&y.createTime.compareTo(m)>=0)}(s.localStore,l))return yield o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(yO(l));let c=new YE(l,s.localStore,o.serializer),u=yield o.Ma();for(;u;){let h=yield c.ea(u);h&&a._updateProgress(h),u=yield o.Ma()}let d=yield c.complete();return yield gr(s,d.ra,void 0),yield function(f,p){let g=U(f);return g.persistence.runTransaction("Save bundle","readwrite",m=>g.Kr.saveBundleMetadata(m,p))}(s.localStore,l),a._completeWith(d.progress),Promise.resolve(d.na)}catch(l){return Qn("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Dd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){this.serializer=Rd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return rO(this.persistence,new Qg,e.initialUser,this.serializer)}createPersistence(e){return new Gg(Kg.jr,this.serializer)}createSharedClientState(e){return new Jg}terminate(){return x(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var cm=class n extends Dd{constructor(e,t,i){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){yield Cy(n.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield HC(this.xa.syncEngine),yield Vl(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return rO(this.persistence,new Qg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let i=this.persistence.referenceDelegate.garbageCollector;return new vE(i,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let i=new Lw(t,this.persistence);return new Fw(e.asyncQueue,i)}createPersistence(e){let t=RC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Kn.withCacheSize(this.cacheSizeBytes):Kn.DEFAULT;return new RE(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,dO(),wg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Jg}},tC=class n extends cm{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return x(this,null,function*(){yield Cy(n.prototype,this,"initialize").call(this,e);let t=this.xa.syncEngine;this.sharedClientState instanceof id&&(this.sharedClientState.syncEngine={Ys:x6.bind(null,t),Zs:P6.bind(null,t),Xs:R6.bind(null,t),Bi:M6.bind(null,t),Js:T6.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.mi(i=>x(this,null,function*(){yield A6(this.xa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=dO();if(!id.D(t))throw new P(T.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=RC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new id(t,e.asyncQueue,i,e.clientId,e.initialUser)}},Id=class{initialize(e,t){return x(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>GR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D6.bind(null,this.syncEngine),yield qE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new KE}()}createDatastore(e){let t=Rd(e.databaseInfo.databaseId),i=function(s){return new jE(s)}(e.databaseInfo);return function(s,o,a,l){return new $E(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new HE(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>GR(this.syncEngine,t,0),function(){return em.D()?new em:new LE}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,u){let d=new JE(r,s,o,a,l,c);return u&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return function(t){return x(this,null,function*(){let i=U(t);R("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield Ll(i),i.F_.shutdown(),i.M_.set("Unknown")})}(this.remoteStore)}};function QR(n,e=10240){let t=0;return{read(){return x(this,null,function*(){if(t<n.byteLength){let r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})},cancel(){return x(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Rl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ft("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var nC=class{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Dt,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){return x(this,null,function*(){return this.metadata.promise})}Ma(){return x(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return x(this,null,function*(){let e=yield this.qa();if(e===null)return null;let t=this.La.decode(e),i=Number(t);isNaN(i)&&this.Qa(`length string (${t}) is not valid number`);let r=yield this.Ka(i);return new QE(JSON.parse(r),e.length+i)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return x(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Ka(e){return x(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return x(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var iC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new P(T.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let t=yield function(r,s){return x(this,null,function*(){let o=U(r),a=md(o.serializer)+"/documents",l={documents:s.map(h=>gd(o.serializer,h))},c=yield o.Co("BatchGetDocuments",a,l,s.length),u=new Map;c.forEach(h=>{let f=U9(o.serializer,h);u.set(f.key.toString(),f)});let d=[];return s.forEach(h=>{let f=u.get(h.toString());Y(!!f),d.push(f)}),d})}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new hs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{let r=L.fromPath(i);this.mutations.push(new ud(r,this.precondition(r)))}),yield function(i,r){return x(this,null,function*(){let s=U(i),o=md(s.serializer)+"/documents",a={writes:r.map(l=>yd(s.serializer,l))};yield s.wo("Commit",o,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw H();t=ee.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new P(T.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?ut.exists(!1):ut.updateTime(t):ut.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new P(T.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var rC=class{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new wd(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>x(this,null,function*(){let e=new iC(this.datastore),t=this.za(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ja(r)}))}).catch(i=>{this.ja(i)})}))}za(e){try{let t=this.updateFunction(e);return!xd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Lk(t)}return!1}};var sC=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ct.UNAUTHENTICATED,this.clientId=Dg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>x(this,null,function*(){R("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(R("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){return x(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Dt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=Bl(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Eg(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),R("FirestoreClient","Initializing OfflineComponentProvider");let t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>x(this,null,function*(){i.isEqual(r)||(yield sO(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function oC(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield qC(n);R("FirestoreClient","Initializing OnlineComponentProvider");let i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>WR(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>WR(e.remoteStore,s)),n._onlineComponents=e})}function wO(n){return n.name==="FirebaseError"?n.code===T.FAILED_PRECONDITION||n.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function qC(n){return x(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){R("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Eg(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!wO(t))throw t;Qn("Error using user provided cache. Falling back to memory cache: "+t),yield Eg(n,new Dd)}}else R("FirestoreClient","Using default OfflineComponentProvider"),yield Eg(n,new Dd);return n._offlineComponents})}function wm(n){return x(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(R("FirestoreClient","Using user provided OnlineComponentProvider"),yield oC(n,n._uninitializedComponentsProvider._online)):(R("FirestoreClient","Using default OnlineComponentProvider"),yield oC(n,new Id))),n._onlineComponents})}function EO(n){return qC(n).then(e=>e.persistence)}function WC(n){return qC(n).then(e=>e.localStore)}function CO(n){return wm(n).then(e=>e.remoteStore)}function GC(n){return wm(n).then(e=>e.syncEngine)}function O6(n){return wm(n).then(e=>e.datastore)}function kl(n){return x(this,null,function*(){let e=yield wm(n),t=e.eventManager;return t.onListen=m6.bind(null,e.syncEngine),t.onUnlisten=y6.bind(null,e.syncEngine),t})}function N6(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield EO(n),t=yield CO(n);return e.setNetworkEnabled(!0),function(r){let s=U(r);return s.C_.delete(0),kd(s)}(t)}))}function F6(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield EO(n),t=yield CO(n);return e.setNetworkEnabled(!1),function(r){return x(this,null,function*(){let s=U(r);s.C_.add(0),yield Ll(s),s.M_.set("Offline")})}(t)}))}function L6(n,e){let t=new Dt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,s,o){return x(this,null,function*(){try{let a=yield function(c,u){let d=U(c);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new P(T.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let l=Bl(a,`Failed to get document '${s} from cache`);o.reject(l)}})}(yield WC(n),e,t)})),t.promise}function DO(n,e,t={}){let i=new Dt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(s,o,a,l,c){let u=new Rl({next:h=>{o.enqueueAndForget(()=>LC(s,d));let f=h.docs.has(a);!f&&h.fromCache?c.reject(new P(T.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&l&&l.source==="server"?c.reject(new P(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Cd(Fl(a.path),u,{includeMetadataChanges:!0,J_:!0});return FC(s,d)}(yield kl(n),n.asyncQueue,e,t,i)})),i.promise}function V6(n,e){let t=new Dt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,s,o){return x(this,null,function*(){try{let a=yield Yg(r,s,!0),l=new lm(s,a.ls),c=l.ca(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){let l=Bl(a,`Failed to execute query '${s} against cache`);o.reject(l)}})}(yield WC(n),e,t)})),t.promise}function IO(n,e,t={}){let i=new Dt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(s,o,a,l,c){let u=new Rl({next:h=>{o.enqueueAndForget(()=>LC(s,d)),h.fromCache&&l.source==="server"?c.reject(new P(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new Cd(a,u,{includeMetadataChanges:!0,J_:!0});return FC(s,d)}(yield kl(n),n.asyncQueue,e,t,i)})),i.promise}function j6(n,e){let t=new Rl(e);return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,s){U(r).q_.add(s),s.next()}(yield kl(n),t)})),()=>{t.Na(),n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,s){U(r).q_.delete(s)}(yield kl(n),t)}))}}function B6(n,e,t,i){let r=function(o,a){let l;return l=typeof o=="string"?jk().encode(o):o,function(u,d){return new nC(u,d)}(function(u,d){if(u instanceof Uint8Array)return QR(u,d);if(u instanceof ArrayBuffer)return QR(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(t,Rd(e));n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){k6(yield GC(n),r,i)}))}function U6(n,e){return n.asyncQueue.enqueue(()=>x(this,null,function*(){return function(i,r){let s=U(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,r))}(yield WC(n),e)}))}function SO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var YR=new Map;function KC(n,e,t){if(!t)throw new P(T.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function QC(n,e,t,i){if(e===!0&&i===!0)throw new P(T.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function XR(n){if(!L.isDocumentKey(n))throw new P(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZR(n){if(L.isDocumentKey(n))throw new P(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Em(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function xe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Em(n);throw new P(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function TO(n,e){if(e<=0)throw new P(T.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var um=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new P(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SO((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new P(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new P(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new P(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},No=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new um({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new um(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Sw;switch(i.type){case"firstParty":return new Mw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new P(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=YR.get(t);i&&(R("ComponentProvider","Removing Datastore"),YR.delete(t),i.terminate())}(this),Promise.resolve()}};function xO(n,e,t,i={}){var r;let s=(n=xe(n,No))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Ct.MOCK_USER;else{a=XI(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new P(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ct(c)}n._authCredentials=new Tw(new Cg(a,l))}}var zt=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ge=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Vi=class n extends zt{constructor(e,t,i){super(e,t,Fl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ge(this.firestore,null,new L(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function YC(n,e,...t){if(n=rt(n),KC("collection","path",e),n instanceof No){let i=ke.fromString(e,...t);return ZR(i),new Vi(n,null,i)}{if(!(n instanceof Ge||n instanceof Vi))throw new P(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ke.fromString(e,...t));return ZR(i),new Vi(n.firestore,null,i)}}function AO(n,e){if(n=xe(n,No),KC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(T.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zt(n,null,function(i){return new di(ke.emptyPath(),i)}(e))}function Od(n,e,...t){if(n=rt(n),arguments.length===1&&(e=Dg.newId()),KC("doc","path",e),n instanceof No){let i=ke.fromString(e,...t);return XR(i),new Ge(n,null,new L(i))}{if(!(n instanceof Ge||n instanceof Vi))throw new P(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(ke.fromString(e,...t));return XR(i),new Ge(n.firestore,n instanceof Vi?n.converter:null,new L(i))}}function XC(n,e){return n=rt(n),e=rt(e),(n instanceof Ge||n instanceof Vi)&&(e instanceof Ge||e instanceof Vi)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZC(n,e){return n=rt(n),e=rt(e),n instanceof zt&&e instanceof zt&&n.firestore===e.firestore&&Md(n._query,e._query)&&n.converter===e.converter}var aC=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new wd(this,"async_queue_retry"),this.iu=()=>{let t=wg();t&&R("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};let e=wg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let t=wg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let t=new Dt;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return x(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!gs(e))throw e;R("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let t=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ft("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=t,t}enqueueAfterDelay(e,t,i){this.su(),this.ru.indexOf(e)>-1&&(t=0);let r=WE.createAndSchedule(this,e,t,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&H()}verifyOperationInProgress(){}uu(){return x(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Xa)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let t=this.Xa.indexOf(e);this.Xa.splice(t,1)}};function lC(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var cC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Dt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var MO=-1,it=class extends No{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new aC}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||PO(this),this._firestoreClient.terminate()}};function At(n){return n._firestoreClient||PO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function PO(n){var e,t,i;let r=n._freezeSettings(),s=function(a,l,c,u){return new Vw(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,SO(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new sC(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function RO(n,e){UO(n=xe(n,it));let t=At(n);if(t._uninitializedComponentsProvider)throw new P(T.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=n._freezeSettings(),r=new Id;return OO(t,r,new cm(r,i.cacheSizeBytes,e?.forceOwnership))}function kO(n){UO(n=xe(n,it));let e=At(n);if(e._uninitializedComponentsProvider)throw new P(T.FAILED_PRECONDITION,"SDK cache is already specified.");Qn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),i=new Id;return OO(e,i,new tC(i,t.cacheSizeBytes))}function OO(n,e,t){let i=new Dt;return n.asyncQueue.enqueue(()=>x(this,null,function*(){try{yield Eg(n,t),yield oC(n,e),i.resolve()}catch(r){let s=r;if(!wO(s))throw s;Qn("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function NO(n){if(n._initialized&&!n._terminated)throw new P(T.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Dt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{yield function(i){return x(this,null,function*(){if(!rs.D())return Promise.resolve();let r=i+"main";yield rs.delete(r)})}(RC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function FO(n){return function(t){let i=new Dt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return E6(yield GC(t),i)})),i.promise}(At(n=xe(n,it)))}function LO(n){return N6(At(n=xe(n,it)))}function VO(n){return F6(At(n=xe(n,it)))}function jO(n,e){let t=At(n=xe(n,it)),i=new cC;return B6(t,n._databaseId,e,i),i}function BO(n,e){return U6(At(n=xe(n,it)),e).then(t=>t?new zt(n,null,t.query):null)}function UO(n){if(n._initialized||n._terminated)throw new P(T.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var $i=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Nt.fromBase64String(e))}catch(t){throw new P(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var fi=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fr=class{constructor(e){this._methodName=e}};var Fo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}};var $6=/^__.*__$/,uC=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ds(e,this.data,t,this.fieldTransforms)}},dm=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function $O(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var hm=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return fm(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if($O(this.Iu)&&$6.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},dC=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Rd(e)}pu(e,t,i,r=!1){return new hm({Iu:e,methodName:t,gu:i,path:pt.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Bo(n){let e=n._freezeSettings(),t=Rd(n._databaseId);return new dC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Cm(n,e,t,i,r,s={}){let o=n.pu(s.merge||s.mergeFields?2:0,e,t,r);tD("Data must be an object, but it was:",o,i);let a=qO(i,o),l,c;if(s.merge)l=new On(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=mC(e,d,t);if(!o.contains(h))throw new P(T.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);GO(u,h)||u.push(h)}l=new On(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new uC(new nn(a),l,c)}var Sd=class n extends fr{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function zO(n,e,t){return new hm({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var hC=class n extends fr{_toFieldTransform(e){return new Ro(e.path,new cs)}isEqual(e){return e instanceof n}},fC=class extends fr{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){let t=zO(this,e,!0),i=this.yu.map(s=>Uo(s,t)),r=new dr(i);return new Ro(e.path,r)}isEqual(e){return this===e}},pC=class extends fr{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){let t=zO(this,e,!0),i=this.yu.map(s=>Uo(s,t)),r=new hr(i);return new Ro(e.path,r)}isEqual(e){return this===e}},gC=class extends fr{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){let t=new us(e.serializer,Mk(e.serializer,this.wu));return new Ro(e.path,t)}isEqual(e){return this===e}};function JC(n,e,t,i){let r=n.pu(1,e,t);tD("Data must be an object, but it was:",r,i);let s=[],o=nn.empty();jo(i,(l,c)=>{let u=nD(e,l,t);c=rt(c);let d=r.Ru(u);if(c instanceof Sd)s.push(u);else{let h=Uo(c,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new On(s);return new dm(o,a,r.fieldTransforms)}function eD(n,e,t,i,r,s){let o=n.pu(1,e,t),a=[mC(e,i,t)],l=[r];if(s.length%2!=0)throw new P(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(mC(e,s[h])),l.push(s[h+1]);let c=[],u=nn.empty();for(let h=a.length-1;h>=0;--h)if(!GO(c,a[h])){let f=a[h],p=l[h];p=rt(p);let g=o.Ru(f);if(p instanceof Sd)c.push(f);else{let m=Uo(p,g);m!=null&&(c.push(f),u.set(f,m))}}let d=new On(c);return new dm(u,d,o.fieldTransforms)}function HO(n,e,t,i=!1){return Uo(t,n.pu(i?4:3,e))}function Uo(n,e){if(WO(n=rt(n)))return tD("Unsupported field value:",e,n),qO(n,e);if(n instanceof fr)return function(i,r){if(!$O(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let l=Uo(a,r.Vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=rt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Mk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=st.fromDate(i);return{timestampValue:Il(r.serializer,s)}}if(i instanceof st){let s=new st(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Il(r.serializer,s)}}if(i instanceof Fo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $i)return{bytesValue:Bk(r.serializer,i._byteString)};if(i instanceof Ge){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:AC(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${Em(i)}`)}(n,e)}function qO(n,e){let t={};return hk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jo(n,(i,r)=>{let s=Uo(r,e.Eu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function WO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof Fo||n instanceof $i||n instanceof Ge||n instanceof fr)}function tD(n,e,t){if(!WO(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Em(t);throw i==="an object"?e.mu(n+" a custom object"):e.mu(n+" "+i)}}function mC(n,e,t){if((e=rt(e))instanceof fi)return e._internalPath;if(typeof e=="string")return nD(n,e);throw fm("Field path arguments must be of type string or ",n,!1,void 0,t)}var z6=new RegExp("[~\\*/\\[\\]]");function nD(n,e,t){if(e.search(z6)>=0)throw fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new fi(...e.split("."))._internalPath}catch{throw fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fm(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new P(T.INVALID_ARGUMENT,a+n+l)}function GO(n,e){return n.some(t=>t.isEqual(e))}var Lo=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ge(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Dm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},yC=class extends Lo{data(){return super.data()}};function Dm(n,e){return typeof e=="string"?nD(n,e):e instanceof fi?e._internalPath:e._delegate._internalPath}function KO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Td=class{},Vo=class extends Td{};function mr(n,e,...t){let i=[];e instanceof Td&&i.push(e),i=i.concat(t),function(s){let o=s.filter(l=>l instanceof vC).length,a=s.filter(l=>l instanceof pm).length;if(o>1||o>0&&a>0)throw new P(T.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var pm=class n extends Vo{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return rN(e._query,t),new zt(e.firestore,e.converter,Xw(e._query,t))}_parse(e){let t=Bo(e.firestore);return function(s,o,a,l,c,u,d){let h;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new P(T.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){ek(d,u);let f=[];for(let p of d)f.push(JR(l,s,p));h={arrayValue:{values:f}}}else h=JR(l,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||ek(d,u),h=HO(a,o,d,u==="in"||u==="not-in");return Se.create(c,u,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function QO(n,e,t){let i=e,r=Dm("where",n);return pm._create(r,i,t)}var vC=class n extends Td{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ue.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let l of a)rN(o,l),o=Xw(o,l)}(e._query,t),new zt(e.firestore,e.converter,Xw(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var _C=class n extends Vo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,o){if(r.startAt!==null)throw new P(T.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new P(T.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mo(s,o)}(e._query,this._field,this._direction);return new zt(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new di(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function YO(n,e="asc"){let t=e,i=Dm("orderBy",n);return _C._create(i,t)}var gm=class n extends Vo{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new zt(e.firestore,e.converter,Og(e._query,this._limit,this._limitType))}};function XO(n){return TO("limit",n),gm._create("limit",n,"F")}function ZO(n){return TO("limitToLast",n),gm._create("limitToLast",n,"L")}var mm=class n extends Vo{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=iN(e,this.type,this._docOrFields,this._inclusive);return new zt(e.firestore,e.converter,function(r,s){return new di(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,t))}};function JO(...n){return mm._create("startAt",n,!0)}function eN(...n){return mm._create("startAfter",n,!1)}var ym=class n extends Vo{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=iN(e,this.type,this._docOrFields,this._inclusive);return new zt(e.firestore,e.converter,function(r,s){return new di(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,t))}};function tN(...n){return ym._create("endBefore",n,!1)}function nN(...n){return ym._create("endAt",n,!0)}function iN(n,e,t,i){if(t[0]=rt(t[0]),t[0]instanceof Lo)return function(s,o,a,l,c){if(!l)throw new P(T.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of yl(s))if(d.field.isKeyField())u.push(Ao(o,l.key));else{let h=l.data.field(d.field);if(_m(h))throw new P(T.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new P(T.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Bi(u,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=Bo(n.firestore);return function(o,a,l,c,u,d){let h=o.explicitOrderBy;if(u.length>h.length)throw new P(T.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let p=0;p<u.length;p++){let g=u[p];if(h[p].field.isKeyField()){if(typeof g!="string")throw new P(T.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof g}`);if(!TC(o)&&g.indexOf("/")!==-1)throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${g}' contains a slash.`);let m=o.path.child(ke.fromString(g));if(!L.isDocumentKey(m))throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let y=new L(m);f.push(Ao(a,y))}else{let m=HO(l,c,g);f.push(m)}}return new Bi(f,d)}(n._query,n.firestore._databaseId,r,e,t,i)}}function JR(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new P(T.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TC(e)&&t.indexOf("/")!==-1)throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(ke.fromString(t));if(!L.isDocumentKey(i))throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ao(n,new L(i))}if(t instanceof Ge)return Ao(n,t._key);throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Em(t)}.`)}function ek(n,e){if(!Array.isArray(n)||n.length===0)throw new P(T.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rN(n,e){let t=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(T.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(T.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ol=class{convertValue(e,t="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return jo(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new Fo(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=IC(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(ad(e));default:return null}}convertTimestamp(e){let t=ss(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=ke.fromString(e);Y(Yk(i));let r=new as(i.get(1),i.get(3)),s=new L(i.popFirst(5));return r.isEqual(t)||ft(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Im(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var bC=class extends Ol{constructor(e){super(),this.firestore=e}convertBytes(e){return new $i(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,t)}};var ur=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xn=class extends Lo{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Dm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},ns=class extends Xn{data(e={}){return super.data(e)}},pi=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ur(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ns(this._firestore,this._userDataWriter,i.key,i,new ur(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let l=new ns(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ur(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let l=new ns(r._firestore,r._userDataWriter,a.doc.key,a.doc,new ur(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:H6(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function H6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}function iD(n,e){return n instanceof Xn&&e instanceof Xn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof pi&&e instanceof pi&&n._firestore===e._firestore&&ZC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function sN(n){n=xe(n,Ge);let e=xe(n.firestore,it);return DO(At(e),n._key).then(t=>aD(e,n,t))}var pr=class extends Ol{constructor(e){super(),this.firestore=e}convertBytes(e){return new $i(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ge(this.firestore,null,t)}};function oN(n){n=xe(n,Ge);let e=xe(n.firestore,it),t=At(e),i=new pr(e);return L6(t,n._key).then(r=>new Xn(e,i,n._key,r,new ur(r!==null&&r.hasLocalMutations,!0),n.converter))}function aN(n){n=xe(n,Ge);let e=xe(n.firestore,it);return DO(At(e),n._key,{source:"server"}).then(t=>aD(e,n,t))}function lN(n){n=xe(n,zt);let e=xe(n.firestore,it),t=At(e),i=new pr(e);return KO(n._query),IO(t,n._query).then(r=>new pi(e,i,n,r))}function cN(n){n=xe(n,zt);let e=xe(n.firestore,it),t=At(e),i=new pr(e);return V6(t,n._query).then(r=>new pi(e,i,n,r))}function uN(n){n=xe(n,zt);let e=xe(n.firestore,it),t=At(e),i=new pr(e);return IO(t,n._query,{source:"server"}).then(r=>new pi(e,i,n,r))}function rD(n,e,t){n=xe(n,Ge);let i=xe(n.firestore,it),r=Im(n.converter,e,t);return Ul(i,[Cm(Bo(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,ut.none())])}function sD(n,e,t,...i){n=xe(n,Ge);let r=xe(n.firestore,it),s=Bo(r),o;return o=typeof(e=rt(e))=="string"||e instanceof fi?eD(s,"updateDoc",n._key,e,t,i):JC(s,"updateDoc",n._key,e),Ul(r,[o.toMutation(n._key,ut.exists(!0))])}function dN(n){return Ul(xe(n.firestore,it),[new hs(n._key,ut.none())])}function hN(n,e){let t=xe(n.firestore,it),i=Od(n),r=Im(n.converter,e);return Ul(t,[Cm(Bo(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,ut.exists(!1))]).then(()=>i)}function oD(n,...e){var t,i,r;n=rt(n);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||lC(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(lC(e[o])){let d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,c,u;if(n instanceof Ge)c=xe(n.firestore,it),u=Fl(n._key.path),l={next:d=>{e[o]&&e[o](aD(c,n,d))},error:e[o+1],complete:e[o+2]};else{let d=xe(n,zt);c=xe(d.firestore,it),u=d._query;let h=new pr(c);l={next:f=>{e[o]&&e[o](new pi(c,h,d,f))},error:e[o+1],complete:e[o+2]},KO(n._query)}return function(h,f,p,g){let m=new Rl(g),y=new Cd(f,m,p);return h.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return FC(yield kl(h),y)})),()=>{m.Na(),h.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return LC(yield kl(h),y)}))}}(At(c),u,a,l)}function fN(n,e){return j6(At(n=xe(n,it)),lC(e)?e:{next:e})}function Ul(n,e){return function(i,r){let s=new Dt;return i.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return v6(yield GC(i),r,s)})),s.promise}(At(n),e)}function aD(n,e,t){let i=t.docs.get(e._key),r=new pr(n);return new Xn(n,r,e._key,i,new ur(t.hasPendingWrites,t.fromCache),e.converter)}var q6={maxAttempts:5};var vm=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Bo(e)}set(e,t,i){this._verifyNotCommitted();let r=es(e,this._firestore),s=Im(r.converter,t,i),o=Cm(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,ut.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let s=es(e,this._firestore),o;return o=typeof(t=rt(t))=="string"||t instanceof fi?eD(this._dataReader,"WriteBatch.update",s._key,t,i,r):JC(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ut.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=es(e,this._firestore);return this._mutations=this._mutations.concat(new hs(t._key,ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(T.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function es(n,e){if((n=rt(n)).firestore!==e)throw new P(T.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var wC=class extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=Bo(t)}get(t){let i=es(t,this._firestore),r=new bC(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return H();let o=s[0];if(o.isFoundDocument())return new Lo(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new Lo(this._firestore,r,i._key,null,i.converter);throw H()})}set(t,i,r){let s=es(t,this._firestore),o=Im(s.converter,i,r),a=Cm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){let o=es(t,this._firestore),a;return a=typeof(i=rt(i))=="string"||i instanceof fi?eD(this._dataReader,"Transaction.update",o._key,i,r,s):JC(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){let i=es(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=es(e,this._firestore),i=new pr(this._firestore);return super.get(e).then(r=>new Xn(this._firestore,i,t._key,r._document,new ur(!1,!1),t.converter))}};function pN(n,e,t){n=xe(n,it);let i=Object.assign(Object.assign({},q6),t);return function(s){if(s.maxAttempts<1)throw new P(T.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){let l=new Dt;return s.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){let c=yield O6(s);new rC(s.asyncQueue,c,a,o,l).run()})),l.promise}(At(n),r=>e(new wC(n,r)),i)}function gN(){return new Sd("deleteField")}function mN(){return new hC("serverTimestamp")}function yN(...n){return new fC("arrayUnion",n)}function vN(...n){return new pC("arrayRemove",n)}function _N(n){return new gC("increment",n)}(function(e,t=!0){(function(r){Nl=r})(tS),lc(new Ps("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new it(new xw(i.getProvider("auth-internal")),new Rw(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new P(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new as(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ir(nR,"4.4.0",e),Ir(nR,"4.4.0","esm2017")})();var W6="@firebase/firestore-compat",G6="0.3.23";function fD(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function bN(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function wN(){if(!fk())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Sm=class n{constructor(e){this._delegate=e}static fromBase64String(e){return wN(),new n($i.fromBase64String(e))}static fromUint8Array(e){return bN(),new n($i.fromUint8Array(e))}toBase64(){return wN(),this._delegate.toBase64()}toUint8Array(){return bN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function lD(n){return K6(n,["next","error","complete"])}function K6(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}var cD=class{enableIndexedDbPersistence(e,t){return RO(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return kO(e._delegate)}clearIndexedDbPersistence(e){return NO(e._delegate)}},Tm=class{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof as||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){xO(this._delegate,e,t,i)}enableNetwork(){return LO(this._delegate)}disableNetwork(){return VO(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,QC("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return FO(this._delegate)}onSnapshotsInSync(e){return fN(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hl(this,YC(this._delegate,e))}catch(t){throw hn(t,"collection()","Firestore.collection()")}}doc(e){try{return new zi(this,Od(this._delegate,e))}catch(t){throw hn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new qo(this,AO(this._delegate,e))}catch(t){throw hn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return pN(this._delegate,t=>e(new xm(this,t)))}batch(){return At(this._delegate),new Am(new vm(this._delegate,e=>Ul(this._delegate,e)))}loadBundle(e){return jO(this._delegate,e)}namedQuery(e){return BO(this._delegate,e).then(t=>t?new qo(this,t):null)}},$l=class extends Ol{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sm(new $i(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return zi.forKey(t,this.firestore,null)}};function Q6(n){tk(n)}var xm=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new $l(e)}get(e){let t=$o(e);return this._delegate.get(t).then(i=>new zo(this._firestore,new Xn(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){let r=$o(e);return i?(fD("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=$o(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=$o(e);return this._delegate.delete(t),this}},Am=class{constructor(e){this._delegate=e}set(e,t,i){let r=$o(e);return i?(fD("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=$o(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=$o(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},zl=class n{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){let i=new ns(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ho(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let i=n.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new n(e,new $l(e),t),r.set(t,s)),s}};zl.INSTANCES=new WeakMap;var zi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $l(e)}static forPath(e,t,i){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ge(t._delegate,i,new L(e)))}static forKey(e,t,i){return new n(t,new Ge(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Hl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hl(this.firestore,YC(this._delegate,e))}catch(t){throw hn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=rt(e),e instanceof Ge?XC(this._delegate,e):!1}set(e,t){t=fD("DocumentReference.set",t);try{return t?rD(this._delegate,e,t):rD(this._delegate,e)}catch(i){throw hn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?sD(this._delegate,e):sD(this._delegate,e,t,...i)}catch(r){throw hn(r,"updateDoc()","DocumentReference.update()")}}delete(){return dN(this._delegate)}onSnapshot(...e){let t=EN(e),i=CN(e,r=>new zo(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return oD(this._delegate,t,i)}get(e){let t;return e?.source==="cache"?t=oN(this._delegate):e?.source==="server"?t=aN(this._delegate):t=sN(this._delegate),t.then(i=>new zo(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(zl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function hn(n,e,t){return n.message=n.message.replace(e,t),n}function EN(n){for(let e of n)if(typeof e=="object"&&!lD(e))return e;return{}}function CN(n,e){var t,i;let r;return lD(n[0])?r=n[0]:lD(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var zo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return iD(this._delegate,e._delegate)}},Ho=class extends zo{data(e){let t=this._delegate.data(e);return this._delegate._converter||nk(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},qo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new $l(e)}where(e,t,i){try{return new n(this.firestore,mr(this._delegate,QO(e,t,i)))}catch(r){throw hn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,mr(this._delegate,YO(e,t)))}catch(i){throw hn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,mr(this._delegate,XO(e)))}catch(t){throw hn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,mr(this._delegate,ZO(e)))}catch(t){throw hn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,mr(this._delegate,JO(...e)))}catch(t){throw hn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,mr(this._delegate,eN(...e)))}catch(t){throw hn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,mr(this._delegate,tN(...e)))}catch(t){throw hn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,mr(this._delegate,nN(...e)))}catch(t){throw hn(t,"endAt()","Query.endAt()")}}isEqual(e){return ZC(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=cN(this._delegate):e?.source==="server"?t=uN(this._delegate):t=lN(this._delegate),t.then(i=>new Nd(this.firestore,new pi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let t=EN(e),i=CN(e,r=>new Nd(this.firestore,new pi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return oD(this._delegate,t,i)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(zl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},uD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ho(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Nd=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new qo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ho(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uD(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Ho(this._firestore,i))})}isEqual(e){return iD(this._delegate,e._delegate)}},Hl=class n extends qo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new zi(this.firestore,e):null}doc(e){try{return e===void 0?new zi(this.firestore,Od(this._delegate)):new zi(this.firestore,Od(this._delegate,e))}catch(t){throw hn(t,"doc()","CollectionReference.doc()")}}add(e){return hN(this._delegate,e).then(t=>new zi(this.firestore,t))}isEqual(e){return XC(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(zl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $o(n){return xe(n,Ge)}var dD=class n{constructor(...e){this._delegate=new fi(...e)}static documentId(){return new n(pt.keyField().canonicalString())}isEqual(e){return e=rt(e),e instanceof fi?this._delegate._internalPath.isEqual(e._internalPath):!1}};var hD=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=mN();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=gN();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=yN(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=vN(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=_N(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Y6={Firestore:Tm,GeoPoint:Fo,Timestamp:st,Blob:Sm,Transaction:xm,WriteBatch:Am,DocumentReference:zi,DocumentSnapshot:zo,Query:qo,QueryDocumentSnapshot:Ho,QuerySnapshot:Nd,CollectionReference:Hl,FieldPath:dD,FieldValue:hD,setLogLevel:Q6,CACHE_SIZE_UNLIMITED:MO};function X6(n,e){n.INTERNAL.registerComponent(new Ps("firestore-compat",t=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Y6)))}function Z6(n){X6(n,(e,t)=>new Tm(e,t,new cD)),n.registerVersion(W6,G6)}Z6(Kt);var J6="firebase",eW="10.7.0";Ir(J6,eW,"app");var ql=new er("ANGULARFIRE2_VERSION");var tW=(n,e)=>{let t=e?[e]:nS(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},Wo=class{constructor(){return tW(nW)}},nW="app-check";function pD(){}var Mm=class{zone;delegate;constructor(e,t=Vy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},gD=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pD,{},pD,pD)),t.pipe(ht({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Pm=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Mm(Zone.current)),this.insideAngular=t.run(()=>new Mm(Zone.current,hc)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(O(Ne))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iW(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function bn(n){return rW(iW())(n)}function rW(n){return function(t){return t=t.lift(new gD(n.ngZone)),t.pipe(ti(n.outsideAngular),Fn(n.insideAngular))}}var sW=new Map,oW={activated:!1,tokenObservers:[]},aW={initialized:!1,enabled:!1};function gi(n){return sW.get(n)||Object.assign({},oW)}function AN(){return aW}var lW="https://content-firebaseappcheck.googleapis.com/v1";var cW="exchangeDebugToken",IN={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},_oe=24*60*60*1e3;var yD=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new Dy,yield uW(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Dy,yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function uW(n){return new Promise(e=>{setTimeout(e,n)})}var dW={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ys=new eS("appCheck","AppCheck",dW);function MN(n){if(!gi(n).activated)throw ys.create("use-before-activation",{appName:n.name})}function PN(i,r){return x(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},l;try{l=yield fetch(n,a)}catch(f){throw ys.create("fetch-network-error",{originalErrorMessage:f?.message})}if(l.status!==200)throw ys.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(f){throw ys.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=c.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw ys.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function RN(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${lW}/projects/${t}/apps/${i}:${cW}?key=${r}`,body:{debug_token:e}}}var hW="firebase-app-check-database",fW=1,vD="firebase-app-check-store";var Rm=null;function pW(){return Rm||(Rm=new Promise((n,e)=>{try{let t=indexedDB.open(hW,fW);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(ys.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(vD,{keyPath:"compositeKey"})}}}catch(t){e(ys.create("storage-open",{originalErrorMessage:t?.message}))}}),Rm)}function gW(n,e){return mW(yW(n),e)}function mW(n,e){return x(this,null,function*(){let i=(yield pW()).transaction(vD,"readwrite"),s=i.objectStore(vD).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=l=>{o()},i.onerror=l=>{var c;a(ys.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function yW(n){return`${n.options.appId}-${n.name}`}var _D=new uh("@firebase/app-check");function mD(n,e){return ch()?gW(n,e).catch(t=>{_D.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function kN(){return AN().enabled}function ON(){return x(this,null,function*(){let n=AN();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var vW={error:"UNKNOWN_ERROR"};function _W(n){return YI.encodeString(JSON.stringify(n),!1)}function bD(n,e=!1){return x(this,null,function*(){let t=n.app;MN(t);let i=gi(t),r=i.token,s;if(r&&!Fd(r)&&(i.token=void 0,r=void 0),!r){let l=yield i.cachedTokenPromise;l&&(Fd(l)?r=l:yield mD(t,void 0))}if(!e&&r&&Fd(r))return{token:r.token};let o=!1;if(kN()){i.exchangeTokenPromise||(i.exchangeTokenPromise=PN(RN(t,yield ON()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let l=yield i.exchangeTokenPromise;return yield mD(t,l),i.token=l,{token:l.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield gi(t).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?_D.warn(l.message):_D.error(l),s=l}let a;return r?s?Fd(r)?a={token:r.token,internalError:s}:a=TN(s):(a={token:r.token},i.token=r,yield mD(t,r)):a=TN(s),o&&CW(t,a),a})}function bW(n){return x(this,null,function*(){let e=n.app;MN(e);let{provider:t}=gi(e);if(kN()){let i=yield ON(),{token:r}=yield PN(RN(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function wW(n,e,t,i){let{app:r}=n,s=gi(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Fd(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),SN(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>SN(n))}function NN(n,e){let t=gi(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function SN(n){let{app:e}=n,t=gi(e),i=t.tokenRefresher;i||(i=EW(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function EW(n){let{app:e}=n;return new yD(()=>x(this,null,function*(){let t=gi(e),i;if(t.token?i=yield bD(n,!0):i=yield bD(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=gi(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},IN.RETRIAL_MIN_WAIT,IN.RETRIAL_MAX_WAIT)}function CW(n,e){let t=gi(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Fd(n){return n.expireTimeMillis-Date.now()>0}function TN(n){return{token:_W(vW),error:n}}var wD=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gi(this.app);for(let t of e)NN(this.app,t.next);return Promise.resolve()}};function DW(n,e){return new wD(n,e)}function IW(n){return{getToken:e=>bD(n,e),getLimitedUseToken:()=>bW(n),addTokenListener:e=>wW(n,"INTERNAL",e),removeTokenListener:e=>NN(n.app,e)}}var SW="@firebase/app-check",TW="0.8.0";var xW="app-check",xN="app-check-internal";function AW(){lc(new Ps(xW,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return DW(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xN).initialize()})),lc(new Ps(xN,n=>{let e=n.getProvider("app-check").getImmediate();return IW(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ir(SW,TW)}AW();var MW=["localhost","0.0.0.0","127.0.0.1"],Poe=typeof window<"u"&&MW.includes(window.location.hostname);var PW=["ngOnDestroy"],VN=(n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(PW.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let l=a?.[s];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(u=>{let d=u?.(...c);return i?.spy?.apply&&i.spy.apply(s,c,d),d})})})});var km=class{constructor(e){return e}},Wl=new G("angularfire2.app.options"),Gl=new G("angularfire2.app.name");function Ld(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let o=Kt.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>Kt.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;RW("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new km(o)}var RW=(n,...e)=>{W_()&&typeof console<"u"&&console[n](...e)},kW={provide:km,useFactory:Ld,deps:[Wl,Ne,[new Pa,Gl]]},jN=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:Wl,useValue:t},{provide:Gl,useValue:i}]}}constructor(t){Kt.registerVersion("angularfire",ql.full,"core"),Kt.registerVersion("angularfire",ql.full,"app-compat"),Kt.registerVersion("angular",A_.full,t.toString())}static \u0275fac=function(i){return new(i||n)(O(yn))};static \u0275mod=Xt({type:n});static \u0275inj=Yt({providers:[kW]})}return n})();function Om(n,e,t,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return OW(r,o)||(LN("error",`${e} was already initialized on the ${t} Firebase App with different settings.${NW?" You may need to reload as Firebase is not HMR aware.":""}`),LN("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function OW(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var NW=typeof module<"u"&&!!module.hot,LN=(n,...e)=>{W_()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var ED=new G("angularfire2.auth.use-emulator"),CD=new G("angularfire2.auth.settings"),DD=new G("angularfire2.auth.tenant-id"),ID=new G("angularfire2.auth.langugage-code"),SD=new G("angularfire2.auth.use-device-language"),TD=new G("angularfire.auth.persistence"),xD=(n,e,t,i,r,s,o,a)=>Om(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),i&&(l.tenantId=i),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(let[c,u]of Object.entries(o))l.settings[c]=u;return a&&l.setPersistence(a),l},[t,i,r,s,o,a]),Go=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,l,c,u,d,h,f){let p=new vt,g=Z(void 0).pipe(Fn(o.outsideAngular),et(()=>s.runOutsideAngular(()=>import("./chunk-JZSMLUNY.js"))),J(()=>Ld(t,s,i)),J(m=>xD(m,s,a,c,u,d,l,h)),Vh({bufferSize:1,refCount:!1}));if(no(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Z(null);else{g.pipe(Ln()).subscribe();let m=g.pipe(et(w=>w.getRedirectResult().then(C=>C,()=>null)),bn,Vh({bufferSize:1,refCount:!1})),y=g.pipe(et(w=>new le(C=>({unsubscribe:s.runOutsideAngular(()=>w.onAuthStateChanged(D=>C.next(D),D=>C.error(D),()=>C.complete()))})))),b=g.pipe(et(w=>new le(C=>({unsubscribe:s.runOutsideAngular(()=>w.onIdTokenChanged(D=>C.next(D),D=>C.error(D),()=>C.complete()))}))));this.authState=m.pipe(jh(y),ti(o.outsideAngular),Fn(o.insideAngular)),this.user=m.pipe(jh(b),ti(o.outsideAngular),Fn(o.insideAngular)),this.idToken=this.user.pipe(et(w=>w?Pe(w.getIdToken()):Z(null))),this.idTokenResult=this.user.pipe(et(w=>w?Pe(w.getIdTokenResult()):Z(null))),this.credential=pc(m,p,this.authState.pipe(Pt(w=>!w))).pipe(J(w=>w?.user?w:null),ti(o.outsideAngular),Fn(o.insideAngular))}return VN(this,g,s,{spy:{apply:(m,y,b)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&b.then(w=>p.next(w))}}})}static \u0275fac=function(i){return new(i||n)(O(Wl),O(Gl,8),O(yn),O(Ne),O(Pm),O(ED,8),O(CD,8),O(DD,8),O(ID,8),O(SD,8),O(TD,8),O(Wo,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),BN=(()=>{class n{constructor(){Kt.registerVersion("angularfire",ql.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Xt({type:n});static \u0275inj=Yt({providers:[Go]})}return n})();function FW(n,e=hc){return new le(t=>{let i;return e!=null?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}function UN(n,e){return FW(n,e)}function LW(n,e){return UN(n,e).pipe(Fs(void 0),mc(),J(t=>{let[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function RD(n,e){return UN(n,e).pipe(J(t=>({payload:t,type:"query"})))}var Nm=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let i=this.ref.collection(e),{ref:r,query:s}=HN(i,t);return new Lm(r,s,this.afs)}snapshotChanges(){return LW(this.ref,this.afs.schedulers.outsideAngular).pipe(bn)}valueChanges(e={}){return this.snapshotChanges().pipe(J(({payload:t})=>e.idField?Me(z({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Pe(this.ref.get(e)).pipe(bn)}};function Fm(n,e){return RD(n,e).pipe(Fs(void 0),mc(),J(t=>{let[i,r]=t,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let c=s.find(d=>d.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(d=>d.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function $N(n,e,t){return Fm(n,t).pipe(Ns((i,r)=>VW(i,r.map(s=>s.payload),e),[]),gc(),J(i=>i.map(r=>({type:r.type,payload:r}))))}function VW(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=jW(n,i))}),n}function MD(n,e,t,...i){let r=n.slice();return r.splice(e,t,...i),r}function jW(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return MD(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return MD(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return MD(n,e.oldIndex,1);break}return n}function zN(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Lm=class{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Fm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(J(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Fs(void 0),mc(),Pt(([i,r])=>r.length>0||!i),J(([,i])=>i),bn)}auditTrail(e){return this.stateChanges(e).pipe(Ns((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=zN(e);return $N(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn)}valueChanges(e={}){return RD(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.payload.docs.map(i=>e.idField?Me(z({},i.data()),{[e.idField]:i.id}):i.data())),bn)}get(e){return Pe(this.query.get(e)).pipe(bn)}add(e){return this.ref.add(e)}doc(e){return new Nm(this.ref.doc(e),this.afs)}},PD=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Fm(this.query,this.afs.schedulers.outsideAngular).pipe(bn):Fm(this.query,this.afs.schedulers.outsideAngular).pipe(J(t=>t.filter(i=>e.indexOf(i.type)>-1)),Pt(t=>t.length>0),bn)}auditTrail(e){return this.stateChanges(e).pipe(Ns((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=zN(e);return $N(this.query,t,this.afs.schedulers.outsideAngular).pipe(bn)}valueChanges(e={}){return RD(this.query,this.afs.schedulers.outsideAngular).pipe(J(i=>i.payload.docs.map(r=>e.idField?z({[e.idField]:r.id},r.data()):r.data())),bn)}get(e){return Pe(this.query.get(e)).pipe(bn)}},BW=new G("angularfire2.enableFirestorePersistence"),UW=new G("angularfire2.firestore.persistenceSettings"),$W=new G("angularfire2.firestore.settings"),zW=new G("angularfire2.firestore.use-emulator");function HN(n,e=t=>t){return{query:e(n),ref:n}}var qN=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,a,l,c,u,d,h,f,p,g,m,y,b){this.schedulers=l;let w=Ld(t,a,i),C=u;d&&xD(w,a,h,p,g,m,f,y),[this.firestore,this.persistenceEnabled$]=Om(`${w.name}.firestore`,"AngularFirestore",w.name,()=>{let D=a.runOutsideAngular(()=>w.firestore());if(s&&D.settings(s),C&&D.useEmulator(...C),r&&!no(o)){let I=()=>{try{return Pe(D.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(A){return typeof console<"u"&&console.warn(A),Z(!1)}};return[D,a.runOutsideAngular(I)]}else return[D,Z(!1)]},[s,C,r])}collection(t,i){let r;typeof t=="string"?r=this.firestore.collection(t):r=t;let{ref:s,query:o}=HN(r,i),a=this.schedulers.ngZone.run(()=>s);return new Lm(a,o,this)}collectionGroup(t,i){let r=i||(o=>o),s=this.firestore.collectionGroup(t);return new PD(r(s),this)}doc(t){let i;typeof t=="string"?i=this.firestore.doc(t):i=t;let r=this.schedulers.ngZone.run(()=>i);return new Nm(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(O(Wl),O(Gl,8),O(BW,8),O($W,8),O(yn),O(Ne),O(Pm),O(UW,8),O(zW,8),O(Go,8),O(ED,8),O(CD,8),O(DD,8),O(ID,8),O(SD,8),O(TD,8),O(Wo,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var wn=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.firestore=r,this.config={apiKey:"AIzaSyAG0hszH-LeA5KP1PQUYzZuPRp98ump2Ow",authDomain:"test-fb550.firebaseapp.com",databaseURL:"https://test-fb550-default-rtdb.europe-west1.firebasedatabase.app"},this.secondaryApp=Kt.initializeApp(this.config,"Secondary"),this.user$=i.authState}createAccount(i,r,s){this.secondaryApp.auth().createUserWithEmailAndPassword(i,r).then(o=>{this.secondaryApp.auth().signOut();let a=o.user;a?.updateProfile({displayName:s}).then(()=>{console.log("Registered successfully!"),this.addUser(a.uid,{displayName:s,email:i,userUID:a.uid,admin:!1,tickets:[]}).then(()=>{console.log("User added to Firestore successfully!")}).catch(l=>{console.error("Error adding user to Firestore:",l)})})})}getUserLoggedData(){return this.user$}login(i,r){return this.afAuth.signInWithEmailAndPassword(i,r).then(s=>s.user).catch(s=>{throw s})}logout(){return x(this,null,function*(){try{yield this.afAuth.signOut()}catch(i){throw i}})}isLoggedIn(){return new le(i=>{this.afAuth.authState.subscribe(r=>{i.next(!!r),i.complete()})})}addUser(i,r){return this.firestore.collection("users").doc(i).set(r)}updateUser(i,r){return this.firestore.collection("users").doc(i).update(r)}getUserById(i){return this.firestore.collection("users").doc(i).valueChanges()}getAllUsers(){return this.firestore.collection("users").valueChanges()}getAllNotifications(){return this.firestore.collection("notification").valueChanges()}deleteUserById(i){return this.firestore.collection("users").doc(i).delete()}};e.\u0275fac=function(r){return new(r||e)(O(Go),O(qN))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function qW(n,e){if(n&1&&(v(0,"p",11),E(1),_()),n&2){let t=be();k(1),we(t.errorMessage)}}var WN=(()=>{let e=class e{constructor(i,r){this.router=i,this.authService=r,this.email="",this.password="",this.errorMessage=null}login(){this.authService.login(this.email,this.password).then(i=>{localStorage.setItem("userID",i.uid),this.router.navigate(["/home/homepage"])}).catch(i=>{this.errorMessage=i.message})}};e.\u0275fac=function(r){return new(r||e)(q(Bt),q(wn))},e.\u0275cmp=he({type:e,selectors:[["app-login"]],standalone:!0,features:[fe],decls:17,vars:4,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["for","email"],["type","text","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit",1,"login-button",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,s){if(r&1&&(v(0,"div",0)(1,"div",1)(2,"h2"),E(3,"Login"),_(),v(4,"form",2,3),ne("ngSubmit",function(){return s.login()}),v(6,"div",4)(7,"label",5),E(8,"Email:"),_(),v(9,"input",6),ne("ngModelChange",function(a){return s.email=a}),_()(),v(10,"div",4)(11,"label",7),E(12,"Password:"),_(),v(13,"input",8),ne("ngModelChange",function(a){return s.password=a}),_()(),v(14,"button",9),E(15,"Login"),_(),Re(16,qW,2,1,"p",10),_()()()),r&2){let o=kf(5);k(9),X("ngModel",s.email),k(4),X("ngModel",s.password),k(1),X("disabled",!o.valid),k(2),X("ngIf",s.errorMessage)}},dependencies:[ge,zn,Ja,Lp,Kr,Za,Np,Cu,po,Eu],styles:[".login-container[_ngcontent-%COMP%]{background:linear-gradient(to right,#7b1fa2,#4a148c);display:flex;justify-content:center;align-items:center;height:100vh}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000004d}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4a148c;margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4a148c;font-weight:700}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{background-color:#4a148c;color:#fff;padding:10px 20px;font-size:1.2rem;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover{background-color:#7b1fa2}"]});let n=e;return n})();function WW(n,e){n&1&&(v(0,"div"),V(1,"hr"),v(2,"li")(3,"a",18),V(4,"i",19),E(5," Admin"),_()(),V(6,"hr"),_())}var GW=n=>({menuColorVisible:n}),KW=n=>({toggleSidebar:n}),Vm=(()=>{let e=class e{constructor(i,r){this.authService=i,this.router=r,this.isSidebarHidden=!1}ngOnInit(){this.authService.getUserLoggedData().subscribe(i=>{console.log(i.uid),this.authService.getUserById(i.uid).subscribe(r=>{this.userLoggedData=r,console.log(this.userLoggedData)})})}logout(){this.authService.logout().then(()=>{console.log("User logged out"),this.router.navigate(["/"])}).catch(i=>{console.error("Logout error:",i)})}toggleSidebar(){if(this.isSidebarHidden){this.isSidebarHidden=!1;return}else{this.isSidebarHidden=!0;return}}};e.\u0275fac=function(r){return new(r||e)(q(wn),q(Bt))},e.\u0275cmp=he({type:e,selectors:[["app-sidebar"]],standalone:!0,features:[fe],decls:30,vars:7,consts:[[1,"btn","hamburger-menu"],[1,"btn",3,"click"],[1,"bi","bi-list",3,"ngClass"],[3,"ngClass"],[1,"mt-5"],["routerLink","/home/homepage"],[1,"bi","bi-house"],["routerLink","/home/profile"],[1,"bi","bi-person"],["routerLink","/home/challenge"],[1,"bi","bi-lightning"],["routerLink","/home/tutorial"],[1,"bi","bi-backpack"],["routerLink","/home/ticketing"],[1,"bi","bi-balloon"],[4,"ngIf"],[3,"click"],[1,"bi","bi-box-arrow-left"],["routerLink","/home/admin"],[1,"bi","bi-person-lines-fill"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"button",1),ne("click",function(){return s.toggleSidebar()}),V(2,"i",2),_()(),v(3,"nav",3)(4,"ul",4)(5,"li")(6,"a",5),V(7,"i",6),E(8," Home"),_()(),v(9,"li")(10,"a",7),V(11,"i",8),E(12," Profile"),_()(),v(13,"li")(14,"a",9),V(15,"i",10),E(16," Challenge"),_()(),v(17,"li")(18,"a",11),V(19,"i",12),E(20," Tutorial"),_()(),v(21,"li")(22,"a",13),V(23,"i",14),E(24," Ticketing"),_()(),Re(25,WW,7,0,"div",15),v(26,"li")(27,"a",16),ne("click",function(){return s.logout()}),V(28,"i",17),E(29," Logout"),_()()()()),r&2&&(k(2),X("ngClass",B_(3,GW,s.isSidebarHidden)),k(1),X("ngClass",B_(5,KW,s.isSidebarHidden)),k(22),X("ngIf",s.userLoggedData.admin===!0))},dependencies:[ge,OA,zn,xi],styles:["@media (max-width: 768px){nav[_ngcontent-%COMP%]{display:none;position:fixed}}.menuColorVisible[_ngcontent-%COMP%]{color:#fff}.toggleSidebar[_ngcontent-%COMP%]{display:block;z-index:1}.hamburger-menu[_ngcontent-%COMP%]{position:absolute;font-size:2rem;z-index:2}nav[_ngcontent-%COMP%]{width:200px;background:linear-gradient(to bottom,#7b1fa2,#4a148c);height:100vh;padding:20px;box-shadow:0 4px 8px #0000001a}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}nav[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{color:#fff}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px;text-decoration:none;color:#fff;font-size:1.2rem;transition:background-color .3s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff3;color:#fff}"]});let n=e;return n})();var QW=["message"];function YW(n,e){if(n&1&&(v(0,"span",28),E(1),_()),n&2){let t=be();k(1),vn(" ",t.unreadNotifications," ")}}function XW(n,e){n&1&&V(0,"i",34)}function ZW(n,e){n&1&&V(0,"i",35)}function JW(n,e){if(n&1){let t=bt();v(0,"div")(1,"div",29),ne("click",function(){let s=qe(t).$implicit,o=be();return We(o.openNotification(s))}),Re(2,XW,1,0,"i",30)(3,ZW,1,0,"i",31),v(4,"div",32)(5,"div")(6,"h5",33),E(7),_(),v(8,"h6",21),E(9),_()(),E(10),_()()()}if(n&2){let t=e.$implicit;k(2),X("ngIf",t.status=="unread"),k(1),X("ngIf",t.status=="read"),k(4),we(t.title),k(2),we(t.date),k(1),vn(" ",t.body," ")}}var GN=(()=>{let e=class e{constructor(i){this.authService=i,this.currentShown={},this.unreadNotifications=0,this.notifications=[],this.messages=[]}ngOnInit(){this.authService.getAllNotifications().subscribe(i=>{this.messages=i,console.log(this.messages.length)}),this.updateNotifications()}openNotification(i){i.status="read",this.currentShown=i,this.notifications.filter(r=>r.id==i.id)[0].status="read",this.updateNotifications()}unread(i){this.notifications.filter(r=>r.id==i.id)[0].status="unread",this.updateNotifications()}sortUnreadedFirst(){this.notifications=this.notifications.sort((i,r)=>{let s=(i.status==="unread"?0:1)-(r.status==="unread"?0:1);return s!==0?s:i.date&&r.date?Date.parse(r.date)-Date.parse(i.date):0})}updateNotifications(){this.sortUnreadedFirst(),this.unreadNotifications=this.notifications.filter(i=>i.status=="unread").length}};e.\u0275fac=function(r){return new(r||e)(q(wn))},e.\u0275cmp=he({type:e,selectors:[["app-appbar"]],viewQuery:function(r,s){if(r&1&&Of(QW,5),r&2){let o;Fc(o=Lc())&&(s.message=o.first)}},standalone:!0,features:[fe],decls:38,vars:7,consts:[[1,"appbar"],[1,"btn","btn-primary","mx-2"],[1,"bi","bi-moon-fill"],["routerLink","/home/settings",1,"btn","btn-primary","mx-2"],[1,"bi","bi-gear"],["data-bs-toggle","offcanvas","data-bs-target","#offcanvasNotification","aria-controls","offcanvasRight",1,"btn","btn-primary","mx-2","position-relative"],[1,"bi","bi-bell"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",4,"ngIf"],["tabindex","-1","id","offcanvasNotification","aria-labelledby","offcanvasRightLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","offcanvasRightLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],[4,"ngFor","ngForOf"],["id","message","tabindex","-1","aria-labelledby","messageLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","flex-column","align-items-baseline"],[1,"d-flex","justify-content-between","w-100"],["id","exampleModalLabel",1,"modal-title","fs-4"],[1,"modal-title","fs-4","fw-semibold"],[1,"card-subtitle","mb-2","text-muted"],[1,"modal-body"],[1,"card-text","fs-5","fw-semibold"],[1,"fs","fs-6"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"],["data-bs-toggle","modal","data-bs-target","#message",1,"card","m-2","d-flex","flex-row","justify-content-center","align-items-center",3,"click"],["class","bi bi-envelope mx-2",4,"ngIf"],["class","bi bi-envelope-open mx-2",4,"ngIf"],[1,"card-body"],[1,"card-title"],[1,"bi","bi-envelope","mx-2"],[1,"bi","bi-envelope-open","mx-2"]],template:function(r,s){if(r&1&&(v(0,"div",0)(1,"button",1),E(2,"+ Add Ticket"),_(),v(3,"button",1),V(4,"i",2),_(),v(5,"button",3),V(6,"i",4),_(),v(7,"button",5),V(8,"i",6),Re(9,YW,2,1,"span",7),_()(),v(10,"div",8)(11,"div",9)(12,"h5",10),E(13,"Notifications"),_(),V(14,"button",11),_(),v(15,"div",12),Re(16,JW,11,5,"div",13),_()(),v(17,"div",14)(18,"div",15)(19,"div",16)(20,"div",17)(21,"div",18)(22,"h1",19),E(23),_(),v(24,"span",20),E(25),_()(),v(26,"h6",21),E(27),_()(),v(28,"div",22)(29,"p",23),E(30),_(),v(31,"p",24),E(32),_()(),v(33,"div",25)(34,"button",26),ne("click",function(){return s.unread(s.currentShown)}),E(35,"Mantain as unread"),_(),v(36,"button",27),E(37,"Close"),_()()()()()),r&2){let o;k(9),X("ngIf",s.unreadNotifications>0),k(7),X("ngForOf",s.messages),k(7),we(s.currentShown.title),k(2),vn("Id: ",s.currentShown.id==null||(o=s.currentShown.id.toString())==null?null:o.padStart(3,"0"),""),k(2),we(s.currentShown.date),k(3),we(s.currentShown.description),k(2),we(s.currentShown.body)}},dependencies:[ge,Zt,zn,xi],styles:[".appbar[_ngcontent-%COMP%]{padding:0 20px;display:flex;justify-content:end;align-items:center;height:80px;background-color:#6a1b9a}"]});let n=e;return n})();var KN=(()=>{let e=class e{constructor(i){this.authService=i,this.uid=localStorage.getItem("userID")}ngOnInit(){}};e.\u0275fac=function(r){return new(r||e)(q(wn))},e.\u0275cmp=he({type:e,selectors:[["app-home"]],standalone:!0,features:[fe],decls:5,vars:0,consts:[[1,"d-flex"],[1,"content-area"]],template:function(r,s){r&1&&(v(0,"div",0),V(1,"app-sidebar"),v(2,"div",1),V(3,"app-appbar")(4,"router-outlet"),_()())},dependencies:[ge,Vm,ou,GN],styles:[".content-area[_ngcontent-%COMP%]{flex-grow:1}"]});let n=e;return n})();var QN=(()=>{let e=class e{constructor(i){this.http=i,this.apiUrl="https://api.pexels.com/v1/curated/"}getVideos(i){let r={Authorization:"piJBFBmlVPzcKe6VY43bsWlOqJ7M58uTEpCNmhBmHVWa48o96ChjR0jG"};return this.http.get(this.apiUrl,{headers:r})}};e.\u0275fac=function(r){return new(r||e)(O(t0))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function t8(n,e){n&1&&(v(0,"div",4)(1,"div",5)(2,"span",6),E(3,"Loading..."),_()()())}function n8(n,e){if(n&1&&(v(0,"div",7)(1,"div",8),V(2,"img",9),v(3,"div",10)(4,"h5",11),E(5),_(),v(6,"p",12),E(7,"Some quick example text to build on the card title and make up the bulk of the card's content."),_(),v(8,"a",13),E(9,"Photographer link"),_()()()()),n&2){let t=e.$implicit;k(2),rr("src",t.src.original,Nr),rr("alt",t.alt),k(3),we(t.photographer),k(3),rr("href",t.photographer_url,Nr)}}var YN=(()=>{let e=class e{constructor(i){this.videoService=i,this.spinner=!0,this.photos=[]}ngOnInit(){setTimeout(()=>{this.videoService.getVideos("dogs").subscribe({next:i=>{this.spinner=!1,this.photos=i.photos},error:i=>{this.spinner=!1,console.error("There was an error!",i)}})},2e3)}};e.\u0275fac=function(r){return new(r||e)(q(QN))},e.\u0275cmp=he({type:e,selectors:[["app-tutorial"]],standalone:!0,features:[fe],decls:4,vars:2,consts:[[1,"d-flex","justify-content-center","align-items-center"],["class","text-center",4,"ngIf"],[1,"photo-list"],["class","photo-item",4,"ngFor","ngForOf"],[1,"text-center"],["role","status",1,"spinner-grow"],[1,"visually-hidden"],[1,"photo-item"],[1,"card",2,"width","20rem"],[1,"card-img-top",2,"object-fit","cover","height","200px","width","100%",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["target","_blank",1,"btn","btn-primary",3,"href"]],template:function(r,s){r&1&&(v(0,"div",0),Re(1,t8,4,0,"div",1),v(2,"div",2),Re(3,n8,10,4,"div",3),_()()),r&2&&(k(1),X("ngIf",s.spinner),k(2),X("ngForOf",s.photos))},dependencies:[ge,Zt,zn,Hf],styles:[".spinner-grow[_ngcontent-%COMP%]{width:3rem;height:3rem;color:#7b1fa2}.photo-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;overflow-y:scroll;height:100vh}.photo-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.photo-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(241,241,241,0);border-radius:6px}.photo-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#7b1fa2,#4a148c);border-radius:6px}.photo-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#9c27b0,#6a1b9a)}.photo-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{margin:20px}.photo-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;height:auto}"]});let n=e;return n})();var XN=(()=>{let e=class e{transform(i,r){return i?r?(r=r.toLowerCase(),i.filter(s=>JSON.stringify(s).toLowerCase().includes(r))):i:null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=e_({name:"search",type:e,pure:!0,standalone:!0});let n=e;return n})();var Hi=(()=>{let e=class e{constructor(){}setCurrentRowData(i){this.currentRowData=i}getCurrentRowData(){return this.currentRowData}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function i8(n,e){if(n&1){let t=bt();v(0,"td",30),ne("click",function(){qe(t);let r=be().$implicit,s=be(2);return We(s.openDetailPage(r))}),V(1,"i",31),_()}}function r8(n,e){if(n&1){let t=bt();v(0,"td",30),ne("click",function(){qe(t);let r=be().$implicit,s=be(2);return We(s.openDetailPage(r))}),V(1,"i",32),_()}}function s8(n,e){if(n&1){let t=bt();v(0,"td",30),ne("click",function(){qe(t);let r=be().$implicit,s=be(2);return We(s.openDetailPage(r))}),V(1,"i",33),_()}}function o8(n,e){if(n&1){let t=bt();v(0,"tr")(1,"th",26),ne("click",function(){let s=qe(t).$implicit,o=be(2);return We(o.openDetailPage(s))}),E(2),_(),v(3,"td",27),ne("click",function(){let s=qe(t).$implicit,o=be(2);return We(o.openDetailPage(s))}),E(4),_(),v(5,"td",27),ne("click",function(){let s=qe(t).$implicit,o=be(2);return We(o.openDetailPage(s))}),E(6),_(),v(7,"td",27),ne("click",function(){let s=qe(t).$implicit,o=be(2);return We(o.openDetailPage(s))}),E(8),_(),Re(9,i8,2,0,"td",28)(10,r8,2,0,"td",28)(11,s8,2,0,"td",28),v(12,"td")(13,"button",29),V(14,"i",8),_()()()}if(n&2){let t=e.$implicit;k(2),vn("#",t.number,""),k(2),we(t.name),k(2),we(t.email),k(2),we(t.title),k(1),X("ngIf",t.status==="open"),k(1),X("ngIf",t.status==="closed"),k(1),X("ngIf",t.status==="processing")}}function a8(n,e){if(n&1&&(v(0,"tbody",24),Re(1,o8,15,7,"tr",25),U_(2,"search"),_()),n&2){let t=be();k(1),X("ngForOf",$_(2,1,t.tableData,t.searchText))}}function l8(n,e){if(n&1){let t=bt();v(0,"td",30),ne("click",function(){qe(t);let r=be().$implicit,s=be(2);return We(s.openDetailPage(r))}),V(1,"i",31),_()}}function c8(n,e){if(n&1){let t=bt();v(0,"td",30),ne("click",function(){qe(t);let r=be().$implicit,s=be(2);return We(s.openDetailPage(r))}),V(1,"i",32),_()}}function u8(n,e){if(n&1){let t=bt();v(0,"td",30),ne("click",function(){qe(t);let r=be().$implicit,s=be(2);return We(s.openDetailPage(r))}),V(1,"i",33),_()}}function d8(n,e){if(n&1){let t=bt();v(0,"tr")(1,"th",26),ne("click",function(){let s=qe(t).$implicit,o=be(2);return We(o.openDetailPage(s))}),E(2),_(),v(3,"td",27),ne("click",function(){let s=qe(t).$implicit,o=be(2);return We(o.openDetailPage(s))}),E(4),_(),v(5,"td",27),ne("click",function(){let s=qe(t).$implicit,o=be(2);return We(o.openDetailPage(s))}),E(6),_(),v(7,"td",27),ne("click",function(){let s=qe(t).$implicit,o=be(2);return We(o.openDetailPage(s))}),E(8),_(),Re(9,l8,2,0,"td",28)(10,c8,2,0,"td",28)(11,u8,2,0,"td",28),v(12,"td")(13,"button",29),V(14,"i",8),_()()()}if(n&2){let t=e.$implicit;k(2),vn("#",t.number,""),k(2),we(t.name),k(2),we(t.email),k(2),we(t.title),k(1),X("ngIf",t.status==="open"),k(1),X("ngIf",t.status==="closed"),k(1),X("ngIf",t.status==="processing")}}function h8(n,e){if(n&1&&(v(0,"tbody",24),Re(1,d8,15,7,"tr",25),U_(2,"search"),_()),n&2){let t=be();k(1),X("ngForOf",$_(2,1,t.allTickets,t.searchText))}}var ZN=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.dataService=r,this.authService=s,this.uid=localStorage.getItem("userID"),this.tableData=[],this.user={},this.title="",this.message="",this.tickets=[],this.allTickets=[],this.allUsers=[],this.ticketIdCount=0,this.searchText=""}ngOnInit(){this.authService.getAllUsers().subscribe(i=>{this.allUsers=i,i.forEach(r=>{r.tickets.forEach(s=>{this.allTickets.push(s)})}),this.user.tickets=this.allTickets}),this.authService.getUserById(this.uid).subscribe(i=>{this.user=i,this.admin=this.user.admin,this.tableData=this.user.tickets})}openDetailPage(i){this.dataService.setCurrentRowData(i),this.router.navigate(["/home/ticketing/"+i.id])}addTicket(){if(console.log("all users",this.allUsers),this.allUsers.forEach(i=>{console.log("singolo user length dei tickets",i.tickets.length)}),console.log("ticket id count",this.ticketIdCount),!this.user||!this.user.tickets){console.error("User or user tickets array not initialized");return}this.user.tickets.push({email:this.user.email,name:this.user.displayName,number:this.ticketIdCount,status:"open",title:this.title,message:this.message,sender:this.user.displayName,timestamp:new Date}),console.log("Updating user with new ticket",this.user),this.authService.updateUser(this.uid,this.user).then(i=>{console.log("User updated")}).catch(i=>{console.error("Error updating user:",i)})}};e.\u0275fac=function(r){return new(r||e)(q(Bt),q(Hi),q(wn))},e.\u0275cmp=he({type:e,selectors:[["app-ticketing"]],standalone:!0,features:[fe],decls:45,vars:5,consts:[[1,"d-flex","p-5","flex-column","justify-content-center","align-items-center"],[1,""],[1,"m-3"],["for","search",1,"form-label"],["id","search","type","text","placeholder","","aria-label","default input example",1,"form-control",3,"ngModel","ngModelChange"],["data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary"],[1,"table","m-4"],["scope","col"],[1,"bi","bi-trash"],["class","table-group-divider",4,"ngIf"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["for","title",1,"form-label"],["id","title","type","text","placeholder","","aria-label","default input example",1,"form-control",3,"ngModel","ngModelChange"],["for","description",1,"form-label"],["id","description","type","text","placeholder","","aria-label","default input example",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary",3,"click"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["scope","row",3,"click"],[3,"click"],["style","color: rebeccapurple",3,"click",4,"ngIf"],[1,"btn","btn-primary"],[2,"color","rebeccapurple",3,"click"],[1,"bi","bi-circle"],[1,"bi","bi-circle-fill"],[1,"bi","bi-circle-half"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),E(4,"Search"),_(),v(5,"input",4),ne("ngModelChange",function(a){return s.searchText=a}),_()(),v(6,"div",2)(7,"button",5),E(8,"New Ticket"),_()()(),v(9,"table",6)(10,"thead")(11,"tr")(12,"th",7),E(13,"id"),_(),v(14,"th",7),E(15,"Name"),_(),v(16,"th",7),E(17,"Email"),_(),v(18,"th",7),E(19,"Title"),_(),v(20,"th",7),E(21,"Status"),_(),v(22,"th",7),V(23,"i",8),_()()(),Re(24,a8,3,4,"tbody",9)(25,h8,3,4,"tbody",9),_()(),v(26,"div",10)(27,"div",11)(28,"div",12)(29,"div",13)(30,"h1",14),E(31,"New Ticket"),_(),V(32,"button",15),_(),v(33,"div",16)(34,"label",17),E(35,"Title"),_(),v(36,"input",18),ne("ngModelChange",function(a){return s.title=a}),_(),v(37,"label",19),E(38,"Description"),_(),v(39,"textarea",20),ne("ngModelChange",function(a){return s.message=a}),_()(),v(40,"div",21)(41,"button",22),E(42,"Close"),_(),v(43,"button",23),ne("click",function(){return s.addTicket()}),E(44,"Submit Ticket"),_()()()()()),r&2&&(k(5),X("ngModel",s.searchText),k(19),X("ngIf",!s.admin),k(1),X("ngIf",s.admin),k(11),X("ngModel",s.title),k(3),X("ngModel",s.message))},dependencies:[ge,Zt,zn,Ja,Kr,Za,po,XN]});let n=e;return n})();var JN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-admin"]],standalone:!0,features:[fe],decls:23,vars:0,consts:[[1,"container","text-center","vh-100"],[1,"mt-5"],[1,"row"],[1,"col-sm-6","mb-3","mb-sm-0"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["routerLink","user-management",1,"btn","btn-primary"],[1,"col-sm-6"],["routerLink","challenge-management",1,"btn","btn-primary"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"h1"),E(2,"Pannello amministrativo"),_(),v(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"h5",6),E(9,"Gestione Utenti"),_(),v(10,"p",7),E(11,"With supporting text below as a natural lead-in to additional content."),_(),v(12,"a",8),E(13,"Gestisci"),_()()()(),v(14,"div",9)(15,"div",4)(16,"div",5)(17,"h5",6),E(18,"Gestione Challenges"),_(),v(19,"p",7),E(20,"With supporting text below as a natural lead-in to additional content."),_(),v(21,"a",10),E(22,"Gestisci"),_()()()()()()())},dependencies:[ge,xi]});let n=e;return n})();function Ud(n){return n+.5|0}var vs=(n,e,t)=>Math.max(Math.min(n,t),e);function jd(n){return vs(Ud(n*2.55),0,255)}function _s(n){return vs(Ud(n*255),0,255)}function yr(n){return vs(Ud(n/2.55)/100,0,1)}function eF(n){return vs(Ud(n*100),0,100)}var Zn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},OD=[..."0123456789ABCDEF"],f8=n=>OD[n&15],p8=n=>OD[(n&240)>>4]+OD[n&15],jm=n=>(n&240)>>4===(n&15),g8=n=>jm(n.r)&&jm(n.g)&&jm(n.b)&&jm(n.a);function m8(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Zn[n[1]]*17,g:255&Zn[n[2]]*17,b:255&Zn[n[3]]*17,a:e===5?Zn[n[4]]*17:255}:(e===7||e===9)&&(t={r:Zn[n[1]]<<4|Zn[n[2]],g:Zn[n[3]]<<4|Zn[n[4]],b:Zn[n[5]]<<4|Zn[n[6]],a:e===9?Zn[n[7]]<<4|Zn[n[8]]:255})),t}var y8=(n,e)=>n<255?e(n):"";function v8(n){var e=g8(n)?f8:p8;return n?"#"+e(n.r)+e(n.g)+e(n.b)+y8(n.a,e):void 0}var _8=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function rF(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function b8(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function w8(n,e,t){let i=rF(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function E8(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function ND(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=E8(t,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function FD(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(_s)}function LD(n,e,t){return FD(rF,n,e,t)}function C8(n,e,t){return FD(w8,n,e,t)}function D8(n,e,t){return FD(b8,n,e,t)}function sF(n){return(n%360+360)%360}function I8(n){let e=_8.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?jd(+e[5]):_s(+e[5]));let r=sF(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=C8(r,s,o):e[1]==="hsv"?i=D8(r,s,o):i=LD(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function S8(n,e){var t=ND(n);t[0]=sF(t[0]+e),t=LD(t),n.r=t[0],n.g=t[1],n.b=t[2]}function T8(n){if(!n)return;let e=ND(n),t=e[0],i=eF(e[1]),r=eF(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${yr(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var tF={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nF={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function x8(){let n={},e=Object.keys(nF),t=Object.keys(tF),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,tF[s]);s=parseInt(nF[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Bm;function A8(n){Bm||(Bm=x8(),Bm.transparent=[0,0,0,0]);let e=Bm[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var M8=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function P8(n){let e=M8.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?jd(o):vs(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?jd(i):vs(i,0,255)),r=255&(e[4]?jd(r):vs(r,0,255)),s=255&(e[6]?jd(s):vs(s,0,255)),{r:i,g:r,b:s,a:t}}}function R8(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${yr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var kD=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Kl=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function k8(n,e,t){let i=Kl(yr(n.r)),r=Kl(yr(n.g)),s=Kl(yr(n.b));return{r:_s(kD(i+t*(Kl(yr(e.r))-i))),g:_s(kD(r+t*(Kl(yr(e.g))-r))),b:_s(kD(s+t*(Kl(yr(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Um(n,e,t){if(n){let i=ND(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=LD(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function oF(n,e){return n&&Object.assign(e||{},n)}function iF(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=_s(n[3]))):(e=oF(n,{r:0,g:0,b:0,a:1}),e.a=_s(e.a)),e}function O8(n){return n.charAt(0)==="r"?P8(n):I8(n)}var Bd=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=iF(e):t==="string"&&(i=m8(e)||A8(e)||O8(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=oF(this._rgb);return e&&(e.a=yr(e.a)),e}set rgb(e){this._rgb=iF(e)}rgbString(){return this._valid?R8(this._rgb):void 0}hexString(){return this._valid?v8(this._rgb):void 0}hslString(){return this._valid?T8(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=k8(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=_s(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Ud(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Um(this._rgb,2,e),this}darken(e){return Um(this._rgb,2,-e),this}saturate(e){return Um(this._rgb,1,e),this}desaturate(e){return Um(this._rgb,1,-e),this}rotate(e){return S8(this._rgb,e),this}};function Gi(){}var yF=(()=>{let n=0;return()=>n++})();function Ae(n){return n===null||typeof n>"u"}function Ke(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function De(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function ot(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Cn(n,e){return ot(n)?n:e}function ue(n,e){return typeof n>"u"?e:n}var vF=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,UD=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function He(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Le(n,e,t,i){let r,s,o;if(Ke(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(De(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function Hd(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function qm(n){if(Ke(n))return n.map(qm);if(De(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=qm(n[t[r]]);return e}return n}function _F(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function N8(n,e,t,i){if(!_F(n))return;let r=e[n],s=t[n];De(r)&&De(s)?Yl(r,s,i):e[n]=qm(s)}function Yl(n,e,t){let i=Ke(e)?e:[e],r=i.length;if(!De(n))return n;t=t||{};let s=t.merger||N8,o;for(let a=0;a<r;++a){if(o=i[a],!De(o))continue;let l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],n,o,t)}return n}function Zl(n,e){return Yl(n,e,{merger:F8})}function F8(n,e,t){if(!_F(n))return;let i=e[n],r=t[n];De(i)&&De(r)?Zl(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=qm(r))}var aF={"":n=>n,x:n=>n.x,y:n=>n.y};function L8(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function V8(n){let e=L8(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function br(n,e){return(aF[e]||(aF[e]=V8(e)))(n)}function Qm(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Jl=n=>typeof n<"u",vr=n=>typeof n=="function",$D=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function bF(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Qe=Math.PI,Ye=2*Qe,j8=Ye+Qe,Wm=Number.POSITIVE_INFINITY,B8=Qe/180,dt=Qe/2,Qo=Qe/4,lF=Qe*2/3,_r=Math.log10,mi=Math.sign;function ec(n,e,t){return Math.abs(n-e)<t}function zD(n){let e=Math.round(n);n=ec(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(_r(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function wF(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function Zo(n){return!isNaN(parseFloat(n))&&isFinite(n)}function EF(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function HD(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Jn(n){return n*(Qe/180)}function Ym(n){return n*(180/Qe)}function qD(n){if(!ot(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function WD(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*Qe&&(s+=Ye),{angle:s,distance:r}}function Gm(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function U8(n,e){return(n-e+j8)%Ye-Qe}function En(n){return(n%Ye+Ye)%Ye}function tc(n,e,t,i){let r=En(n),s=En(e),o=En(t),a=En(s-r),l=En(o-r),c=En(r-s),u=En(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function Mt(n,e,t){return Math.max(e,Math.min(t,n))}function CF(n){return Mt(n,-32768,32767)}function Ki(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Xm(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var qi=(n,e,t,i)=>Xm(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),DF=(n,e,t)=>Xm(n,t,i=>n[i][e]>=t);function IF(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var SF=["push","pop","shift","splice","unshift"];function TF(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),SF.forEach(t=>{let i="_onData"+Qm(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function GD(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(SF.forEach(s=>{delete n[s]}),delete n._chartjs)}function KD(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var QD=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function YD(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,QD.call(window,()=>{i=!1,n.apply(e,t)}))}}function xF(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var Zm=n=>n==="start"?"left":n==="end"?"right":"center",Ht=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,AF=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function XD(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,_parsed:a}=n,l=o.axis,{min:c,max:u,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(r=Mt(Math.min(qi(a,l,c).lo,t?i:qi(e,l,o.getPixelForValue(c)).lo),0,i-1)),h?s=Mt(Math.max(qi(a,o.axis,u,!0).hi+1,t?0:qi(e,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function ZD(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var $m=n=>n===0||n===1,cF=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Ye/t)),uF=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Ye/t)+1,Ql={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*dt)+1,easeOutSine:n=>Math.sin(n*dt),easeInOutSine:n=>-.5*(Math.cos(Qe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>$m(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>$m(n)?n:cF(n,.075,.3),easeOutElastic:n=>$m(n)?n:uF(n,.075,.3),easeInOutElastic(n){return $m(n)?n:n<.5?.5*cF(n*2,.1125,.45):.5+.5*uF(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ql.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ql.easeInBounce(n*2)*.5:Ql.easeOutBounce(n*2-1)*.5+.5};function JD(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function eI(n){return JD(n)?n:new Bd(n)}function VD(n){return JD(n)?n:new Bd(n).saturate(.5).darken(.1).hexString()}var $8=["x","y","borderWidth","radius","tension"],z8=["color","borderColor","backgroundColor"];function H8(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:z8},numbers:{type:"number",properties:$8}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function q8(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var dF=new Map;function W8(n,e){e=e||{};let t=n+JSON.stringify(e),i=dF.get(t);return i||(i=new Intl.NumberFormat(n,e),dF.set(t,i)),i}function nc(n,e,t){return W8(e,t).format(n)}var MF={values(n){return Ke(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let c=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=G8(n,t)}let o=_r(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),nc(n,i,l)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(_r(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?MF.numeric.call(this,n,e,t):""}};function G8(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var qd={formatters:MF};function K8(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var ws=Object.create(null),Jm=Object.create(null);function $d(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function jD(n,e,t){return typeof e=="string"?Yl($d(n,e),t):Yl($d(n,""),e)}var BD=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>VD(r.backgroundColor),this.hoverBorderColor=(i,r)=>VD(r.borderColor),this.hoverColor=(i,r)=>VD(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return jD(this,e,t)}get(e){return $d(this,e)}describe(e,t){return jD(Jm,e,t)}override(e,t){return jD(ws,e,t)}route(e,t,i,r){let s=$d(this,e),o=$d(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let l=this[a],c=o[r];return De(l)?Object.assign({},c,l):ue(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(t=>t(this))}},at=new BD({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[H8,q8,K8]);function Q8(n){return!n||Ae(n.size)||Ae(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function zd(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function PF(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=t[l],d!=null&&!Ke(d))o=zd(n,r,s,o,d);else if(Ke(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!Ke(h)&&(o=zd(n,r,s,o,h));n.restore();let f=s.length/2;if(f>t.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function Es(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function tI(n,e){e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function ey(n,e,t,i){nI(n,e,t,i,null)}function nI(n,e,t,i,r){let s,o,a,l,c,u,d,h,f=e.pointStyle,p=e.rotation,g=e.radius,m=(p||0)*B8;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),f){default:r?n.ellipse(t,i,r/2,g,0,0,Ye):n.arc(t,i,g,0,Ye),n.closePath();break;case"triangle":u=r?r/2:g,n.moveTo(t+Math.sin(m)*u,i-Math.cos(m)*g),m+=lF,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*g),m+=lF,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*g),n.closePath();break;case"rectRounded":c=g*.516,l=g-c,o=Math.cos(m+Qo)*l,d=Math.cos(m+Qo)*(r?r/2-c:l),a=Math.sin(m+Qo)*l,h=Math.sin(m+Qo)*(r?r/2-c:l),n.arc(t-d,i-a,c,m-Qe,m-dt),n.arc(t+h,i-o,c,m-dt,m),n.arc(t+d,i+a,c,m,m+dt),n.arc(t-h,i+o,c,m+dt,m+Qe),n.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,n.rect(t-u,i-l,2*u,2*l);break}m+=Qo;case"rectRot":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),n.moveTo(t-d,i-a),n.lineTo(t+h,i-o),n.lineTo(t+d,i+a),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":m+=Qo;case"cross":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),m+=Qo,d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Wi(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function Wd(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Gd(n){n.restore()}function RF(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function kF(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function Y8(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ae(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function X8(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=t-s.actualBoundingBoxAscent,c=t+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function Z8(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Cs(n,e,t,i,r,s={}){let o=Ke(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(n.save(),n.font=r.string,Y8(n,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Z8(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Ae(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(c,t,i,s.maxWidth)),n.fillText(c,t,i,s.maxWidth),X8(n,t,i,c,s),i+=Number(r.lineHeight);n.restore()}function ic(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*Qe,Qe,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Qe,dt,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,dt,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-dt,!0),n.lineTo(t+o.topLeft,i)}var J8=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,eG=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function tG(n,e){let t=(""+n).match(J8);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var nG=n=>+n||0;function ty(n,e){let t={},i=De(e),r=i?Object.keys(e):e,s=De(n)?i?o=>ue(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=nG(s(o));return t}function iI(n){return ty(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ds(n){return ty(n,["topLeft","topRight","bottomLeft","bottomRight"])}function qt(n){let e=iI(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function St(n,e){n=n||{},e=e||at.font;let t=ue(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=ue(n.style,e.style);i&&!(""+i).match(eG)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:ue(n.family,e.family),lineHeight:tG(ue(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:ue(n.weight,e.weight),string:""};return r.string=Q8(r),r}function rc(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&Ke(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function OF(n,e,t){let{min:i,max:r}=n,s=UD(e,(r-i)/2),o=(a,l)=>t&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function wr(n,e){return Object.assign(Object.create(n),e)}function ny(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=LF("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>ny([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete n[0][l],!0},get(a,l){return NF(a,l,()=>uG(l,e,n,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,l){return fF(a).includes(l)},ownKeys(a){return fF(a)},set(a,l,c){let u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function Xo(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:rI(n,i),setContext:s=>Xo(n,s,t,i),override:s=>Xo(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return NF(s,o,()=>rG(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function rI(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:vr(t)?t:()=>t,isIndexable:vr(i)?i:()=>i}}var iG=(n,e)=>n?n+Qm(e):e,sI=(n,e)=>De(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function NF(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];let i=t();return n[e]=i,i}function rG(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return vr(a)&&o.isScriptable(e)&&(a=sG(e,a,n,t)),Ke(a)&&a.length&&(a=oG(e,a,n,o.isIndexable)),sI(e,a)&&(a=Xo(a,r,s&&s[e],o)),a}function sG(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let l=e(s,o||i);return a.delete(n),sI(n,l)&&(l=oI(r._scopes,r,n,l)),l}function oG(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(De(e[0])){let l=e,c=r._scopes.filter(u=>u!==l);e=[];for(let u of l){let d=oI(c,r,n,u);e.push(Xo(d,s,o&&o[n],a))}}return e}function FF(n,e,t){return vr(n)?n(e,t):n}var aG=(n,e)=>n===!0?e:typeof n=="string"?br(e,n):void 0;function lG(n,e,t,i,r){for(let s of e){let o=aG(t,s);if(o){n.add(o);let a=FF(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function oI(n,e,t,i){let r=e._rootScopes,s=FF(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let l=hF(a,o,t,s||t,i);return l===null||typeof s<"u"&&s!==t&&(l=hF(a,o,s,l,i),l===null)?!1:ny(Array.from(a),[""],r,s,()=>cG(e,t,i))}function hF(n,e,t,i,r){for(;t;)t=lG(n,e,t,i,r);return t}function cG(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return Ke(r)&&De(t)?t:r||{}}function uG(n,e,t,i){let r;for(let s of e)if(r=LF(iG(s,n),t),typeof r<"u")return sI(n,r)?oI(t,i,n,r):r}function LF(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function fF(n){let e=n._keys;return e||(e=n._keys=dG(n._scopes)),e}function dG(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function aI(n,e,t,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,l,c,u;for(a=0,l=i;a<l;++a)c=a+t,u=e[c],o[a]={r:r.parse(br(u,s),c)};return o}var hG=Number.EPSILON||1e-14,Xl=(n,e)=>e<n.length&&!n[e].skip&&n[e],VF=n=>n==="x"?"y":"x";function fG(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=Gm(s,r),l=Gm(o,s),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=i*c,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function pG(n,e,t){let i=n.length,r,s,o,a,l,c=Xl(n,0);for(let u=0;u<i-1;++u)if(l=c,c=Xl(n,u+1),!(!l||!c)){if(ec(e[u],0,hG)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function gG(n,e,t="x"){let i=VF(t),r=n.length,s,o,a,l=Xl(n,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Xl(n,c+1),!a)continue;let u=a[t],d=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=d-s*e[c]),l&&(s=(l[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=d+s*e[c])}}function mG(n,e="x"){let t=VF(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,l,c=Xl(n,0);for(o=0;o<i;++o)if(a=l,l=c,c=Xl(n,o+1),!!l){if(c){let u=c[e]-l[e];r[o]=u!==0?(c[t]-l[t])/u:0}s[o]=a?c?mi(r[o-1])!==mi(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}pG(n,r,s),gG(n,s,e)}function zm(n,e,t){return Math.max(Math.min(n,t),e)}function yG(n,e){let t,i,r,s,o,a=Wi(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&Wi(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=zm(r.cp1x,e.left,e.right),r.cp1y=zm(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=zm(r.cp2x,e.left,e.right),r.cp2y=zm(r.cp2y,e.top,e.bottom)))}function jF(n,e,t,i,r){let s,o,a,l;if(e.spanGaps&&(n=n.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")mG(n,r);else{let c=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],l=fG(c,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&yG(n,t)}function lI(){return typeof window<"u"&&typeof document<"u"}function iy(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Km(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var ry=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function vG(n,e){return ry(n).getPropertyValue(e)}var _G=["top","right","bottom","left"];function Yo(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=_G[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var bG=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function wG(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,l;if(bG(r,s,n.target))a=r,l=s;else{let c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Is(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=ry(t),s=r.boxSizing==="border-box",o=Yo(r,"padding"),a=Yo(r,"border","width"),{x:l,y:c,box:u}=wG(n,t),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-d)/f*t.width/i),y:Math.round((c-h)/p*t.height/i)}}function EG(n,e,t){let i,r;if(e===void 0||t===void 0){let s=iy(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=ry(s),l=Yo(a,"border","width"),c=Yo(a,"padding");e=o.width-c.width-l.width,t=o.height-c.height-l.height,i=Km(a.maxWidth,s,"clientWidth"),r=Km(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||Wm,maxHeight:r||Wm}}var Hm=n=>Math.round(n*10)/10;function BF(n,e,t,i){let r=ry(n),s=Yo(r,"margin"),o=Km(r.maxWidth,n,"clientWidth")||Wm,a=Km(r.maxHeight,n,"clientHeight")||Wm,l=EG(n,e,t),{width:c,height:u}=l;if(r.boxSizing==="content-box"){let h=Yo(r,"border","width"),f=Yo(r,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Hm(Math.min(c,o,l.maxWidth)),u=Hm(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Hm(c/2)),(e!==void 0||t!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Hm(Math.floor(u*i))),{width:c,height:u}}function cI(n,e,t){let i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var UF=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function uI(n,e){let t=vG(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function bs(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function $F(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function zF(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=bs(n,r,t),a=bs(r,s,t),l=bs(s,e,t),c=bs(o,a,t),u=bs(a,l,t);return bs(c,u,t)}var CG=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},DG=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Jo(n,e,t){return n?CG(e,t):DG()}function dI(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function hI(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function HF(n){return n==="angle"?{between:tc,compare:U8,normalize:En}:{between:Ki,compare:(e,t)=>e-t,normalize:e=>e}}function pF({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function IG(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=HF(i),l=e.length,{start:c,end:u,loop:d}=n,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&o(a(e[c%l][i]),r,s);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:n.style}}function fI(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:l,normalize:c}=HF(i),{start:u,end:d,loop:h,style:f}=IG(n,e,t),p=[],g=!1,m=null,y,b,w,C=()=>l(r,w,y)&&a(r,w)!==0,D=()=>a(s,y)===0||l(s,w,y),I=()=>g||C(),A=()=>!g||D();for(let M=u,$=u;M<=d;++M)b=e[M%o],!b.skip&&(y=c(b[i]),y!==w&&(g=l(y,r,s),m===null&&I()&&(m=a(y,r)===0?M:$),m!==null&&A()&&(p.push(pF({start:m,end:M,loop:h,count:o,style:f})),m=null),$=M,w=y));return m!==null&&p.push(pF({start:m,end:d,loop:h,count:o,style:f})),p}function pI(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=fI(i[r],n.points,e);s.length&&t.push(...s)}return t}function SG(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function TG(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],l;for(l=e+1;l<=t;++l){let c=n[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function qF(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=SG(t,r,s,i);if(i===!0)return gF(n,[{start:o,end:a,loop:s}],t,e);let l=a<o?a+r:a,c=!!n._fullLoop&&o===0&&a===r-1;return gF(n,TG(t,o,l,c),t,e)}function gF(n,e,t,i){return!i||!i.setContext||!t?e:xG(n,e,t,i)}function xG(n,e,t,i){let r=n._chart.getContext(),s=mF(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,l=t.length,c=[],u=s,d=e[0].start,h=d;function f(p,g,m,y){let b=a?-1:1;if(p!==g){for(p+=l;t[p%l].skip;)p-=b;for(;t[g%l].skip;)g+=b;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:y}),u=y,d=g%l)}}for(let p of e){d=a?d:p.start;let g=t[d%l],m;for(h=d+1;h<=p.end;h++){let y=t[h%l];m=mF(i.setContext(wr(r,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),AG(m,u)&&f(d,h-1,p.loop,u),g=y,u=m}d<h-1&&f(d,h-1,p.loop,u)}return c}function mF(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function AG(n,e){if(!e)return!1;let t=[],i=function(r,s){return JD(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}var DI=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=QD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Er=new DI,WF="transparent",MG={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=eI(n||WF),r=i.valid&&eI(e||WF);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},II=class{constructor(e,t,i,r){let s=t[i];r=rc([e.to,r,s,e.from]);let o=rc([e.from,s,r]);this._active=!0,this._fn=e.fn||MG[e.type||typeof o],this._easing=Ql[e.easing]||Ql.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=rc([e.to,t,r,e.from]),this._from=rc([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,l;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}l=t/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},py=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!De(e))return;let t=Object.keys(at.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!De(s))return;let o={};for(let a of t)o[a]=s[a];(Ke(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=RG(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&PG(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,t));continue}let u=t[c],d=s[c],h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}s[c]=d=new II(h,e,c,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return Er.add(this._chart,i),!0}};function PG(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function RG(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function GF(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function kG(n,e,t){if(t===!1)return!1;let i=GF(n,t),r=GF(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function OG(n){let e,t,i,r;return De(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function GL(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function KF(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,l,c;if(e!==null){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===t){if(i.all)continue;break}c=n.values[l],ot(c)&&(s||e===0||mi(e)===mi(c))&&(e+=c)}return e}}function NG(n){let e=Object.keys(n),t=new Array(e.length),i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],t[i]={x:s,y:n[s]};return t}function QF(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function FG(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function LG(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function VG(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function YF(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function XF(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=FG(s,o,i),d=e.length,h;for(let f=0;f<d;++f){let p=e[f],{[l]:g,[c]:m}=p,y=p._stacks||(p._stacks={});h=y[c]=VG(r,u,g),h[a]=m,h._top=YF(h,o,!0,i.type),h._bottom=YF(h,o,!1,i.type);let b=h._visualValues||(h._visualValues={});b[a]=m}}function gI(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function jG(n,e){return wr(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function BG(n,e,t){return wr(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Kd(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var mI=n=>n==="reset"||n==="none",ZF=(n,e)=>e?n:Object.assign({},n),UG=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:GL(t,!0),values:null},Ts=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=QF(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Kd(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,o=i.xAxisID=ue(r.xAxisID,gI(t,"x")),a=i.yAxisID=ue(r.yAxisID,gI(t,"y")),l=i.rAxisID=ue(r.rAxisID,gI(t,"r")),c=i.indexAxis,u=i.iAxisID=s(c,o,a,l),d=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&GD(this._data,this),t._stacked&&Kd(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(De(i))this._data=NG(i);else if(r!==i){if(r){GD(r,this);let s=this._cachedMeta;Kd(s),s._parsed=[]}i&&Object.isExtensible(i)&&TF(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=QF(i.vScale,i),i.stack!==r.stack&&(s=!0,Kd(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&XF(this,i._parsed)}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis,c=t===0&&i===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{Ke(s[t])?f=this.parseArrayData(r,s,t,i):De(s[t])?f=this.parseObjectData(r,s,t,i):f=this.parsePrimitiveData(r,s,t,i);let p=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<i;++d)r._parsed[d+t]=h=f[d],c&&(p()&&(c=!1),u=h);r._sorted=c}a&&XF(this,f)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,l=o.axis,c=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),f,p,g;for(f=0,p=s;f<p;++f)g=f+r,h[f]={[l]:d||o.parse(u[g],g),[c]:a.parse(i[g],g)};return h}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,l=new Array(s),c,u,d,h;for(c=0,u=s;c<u;++c)d=c+r,h=i[d],l[c]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(s),d,h,f,p;for(d=0,h=s;d<h;++d)f=d+r,p=i[f],u[d]={x:o.parse(br(p,l),f),y:a.parse(br(p,c),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],l={keys:GL(s,!0),values:i._stacks[t.axis]._visualValues};return KF(l,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=KF(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,l=this._getOtherScale(t),c=UG(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=LG(l),f,p;function g(){p=s[f];let m=p[l.axis];return!ot(p[t.axis])||d>m||h<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(u,t,p,c),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,t,p,c);break}}return u}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],ot(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=OG(ue(this.options.clip,kG(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(t,o,l,c),d=l;d<l+c;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=BG(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=jG(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,l=o[a],c=this.enableOptionSharing&&Jl(r);if(l)return ZF(l,c);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(at.elements[t]),g=()=>this.getContext(r,s,i),m=u.resolveNamedOptions(f,p,g,h);return m.$shared&&(m.$shared=c,o[a]=Object.freeze(ZF(m,c))),m}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(t,r,i))}let u=new py(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||mI(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){mI(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!mI(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,l,c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(o),l=t;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&Kd(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function $G(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=KD(i.sort((r,s)=>r-s))}return n._cache.$bar}function zG(n){let e=n.iScale,t=$G(e,n.type),i=e._length,r,s,o,a,l=()=>{o===32767||o===-32768||(Jl(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function HG(n,e,t,i){let r=t.barThickness,s,o;return Ae(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function qG(n,e,t,i){let r=e.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,l=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:t.barPercentage,start:c}}function WG(n,e,t,i){let r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[t.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function KL(n,e,t,i){return Ke(n)?WG(n,e,t,i):e[t.axis]=t.parse(n,i),e}function JF(n,e,t,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,l=[],c,u,d,h;for(c=t,u=t+i;c<u;++c)h=e[c],d={},d[r.axis]=a||r.parse(o[c],c),l.push(KL(h,d,s,c));return l}function yI(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function GG(n,e,t){return n!==0?mi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function KG(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function QG(n,e,t,i){let r=e.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:u}=KG(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=c:(t._bottom||0)===i?r=u:(s[eL(u,o,a,l)]=!0,r=c)),s[eL(r,o,a,l)]=!0,n.borderSkipped=s}function eL(n,e,t,i){return i?(n=YG(n,e,t),n=tL(n,t,e)):n=tL(n,e,t),n}function YG(n,e,t){return n===e?t:n===t?e:n}function tL(n,e,t){return n==="start"?e:n==="end"?t:n}function XG(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var ZG=(()=>{class n extends Ts{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,s){return JF(t,i,r,s)}parseArrayData(t,i,r,s){return JF(t,i,r,s)}parseObjectData(t,i,r,s){let{iScale:o,vScale:a}=t,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=o.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[],f,p,g,m;for(f=r,p=r+s;f<p;++f)m=i[f],g={},g[o.axis]=o.parse(br(m,u),f),h.push(KL(br(m,d),g,a,f));return h}updateRangeFromParsed(t,i,r,s){super.updateRangeFromParsed(t,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(t),a=o._custom,l=yI(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,s);for(let p=i;p<i+r;p++){let g=this.getParsed(p),m=o||Ae(g[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),b=(g._stacks||{})[l.axis],w={horizontal:u,base:m.base,enableBorderRadius:!b||yI(g._custom)||a===b._top||a===b._bottom,x:u?m.head:y.center,y:u?y.center:m.head,height:u?y.size:Math.abs(m.size),width:u?Math.abs(m.size):y.size};f&&(w.options=h||this.resolveDataElementOptions(p,t[p].active?"active":s));let C=w.options||t[p].options;QG(w,C,b,a),XG(w,C,d.ratio),this.updateElement(t[p],p,w,s)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=r.options.stacked,a=[],l=c=>{let u=c.controller.getParsed(i),d=u&&u[c.vScale.axis];if(Ae(d)||isNaN(d))return!0};for(let c of s)if(!(i!==void 0&&l(c))&&((o===!1||a.indexOf(c.stack)===-1||o===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,r){let s=this._getStacks(t,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let l=t.barThickness;return{min:l||zG(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:l?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(t),u=c._custom,d=yI(u),h=c[i.axis],f=0,p=r?this.applyStack(i,c,r):h,g,m;p!==h&&(f=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&mi(h)!==mi(u.barEnd)&&(f=0),f+=h);let y=!Ae(o)&&!d?o:f,b=i.getPixelForValue(y);if(this.chart.getDataVisibility(t)?g=i.getPixelForValue(f+p):g=b,m=g-b,Math.abs(m)<a){m=GG(m,i,l)*a,h===l&&(b-=m/2);let w=i.getPixelForDecimal(0),C=i.getPixelForDecimal(1),D=Math.min(w,C),I=Math.max(w,C);b=Math.max(Math.min(b,I),D),g=b+m,r&&!d&&(c._stacks[i.axis]._visualValues[s]=i.getValueForPixel(g)-i.getValueForPixel(b))}if(b===i.getPixelForValue(l)){let w=mi(m)*i.getLineWidthForValue(l)/2;b+=w,m-=w}return{size:m,base:b,head:g,center:g+m/2}}_calculateBarIndexPixels(t,i){let r=i.scale,s=this.options,o=s.skipNull,a=ue(s.maxBarThickness,1/0),l,c;if(i.grouped){let u=o?this._getStackCount(t):i.stackCount,d=s.barThickness==="flex"?qG(t,i,s,u):HG(t,i,s,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);l=d.start+d.chunk*h+d.chunk/2,c=Math.min(a,d.chunk*d.ratio)}else l=r.getPixelForValue(this.getParsed(t)[r.axis],t),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&r[o].draw(this._ctx)}}return n})(),JG=(()=>{class n extends Ts{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,r,s){let o=super.parsePrimitiveData(t,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(t,i,r,s){let o=super.parseArrayData(t,i,r,s);for(let a=0;a<o.length;a++){let l=i[r+a];o[a]._custom=ue(l[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(t,i,r,s){let o=super.parseObjectData(t,i,r,s);for(let a=0;a<o.length;a++){let l=i[r+a];o[a]._custom=ue(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let r=t.length-1;r>=0;--r)i=Math.max(i,t[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),u=a._custom;return{label:r[t]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,s),d=a.axis,h=l.axis;for(let f=i;f<i+r;f++){let p=t[f],g=!o&&this.getParsed(f),m={},y=m[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[d]),b=m[h]=o?l.getBasePixel():l.getPixelForValue(g[h]);m.skip=isNaN(y)||isNaN(b),u&&(m.options=c||this.resolveDataElementOptions(f,p.active?"active":s),o&&(m.options.radius=0)),this.updateElement(p,f,m,s)}}resolveDataElementOptions(t,i){let r=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=ue(r&&r._custom,o),s}}return n})();function e7(n,e,t){let i=1,r=1,s=0,o=0;if(e<Ye){let a=n,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(w,C,D)=>tc(w,a,l,!0)?1:Math.max(C,C*t,D,D*t),p=(w,C,D)=>tc(w,a,l,!0)?-1:Math.min(C,C*t,D,D*t),g=f(0,c,d),m=f(dt,u,h),y=p(Qe,c,d),b=p(Qe+dt,u,h);i=(g-y)/2,r=(m-b)/2,s=-(g+y)/2,o=-(m+b)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var qI=(()=>{class n extends Ts{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let c=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=c=>+r[c];if(De(r[t])){let{key:c="value"}=this._parsing;o=u=>+br(r[u],c)}let a,l;for(a=t,l=t+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return Jn(this.options.rotation-90)}_getCircumference(){return Jn(this.options.circumference)}_getRotationExtents(){let t=Ye,i=-Ye;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+a)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(vF(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=e7(h,d,c),y=(r.width-a)/f,b=(r.height-a)/p,w=Math.max(Math.min(y,b)/2,0),C=UD(this.options.radius,w),D=Math.max(C*c,0),I=(C-D)/this._getVisibleDatasetWeightTotal();this.offsetX=g*C,this.offsetY=m*C,s.total=this.calculateTotal(),this.outerRadius=C-I*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-I*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/Ye)}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=o&&u.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(i,s),b=this._getRotation(),w;for(w=0;w<i;++w)b+=this._circumference(w,o);for(w=i;w<i+r;++w){let C=this._circumference(w,o),D=t[w],I={x:d+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+C,circumference:C,outerRadius:g,innerRadius:p};y&&(I.options=m||this.resolveDataElementOptions(w,D.active?"active":s)),b+=C,this.updateElement(D,w,I,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,r=0,s;for(s=0;s<i.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?Ye*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=nc(i._parsed[t],r.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0,r=this.chart,s,o,a,l,c;if(!t){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),t=a.data,l=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let r=0,s=t.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(t){return Math.max(ue(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),t7=(()=>{class n extends Ts{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:l,count:c}=XD(i,s,a);this._drawStart=l,this._drawCount=c,ZD(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(s,l,c,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,s),f=a.axis,p=l.axis,{spanGaps:g,segment:m}=this.options,y=Zo(g)?g:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||s==="none",w=i+r,C=t.length,D=i>0&&this.getParsed(i-1);for(let I=0;I<C;++I){let A=t[I],M=b?A:{};if(I<i||I>=w){M.skip=!0;continue}let $=this.getParsed(I),te=Ae($[p]),ae=M[f]=a.getPixelForValue($[f],I),de=M[p]=o||te?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,$,c):$[p],I);M.skip=isNaN(ae)||isNaN(de)||te,M.stop=I>0&&Math.abs($[f]-D[f])>y,m&&(M.parsed=$,M.raw=u.data[I]),h&&(M.options=d||this.resolveDataElementOptions(I,A.active?"active":s)),b||this.updateElement(A,I,M,s),D=$}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),QL=(()=>{class n extends Ts{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let c=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=nc(i._parsed[t].r,r.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,r,s){return aI.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,r=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),l=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*Qe,p=f,g,m=360/this.countVisibleElements();for(g=0;g<i;++g)p+=this._computeAngle(g,s,m);for(g=i;g<i+r;g++){let y=t[g],b=p,w=p+this._computeAngle(g,s,m),C=a.getDataVisibility(g)?u.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=w,o&&(c.animateScale&&(C=0),c.animateRotate&&(b=w=f));let D={x:d,y:h,innerRadius:0,outerRadius:C,startAngle:b,endAngle:w,options:this.resolveDataElementOptions(g,y.active?"active":s)};this.updateElement(y,g,D,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,r){return this.chart.getDataVisibility(t)?Jn(this.resolveDataElementOptions(t,i).angle||r):0}}return n})(),n7=(()=>{class n extends qI{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),i7=(()=>{class n extends Ts{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let i=this._cachedMeta.vScale,r=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(t,i,r,s){return aI.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,l,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let l=i;l<i+r;l++){let c=t[l],u=this.resolveDataElementOptions(l,c.active?"active":s),d=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:d.x,f=a?o.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(c,l,p,s)}}}return n})(),r7=(()=>{class n extends Ts{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:r[t]||"",value:"("+l+", "+c+")"}}update(t){let i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled,{start:o,count:a}=XD(i,r,s);if(this._drawStart=o,this._drawCount=a,ZD(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:u},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(d),f=this.includeOptions(s,h),p=a.axis,g=l.axis,{spanGaps:m,segment:y}=this.options,b=Zo(m)?m:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||o||s==="none",C=i>0&&this.getParsed(i-1);for(let D=i;D<i+r;++D){let I=t[D],A=this.getParsed(D),M=w?I:{},$=Ae(A[g]),te=M[p]=a.getPixelForValue(A[p],D),ae=M[g]=o||$?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,A,c):A[g],D);M.skip=isNaN(te)||isNaN(ae)||$,M.stop=D>0&&Math.abs(A[p]-C[p])>b,y&&(M.parsed=A,M.raw=u.data[D]),f&&(M.options=h||this.resolveDataElementOptions(D,I.active?"active":s)),w||this.updateElement(I,D,M,s),C=A}this.updateSharedOptions(h,s,d)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let r=t.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return n})(),s7=Object.freeze({__proto__:null,BarController:ZG,BubbleController:JG,DoughnutController:qI,LineController:t7,PieController:n7,PolarAreaController:QL,RadarController:i7,ScatterController:r7});function ea(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var SI=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ea()}parse(){return ea()}format(){return ea()}add(){return ea()}diff(){return ea()}startOf(){return ea()}endOf(){return ea()}},o7={_date:SI};function a7(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let l=a._reversePixels?DF:qi;if(i){if(r._sharedOptions){let c=s[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){let d=l(s,e,t-u),h=l(s,e,t+u);return{lo:d.lo,hi:h.hi}}}}else return l(s,e,t)}return{lo:0,hi:s.length-1}}function rh(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,l=s.length;a<l;++a){let{index:c,data:u}=s[a],{lo:d,hi:h}=a7(s[a],e,o,r);for(let f=d;f<=h;++f){let p=u[f];p.skip||i(p,c,f)}}}function l7(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function vI(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||rh(n,t,e,function(a,l,c){!r&&!Wi(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function c7(n,e,t,i){let r=[];function s(o,a,l){let{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=WD(o,{x:e.x,y:e.y});tc(d,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return rh(n,t,e,s),r}function u7(n,e,t,i,r,s){let o=[],a=l7(t),l=Number.POSITIVE_INFINITY;function c(u,d,h){let f=u.inRange(e.x,e.y,r);if(i&&!f)return;let p=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(p))&&!f)return;let m=a(e,p);m<l?(o=[{element:u,datasetIndex:d,index:h}],l=m):m===l&&o.push({element:u,datasetIndex:d,index:h})}return rh(n,t,e,c),o}function _I(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?c7(n,e,t,r):u7(n,e,t,i,r,s)}function nL(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return rh(n,t,e,(l,c,u)=>{l[o](e[t],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var d7={evaluateInteractionItems:rh,modes:{index(n,e,t,i){let r=Is(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?vI(n,r,s,i,o):_I(n,r,s,!1,i,o),l=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(n,e,t,i){let r=Is(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?vI(n,r,s,i,o):_I(n,r,s,!1,i,o);if(a.length>0){let l=a[0].datasetIndex,c=n.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(n,e,t,i){let r=Is(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return vI(n,r,s,i,o)},nearest(n,e,t,i){let r=Is(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return _I(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=Is(e,n);return nL(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=Is(e,n);return nL(n,r,"y",t.intersect,i)}}},YL=["left","top","right","bottom"];function Qd(n,e){return n.filter(t=>t.pos===e)}function iL(n,e){return n.filter(t=>YL.indexOf(t.pos)===-1&&t.box.axis===e)}function Yd(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function h7(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function f7(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!YL.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function p7(n,e){let t=f7(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:l}=a.box,c=t[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return t}function g7(n){let e=h7(n),t=Yd(e.filter(c=>c.box.fullSize),!0),i=Yd(Qd(e,"left"),!0),r=Yd(Qd(e,"right")),s=Yd(Qd(e,"top"),!0),o=Yd(Qd(e,"bottom")),a=iL(e,"x"),l=iL(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Qd(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function rL(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function XL(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function m7(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!De(r)){t.size&&(n[r]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&XL(o,s.getPadding());let a=Math.max(0,e.outerWidth-rL(o,n,"left","right")),l=Math.max(0,e.outerHeight-rL(o,n,"top","bottom")),c=a!==n.w,u=l!==n.h;return n.w=a,n.h=l,t.horizontal?{same:c,other:u}:{same:u,other:c}}function y7(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function v7(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Jd(n,e,t,i){let r=[],s,o,a,l,c,u;for(s=0,o=n.length,c=0;s<o;++s){a=n[s],l=a.box,l.update(a.width||e.w,a.height||e.h,v7(a.horizontal,e));let{same:d,other:h}=m7(e,t,a,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&Jd(r,e,t,i)||u}function sy(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function sL(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=e.w*u,h=c.size||l.height;Jl(c.start)&&(o=c.start),l.fullSize?sy(l,r.left,o,t.outerWidth-r.right-r.left,h):sy(l,e.left+c.placed,o,d,h),c.start=o,c.placed+=d,o=l.bottom}else{let d=e.h*u,h=c.size||l.width;Jl(c.start)&&(s=c.start),l.fullSize?sy(l,s,r.top,h,t.outerHeight-r.bottom-r.top):sy(l,s,e.top+c.placed,h,d),c.start=s,c.placed+=d,s=l.right}}e.x=s,e.y=o}var rn={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=qt(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=g7(n.boxes),l=a.vertical,c=a.horizontal;Le(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let u=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);XL(h,qt(i));let f=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),p=p7(l.concat(c),d);Jd(a.fullSize,f,d,p),Jd(l,f,d,p),Jd(c,f,d,p)&&Jd(l,f,d,p),y7(f),sL(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,sL(a.rightAndBottom,f,d,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Le(a.chartArea,g=>{let m=g.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},gy=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},TI=class extends gy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},hy="$chartjs",_7={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},oL=n=>n===null||n==="";function b7(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[hy]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",oL(r)){let s=uI(n,"width");s!==void 0&&(n.width=s)}if(oL(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=uI(n,"height");s!==void 0&&(n.height=s)}return n}var ZL=UF?{passive:!0}:!1;function w7(n,e,t){n.addEventListener(e,t,ZL)}function E7(n,e,t){n.canvas.removeEventListener(e,t,ZL)}function C7(n,e){let t=_7[n.type]||n.type,{x:i,y:r}=Is(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function my(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function D7(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||my(a.addedNodes,i),o=o&&!my(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function I7(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||my(a.removedNodes,i),o=o&&!my(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var th=new Map,aL=0;function JL(){let n=window.devicePixelRatio;n!==aL&&(aL=n,th.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function S7(n,e){th.size||window.addEventListener("resize",JL),th.set(n,e)}function T7(n){th.delete(n),th.size||window.removeEventListener("resize",JL)}function x7(n,e,t){let i=n.canvas,r=i&&iy(i);if(!r)return;let s=YD((a,l)=>{let c=r.clientWidth;t(a,l),c<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),S7(n,s),o}function bI(n,e,t){t&&t.disconnect(),e==="resize"&&T7(n)}function A7(n,e,t){let i=n.canvas,r=YD(s=>{n.ctx!==null&&t(C7(s,n))},n);return w7(i,e,r),r}var xI=class extends gy{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(b7(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[hy])return!1;let i=t[hy].initial;["height","width"].forEach(s=>{let o=i[s];Ae(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[hy],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:D7,detach:I7,resize:x7}[t]||A7;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:bI,detach:bI,resize:bI}[t]||E7)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return BF(e,t,i,r)}isAttached(e){let t=iy(e);return!!(t&&t.isConnected)}};function M7(n){return!lI()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?TI:xI}var yi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Zo(this.x)&&Zo(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function P7(n,e){let t=n.options.ticks,i=R7(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?O7(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return N7(e,c,s,o/r),c;let u=k7(s,e,r);if(o>0){let d,h,f=o>1?Math.round((l-a)/(o-1)):null;for(oy(e,c,u,Ae(f)?0:a-f,a),d=0,h=o-1;d<h;d++)oy(e,c,u,s[d],s[d+1]);return oy(e,c,u,l,Ae(f)?e.length:l+f),c}return oy(e,c,u),c}function R7(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function k7(n,e,t){let i=F7(n),r=e.length/t;if(!i)return Math.max(r,1);let s=wF(i);for(let o=0,a=s.length-1;o<a;o++){let l=s[o];if(l>r)return l}return Math.max(r,1)}function O7(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function N7(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function oy(n,e,t,i,r){let s=ue(i,0),o=Math.min(ue(r,n.length),n.length),a=0,l,c,u;for(t=Math.ceil(t),r&&(l=r-i,t=l/Math.floor(l/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(n[c]),a++,u=Math.round(s+a*t))}function F7(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var L7=n=>n==="left"?"right":n==="right"?"left":n,lL=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,cL=(n,e)=>Math.min(e||n,n);function uL(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function V7(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,l=n.getPixelForTick(r),c;if(!(t&&(i===1?c=Math.max(l-s,o-l):e===0?c=(n.getPixelForTick(1)-l)/2:c=(l-n.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function j7(n,e){Le(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function Xd(n){return n.drawTicks?n.tickLength:0}function dL(n,e){if(!n.display)return 0;let t=St(n.font,e),i=qt(n.padding);return(Ke(n.text)?n.text.length:1)*t.lineHeight+i.height}function B7(n,e){return wr(n,{scale:e,type:"scale"})}function U7(n,e,t){return wr(n,{tick:t,index:e,type:"tick"})}function $7(n,e,t){let i=Zm(n);return(t&&e!=="right"||!t&&e==="right")&&(i=L7(i)),i}function z7(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:l}=n,{chartArea:c,scales:u}=l,d=0,h,f,p,g=o-r,m=a-s;if(n.isHorizontal()){if(f=Ht(i,s,a),De(t)){let y=Object.keys(t)[0],b=t[y];p=u[y].getPixelForValue(b)+g-e}else t==="center"?p=(c.bottom+c.top)/2+g-e:p=lL(n,t,e);h=a-s}else{if(De(t)){let y=Object.keys(t)[0],b=t[y];f=u[y].getPixelForValue(b)-m+e}else t==="center"?f=(c.left+c.right)/2-m+e:f=lL(n,t,e);p=Ht(i,o,r),d=t==="left"?-dt:dt}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var na=class n extends yi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Cn(e,Number.POSITIVE_INFINITY),t=Cn(t,Number.NEGATIVE_INFINITY),i=Cn(i,Number.POSITIVE_INFINITY),r=Cn(r,Number.NEGATIVE_INFINITY),{min:Cn(e,i),max:Cn(t,r),minDefined:ot(e),maxDefined:ot(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:Cn(t,Cn(i,t)),max:Cn(i,Cn(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){He(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=OF(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?uL(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=P7(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){He(this.options.afterUpdate,[this])}beforeSetDimensions(){He(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){He(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),He(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){He(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=He(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){He(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){He(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=cL(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,l,c;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=Mt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Xd(e.grid)-t.padding-dL(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),o=Ym(Math.min(Math.asin(Mt((u.highest.height+6)/a,-1,1)),Math.asin(Mt(l/c,-1,1))-Math.asin(Mt(h/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){He(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){He(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=dL(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Xd(s)+l):(e.height=this.maxHeight,e.width=Xd(s)+l),i.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,p=Jn(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let y=i.mirror?0:m*d.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{let y=i.mirror?0:g*d.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,m,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;l?c?(h=r*e.width,f=i*t.height):(h=i*e.height,f=r*t.width):s==="start"?f=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=t.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){He(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Ae(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=uL(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(t/cL(t,i)),c=0,u=0,d,h,f,p,g,m,y,b,w,C,D;for(d=0;d<t;d+=l){if(p=e[d].label,g=this._resolveTickFontOptions(d),r.font=m=g.string,y=s[m]=s[m]||{data:{},gc:[]},b=g.lineHeight,w=C=0,!Ae(p)&&!Ke(p))w=zd(r,y.data,y.gc,w,p),C=b;else if(Ke(p))for(h=0,f=p.length;h<f;++h)D=p[h],!Ae(D)&&!Ke(D)&&(w=zd(r,y.data,y.gc,w,D),C+=b);o.push(w),a.push(C),c=Math.max(w,c),u=Math.max(C,u)}j7(s,t);let I=o.indexOf(c),A=a.indexOf(u),M=$=>({width:o[$]||0,height:a[$]||0});return{first:M(0),last:M(t-1),widest:M(I),highest:M(A),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return CF(this._alignToPixels?Es(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=U7(this.getContext(),e,i))}return this.$context||(this.$context=B7(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Jn(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Xd(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,y=function(F){return Es(i,F,g)},b,w,C,D,I,A,M,$,te,ae,de,Xe;if(o==="top")b=y(this.bottom),A=this.bottom-h,$=b-m,ae=y(e.top)+m,Xe=e.bottom;else if(o==="bottom")b=y(this.top),ae=e.top,Xe=y(e.bottom)-m,A=b+m,$=this.top+h;else if(o==="left")b=y(this.right),I=this.right-h,M=b-m,te=y(e.left)+m,de=e.right;else if(o==="right")b=y(this.left),te=e.left,de=y(e.right)-m,I=b+m,M=this.left+h;else if(t==="x"){if(o==="center")b=y((e.top+e.bottom)/2+.5);else if(De(o)){let F=Object.keys(o)[0],j=o[F];b=y(this.chart.scales[F].getPixelForValue(j))}ae=e.top,Xe=e.bottom,A=b+m,$=A+h}else if(t==="y"){if(o==="center")b=y((e.left+e.right)/2);else if(De(o)){let F=Object.keys(o)[0],j=o[F];b=y(this.chart.scales[F].getPixelForValue(j))}I=b-m,M=I-h,te=e.left,de=e.right}let Wt=ue(r.ticks.maxTicksLimit,d),Oe=Math.max(1,Math.ceil(d/Wt));for(w=0;w<d;w+=Oe){let F=this.getContext(w),j=s.setContext(F),Q=a.setContext(F),ie=j.lineWidth,Ze=j.color,sn=Q.dash||[],mt=Q.dashOffset,fn=j.tickWidth,Ve=j.tickColor,Dr=j.tickBorderDash||[],As=j.tickBorderDashOffset;C=V7(this,w,l),C!==void 0&&(D=Es(i,C,ie),c?I=M=te=de=D:A=$=ae=Xe=D,f.push({tx1:I,ty1:A,tx2:M,ty2:$,x1:te,y1:ae,x2:de,y2:Xe,width:ie,color:Ze,borderDash:sn,borderDashOffset:mt,tickWidth:fn,tickColor:Ve,tickBorderDash:Dr,tickBorderDashOffset:As}))}return this._ticksLength=d,this._borderValue=b,f}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=s,h=Xd(i.grid),f=h+u,p=d?-u:f,g=-Jn(this.labelRotation),m=[],y,b,w,C,D,I,A,M,$,te,ae,de,Xe="middle";if(r==="top")I=this.bottom-p,A=this._getXAxisLabelAlignment();else if(r==="bottom")I=this.top+p,A=this._getXAxisLabelAlignment();else if(r==="left"){let Oe=this._getYAxisLabelAlignment(h);A=Oe.textAlign,D=Oe.x}else if(r==="right"){let Oe=this._getYAxisLabelAlignment(h);A=Oe.textAlign,D=Oe.x}else if(t==="x"){if(r==="center")I=(e.top+e.bottom)/2+f;else if(De(r)){let Oe=Object.keys(r)[0],F=r[Oe];I=this.chart.scales[Oe].getPixelForValue(F)+f}A=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")D=(e.left+e.right)/2-f;else if(De(r)){let Oe=Object.keys(r)[0],F=r[Oe];D=this.chart.scales[Oe].getPixelForValue(F)}A=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(l==="start"?Xe="top":l==="end"&&(Xe="bottom"));let Wt=this._getLabelSizes();for(y=0,b=a.length;y<b;++y){w=a[y],C=w.label;let Oe=s.setContext(this.getContext(y));M=this.getPixelForTick(y)+s.labelOffset,$=this._resolveTickFontOptions(y),te=$.lineHeight,ae=Ke(C)?C.length:1;let F=ae/2,j=Oe.color,Q=Oe.textStrokeColor,ie=Oe.textStrokeWidth,Ze=A;o?(D=M,A==="inner"&&(y===b-1?Ze=this.options.reverse?"left":"right":y===0?Ze=this.options.reverse?"right":"left":Ze="center"),r==="top"?c==="near"||g!==0?de=-ae*te+te/2:c==="center"?de=-Wt.highest.height/2-F*te+te:de=-Wt.highest.height+te/2:c==="near"||g!==0?de=te/2:c==="center"?de=Wt.highest.height/2-F*te:de=Wt.highest.height-ae*te,d&&(de*=-1),g!==0&&!Oe.showLabelBackdrop&&(D+=te/2*Math.sin(g))):(I=M,de=(1-ae)*te/2);let sn;if(Oe.showLabelBackdrop){let mt=qt(Oe.backdropPadding),fn=Wt.heights[y],Ve=Wt.widths[y],Dr=de-mt.top,As=0-mt.left;switch(Xe){case"middle":Dr-=fn/2;break;case"bottom":Dr-=fn;break}switch(A){case"center":As-=Ve/2;break;case"right":As-=Ve;break}sn={left:As,top:Dr,width:Ve+mt.width,height:fn+mt.height,color:Oe.backdropColor}}m.push({label:C,font:$,textOffset:de,options:{rotation:g,color:j,strokeColor:Q,strokeWidth:ie,textAlign:Ze,textBaseline:Xe,translation:[D,I],backdrop:sn}})}return m}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Jn(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width,c,u;return t==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let l=r[s];t.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),t.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,d,h;this.isHorizontal()?(c=Es(e,this.left,o)-o/2,u=Es(e,this.right,a)+a/2,d=h=l):(d=Es(e,this.top,o)-o/2,h=Es(e,this.bottom,a)+a/2,c=u=l),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(c,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&Wd(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,l=o.font,c=o.label,u=o.textOffset;Cs(i,c,0,u,l,a)}r&&Gd(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=St(i.font),o=qt(i.padding),a=i.align,l=s.lineHeight/2;t==="bottom"||t==="center"||De(t)?(l+=o.bottom,Ke(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=z7(this,l,t,a);Cs(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:$7(a,t,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=ue(e.grid&&e.grid.z,-1),r=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return St(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},oc=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;W7(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,H7(e,o,i),this.override&&at.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in at[r]&&(delete at[r][i],this.override&&delete ws[i])}};function H7(n,e,t){let i=Yl(Object.create(null),[t?at.get(t):{},at.get(e),n.defaults]);at.set(e,i),n.defaultRoutes&&q7(e,n.defaultRoutes),n.descriptors&&at.describe(e,n.descriptors)}function q7(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),l=o.join(".");at.route(s,r,l,a)})}function W7(n){return"id"in n&&"defaults"in n}var AI=class{constructor(){this.controllers=new oc(Ts,"datasets",!0),this.elements=new oc(yi,"elements"),this.plugins=new oc(Object,"plugins"),this.scales=new oc(na,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Le(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=Qm(e);He(i["before"+r],[],i),t[e](i),He(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},Yi=new AI,MI=class{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],l=[t,r,s.options];if(He(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ae(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=ue(i.options&&i.options.plugins,{}),s=G7(i);return r===!1&&!t?[]:Q7(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function G7(n){let e={},t=[],i=Object.keys(Yi.plugins.items);for(let s=0;s<i.length;s++)t.push(Yi.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function K7(n,e){return!e&&n===!1?null:n===!0?{}:n}function Q7(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let l=a.id,c=K7(i[l],r);c!==null&&s.push({plugin:a,options:Y7(n.config,{plugin:a,local:t[l]},c,o)})}return s}function Y7(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function PI(n,e){let t=at.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function X7(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Z7(n,e){return n===e?"_index_":"_value_"}function hL(n){if(n==="x"||n==="y"||n==="r")return n}function J7(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function RI(n,...e){if(hL(n))return n;for(let t of e){let i=t.axis||J7(t.position)||n.length>1&&hL(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function fL(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function eK(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return fL(n,"x",t[0])||fL(n,"y",t[0])}return{}}function tK(n,e){let t=ws[n.type]||{scales:{}},i=e.scales||{},r=PI(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!De(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=RI(o,a,eK(o,n),at.scales[a.type]),c=Z7(l,r),u=t.scales||{};s[o]=Zl(Object.create(null),[{axis:l},a,u[l],u[c]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,l=o.indexAxis||PI(a,e),u=(ws[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=X7(d,l),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),Zl(s[f],[{axis:h},i[f],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Zl(a,[at.scales[a.type],at.scale])}),s}function eV(n){let e=n.options||(n.options={});e.plugins=ue(e.plugins,{}),e.scales=tK(n,e)}function tV(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function nK(n){return n=n||{},n.data=tV(n.data),eV(n),n}var pL=new Map,nV=new Set;function ay(n,e){let t=pL.get(n);return t||(t=e(),pL.set(n,t),nV.add(t)),t}var Zd=(n,e,t)=>{let i=br(e,t);i!==void 0&&n.add(i)},kI=class{constructor(e){this._config=nK(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tV(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),eV(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ay(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return ay(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return ay(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return ay(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let l=new Set;t.forEach(u=>{e&&(l.add(e),u.forEach(d=>Zd(l,e,d))),u.forEach(d=>Zd(l,r,d)),u.forEach(d=>Zd(l,ws[s]||{},d)),u.forEach(d=>Zd(l,at,d)),u.forEach(d=>Zd(l,Jm,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nV.has(t)&&o.set(t,c),c}chartOptionScopes(){let{options:e,type:t}=this;return[e,ws[t]||{},at.datasets[t]||{},{type:t},at,Jm]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=gL(this._resolverCache,e,r),l=o;if(rK(o,t)){s.$shared=!1,i=vr(i)?i():i;let c=this.createResolver(e,i,a);l=Xo(o,i,c)}for(let c of t)s[c]=l[c];return s}createResolver(e,t,i=[""],r){let{resolver:s}=gL(this._resolverCache,e,i);return De(t)?Xo(s,t,void 0,r):s}};function gL(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:ny(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var iK=n=>De(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||vr(n[t]),!1);function rK(n,e){let{isScriptable:t,isIndexable:i}=rI(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(vr(a)||iK(a))||o&&Ke(a))return!0}return!1}var sK="4.4.0",oK=["top","bottom","left","right","chartArea"];function mL(n,e){return n==="top"||n==="bottom"||oK.indexOf(n)===-1&&e==="x"}function yL(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function vL(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),He(t&&t.onComplete,[n],e)}function aK(n){let e=n.chart,t=e.options.animation;He(t&&t.onProgress,[n],e)}function iV(n){return lI()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var fy={},_L=n=>{let e=iV(n);return Object.values(fy).filter(t=>t.canvas===e).pop()};function lK(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function cK(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function ly(n,e,t){return n.options.clip?n[t]:e[t]}function uK(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:ly(t,e,"left"),right:ly(t,e,"right"),top:ly(i,e,"top"),bottom:ly(i,e,"bottom")}:e}var xs=(()=>{class n{static defaults=at;static instances=fy;static overrides=ws;static registry=Yi;static version=sK;static getChart=_L;static register(...t){Yi.add(...t),bL()}static unregister(...t){Yi.remove(...t),bL()}constructor(t,i){let r=this.config=new kI(i),s=iV(t),o=_L(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||M7(s)),this.platform.updateConfig(r);let l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=yF(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new MI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=xF(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],fy[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Er.listen(this,"complete",vL),Er.listen(this,"progress",aK),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return Ae(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Yi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cI(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return tI(this.canvas,this.ctx),this}stop(){return Er.stop(this),this}resize(t,i){Er.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,cI(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),He(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};Le(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let l=i[a],c=RI(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Le(o,a=>{let l=a.options,c=l.id,u=RI(c,l),d=ue(l.type,a.dtype);(l.position===void 0||mL(l.position,u)!==mL(a.dposition))&&(l.position=a.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{let f=Yi.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,t)}),Le(s,(a,l)=>{a||delete r[l]}),Le(r,a=>{rn.configure(this,a,a.options),rn.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(yL("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=o.indexAxis||PI(l,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let c=Yi.getController(l),{datasetElementType:u,dataElementType:d}=at.datasets[l];Object.assign(c,{dataElementType:Yi.getElement(d),datasetElementType:u&&Yi.getElement(u)}),a.controller=new c(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){Le(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Le(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(yL("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Le(this.scales,t=>{rn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!$D(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;lK(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!$D(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;rn.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Le(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,vr(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Er.has(this)?this.attached&&!Er.running(this)&&Er.start(this):(this.draw(),vL({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resize(r,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r=t._clip,s=!r.disabled,o=uK(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Wd(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),t.controller.draw(),s&&Gd(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Wi(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=d7.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=wr(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Jl(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(l=>l.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),Er.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),tI(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete fy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};Le(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(c,u)=>{i.addEventListener(this,c,u),t[c]=u},s=(c,u)=>{t[c]&&(i.removeEventListener(this,c,u),delete t[c])},o=(c,u)=>{this.canvas&&this.resize(c,u)},a,l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){Le(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},Le(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,l,c;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=t.length;l<c;++l){a=t[l];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!Hd(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,t),l=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,l=this._getActiveElements(t,s,r,a),c=bF(t),u=cK(t,this._lastEvent,r,c);r&&(this._lastEvent=null,He(o.onHover,[t,l,this],this),c&&He(o.onClick,[t,l,this],this));let d=!Hd(l,s);return(d||i)&&(this._active=l,this._updateHoverStyles(l,s,i)),this._lastEvent=u,d}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function bL(){return Le(xs.instances,n=>n._plugins.invalidate())}function dK(n,e,t){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e,c=r/a;n.beginPath(),n.arc(s,o,a,i-c,t+c),l>r?(c=r/l,n.arc(s,o,l,t+c,i-c,!0)):n.arc(s,o,r,t+dt,i-dt),n.closePath(),n.clip()}function hK(n){return ty(n,["outerStart","outerEnd","innerStart","innerEnd"])}function fK(n,e,t,i){let r=hK(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=l=>{let c=(t-Math.min(s,l))*i/2;return Mt(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Mt(r.innerStart,0,o),innerEnd:Mt(r.innerEnd,0,o)}}function sc(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function yy(n,e,t,i,r,s){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-c,0),h=u>0?u+i+t+c:0,f=0,p=r-l;if(i){let Oe=u>0?u-i:0,F=d>0?d-i:0,j=(Oe+F)/2,Q=j!==0?p*j/(j+i):p;f=(p-Q)/2}let g=Math.max(.001,p*d-t/Qe)/d,m=(p-g)/2,y=l+m+f,b=r-m-f,{outerStart:w,outerEnd:C,innerStart:D,innerEnd:I}=fK(e,h,d,b-y),A=d-w,M=d-C,$=y+w/A,te=b-C/M,ae=h+D,de=h+I,Xe=y+D/ae,Wt=b-I/de;if(n.beginPath(),s){let Oe=($+te)/2;if(n.arc(o,a,d,$,Oe),n.arc(o,a,d,Oe,te),C>0){let ie=sc(M,te,o,a);n.arc(ie.x,ie.y,C,te,b+dt)}let F=sc(de,b,o,a);if(n.lineTo(F.x,F.y),I>0){let ie=sc(de,Wt,o,a);n.arc(ie.x,ie.y,I,b+dt,Wt+Math.PI)}let j=(b-I/h+(y+D/h))/2;if(n.arc(o,a,h,b-I/h,j,!0),n.arc(o,a,h,j,y+D/h,!0),D>0){let ie=sc(ae,Xe,o,a);n.arc(ie.x,ie.y,D,Xe+Math.PI,y-dt)}let Q=sc(A,y,o,a);if(n.lineTo(Q.x,Q.y),w>0){let ie=sc(A,$,o,a);n.arc(ie.x,ie.y,w,y-dt,$)}}else{n.moveTo(o,a);let Oe=Math.cos($)*d+o,F=Math.sin($)*d+a;n.lineTo(Oe,F);let j=Math.cos(te)*d+o,Q=Math.sin(te)*d+a;n.lineTo(j,Q)}n.closePath()}function pK(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a}=e,l=e.endAngle;if(s){yy(n,e,t,i,l,r);for(let c=0;c<s;++c)n.fill();isNaN(a)||(l=o+(a%Ye||Ye))}return yy(n,e,t,i,l,r),n.fill(),l}function gK(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f=l.borderAlign==="inner";if(!c)return;n.setLineDash(d||[]),n.lineDashOffset=h,f?(n.lineWidth=c*2,n.lineJoin=u||"round"):(n.lineWidth=c,n.lineJoin=u||"bevel");let p=e.endAngle;if(s){yy(n,e,t,i,p,r);for(let g=0;g<s;++g)n.stroke();isNaN(a)||(p=o+(a%Ye||Ye))}f&&dK(n,e,p),s||(yy(n,e,t,i,p,r),n.stroke())}var OI=class extends yi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=WD(r,{x:e,y:t}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=ue(d,l-a)>=Ye||tc(s,a,l),g=Ki(o,c+h,u+h);return p&&g}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(r+s)/2,d=(o+a+c+l)/2;return{x:t+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Ye?Math.floor(i/Ye):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(Qe,i||0)),c=r*l;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,pK(e,this,c,s,o),gK(e,this,c,s,o),e.restore()}};function rV(n,e,t=e){n.lineCap=ue(t.borderCapStyle,e.borderCapStyle),n.setLineDash(ue(t.borderDash,e.borderDash)),n.lineDashOffset=ue(t.borderDashOffset,e.borderDashOffset),n.lineJoin=ue(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=ue(t.borderWidth,e.borderWidth),n.strokeStyle=ue(t.borderColor,e.borderColor)}function mK(n,e,t){n.lineTo(t.x,t.y)}function yK(n){return n.stepped?RF:n.tension||n.cubicInterpolationMode==="monotone"?kF:mK}function sV(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function vK(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=sV(r,t,i),u=yK(s),{move:d=!0,reverse:h}=i||{},f,p,g;for(f=0;f<=c;++f)p=r[(a+(h?c-f:f))%o],!p.skip&&(d?(n.moveTo(p.x,p.y),d=!1):u(n,g,p,h,s.stepped),g=p);return l&&(p=r[(a+(h?c:0))%o],u(n,g,p,h,s.stepped)),!!l}function _K(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=sV(r,t,i),{move:l=!0,reverse:c}=i||{},u=0,d=0,h,f,p,g,m,y,b=C=>(o+(c?a-C:C))%s,w=()=>{g!==m&&(n.lineTo(u,m),n.lineTo(u,g),n.lineTo(u,y))};for(l&&(f=r[b(0)],n.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=r[b(h)],f.skip)continue;let C=f.x,D=f.y,I=C|0;I===p?(D<g?g=D:D>m&&(m=D),u=(d*u+C)/++d):(w(),n.lineTo(C,D),p=I,d=0,g=m=D),y=D}w()}function NI(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?_K:vK}function bK(n){return n.stepped?$F:n.tension||n.cubicInterpolationMode==="monotone"?zF:bs}function wK(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),rV(n,e.options),n.stroke(r)}function EK(n,e,t,i){let{segments:r,options:s}=e,o=NI(e);for(let a of r)rV(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var CK=typeof Path2D=="function";function DK(n,e,t,i){CK&&!e.options.segment?wK(n,e,t,i):EK(n,e,t,i)}var by=(()=>{class n extends yi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;jF(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=qF(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=pI(this,{property:i,start:s,end:s});if(!a.length)return;let l=[],c=bK(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:f}=a[u],p=o[h],g=o[f];if(p===g){l.push(p);continue}let m=Math.abs((s-p[i])/(g[i]-p[i])),y=c(p,g,m,r.stepped);y[i]=t[i],l.push(y)}return l.length===1?l[0]:l}pathSegment(t,i,r){return NI(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=NI(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let l of s)a&=o(t,this,l,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),DK(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function wL(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var IK=(()=>{class n extends yi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return wL(this,t,"x",i)}inYRange(t,i){return wL(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!Wi(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,ey(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function oV(n,e){let{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,l,c,u,d;return n.horizontal?(d=o/2,a=Math.min(t,r),l=Math.max(t,r),c=i-d,u=i+d):(d=s/2,a=t-d,l=t+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Ss(n,e,t,i){return n?0:Mt(e,t,i)}function SK(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,s=iI(i);return{t:Ss(r.top,s.top,0,t),r:Ss(r.right,s.right,0,e),b:Ss(r.bottom,s.bottom,0,t),l:Ss(r.left,s.left,0,e)}}function TK(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Ds(r),o=Math.min(e,t),a=n.borderSkipped,l=i||De(r);return{topLeft:Ss(!l||a.top||a.left,s.topLeft,0,o),topRight:Ss(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ss(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ss(!l||a.bottom||a.right,s.bottomRight,0,o)}}function xK(n){let e=oV(n),t=e.right-e.left,i=e.bottom-e.top,r=SK(n,t/2,i/2),s=TK(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function wI(n,e,t,i){let r=e===null,s=t===null,a=n&&!(r&&s)&&oV(n,i);return a&&(r||Ki(e,a.left,a.right))&&(s||Ki(t,a.top,a.bottom))}function AK(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function MK(n,e){n.rect(e.x,e.y,e.w,e.h)}function EI(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var FI=class extends yi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=xK(this),a=AK(o.radius)?ic:MK;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,EI(o,t,s)),e.clip(),a(e,EI(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,EI(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return wI(this,e,t,i)}inXRange(e,t){return wI(this,e,null,t)}inYRange(e,t){return wI(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},PK=Object.freeze({__proto__:null,ArcElement:OI,BarElement:FI,LineElement:by,PointElement:IK}),LI=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],EL=LI.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function aV(n){return LI[n%LI.length]}function lV(n){return EL[n%EL.length]}function RK(n,e){return n.borderColor=aV(e),n.backgroundColor=lV(e),++e}function kK(n,e){return n.backgroundColor=n.data.map(()=>aV(e++)),e}function OK(n,e){return n.backgroundColor=n.data.map(()=>lV(e++)),e}function NK(n){let e=0;return(t,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof qI?e=kK(t,e):r instanceof QL?e=OK(t,e):r&&(e=RK(t,e))}}function CL(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function FK(n){return n&&(n.borderColor||n.backgroundColor)}var LK={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!t.forceOverride&&(CL(i)||FK(r)||s&&CL(s)))return;let o=NK(n);i.forEach(o)}};function VK(n,e,t,i,r){let s=r.samples||i;if(s>=t)return n.slice(e,e+t);let o=[],a=(t-2)/(s-2),l=0,c=e+t-1,u=e,d,h,f,p,g;for(o[l++]=n[u],d=0;d<s-2;d++){let m=0,y=0,b,w=Math.floor((d+1)*a)+1+e,C=Math.min(Math.floor((d+2)*a)+1,t)+e,D=C-w;for(b=w;b<C;b++)m+=n[b].x,y+=n[b].y;m/=D,y/=D;let I=Math.floor(d*a)+1+e,A=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:M,y:$}=n[u];for(f=p=-1,b=I;b<A;b++)p=.5*Math.abs((M-m)*(n[b].y-$)-(M-n[b].x)*(y-$)),p>f&&(f=p,h=n[b],g=b);o[l++]=h,u=g}return o[l++]=n[c],o}function jK(n,e,t,i){let r=0,s=0,o,a,l,c,u,d,h,f,p,g,m=[],y=e+t-1,b=n[e].x,C=n[y].x-b;for(o=e;o<e+t;++o){a=n[o],l=(a.x-b)/C*i,c=a.y;let D=l|0;if(D===u)c<p?(p=c,d=o):c>g&&(g=c,h=o),r=(s*r+a.x)/++s;else{let I=o-1;if(!Ae(d)&&!Ae(h)){let A=Math.min(d,h),M=Math.max(d,h);A!==f&&A!==I&&m.push(Me(z({},n[A]),{x:r})),M!==f&&M!==I&&m.push(Me(z({},n[M]),{x:r}))}o>0&&I!==f&&m.push(n[I]),m.push(a),u=D,s=0,p=g=c,d=h=f=o}}return m}function cV(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function DL(n){n.data.datasets.forEach(e=>{cV(e)})}function BK(n,e){let t=e.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=Mt(qi(e,s.axis,o).lo,0,t-1)),c?r=Mt(qi(e,s.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var UK={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){DL(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,l=n.getDatasetMeta(s),c=o||r.data;if(rc([a,n.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=n.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=BK(l,c),f=t.threshold||4*i;if(h<=f){cV(r);return}Ae(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(t.algorithm){case"lttb":p=VK(c,d,h,i,t);break;case"min-max":p=jK(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=p})},destroy(n){DL(n)}};function $K(n,e,t){let i=n.segments,r=n.points,s=e.points,o=[];for(let a of i){let{start:l,end:c}=a;c=WI(l,c,r);let u=VI(t,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[l],end:r[c]});continue}let d=pI(e,u);for(let h of d){let f=VI(t,s[h.start],s[h.end],h.loop),p=fI(a,r,f);for(let g of p)o.push({source:g,target:h,start:{[t]:IL(u,f,"start",Math.max)},end:{[t]:IL(u,f,"end",Math.min)}})}}return o}function VI(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=En(r),s=En(s)),{property:n,start:r,end:s}}function zK(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=WI(o,a,r);let l=r[o],c=r[a];i!==null?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):t!==null&&(s.push({x:t,y:l.y}),s.push({x:t,y:c.y}))}),s}function WI(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function IL(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function uV(n,e){let t=[],i=!1;return Ke(n)?(i=!0,t=n):t=zK(n,e),t.length?new by({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function SL(n){return n&&n.fill!==!1}function HK(n,e,t){let r=n[e].fill,s=[e],o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!ot(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function qK(n,e,t){let i=QK(n);if(De(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return ot(r)&&Math.floor(r)===r?WK(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function WK(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function GK(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:De(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function KK(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:De(n)?i=n.value:i=e.getBaseValue(),i}function QK(n){let e=n.options,t=e.fill,i=ue(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function YK(n){let{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=XK(e,t);a.push(uV({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){let c=s[l];for(let u=c.start;u<=c.end;u++)ZK(r,o[u],a)}return new by({points:r,options:{}})}function XK(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function ZK(n,e,t){let i=[];for(let r=0;r<t.length;r++){let s=t[r],{first:o,last:a,point:l}=JK(s,e,"x");if(!(!l||o&&a)){if(o)i.unshift(l);else if(n.push(l),!a)break}}n.push(...i)}function JK(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],s=n.segments,o=n.points,a=!1,l=!1;for(let c=0;c<s.length;c++){let u=s[c],d=o[u.start][t],h=o[u.end][t];if(Ki(r,d,h)){a=r===d,l=r===h;break}}return{first:a,last:l,point:i}}var vy=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:s,radius:o}=this;return t=t||{start:0,end:Ye},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function eQ(n){let{chart:e,fill:t,line:i}=n;if(ot(t))return tQ(e,t);if(t==="stack")return YK(n);if(t==="shape")return!0;let r=nQ(n);return r instanceof vy?r:uV(r,i)}function tQ(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function nQ(n){return(n.scale||{}).getPointPositionForValue?rQ(n):iQ(n)}function iQ(n){let{scale:e={},fill:t}=n,i=GK(t,e);if(ot(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function rQ(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=KK(t,e,s),a=[];if(i.grid.circular){let l=e.getPointPositionForValue(0,s);return new vy({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}function CI(n,e,t){let i=eQ(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&r.points.length&&(Wd(n,t),sQ(n,{line:r,target:i,above:u,below:d,area:t,scale:s,axis:o}),Gd(n))}function sQ(n,e){let{line:t,target:i,above:r,below:s,area:o,scale:a}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&s!==r&&(TL(n,i,o.top),xL(n,{line:t,target:i,color:r,scale:a,property:l}),n.restore(),n.save(),TL(n,i,o.bottom)),xL(n,{line:t,target:i,color:s,scale:a,property:l}),n.restore()}function TL(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:l,end:c}=a,u=r[l],d=r[WI(l,c,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function xL(n,e){let{line:t,target:i,property:r,color:s,scale:o}=e,a=$K(t,i,r);for(let{source:l,target:c,start:u,end:d}of a){let{style:{backgroundColor:h=s}={}}=l,f=i!==!0;n.save(),n.fillStyle=h,oQ(n,o,f&&VI(r,u,d)),n.beginPath();let p=!!t.pathSegment(n,l),g;if(f){p?n.closePath():AL(n,i,d,r);let m=!!i.pathSegment(n,c,{move:p,reverse:!0});g=p&&m,g||AL(n,i,u,r)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function oQ(n,e,t){let{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function AL(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var aQ={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],s,o,a,l;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof by&&(l={visible:n.isDatasetVisible(o),index:o,fill:qK(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=HK(r,o,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&CI(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;SL(s)&&CI(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!SL(i)||t.drawTime!=="beforeDatasetDraw"||CI(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},ML=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},lQ=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,_y=class extends yi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=He(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=St(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ML(i,s),c,u;t.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,g)=>{let m=i+t/2+s.measureText(p.text).width;(g===0||c[c.length-1]+m+2*a>o)&&(d+=u,c[c.length-(g>0?0:1)]=0,f+=u,h++),l[g]={left:0,top:f,row:h,width:m,height:r},c[c.length-1]+=m+a}),d}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e,d=a,h=0,f=0,p=0,g=0;return this.legendItems.forEach((m,y)=>{let{itemWidth:b,itemHeight:w}=cQ(i,t,s,m,r);y>0&&f+w+2*a>u&&(d+=h+a,c.push({width:h,height:f}),p+=h+a,g++,h=f=0),l[y]={left:p,top:f,col:g,width:b,height:w},h=Math.max(h,b),f+=w+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Jo(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ht(i,this.left+r,this.right-this.lineWidths[a]);for(let c of t)a!==c.row&&(a=c.row,l=Ht(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Ht(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let c of t)c.col!==a&&(a=c.col,l=Ht(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Wd(e,this),this._draw(),Gd(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=at.color,l=Jo(e.rtl,this.left,this.width),c=St(o.font),{padding:u}=o,d=c.size,h=d/2,f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=ML(o,d),y=function(I,A,M){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;r.save();let $=ue(M.lineWidth,1);if(r.fillStyle=ue(M.fillStyle,a),r.lineCap=ue(M.lineCap,"butt"),r.lineDashOffset=ue(M.lineDashOffset,0),r.lineJoin=ue(M.lineJoin,"miter"),r.lineWidth=$,r.strokeStyle=ue(M.strokeStyle,a),r.setLineDash(ue(M.lineDash,[])),o.usePointStyle){let te={radius:g*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:$},ae=l.xPlus(I,p/2),de=A+h;nI(r,te,ae,de,o.pointStyleWidth&&p)}else{let te=A+Math.max((d-g)/2,0),ae=l.leftForLtr(I,p),de=Ds(M.borderRadius);r.beginPath(),Object.values(de).some(Xe=>Xe!==0)?ic(r,{x:ae,y:te,w:p,h:g,radius:de}):r.rect(ae,te,p,g),r.fill(),$!==0&&r.stroke()}r.restore()},b=function(I,A,M){Cs(r,M.text,I,A+m/2,c,{strikethrough:M.hidden,textAlign:l.textAlign(M.textAlign)})},w=this.isHorizontal(),C=this._computeTitleHeight();w?f={x:Ht(s,this.left+u,this.right-i[0]),y:this.top+u+C,line:0}:f={x:this.left+u,y:Ht(s,this.top+C+u,this.bottom-t[0].height),line:0},dI(this.ctx,e.textDirection);let D=m+u;this.legendItems.forEach((I,A)=>{r.strokeStyle=I.fontColor,r.fillStyle=I.fontColor;let M=r.measureText(I.text).width,$=l.textAlign(I.textAlign||(I.textAlign=o.textAlign)),te=p+h+M,ae=f.x,de=f.y;l.setWidth(this.width),w?A>0&&ae+te+u>this.right&&(de=f.y+=D,f.line++,ae=f.x=Ht(s,this.left+u,this.right-i[f.line])):A>0&&de+D>this.bottom&&(ae=f.x=ae+t[f.line].width+u,f.line++,de=f.y=Ht(s,this.top+C+u,this.bottom-t[f.line].height));let Xe=l.x(ae);if(y(Xe,de,I),ae=AF($,ae+p+h,w?ae+te:this.right,e.rtl),b(l.x(ae),de,I),w)f.x+=te+u;else if(typeof I.text!="string"){let Wt=c.lineHeight;f.y+=dV(I,Wt)+u}else f.y+=D}),hI(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=St(t.font),r=qt(t.padding);if(!t.display)return;let s=Jo(e.rtl,this.left,this.width),o=this.ctx,a=t.position,l=i.size/2,c=r.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Ht(e.align,d,this.right-h);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=c+Ht(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let f=Ht(a,d,d+h);o.textAlign=s.textAlign(Zm(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Cs(o,t.text,f,u,i)}_computeTitleHeight(){let e=this.options.title,t=St(e.font),i=qt(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(Ki(e,this.left,this.right)&&Ki(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ki(e,r.left,r.left+r.width)&&Ki(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!hQ(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=lQ(r,i);r&&!s&&He(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&He(t.onHover,[e,i,this],this)}else i&&He(t.onClick,[e,i,this],this)}};function cQ(n,e,t,i,r){let s=uQ(i,n,e,t),o=dQ(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function uQ(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function dQ(n,e,t){let i=n;return typeof e.text!="string"&&(i=dV(e,t)),i}function dV(n,e){let t=n.text?n.text.length:0;return e*t}function hQ(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var fQ={id:"legend",_element:_y,start(n,e,t){let i=n.legend=new _y({ctx:n.ctx,options:t,chart:n});rn.configure(n,i,t),rn.addBox(n,i)},stop(n){rn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;rn.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(t?0:void 0),u=qt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},nh=class extends yi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=Ke(i.text)?i.text.length:1;this._padding=qt(i.padding);let s=r*St(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,l=0,c,u,d;return this.isHorizontal()?(u=Ht(a,i,s),d=t+e,c=s-i):(o.position==="left"?(u=i+e,d=Ht(a,r,t),l=Qe*-.5):(u=s-e,d=Ht(a,t,r),l=Qe*.5),c=r-t),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=St(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Cs(e,t.text,0,0,i,{color:t.color,maxWidth:l,rotation:c,textAlign:Zm(t.align),textBaseline:"middle",translation:[o,a]})}};function pQ(n,e){let t=new nh({ctx:n.ctx,options:e,chart:n});rn.configure(n,t,e),rn.addBox(n,t),n.titleBlock=t}var gQ={id:"title",_element:nh,start(n,e,t){pQ(n,t)},stop(n){let e=n.titleBlock;rn.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;rn.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},cy=new WeakMap,mQ={id:"subtitle",start(n,e,t){let i=new nh({ctx:n.ctx,options:t,chart:n});rn.configure(n,i,t),rn.addBox(n,i),cy.set(n,i)},stop(n){rn.removeBox(n,cy.get(n)),cy.delete(n)},beforeUpdate(n,e,t){let i=cy.get(n);rn.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},eh={average(n){if(!n.length)return!1;let e,t,i=0,r=0,s=0;for(e=0,t=n.length;e<t;++e){let o=n[e].element;if(o&&o.hasValue()){let a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:i/s,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let l=n[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=Gm(e,c);u<r&&(r=u,a=l)}}if(a){let l=a.tooltipPosition();t=l.x,i=l.y}return{x:t,y:i}}};function Qi(n,e){return e&&(Ke(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Cr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function yQ(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function PL(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,l=St(e.bodyFont),c=St(e.titleFont),u=St(e.footerFont),d=s.length,h=r.length,f=i.length,p=qt(e.padding),g=p.height,m=0,y=i.reduce((C,D)=>C+D.before.length+D.lines.length+D.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,d&&(g+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){let C=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;g+=f*C+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let b=0,w=function(C){m=Math.max(m,t.measureText(C).width+b)};return t.save(),t.font=c.string,Le(n.title,w),t.font=l.string,Le(n.beforeBody.concat(n.afterBody),w),b=e.displayColors?o+2+e.boxPadding:0,Le(i,C=>{Le(C.before,w),Le(C.lines,w),Le(C.after,w)}),b=0,t.font=u.string,Le(n.footer,w),t.restore(),m+=p.width,{width:m,height:g}}function vQ(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function _Q(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function bQ(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:l}}=n,c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),_Q(c,n,e,t)&&(c="center"),c}function RL(n,e,t){let i=t.yAlign||e.yAlign||vQ(n,t);return{xAlign:t.xAlign||e.xAlign||bQ(n,e,t,i),yAlign:i}}function wQ(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function EQ(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function kL(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:l}=t,c=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Ds(o),p=wQ(e,a),g=EQ(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+r:a==="right"&&(p+=Math.max(d,f)+r),{x:Mt(p,0,i.width-e.width),y:Mt(g,0,i.height-e.height)}}function uy(n,e,t){let i=qt(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function OL(n){return Qi([],Cr(n))}function CQ(n,e,t){return wr(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function NL(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var hV={beforeTitle:Gi,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Gi,beforeBody:Gi,beforeLabel:Gi,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Ae(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Gi,afterBody:Gi,beforeFooter:Gi,footer:Gi,afterFooter:Gi};function Dn(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?hV[e].call(t,i):r}var FL=(()=>{class n extends yi{static positioners=eh;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new py(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=CQ(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=Dn(r,"beforeTitle",this,t),o=Dn(r,"title",this,t),a=Dn(r,"afterTitle",this,t),l=[];return l=Qi(l,Cr(s)),l=Qi(l,Cr(o)),l=Qi(l,Cr(a)),l}getBeforeBody(t,i){return OL(Dn(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return Le(t,o=>{let a={before:[],lines:[],after:[]},l=NL(r,o);Qi(a.before,Cr(Dn(l,"beforeLabel",this,o))),Qi(a.lines,Dn(l,"label",this,o)),Qi(a.after,Cr(Dn(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return OL(Dn(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=Dn(r,"beforeFooter",this,t),o=Dn(r,"footer",this,t),a=Dn(r,"afterFooter",this,t),l=[];return l=Qi(l,Cr(s)),l=Qi(l,Cr(o)),l=Qi(l,Cr(a)),l}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],l=[],c,u;for(c=0,u=i.length;c<u;++c)l.push(yQ(this.chart,i[c]));return t.filter&&(l=l.filter((d,h,f)=>t.filter(d,h,f,r))),t.itemSort&&(l=l.sort((d,h)=>t.itemSort(d,h,r))),Le(l,d=>{let h=NL(t.callbacks,d);s.push(Dn(h,"labelColor",this,d)),o.push(Dn(h,"labelPointStyle",this,d)),a.push(Dn(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let l=eh[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let c=this._size=PL(this,r),u=Object.assign({},l,c),d=RL(this.chart,r,u),h=kL(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=Ds(l),{x:f,y:p}=t,{width:g,height:m}=i,y,b,w,C,D,I;return o==="center"?(D=p+m/2,s==="left"?(y=f,b=y-a,C=D+a,I=D-a):(y=f+g,b=y+a,C=D-a,I=D+a),w=y):(s==="left"?b=f+Math.max(c,d)+a:s==="right"?b=f+g-Math.max(u,h)-a:b=this.caretX,o==="top"?(C=p,D=C-a,y=b-a,w=b+a):(C=p+m,D=C+a,y=b+a,w=b-a),I=C),{x1:y,x2:b,x3:w,y1:C,y2:D,y3:I}}drawTitle(t,i,r){let s=this.title,o=s.length,a,l,c;if(o){let u=Jo(r.rtl,this.x,this.width);for(t.x=uy(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=St(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+l,c+1===o&&(t.y+=r.titleMarginBottom-l)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=o,d=St(o.bodyFont),h=uy(this,"left",o),f=s.x(h),p=c<d.lineHeight?(d.lineHeight-c)/2:0,g=i.y+p;if(o.usePointStyle){let m={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=s.leftForLtr(f,u)+u/2,b=g+c/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ey(t,m,y,b),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,ey(t,m,y,b)}else{t.lineWidth=De(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let m=s.leftForLtr(f,u),y=s.leftForLtr(s.xPlus(f,1),u-2),b=Ds(a.borderRadius);Object.values(b).some(w=>w!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ic(t,{x:m,y:g,w:u,h:c,radius:b}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ic(t,{x:y,y:g+1,w:u-2,h:c-2,radius:b}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(m,g,u,c),t.strokeRect(m,g,u,c),t.fillStyle=a.backgroundColor,t.fillRect(y,g+1,u-2,c-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=St(r.bodyFont),f=h.lineHeight,p=0,g=Jo(r.rtl,this.x,this.width),m=function($){i.fillText($,g.x(t.x+p),t.y+f/2),t.y+=f+o},y=g.textAlign(a),b,w,C,D,I,A,M;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,t.x=uy(this,y,r),i.fillStyle=r.bodyColor,Le(this.beforeBody,m),p=l&&y!=="right"?a==="center"?u/2+d:u+2+d:0,D=0,A=s.length;D<A;++D){for(b=s[D],w=this.labelTextColors[D],i.fillStyle=w,Le(b.before,m),C=b.lines,l&&C.length&&(this._drawColorBox(i,t,D,g,r),f=Math.max(h.lineHeight,c)),I=0,M=C.length;I<M;++I)m(C[I]),f=h.lineHeight;Le(b.after,m)}p=0,f=h.lineHeight,Le(this.afterBody,m),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,l;if(o){let c=Jo(r.rtl,this.x,this.width);for(t.x=uy(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=St(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=t,{width:u,height:d}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=Ds(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+h,c),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(l+u-f,c),i.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(l+u,c+d-g),i.quadraticCurveTo(l+u,c+d,l+u-g,c+d),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(l+p,c+d),i.quadraticCurveTo(l,c+d,l,c+d-p),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(l,c+h),i.quadraticCurveTo(l,c,l+h,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=eh[t.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=PL(this,t),c=Object.assign({},a,this._size),u=RL(i,t,c),d=kL(t,c,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=qt(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),dI(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),hI(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),o=!Hd(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),l=this._positionChanged(a,t),c=i||!Hd(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),c}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i;let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=eh[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),DQ={id:"tooltip",_element:FL,positioners:eh,afterInit(n,e,t){t&&(n.tooltip=new FL({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",Me(z({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hV},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},IQ=Object.freeze({__proto__:null,Colors:LK,Decimation:UK,Filler:aQ,Legend:fQ,SubTitle:mQ,Title:gQ,Tooltip:DQ}),SQ=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function TQ(n,e,t,i){let r=n.indexOf(e);if(r===-1)return SQ(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var xQ=(n,e)=>n===null?null:Mt(Math.round(n),0,e);function LL(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var AQ=(()=>{class n extends na{static id="category";static defaults={ticks:{callback:LL}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Ae(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:TQ(r,t,ue(i,t),this._addedLabels),xQ(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return LL.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function MQ(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=n,f=s||1,p=u-1,{min:g,max:m}=e,y=!Ae(o),b=!Ae(a),w=!Ae(c),C=(m-g)/(d+1),D=zD((m-g)/p/f)*f,I,A,M,$;if(D<1e-14&&!y&&!b)return[{value:g},{value:m}];$=Math.ceil(m/D)-Math.floor(g/D),$>p&&(D=zD($*D/p/f)*f),Ae(l)||(I=Math.pow(10,l),D=Math.ceil(D*I)/I),r==="ticks"?(A=Math.floor(g/D)*D,M=Math.ceil(m/D)*D):(A=g,M=m),y&&b&&s&&EF((a-o)/s,D/1e3)?($=Math.round(Math.min((a-o)/D,u)),D=(a-o)/$,A=o,M=a):w?(A=y?o:A,M=b?a:M,$=c-1,D=(M-A)/$):($=(M-A)/D,ec($,Math.round($),D/1e3)?$=Math.round($):$=Math.ceil($));let te=Math.max(qD(D),qD(A));I=Math.pow(10,Ae(l)?te:l),A=Math.round(A*I)/I,M=Math.round(M*I)/I;let ae=0;for(y&&(h&&A!==o?(t.push({value:o}),A<o&&ae++,ec(Math.round((A+ae*D)*I)/I,o,VL(o,C,n))&&ae++):A<o&&ae++);ae<$;++ae){let de=Math.round((A+ae*D)*I)/I;if(b&&de>a)break;t.push({value:de})}return b&&h&&M!==a?t.length&&ec(t[t.length-1].value,a,VL(a,C,n))?t[t.length-1].value=a:t.push({value:a}):(!b||M===a)&&t.push({value:M}),t}function VL(n,e,{horizontal:t,minRotation:i}){let r=Jn(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var ac=class extends na{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ae(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=l=>r=t?r:l,a=l=>s=i?s:l;if(e){let l=mi(r),c=mi(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=MQ(r,s);return e.bounds==="ticks"&&HD(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return nc(e,this.chart.options.locale,this.options.ticks.format)}},jI=class extends ac{static id="linear";static defaults={ticks:{callback:qd.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=ot(e)?e:0,this.max=ot(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Jn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},ih=n=>Math.floor(_r(n)),ta=(n,e)=>Math.pow(10,ih(n)+e);function jL(n){return n/Math.pow(10,ih(n))===1}function BL(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function PQ(n,e){let t=e-n,i=ih(t);for(;BL(n,e,i)>10;)i++;for(;BL(n,e,i)<10;)i--;return Math.min(i,ih(n))}function RQ(n,{min:e,max:t}){e=Cn(n.min,e);let i=[],r=ih(e),s=PQ(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((e-l)*o)/o,u=Math.floor((e-l)/a/10)*a*10,d=Math.floor((c-u)/Math.pow(10,s)),h=Cn(n.min,Math.round((l+u+d*Math.pow(10,s))*o)/o);for(;h<t;)i.push({value:h,major:jL(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((l+u+d*Math.pow(10,s))*o)/o;let f=Cn(n.max,h);return i.push({value:f,major:jL(f),significand:d}),i}var BI=class extends na{static id="logarithmic";static defaults={ticks:{callback:qd.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=ac.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return ot(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=ot(e)?Math.max(0,e):null,this.max=ot(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ot(this._userMin)&&(this.min=e===ta(this.min,0)?ta(this.min,-1):ta(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(ta(i,-1)),o(ta(r,1)))),i<=0&&s(ta(r,-1)),r<=0&&o(ta(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=RQ(t,this);return e.bounds==="ticks"&&HD(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":nc(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=_r(e),this._valueRange=_r(this.max)-_r(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(_r(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function UI(n){let e=n.ticks;if(e.display&&n.display){let t=qt(e.backdropPadding);return ue(e.font&&e.font.size,at.font.size)+t.height}return 0}function kQ(n,e,t){return t=Ke(t)?t:[t],{w:PF(n,e.string,t),h:t.length*e.lineHeight}}function UL(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function OQ(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?Qe/s:0;for(let l=0;l<s;l++){let c=o.setContext(n.getPointLabelContext(l));r[l]=c.padding;let u=n.getPointPosition(l,n.drawingArea+r[l],a),d=St(c.font),h=kQ(n.ctx,d,n._pointLabels[l]);i[l]=h;let f=En(n.getIndexAngle(l)+a),p=Math.round(Ym(f)),g=UL(p,u.x,h.w,0,180),m=UL(p,u.y,h.h,90,270);NQ(t,e,f,g,m)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=VQ(n,i,r)}function NQ(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+l))}function FQ(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,l=n.getPointPosition(e,i+r+o,s),c=Math.round(Ym(En(l.angle+dt))),u=UQ(l.y,a.h,c),d=jQ(c),h=BQ(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function LQ(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(Wi({x:t,y:i},e)||Wi({x:t,y:s},e)||Wi({x:r,y:i},e)||Wi({x:r,y:s},e))}function VQ(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:UI(s)/2,additionalAngle:o?Qe/r:0},c;for(let u=0;u<r;u++){l.padding=t[u],l.size=e[u];let d=FQ(n,u,l);i.push(d),a==="auto"&&(d.visible=LQ(d,c),d.visible&&(c=d))}return i}function jQ(n){return n===0||n===180?"center":n<180?"left":"right"}function BQ(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function UQ(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function $Q(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Ae(a)){let l=Ds(e.borderRadius),c=qt(e.backdropPadding);n.fillStyle=a;let u=i-c.left,d=r-c.top,h=s-i+c.width,f=o-r+c.height;Object.values(l).some(p=>p!==0)?(n.beginPath(),ic(n,{x:u,y:d,w:h,h:f,radius:l}),n.fill()):n.fillRect(u,d,h,f)}}function zQ(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));$Q(t,o,s);let a=St(o.font),{x:l,y:c,textAlign:u}=s;Cs(t,n._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function fV(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,Ye);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function HQ(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!i||!a||!l||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),fV(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function qQ(n,e,t){return wr(n,{label:t,index:e,type:"pointLabel"})}var $I=class extends ac{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:qd.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=qt(UI(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=ot(e)&&!isNaN(e)?e:0,this.max=ot(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/UI(this.options))}generateTickLabels(e){ac.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=He(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?OQ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=Ye/(this._pointLabels.length||1),i=this.options.startAngle||0;return En(e*t+Jn(i))}getDistanceFromCenterForValue(e){if(Ae(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ae(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return qQ(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-dt+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),fV(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,l,c;if(t.pointLabels.display&&zQ(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0){l=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=r.setContext(h),p=s.setContext(h);HQ(this,f,l,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!t.reverse)return;let c=i.setContext(this.getContext(l)),u=St(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;let d=qt(c.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Cs(e,a.label,0,-s,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}},wy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},In=Object.keys(wy);function $L(n,e){return n-e}function zL(n,e){if(Ae(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),ot(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Zo(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function HL(n,e,t,i){let r=In.length;for(let s=In.indexOf(n);s<r-1;++s){let o=wy[In[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return In[s]}return In[r-1]}function WQ(n,e,t,i,r){for(let s=In.length-1;s>=In.indexOf(t);s--){let o=In[s];if(wy[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return In[t?In.indexOf(t):0]}function GQ(n){for(let e=In.indexOf(n)+1,t=In.length;e<t;++e)if(wy[In[e]].common)return In[e]}function qL(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=Xm(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function KQ(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=t[a],l>=0&&(e[l].major=!0);return e}function WL(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:KQ(n,i,r,t)}var zI=(()=>{class n extends na{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new o7._date(t.adapters.date);s.init(i),Zl(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:zL(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!l&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=ot(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=ot(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,l=IF(s,o,a);return this._unit=i.unit||(r.autoSkip?HL(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):WQ(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:GQ(this._unit),this.initOffsets(s),t.reverse&&l.reverse(),WL(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=Mt(i,0,a),r=Mt(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||HL(o.minUnit,i,r,this._getLabelCapacity(i)),l=ue(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,u=Zo(c)||c===!0,d={},h=i,f,p;if(u&&(h=+t.startOf(h,"isoWeek",c)),h=+t.startOf(h,u?"day":a),t.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);let g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+t.add(f,l,a),p++)qL(d,f,g);return(f===r||s.bounds==="ticks"||p===1)&&qL(d,f,g),Object.keys(d).sort($L).map(m=>+m)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return He(a,[t,i,r],this);let l=o.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=r[i],p=u&&h&&f&&f.major;return this._adapter.format(t,s||(p?h:d))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=Jn(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,WL(this,[t],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(zL(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return KD(t.sort($L))}}return n})();function dy(n,e,t){let i=0,r=n.length-1,s,o,a,l;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=qi(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:l}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=qi(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:l}=n[r]);let c=o-s;return c?a+(l-a)*(e-s)/c:a}var HI=class extends zI{static id="timeseries";static defaults=zI.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=dy(t,this.min),this._tableRange=dy(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=t&&c<=i&&r.push(c);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(dy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return dy(this._table,i*this._tableRange+this._minPos,!0)}},QQ=Object.freeze({__proto__:null,CategoryScale:AQ,LinearScale:jI,LogarithmicScale:BI,RadialLinearScale:$I,TimeScale:zI,TimeSeriesScale:HI}),sh=[s7,PK,IQ,QQ];var YQ=["myRadarChart"];xs.register(...sh);var pV=(()=>{let e=class e{constructor(){xs.register(...sh)}ngAfterViewInit(){this.myRadarChart&&this.myRadarChart.nativeElement&&this.createRadarChart()}createRadarChart(){let r={type:"radar",data:{labels:["Marketing","Risk assessment","Managing supplies","Accounting","Management","Logistics","Communication","Pitching"],datasets:[{label:"Skills developed",data:[20,12,28,18,26,24,13,20],fill:!0,backgroundColor:"rgba(221,99,255,0.2)",borderColor:"rgb(203,99,255)",pointBackgroundColor:"rgb(203,99,255)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(193,99,255)"}]},options:{scales:{r:{suggestedMin:0,suggestedMax:100}}}};new xs(this.myRadarChart.nativeElement,r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-homepage"]],viewQuery:function(r,s){if(r&1&&Of(YQ,5),r&2){let o;Fc(o=Lc())&&(s.myRadarChart=o.first)}},standalone:!0,features:[fe],decls:20,vars:0,consts:[[1,"d-flex","flex-wrap","justify-content-center"],[1,"m-2","col-md-4","text-center"],["id","carouselExampleIndicators",1,"carousel","slide","d-flex","flex-column","justify-content-between","align-content-center"],[1,"carousel-inner"],[1,"carousel-item","active"],["myRadarChart",""],[1,"text-center","m-2","col-xl-6","col-lg-7","col-md-12","col-sm-8"],[1,"card","m-2","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["href","#",1,"btn","btn-primary"],["role","progressbar","aria-label","Basic example","aria-valuenow","75","aria-valuemin","0","aria-valuemax","100",1,"progress"],[1,"progress-bar",2,"width","75%","background-color","#7b1fa2"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),V(5,"canvas",null,5),_()()()(),v(7,"div",6)(8,"div",7)(9,"div",8),E(10," \u{1F680} Challenge of the week \u{1F680} "),_(),v(11,"div",9)(12,"h5",10),E(13,"Challenge title"),_(),v(14,"p",11),E(15,"Description of the challenge."),_(),v(16,"a",12),E(17,"Start! \u{1F680}"),_()(),v(18,"div",13),V(19,"div",14),_()()()())},dependencies:[ge],styles:[".carousel[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{height:500px}.carousel[_ngcontent-%COMP%]   .carousel-indicators[_ngcontent-%COMP%]   [data-bs-target][_ngcontent-%COMP%]{border-top:10px solid #b00dfd}.card-header[_ngcontent-%COMP%]{background-color:#b00dfd;color:#fff}"]});let n=e;return n})();function XQ(n,e){n&1&&(v(0,"p",5),V(1,"i",6),E(2," Ticket opened"),_())}function ZQ(n,e){n&1&&(v(0,"p",5),V(1,"i",7),E(2," Ticket closed"),_())}function JQ(n,e){n&1&&(v(0,"p",5),V(1,"i",8),E(2," Ticket in process"),_())}function eY(n,e){if(n&1&&(v(0,"p",23),E(1),_()),n&2){let t=be().$implicit;k(1),we(t.customerName)}}function tY(n,e){n&1&&(v(0,"p",24),E(1,"Admin"),_())}function nY(n,e){if(n&1&&(v(0,"div",17)(1,"div",18),Re(2,eY,2,1,"p",19)(3,tY,2,0,"p",20),_(),v(4,"div",21),V(5,"div",22),_()()),n&2){let t=e.$implicit;k(2),X("ngIf",t.user==="user"),k(1),X("ngIf",t.user==="admin")}}function iY(n,e){if(n&1&&(v(0,"div",9)(1,"h2"),E(2,"Chat"),_(),v(3,"div",10),Re(4,nY,6,2,"div",11),_(),v(5,"form",12)(6,"div",13),V(7,"input",14),_(),v(8,"button",15),V(9,"i",16),E(10," Send"),_()()()),n&2){let t=be();k(4),X("ngForOf",t.rowData.messages)}}var gV=(()=>{let e=class e{constructor(i){this.dataService=i}ngOnInit(){this.rowData=this.dataService.getCurrentRowData(),console.log(this.rowData)}};e.\u0275fac=function(r){return new(r||e)(q(Hi))},e.\u0275cmp=he({type:e,selectors:[["app-ticketing-detail"]],standalone:!0,features:[fe],decls:31,vars:8,consts:[[1,"d-flex","m-5"],[1,"ticket-details"],[1,"detail-item"],["style","color: rebeccapurple",4,"ngIf"],["class","ticket-details d-flex flex-column justify-content-between",4,"ngIf"],[2,"color","rebeccapurple"],[1,"bi","bi-circle"],[1,"bi","bi-circle-fill"],[1,"bi","bi-circle-half"],[1,"ticket-details","d-flex","flex-column","justify-content-between"],[2,"overflow-y","scroll","height","55vh"],["class","card m-2",4,"ngFor","ngForOf"],[2,"text-align","end"],[1,"mb-3"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",2,"text-align","end"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-send"],[1,"card","m-2"],[1,"card-header"],["style","text-align: start; font-weight: bold",4,"ngIf"],["style","text-align: end; font-weight: bold",4,"ngIf"],[1,"card-body"],[1,"card-text"],[2,"text-align","start","font-weight","bold"],[2,"text-align","end","font-weight","bold"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"div",1)(2,"h2"),E(3,"Ticket Detail"),_(),v(4,"div",2)(5,"h3"),E(6,"Title:"),_(),v(7,"p"),E(8),_()(),v(9,"div",2)(10,"h3"),E(11,"Description:"),_(),v(12,"p"),E(13),_()(),v(14,"div",2)(15,"h3"),E(16,"Status:"),_(),Re(17,XQ,3,0,"p",3)(18,ZQ,3,0,"p",3)(19,JQ,3,0,"p",3),_(),v(20,"div",2)(21,"h3"),E(22,"Customer Name:"),_(),v(23,"p"),E(24),_()(),v(25,"div",2)(26,"h3"),E(27,"Customer Email:"),_(),v(28,"p"),E(29),_()()(),Re(30,iY,11,1,"div",4),_()),r&2&&(k(8),we(s.rowData.title),k(5),we(s.rowData.description),k(4),X("ngIf",s.rowData.status==="open"),k(1),X("ngIf",s.rowData.status==="closed"),k(1),X("ngIf",s.rowData.status==="processing"),k(5),we(s.rowData.customerName),k(5),we(s.rowData.customerEmail),k(1),X("ngIf",s.rowData.messages))},dependencies:[ge,Zt,zn],styles:[".ticket-details[_ngcontent-%COMP%]{width:40%;height:85vh;margin:0 auto;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 4px #0000001a}.ticket-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}.ticket-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{margin-bottom:15px}.ticket-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1em;color:#555;margin-bottom:5px}.ticket-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#666;margin-left:10px;word-break:break-word}"]});let n=e;return n})();xs.register(...sh);var mV=xs;function rY(n,e){if(n&1){let t=bt();v(0,"div")(1,"li")(2,"a",15),ne("click",function(){let r=qe(t),s=r.$implicit,o=r.index,a=be();return We(a.selectSubject(s.name,o))}),E(3),_()()()}if(n&2){let t=e.$implicit;k(3),we(t.name)}}function sY(n,e){if(n&1){let t=bt();v(0,"div")(1,"li")(2,"a",15),ne("click",function(){let r=qe(t),s=r.$implicit,o=r.index,a=be();return We(a.selectMonth(s.month,o))}),E(3),_()()()}if(n&2){let t=e.$implicit;k(3),we(t.month)}}var yV=(()=>{let e=class e{constructor(){this.marks=[{month:"January",subjects:[{name:"Maths",marks:[9,4,8,5,7,10,4,5,6,2]},{name:"Science",marks:[6,4,5,8,9,10]}]},{month:"February",subjects:[{name:"Maths",marks:[9,4]},{name:"Science",marks:[6,4,6]}]},{month:"March",subjects:[{name:"Maths",marks:[9,4,5,7]},{name:"Science",marks:[6,4,6,9,4]}]}],this.buttonTitle={subject:"Select Subject",month:"Select Month"},this.selectedSubject={month:{name:"",number:0},subject:{name:"",number:0},labels:[],dataSets:[],name:""},this.chart=[],this.destroyChart=!0}ngOnInit(){this.createChart()}createChart(){this.chart=new mV("canvas",{type:"line",data:{labels:this.selectedSubject.labels,datasets:[{label:"# of Votes",data:this.selectedSubject.dataSets,borderWidth:3,backgroundColor:"rgba(221,99,255,0.2)",borderColor:"rgba(221,99,255,0.2)"}]},options:{scales:{y:{beginAtZero:!0}}}})}selectMonth(i,r){this.buttonTitle.month=i,this.selectedSubject.labels=[],this.chart.destroy(),this.selectedSubject.month.name=i,this.selectedSubject.month.number=r,this.selectedSubject.dataSets=this.marks[this.selectedSubject.month.number].subjects[this.selectedSubject.subject.number].marks,this.selectedSubject.labels=this.createLabels(),this.createChart(),console.log("mese selezionato",this.selectedSubject.month),console.log("materia selezionata",this.selectedSubject.subject),console.log("-----------------",this.selectedSubject.dataSets)}selectSubject(i,r){this.buttonTitle.subject=i,this.selectedSubject.labels=[],this.chart.destroy(),this.selectedSubject.subject.name=i,this.selectedSubject.subject.number=r,this.selectedSubject.dataSets=this.marks[this.selectedSubject.month.number].subjects[this.selectedSubject.subject.number].marks,this.selectedSubject.labels=this.createLabels(),this.createChart(),console.log("mese selezionato",this.selectedSubject.month),console.log("materia selezionata",this.selectedSubject.subject),console.log(this.selectedSubject.dataSets)}createLabels(){for(let i=0;i<this.selectedSubject.dataSets.length;i++)this.selectedSubject.labels.push("Challenge"+(i+1));return this.selectedSubject.labels}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-profile"]],standalone:!0,features:[fe],decls:28,vars:5,consts:[[1,"container","mt-5","profile-container"],[1,"row"],[1,"col-md-4","mb-3"],[1,"card"],["src","","alt","Profile Picture",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"col-md-8"],[1,"d-flex"],[1,"dropdown","m-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["id","canvas"],[1,"dropdown-item",3,"click"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),V(4,"img",4),v(5,"div",5)(6,"h5",6),E(7,"Username"),_(),v(8,"p",7),E(9,"Short bio or description."),_()()()(),v(10,"div",8)(11,"div",3)(12,"div",5)(13,"h5",6),E(14,"Marks"),_(),v(15,"div",9)(16,"div",10)(17,"button",11),E(18),_(),v(19,"ul",12),Re(20,rY,4,1,"div",13),_()(),v(21,"div",10)(22,"button",11),E(23),_(),v(24,"ul",12),Re(25,sY,4,1,"div",13),_()()(),v(26,"canvas",14),E(27),_()()()()()()),r&2&&(k(18),vn(" ",s.buttonTitle.subject," "),k(2),X("ngForOf",s.marks[0].subjects),k(3),vn(" ",s.buttonTitle.month," "),k(2),X("ngForOf",s.marks),k(2),we(s.chart))},dependencies:[ge,Zt],styles:[".profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 4px 8px #0000001a}.profile-container[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{height:200px;object-fit:cover;border-top-left-radius:.5rem;border-top-right-radius:.5rem}.profile-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h5.card-title[_ngcontent-%COMP%]{color:#c163ff}.profile-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px}.profile-container[_ngcontent-%COMP%]   .activity-feed[_ngcontent-%COMP%]   .feed-item[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;padding:10px 0}.profile-container[_ngcontent-%COMP%]   .activity-feed[_ngcontent-%COMP%]   .feed-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.profile-container[_ngcontent-%COMP%]   .activity-feed[_ngcontent-%COMP%]   .feed-item[_ngcontent-%COMP%]   .feed-date[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.profile-container[_ngcontent-%COMP%]   .activity-feed[_ngcontent-%COMP%]   .feed-item[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]{margin-top:5px}"]});let n=e;return n})();function oY(n,e){if(n&1){let t=bt();v(0,"div",2)(1,"div",3),V(2,"img",4),v(3,"div",5)(4,"h5",6),E(5),_(),v(6,"p",7),E(7),_(),v(8,"button",8),ne("click",function(){let s=qe(t).$implicit,o=be();return We(o.openDetailPage(s))}),E(9,"Photographer link"),_()()()()}if(n&2){let t=e.$implicit;k(2),rr("src",t.src,Nr),k(3),we(t.name),k(2),we(t.description)}}var vV=(()=>{let e=class e{constructor(i,r){this.router=i,this.dataService=r,this.challenge=[{id:1,name:"Challenge 1",description:"Description 1",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:2,name:"Challenge 2",description:"Description 2",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:3,name:"Challenge 3",description:"Description 3",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:4,name:"Challenge 4",description:"Description 4",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:5,name:"Challenge 5",description:"Description 5",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:6,name:"Challenge 6",description:"Description 6",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}]}openDetailPage(i){this.dataService.setCurrentRowData(i),console.log(i),this.router.navigate(["/home/challenge/"+i.id])}};e.\u0275fac=function(r){return new(r||e)(q(Bt),q(Hi))},e.\u0275cmp=he({type:e,selectors:[["app-challenge"]],standalone:!0,features:[fe],decls:2,vars:1,consts:[[1,"challenge-list"],["class","photo-item",4,"ngFor","ngForOf"],[1,"photo-item"],[1,"card",2,"width","20rem"],["alt","photo",1,"card-img-top",2,"object-fit","cover","height","200px","width","100%",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary",3,"click"]],template:function(r,s){r&1&&(v(0,"div",0),Re(1,oY,10,3,"div",1),_()),r&2&&(k(1),X("ngForOf",s.challenge))},dependencies:[ge,Zt],styles:[".challenge-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;overflow-y:scroll;height:100vh}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(241,241,241,0);border-radius:6px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#7b1fa2,#4a148c);border-radius:6px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#9c27b0,#6a1b9a)}.challenge-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{margin:20px}.challenge-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;height:auto}"]});let n=e;return n})();var _V=(()=>{let e=class e{constructor(i){this.dataService=i}ngOnInit(){this.rowData=this.dataService.getCurrentRowData(),console.log(this.rowData)}};e.\u0275fac=function(r){return new(r||e)(q(Hi))},e.\u0275cmp=he({type:e,selectors:[["app-challenge-detail"]],standalone:!0,features:[fe],decls:1,vars:0,consts:[[1,"d-flex","m-5"]],template:function(r,s){r&1&&V(0,"div",0)},dependencies:[ge]});let n=e;return n})();var bV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-privacy-policy"]],standalone:!0,features:[fe],decls:2,vars:0,template:function(r,s){r&1&&(v(0,"p"),E(1,"privacy-policy works!"),_())},dependencies:[ge]});let n=e;return n})();var wV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-settings"]],standalone:!0,features:[fe],decls:2,vars:0,template:function(r,s){r&1&&(v(0,"p"),E(1,"settings works!"),_())},dependencies:[ge]});let n=e;return n})();function aY(n,e){if(n&1){let t=bt();v(0,"tr")(1,"td"),E(2),_(),v(3,"td"),E(4),_(),v(5,"td"),E(6),_(),v(7,"td"),E(8),_(),v(9,"td")(10,"button",30),V(11,"i",31),_(),v(12,"button",32),ne("click",function(){let s=qe(t).$implicit,o=be();return We(o.selectUidToDelete(s.userUID))}),V(13,"i",33),_()()()}if(n&2){let t=e.$implicit;k(2),we(t.displayName),k(2),we(t.email),k(2),we(t.admin===!1?"user":"admin"),k(2),we(t.tickets.length)}}var EV=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.afAuth=r,this.authService=s,this.isModalOpen=!1}ngOnInit(){this.authService.getAllUsers().subscribe(i=>{this.users=i,console.log(this.users)})}addUser(){this.displayName&&this.email&&this.password?this.authService.createAccount(this.email,this.password,this.displayName):console.error("Display name, email, and password are required.")}selectUidToDelete(i){this.selectedUid=i,console.log(this.selectedUid)}deleteUser(){this.authService.deleteUserById(this.selectedUid)}};e.\u0275fac=function(r){return new(r||e)(q(Bt),q(Go),q(wn))},e.\u0275cmp=he({type:e,selectors:[["app-user-management"]],standalone:!0,features:[fe],decls:90,vars:9,consts:[[1,"container"],[1,"text-center"],[1,"mt-4","d-flex","justify-content-end"],["type","button","data-bs-toggle","modal","data-bs-target","#addUser",1,"btn","btn-primary"],[1,"my-4"],[1,"table","table-bordered"],["scope","col"],[4,"ngFor","ngForOf"],["id","addUser","tabindex","-1","aria-labelledby","addUserModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addUserModal",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"modal-body"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","submit",1,"login-button",3,"disabled"],["id","deleteModal","tabindex","-1","aria-labelledby","deleteModalLabel","aria-hidden","true",1,"modal","fade"],["id","deleteModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal",1,"btn","btn-primary",3,"click"],[1,"btn","btn-primary","me-2","disabled"],[1,"bi","bi-pencil-square"],["type","button","data-bs-toggle","modal","data-bs-target","#deleteModal",1,"btn","btn-primary",3,"click"],[1,"bi","bi-trash3"]],template:function(r,s){if(r&1&&(v(0,"div",0)(1,"h1",1),E(2,"Gestione Utenti"),_(),v(3,"div",2)(4,"button",3),E(5,"Aggiungi utente"),_()(),v(6,"div",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th",6),E(11,"Name"),_(),v(12,"th",6),E(13,"Email"),_(),v(14,"th",6),E(15,"Role"),_(),v(16,"th",6),E(17,"Tickets"),_(),v(18,"th",6),E(19,"Actions"),_()()(),v(20,"tbody"),Re(21,aY,14,4,"tr",7),_()()(),v(22,"div",8)(23,"div",9)(24,"div",10)(25,"div",11)(26,"h1",12),E(27,"Aggiungi Utente"),_(),V(28,"button",13),_(),v(29,"form",14,15),ne("ngSubmit",function(){return s.addUser()}),v(31,"div",16)(32,"div",17)(33,"label",18),E(34,"Name:"),_(),v(35,"input",19),ne("ngModelChange",function(a){return s.displayName=a}),_()(),v(36,"div",17)(37,"label",20),E(38,"Email:"),_(),v(39,"input",21),ne("ngModelChange",function(a){return s.email=a}),_()(),v(40,"div",17)(41,"label",22),E(42,"Password:"),_(),v(43,"input",23),ne("ngModelChange",function(a){return s.password=a}),_()()(),v(44,"div",24)(45,"button",25),E(46,"Close"),_(),v(47,"button",26),E(48,"Register"),_()()()()()(),v(49,"div",8)(50,"div",9)(51,"div",10)(52,"div",11)(53,"h1",12),E(54,"Aggiungi Utente"),_(),V(55,"button",13),_(),v(56,"form",14,15),ne("ngSubmit",function(){return s.addUser()}),v(58,"div",16)(59,"div",17)(60,"label",18),E(61,"Name:"),_(),v(62,"input",19),ne("ngModelChange",function(a){return s.displayName=a}),_()(),v(63,"div",17)(64,"label",20),E(65,"Email:"),_(),v(66,"input",21),ne("ngModelChange",function(a){return s.email=a}),_()(),v(67,"div",17)(68,"label",22),E(69,"Password:"),_(),v(70,"input",23),ne("ngModelChange",function(a){return s.password=a}),_()()(),v(71,"div",24)(72,"button",25),E(73,"Close"),_(),v(74,"button",26),E(75,"Register"),_()()()()()(),v(76,"div",27)(77,"div",9)(78,"div",10)(79,"div",11)(80,"h1",28),E(81,"Delete User"),_(),V(82,"button",13),_(),v(83,"div",16),E(84," Are you sure you want to delete the user ? "),_(),v(85,"div",24)(86,"button",25),E(87,"Close"),_(),v(88,"button",29),ne("click",function(){return s.deleteUser()}),E(89,"Delete"),_()()()()()()),r&2){let o=kf(30);k(21),X("ngForOf",s.users),k(14),X("ngModel",s.displayName),k(4),X("ngModel",s.email),k(4),X("ngModel",s.password),k(4),X("disabled",!o.valid),k(15),X("ngModel",s.displayName),k(4),X("ngModel",s.email),k(4),X("ngModel",s.password),k(4),X("disabled",!o.valid)}},dependencies:[ge,Zt,Ja,Lp,Kr,Za,Np,Cu,po,Eu],styles:[".login-button[_ngcontent-%COMP%]{background-color:#4a148c;color:#fff;padding:6px 12px;font-size:1.1rem;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.login-button[_ngcontent-%COMP%]:hover{background-color:#7b1fa2}"]});let n=e;return n})();function lY(n,e){if(n&1){let t=bt();v(0,"div",18)(1,"div",19),V(2,"img",20),v(3,"div",21)(4,"h5",22),E(5),_(),v(6,"p",23),E(7),_(),v(8,"div",24)(9,"button",25),ne("click",function(){let s=qe(t).$implicit,o=be();return We(o.openDetailPage(s))}),E(10,"Visualizza"),_(),v(11,"button",26),E(12,"Modifica"),_(),v(13,"button",27),E(14,"Rimuovi"),_()()()()()}if(n&2){let t=e.$implicit;k(2),rr("src",t.src,Nr),k(3),we(t.name),k(2),we(t.description)}}var CV=(()=>{let e=class e{constructor(i,r){this.router=i,this.dataService=r,this.challenge=[{id:1,name:"Challenge 1",description:"Description 1",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:2,name:"Challenge 2",description:"Description 2",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:3,name:"Challenge 3",description:"Description 3",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:4,name:"Challenge 4",description:"Description 4",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:5,name:"Challenge 5",description:"Description 5",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:6,name:"Challenge 6",description:"Description 6",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}]}openDetailPage(i){this.dataService.setCurrentRowData(i),console.log(i),this.router.navigate(["/home/challenge/"+i.id])}};e.\u0275fac=function(r){return new(r||e)(q(Bt),q(Hi))},e.\u0275cmp=he({type:e,selectors:[["app-challenge-management"]],standalone:!0,features:[fe],decls:36,vars:1,consts:[[1,"container"],[1,"text-center"],[1,"mt-5","justify-content-center","d-flex"],["type","button","data-bs-toggle","modal","data-bs-target","#addChallenge",1,"btn","btn-primary"],[1,"challenge-list"],["class","photo-item",4,"ngFor","ngForOf"],["id","addChallenge","tabindex","-1","aria-labelledby","addChallengeModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","addChallengeModal",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"btn","btn-primary"],["id","editChallenge","tabindex","-1","aria-labelledby","editChallengeModal","aria-hidden","true",1,"modal","fade"],["id","editChallengeModal",1,"modal-title","fs-5"],[1,"photo-item"],[1,"card",2,"width","20rem"],["alt","photo",1,"card-img-top",2,"object-fit","cover","height","200px","width","100%",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"justify-content-center","d-flex"],[1,"btn","btn-primary","me-2",3,"click"],["type","button","data-bs-toggle","modal","data-bs-target","#editChallenge",1,"btn","btn-primary","me-2"],[1,"btn","btn-primary"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"h1",1),E(2,"Gestione Challenges"),_(),v(3,"div",2)(4,"button",3),E(5,"Aggiungi Challenge"),_()(),v(6,"div",4),Re(7,lY,15,3,"div",5),_(),v(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"h1",10),E(13,"Aggiungi nuova Challenge"),_(),V(14,"button",11),_(),v(15,"div",12),E(16," ... "),_(),v(17,"div",13)(18,"button",14),E(19,"Close"),_(),v(20,"button",15),E(21,"Save changes"),_()()()()(),v(22,"div",16)(23,"div",7)(24,"div",8)(25,"div",9)(26,"h1",17),E(27,"Modifica Challenge"),_(),V(28,"button",11),_(),v(29,"div",12),E(30," ... "),_(),v(31,"div",13)(32,"button",14),E(33,"Close"),_(),v(34,"button",15),E(35,"Save changes"),_()()()()()()),r&2&&(k(7),X("ngForOf",s.challenge))},dependencies:[ge,Zt],styles:[".challenge-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;overflow-y:scroll;height:100vh}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(241,241,241,0);border-radius:6px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#7b1fa2,#4a148c);border-radius:6px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#9c27b0,#6a1b9a)}.challenge-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{margin:20px}.challenge-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;height:auto}"]});let n=e;return n})();var DV=(()=>{let e=class e{constructor(i,r){this.authService=i,this.router=r,this.canActivate=()=>this.authService.isLoggedIn().pipe(ni(1),J(s=>s?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(r){return new(r||e)(O(wn),O(Bt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var IV=[{path:"",component:f1},{path:"login",component:WN},{path:"home",component:KN,canActivate:[DV],children:[{path:"sidebar",component:Vm},{path:"settings",component:wV},{path:"homepage",component:pV},{path:"profile",component:yV},{path:"challenge",component:vV},{path:"challenge/:id",component:_V},{path:"tutorial",component:YN},{path:"ticketing",component:ZN},{path:"ticketing/:id",component:gV},{path:"admin",component:JN},{path:"admin/user-management",component:EV},{path:"admin/challenge-management",component:CV}]},{path:"privacy",component:bV}];var SV={providers:[kM(IV),Db(),g_([jN.initializeApp(OM.firebase),BN]),Db()]};var TV=(()=>{let e=class e{constructor(){this.title="frontend"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=he({type:e,selectors:[["app-root"]],standalone:!0,features:[fe],decls:1,vars:0,template:function(r,s){r&1&&V(0,"router-outlet")},dependencies:[ge,ou,Hf]});let n=e;return n})();ZA(TV,SV).catch(n=>console.error(n));
