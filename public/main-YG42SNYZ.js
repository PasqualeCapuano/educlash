import{a as $,b as Te,c as by,d as x,e as zI,f as rh,g as HI,h as qI,i as WI,j as wy,k as GI,l as sh,m as KI,n as oh,o as QI,p as YI,q as et,r as Ps,s as fi,t as ah,u as al,v as XI,w as ZI,x as Cr,y as cn}from"./chunk-OHSRKTDT.js";var JI=null;var Ey=1;function wn(n){let e=JI;return JI=n,e}var eS={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function AV(n){if(!(Iy(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ey)){if(!n.producerMustRecompute(n)&&!Cy(n)){n.dirty=!1,n.lastCleanEpoch=Ey;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ey}}function tS(n){return n&&(n.nextProducerIndex=0),wn(n)}function nS(n,e){if(wn(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Iy(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Dy(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Cy(n){ch(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(AV(t),i!==t.version))return!0}return!1}function iS(n){if(ch(n),Iy(n))for(let e=0;e<n.producerNode.length;e++)Dy(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Dy(n,e){if(MV(n),ch(n),n.liveConsumerNode.length===1)for(let i=0;i<n.producerNode.length;i++)Dy(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];ch(r),r.producerIndexOfThis[i]=e}}function Iy(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function ch(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function MV(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function PV(){throw new Error}var RV=PV;function rS(n){RV=n}function ie(n){return typeof n=="function"}function na(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var lh=na(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Rs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var pt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(ie(i))try{i()}catch(s){e=s instanceof lh?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{sS(s)}catch(o){e=e??[],o instanceof lh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new lh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)sS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Rs(t,e)}remove(e){let{_finalizers:t}=this;t&&Rs(t,e),e instanceof n&&e._removeParent(this)}};pt.EMPTY=(()=>{let n=new pt;return n.closed=!0,n})();var Sy=pt.EMPTY;function uh(n){return n instanceof pt||n&&"closed"in n&&ie(n.remove)&&ie(n.add)&&ie(n.unsubscribe)}function sS(n){ie(n)?n():n.unsubscribe()}var Gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ia={setTimeout(n,e,...t){let{delegate:i}=ia;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ia;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function dh(n){ia.setTimeout(()=>{let{onUnhandledError:e}=Gn;if(e)e(n);else throw n})}function cl(){}var oS=(()=>Ty("C",void 0,void 0))();function aS(n){return Ty("E",void 0,n)}function cS(n){return Ty("N",n,void 0)}function Ty(n,e,t){return{kind:n,value:e,error:t}}var ks=null;function ra(n){if(Gn.useDeprecatedSynchronousErrorHandling){let e=!ks;if(e&&(ks={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=ks;if(ks=null,t)throw i}}else n()}function lS(n){Gn.useDeprecatedSynchronousErrorHandling&&ks&&(ks.errorThrown=!0,ks.error=n)}var Os=class extends pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,uh(e)&&e.add(this)):this.destination=NV}static create(e,t,i){return new Wi(e,t,i)}next(e){this.isStopped?Ay(cS(e),this):this._next(e)}error(e){this.isStopped?Ay(aS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ay(oS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kV=Function.prototype.bind;function xy(n,e){return kV.call(n,e)}var My=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){hh(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){hh(i)}else hh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){hh(t)}}},Wi=class extends Os{constructor(e,t,i){super();let r;if(ie(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Gn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&xy(e.next,s),error:e.error&&xy(e.error,s),complete:e.complete&&xy(e.complete,s)}):r=e}this.destination=new My(r)}};function hh(n){Gn.useDeprecatedSynchronousErrorHandling?lS(n):dh(n)}function OV(n){throw n}function Ay(n,e){let{onStoppedNotification:t}=Gn;t&&ia.setTimeout(()=>t(n,e))}var NV={closed:!0,next:cl,error:OV,complete:cl};var sa=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function Jt(n){return n}function Py(...n){return Ry(n)}function Ry(n){return n.length===0?Jt:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var oe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let s=LV(t)?t:new Wi(t,i,r);return ra(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=uS(i),new i((r,s)=>{let o=new Wi({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[sa](){return this}pipe(...t){return Ry(t)(this)}toPromise(t){return t=uS(t),new t((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function uS(n){var e;return(e=n??Gn.Promise)!==null&&e!==void 0?e:Promise}function FV(n){return n&&ie(n.next)&&ie(n.error)&&ie(n.complete)}function LV(n){return n&&n instanceof Os||FV(n)&&uh(n)}function ky(n){return ie(n?.lift)}function ge(n){return e=>{if(ky(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,i,r){return new Oy(n,e,t,i,r)}var Oy=class extends Os{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function oa(){return ge((n,e)=>{let t=null;n._refCount++;let i=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var aa=class extends oe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ky(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new pt;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=pt.EMPTY)}return e}refCount(){return oa()(this)}};var dS=na(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var gt=(()=>{class n extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new fh(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new dS}next(t){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:s}=this;return i||r?Sy:(this.currentObservers=null,s.push(t),new pt(()=>{this.currentObservers=null,Rs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){let t=new oe;return t.source=this,t}}return n.create=(e,t)=>new fh(e,t),n})(),fh=class extends gt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:Sy}};var kt=class extends gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var ll={now(){return(ll.delegate||Date).now()},delegate:void 0};var ph=class extends gt{constructor(e=1/0,t=1/0,i=ll){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){let o=t.now(),a=0;for(let c=1;c<i.length&&i[c]<=o;c+=2)a=c;a&&i.splice(0,a+1)}}};var gh=class extends pt{constructor(e,t){super()}schedule(e,t=0){return this}};var ul={setInterval(n,e,...t){let{delegate:i}=ul;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ul;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ca=class extends gh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return ul.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&ul.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Rs(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var la=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};la.now=ll.now;var ua=class extends la{constructor(e,t=la.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var dl=new ua(ca);var mh=class extends ca{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,t,i):(e.flush(this),0)}};var yh=class extends ua{};var Ny=new yh(mh);var ln=new oe(n=>n.complete());function hS(n){return n&&ie(n.schedule)}function Fy(n){return n[n.length-1]}function vh(n){return ie(Fy(n))?n.pop():void 0}function pi(n){return hS(Fy(n))?n.pop():void 0}function fS(n,e){return typeof Fy(n)=="number"?n.pop():e}var _h=n=>n&&typeof n.length=="number"&&typeof n!="function";function bh(n){return ie(n?.then)}function wh(n){return ie(n[sa])}function Eh(n){return Symbol.asyncIterator&&ie(n?.[Symbol.asyncIterator])}function Ch(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function VV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Dh=VV();function Ih(n){return ie(n?.[Dh])}function Sh(n){return HI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield rh(t.read());if(r)return yield rh(void 0);yield yield rh(i)}}finally{t.releaseLock()}})}function Th(n){return ie(n?.getReader)}function Qe(n){if(n instanceof oe)return n;if(n!=null){if(wh(n))return jV(n);if(_h(n))return BV(n);if(bh(n))return UV(n);if(Eh(n))return pS(n);if(Ih(n))return $V(n);if(Th(n))return zV(n)}throw Ch(n)}function jV(n){return new oe(e=>{let t=n[sa]();if(ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BV(n){return new oe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function UV(n){return new oe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,dh)})}function $V(n){return new oe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function pS(n){return new oe(e=>{HV(n,e).catch(t=>e.error(t))})}function zV(n){return pS(Sh(n))}function HV(n,e){var t,i,r,s;return zI(this,void 0,void 0,function*(){try{for(t=qI(n);i=yield t.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})}function un(n,e,t,i=0,r=!1){let s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Pn(n,e=0){return ge((t,i)=>{t.subscribe(me(i,r=>un(i,n,()=>i.next(r),e),()=>un(i,n,()=>i.complete(),e),r=>un(i,n,()=>i.error(r),e)))})}function Kn(n,e=0){return ge((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function gS(n,e){return Qe(n).pipe(Kn(e),Pn(e))}function mS(n,e){return Qe(n).pipe(Kn(e),Pn(e))}function yS(n,e){return new oe(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function vS(n,e){return new oe(t=>{let i;return un(t,e,()=>{i=n[Dh](),un(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){t.error(o);return}s?t.complete():t.next(r)},0,!0)}),()=>ie(i?.return)&&i.return()})}function xh(n,e){if(!n)throw new Error("Iterable cannot be null");return new oe(t=>{un(t,e,()=>{let i=n[Symbol.asyncIterator]();un(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function _S(n,e){return xh(Sh(n),e)}function bS(n,e){if(n!=null){if(wh(n))return gS(n,e);if(_h(n))return yS(n,e);if(bh(n))return mS(n,e);if(Eh(n))return xh(n,e);if(Ih(n))return vS(n,e);if(Th(n))return _S(n,e)}throw Ch(n)}function xe(n,e){return e?bS(n,e):Qe(n)}function X(...n){let e=pi(n);return xe(n,e)}function da(n,e){let t=ie(n)?n:()=>n,i=r=>r.error(t());return new oe(e?r=>e.schedule(i,0,r):i)}function Ly(n){return!!n&&(n instanceof oe||ie(n.lift)&&ie(n.subscribe))}var Gi=na(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Z(n,e){return ge((t,i)=>{let r=0;t.subscribe(me(i,s=>{i.next(n.call(e,s,r++))}))})}var{isArray:qV}=Array;function WV(n,e){return qV(e)?n(...e):n(e)}function Ah(n){return Z(e=>WV(n,e))}var{isArray:GV}=Array,{getPrototypeOf:KV,prototype:QV,keys:YV}=Object;function Mh(n){if(n.length===1){let e=n[0];if(GV(e))return{args:e,keys:null};if(XV(e)){let t=YV(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function XV(n){return n&&typeof n=="object"&&KV(n)===QV}function Ph(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Rh(...n){let e=pi(n),t=vh(n),{args:i,keys:r}=Mh(n);if(i.length===0)return xe([],e);let s=new oe(ZV(i,e,r?o=>Ph(r,o):Jt));return t?s.pipe(Ah(t)):s}function ZV(n,e,t=Jt){return i=>{wS(e,()=>{let{length:r}=n,s=new Array(r),o=r,a=r;for(let c=0;c<r;c++)wS(e,()=>{let l=xe(n[c],e),u=!1;l.subscribe(me(i,d=>{s[c]=d,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function wS(n,e,t){n?un(t,n,e):e()}function ES(n,e,t,i,r,s,o,a){let c=[],l=0,u=0,d=!1,h=()=>{d&&!c.length&&!l&&e.complete()},f=g=>l<i?p(g):c.push(g),p=g=>{s&&e.next(g),l++;let m=!1;Qe(t(g,u++)).subscribe(me(e,y=>{r?.(y),s?f(y):e.next(y)},()=>{m=!0},void 0,()=>{if(m)try{for(l--;c.length&&l<i;){let y=c.shift();o?un(e,o,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return n.subscribe(me(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Ct(n,e,t=1/0){return ie(e)?Ct((i,r)=>Z((s,o)=>e(i,s,r,o))(Qe(n(i,r))),t):(typeof e=="number"&&(t=e),ge((i,r)=>ES(i,r,n,t)))}function hl(n=1/0){return Ct(Jt,n)}function CS(){return hl(1)}function ha(...n){return CS()(xe(n,pi(n)))}function kh(n){return new oe(e=>{Qe(n()).subscribe(e)})}function Vy(...n){let e=vh(n),{args:t,keys:i}=Mh(n),r=new oe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let u=0;u<o;u++){let d=!1;Qe(t[u]).subscribe(me(s,h=>{d||(d=!0,l--),a[u]=h},()=>c--,void 0,()=>{(!c||!d)&&(l||s.next(i?Ph(i,a):a),s.complete())}))}});return e?r.pipe(Ah(e)):r}function fl(...n){let e=pi(n),t=fS(n,1/0),i=n;return i.length?i.length===1?Qe(i[0]):hl(t)(xe(i,e)):ln}function Tt(n,e){return ge((t,i)=>{let r=0;t.subscribe(me(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Dr(n){return ge((e,t)=>{let i=null,r=!1,s;i=e.subscribe(me(t,void 0,void 0,o=>{s=Qe(n(o,Dr(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function DS(n,e,t,i,r){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(me(o,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),i&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function Ir(n,e){return ie(e)?Ct(n,e,1):Ct(n,1)}function Sr(n){return ge((e,t)=>{let i=!1;e.subscribe(me(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function Qn(n){return n<=0?()=>ln:ge((e,t)=>{let i=0;e.subscribe(me(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function jy(n){return Z(()=>n)}function pl(n,e=Jt){return n=n??JV,ge((t,i)=>{let r,s=!0;t.subscribe(me(i,o=>{let a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function JV(n,e){return n===e}function Oh(n=e2){return ge((e,t)=>{let i=!1;e.subscribe(me(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function e2(){return new Gi}function Tr(n){return ge((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Rn(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Tt((r,s)=>n(r,s,i)):Jt,Qn(1),t?Sr(e):Oh(()=>new Gi))}function fa(n){return n<=0?()=>ln:ge((e,t)=>{let i=[];e.subscribe(me(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function By(n,e){let t=arguments.length>=2;return i=>i.pipe(n?Tt((r,s)=>n(r,s,i)):Jt,fa(1),t?Sr(e):Oh(()=>new Gi))}function gl(){return ge((n,e)=>{let t,i=!1;n.subscribe(me(e,r=>{let s=t;t=r,i&&e.next([s,r]),i=!0}))})}function Ns(n,e){return ge(DS(n,e,arguments.length>=2,!0))}function pa(n={}){let{connector:e=()=>new gt,resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,c,l=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},f=()=>{h(),o=c=void 0,u=d=!1},p=()=>{let g=o;f(),g?.unsubscribe()};return ge((g,m)=>{l++,!d&&!u&&h();let y=c=c??e();m.add(()=>{l--,l===0&&!d&&!u&&(a=Uy(p,r))}),y.subscribe(m),!o&&l>0&&(o=new Wi({next:v=>y.next(v),error:v=>{d=!0,h(),a=Uy(f,t,v),y.error(v)},complete:()=>{u=!0,h(),a=Uy(f,i),y.complete()}}),Qe(g).subscribe(o))})(s)}}function Uy(n,e,...t){if(e===!0){n();return}if(e===!1)return;let i=new Wi({next:()=>{i.unsubscribe(),n()}});return Qe(e(...t)).subscribe(i)}function Nh(n,e,t){let i,r=!1;return n&&typeof n=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n:i=n??1/0,pa({connector:()=>new ph(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Fs(...n){let e=pi(n);return ge((t,i)=>{(e?ha(n,t,e):ha(n,t)).subscribe(i)})}function Ye(n,e){return ge((t,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();t.subscribe(me(i,c=>{r?.unsubscribe();let l=0,u=s++;Qe(n(c,u)).subscribe(r=me(i,d=>i.next(e?e(c,d,u,l++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Fh(n,e){return ie(e)?Ye(()=>n,e):Ye(()=>n)}function $y(n){return ge((e,t)=>{Qe(n).subscribe(me(t,()=>t.complete(),cl)),!t.closed&&e.subscribe(t)})}function lt(n,e,t){let i=ie(n)||e||t?{next:n,error:e,complete:t}:n;return i?ge((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(me(s,c=>{var l;(l=i.next)===null||l===void 0||l.call(i,c),s.next(c)},()=>{var c;a=!1,(c=i.complete)===null||c===void 0||c.call(i),s.complete()},c=>{var l;a=!1,(l=i.error)===null||l===void 0||l.call(i,c),s.error(c)},()=>{var c,l;a&&((c=i.unsubscribe)===null||c===void 0||c.call(i)),(l=i.finalize)===null||l===void 0||l.call(i)}))}):Jt}function Be(n){for(let e in n)if(n[e]===Be)return e;throw Error("Could not find renamed property on target object.")}function Lh(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ht(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ht).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function IS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var t2=Be({__forward_ref__:Be});function Zs(n){return n.__forward_ref__=Zs,n.toString=function(){return Ht(this())},n}function en(n){return lT(n)?n():n}function lT(n){return typeof n=="function"&&n.hasOwnProperty(t2)&&n.__forward_ref__===Zs}function uT(n){return n&&!!n.\u0275providers}var dT="https://g.co/ng/security#xss",O=class extends Error{constructor(e,t){super(gf(e,t)),this.code=e}};function gf(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var n2=Be({\u0275cmp:Be}),i2=Be({\u0275dir:Be}),r2=Be({\u0275pipe:Be}),s2=Be({\u0275mod:Be}),Kh=Be({\u0275fac:Be}),ml=Be({__NG_ELEMENT_ID__:Be}),SS=Be({__NG_ENV_ID__:Be});function mf(n){return typeof n=="string"?n:n==null?"":String(n)}function o2(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():mf(n)}function a2(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new O(-200,`Circular dependency in DI detected for ${n}${t}`)}function Yv(n,e){let t=e?` in ${e}`:"";throw new O(-201,!1)}function c2(n,e){n==null&&l2(e,n,null,"!=")}function l2(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(i==null?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function qt(n){return{providers:n.providers||[],imports:n.imports||[]}}function yf(n){return TS(n,fT)||TS(n,pT)}function hT(n){return yf(n)!==null}function TS(n,e){return n.hasOwnProperty(e)?n[e]:null}function u2(n){let e=n&&(n[fT]||n[pT]);return e||null}function xS(n){return n&&(n.hasOwnProperty(AS)||n.hasOwnProperty(d2))?n[AS]:null}var fT=Be({\u0275prov:Be}),AS=Be({\u0275inj:Be}),pT=Be({ngInjectableDef:Be}),d2=Be({ngInjectorDef:Be}),be=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(be||{}),rv;function h2(){return rv}function kn(n){let e=rv;return rv=n,e}function gT(n,e,t){let i=yf(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&be.Optional)return null;if(e!==void 0)return e;Yv(Ht(n),"Injector")}var Ls=globalThis;var q=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var f2={},_l=f2,sv="__NG_DI_FLAG__",Qh="ngTempTokenPath",p2="ngTokenPath",g2=/\n/gm,m2="\u0275",MS="__source",yl;function ga(n){let e=yl;return yl=n,e}function y2(n,e=be.Default){if(yl===void 0)throw new O(-203,!1);return yl===null?gT(n,void 0,e):yl.get(n,e&be.Optional?null:void 0,e)}function k(n,e=be.Default){return(h2()||y2)(en(n),e)}function H(n,e=be.Default){return k(n,vf(e))}function vf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ov(n){let e=[];for(let t=0;t<n.length;t++){let i=en(n[t]);if(Array.isArray(i)){if(i.length===0)throw new O(900,!1);let r,s=be.Default;for(let o=0;o<i.length;o++){let a=i[o],c=v2(a);typeof c=="number"?c===-1?r=a.token:s|=c:r=a}e.push(k(r,s))}else e.push(k(i))}return e}function mT(n,e){return n[sv]=e,n.prototype[sv]=e,n}function v2(n){return n[sv]}function _2(n,e,t,i){let r=n[Qh];throw e[MS]&&r.unshift(e[MS]),n.message=b2(`
`+n.message,r,t,i),n[p2]=r,n[Qh]=null,n}function b2(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==m2?n.slice(2):n;let r=Ht(e);if(Array.isArray(e))r=e.map(Ht).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ht(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(g2,`
  `)}`}function Sl(n){return{toString:n}.toString()}var yT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(yT||{}),vi=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(vi||{}),ba={},On=[];function vT(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}function av(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{let s=r,o=t[++i];w2(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function _T(n){return n===3||n===4||n===6}function w2(n){return n.charCodeAt(0)===64}function bl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?PS(n,t,r,null,e[++i]):PS(n,t,r,null,null))}}return n}function PS(n,e,t,i,r){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[s+1]=r);return}else if(i===n[s+1]){n[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i),r!==null&&n.splice(s++,0,r)}var bT="ng-template";function E2(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if(typeof s=="string"&&r){let o=n[i++];if(t&&s==="class"&&vT(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;i<n.length&&typeof(s=n[i++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(r=!1)}return!1}function wT(n){return n.type===4&&n.value!==bT}function C2(n,e,t){let i=n.type===4&&!t?bT:n.value;return e===i}function D2(n,e,t){let i=4,r=n.attrs||[],s=T2(r),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Yn(i)&&!Yn(c))return!1;if(o&&Yn(c))continue;o=!1,i=c|i&1;continue}if(!o)if(i&4){if(i=2|i&1,c!==""&&!C2(n,c,t)||c===""&&e.length===1){if(Yn(i))return!1;o=!0}}else{let l=i&8?c:e[++a];if(i&8&&n.attrs!==null){if(!E2(n.attrs,l,t)){if(Yn(i))return!1;o=!0}continue}let u=i&8?"class":c,d=I2(u,r,wT(n),t);if(d===-1){if(Yn(i))return!1;o=!0;continue}if(l!==""){let h;d>s?h="":h=r[d+1].toLowerCase();let f=i&8?h:null;if(f&&vT(f,l,0)!==-1||i&2&&l!==h){if(Yn(i))return!1;o=!0}}}}return Yn(i)||o}function Yn(n){return(n&1)===0}function I2(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){let o=e[r];if(o===n)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return x2(e,n)}function S2(n,e,t=!1){for(let i=0;i<e.length;i++)if(D2(n,e[i],t))return!0;return!1}function T2(n){for(let e=0;e<n.length;e++){let t=n[e];if(_T(t))return e}return n.length}function x2(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function RS(n,e){return n?":not("+e.trim()+")":e}function A2(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(i&2){let a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!Yn(o)&&(e+=RS(s,r),r=""),i=o,s=s||!Yn(i);t++}return r!==""&&(e+=RS(s,r)),e}function M2(n){return n.map(A2).join(",")}function P2(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let s=n[i];if(typeof s=="string")r===2?s!==""&&e.push(s,n[++i]):r===8&&t.push(s);else{if(!Yn(r))break;r=s}i++}return{attrs:e,classes:t}}function ae(n){return Sl(()=>{let e=ST(n),t=Te($({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===yT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||vi.Emulated,styles:n.styles||On,_:null,schemas:n.schemas||null,tView:null,id:""});TT(t);let i=n.dependencies;return t.directiveDefs=OS(i,!1),t.pipeDefs=OS(i,!0),t.id=O2(t),t})}function R2(n){return js(n)||ET(n)}function k2(n){return n!==null}function Wt(n){return Sl(()=>({type:n.type,bootstrap:n.bootstrap||On,declarations:n.declarations||On,imports:n.imports||On,exports:n.exports||On,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kS(n,e){if(n==null)return ba;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function xt(n){return Sl(()=>{let e=ST(n);return TT(e),e})}function Xv(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function js(n){return n[n2]||null}function ET(n){return n[i2]||null}function CT(n){return n[r2]||null}function DT(n){let e=js(n)||ET(n)||CT(n);return e!==null?e.standalone:!1}function IT(n,e){let t=n[s2]||null;if(!t&&e===!0)throw new Error(`Type ${Ht(n)} does not have '\u0275mod' property.`);return t}function ST(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ba,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||On,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kS(n.inputs,e),outputs:kS(n.outputs),debugInfo:null}}function TT(n){n.features?.forEach(e=>e(n))}function OS(n,e){if(!n)return null;let t=e?CT:R2;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(k2)}function O2(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Xi=0,ye=1,ne=2,mt=3,Xn=4,ei=5,cv=6,wl=7,Nn=8,wa=9,Ea=10,Dt=11,El=12,NS=13,Ta=14,_i=15,Tl=16,ma=17,yi=18,_f=19,xT=20,vl=21,zy=22,Bs=23,Zn=25,AT=1;var Us=7,Yh=8,Ca=9,En=10,Da=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n[n.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",n}(Da||{});function xr(n){return Array.isArray(n)&&typeof n[AT]=="object"}function Jn(n){return Array.isArray(n)&&n[AT]===!0}function MT(n){return(n.flags&4)!==0}function bf(n){return n.componentOffset>-1}function Zv(n){return(n.flags&1)===1}function Ar(n){return!!n.template}function N2(n){return(n[ne]&512)!==0}function $s(n,e){let t=n.hasOwnProperty(Kh);return t?n[Kh]:null}var lv=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function Pr(){return PT}function PT(n){return n.type.prototype.ngOnChanges&&(n.setInput=L2),F2}Pr.ngInherit=!0;function F2(){let n=kT(this),e=n?.current;if(e){let t=n.previous;if(t===ba)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function L2(n,e,t,i){let r=this.declaredInputs[t],s=kT(n)||V2(n,{previous:ba,current:null}),o=s.current||(s.current={}),a=s.previous,c=a[r];o[r]=new lv(c&&c.currentValue,e,a===ba),n[i]=e}var RT="__ngSimpleChanges__";function kT(n){return n[RT]||null}function V2(n,e){return n[RT]=e}var FS=null;var gi=function(n,e,t){FS?.(n,e,t)},j2="svg",B2="math";function bi(n){for(;Array.isArray(n);)n=n[Xi];return n}function OT(n,e){return bi(e[n])}function Fn(n,e){return bi(e[n.index])}function NT(n,e){return n.data[e]}function FT(n,e){return n[e]}function Rr(n,e){let t=e[n];return xr(t)?t:t[Xi]}function U2(n){return(n[ne]&4)===4}function Jv(n){return(n[ne]&128)===128}function $2(n){return Jn(n[mt])}function Xh(n,e){return e==null?null:n[e]}function LT(n){n[ma]=0}function z2(n){n[ne]&1024||(n[ne]|=1024,Jv(n)&&wf(n))}function H2(n,e){for(;n>0;)e=e[Ta],n--;return e}function VT(n){n[ne]&9216&&wf(n)}function wf(n){let e=n[mt];for(;e!==null&&!(Jn(e)&&e[ne]&Da.HasChildViewsToRefresh||xr(e)&&e[ne]&8192);){if(Jn(e))e[ne]|=Da.HasChildViewsToRefresh;else if(e[ne]|=8192,!Jv(e))break;e=e[mt]}}function q2(n,e){if((n[ne]&256)===256)throw new O(911,!1);n[vl]===null&&(n[vl]=[]),n[vl].push(e)}var _e={lFrame:WT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function W2(){return _e.lFrame.elementDepthCount}function G2(){_e.lFrame.elementDepthCount++}function K2(){_e.lFrame.elementDepthCount--}function jT(){return _e.bindingsEnabled}function Q2(){return _e.skipHydrationRootTNode!==null}function Y2(n){return _e.skipHydrationRootTNode===n}function X2(){_e.skipHydrationRootTNode=null}function Ne(){return _e.lFrame.lView}function tn(){return _e.lFrame.tView}function Zi(n){return _e.lFrame.contextLView=n,n[Nn]}function Ji(n){return _e.lFrame.contextLView=null,n}function Cn(){let n=BT();for(;n!==null&&n.type===64;)n=n.parent;return n}function BT(){return _e.lFrame.currentTNode}function Z2(){let n=_e.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function xl(n,e){let t=_e.lFrame;t.currentTNode=n,t.isParent=e}function UT(){return _e.lFrame.isParent}function J2(){_e.lFrame.isParent=!1}function ej(){return _e.lFrame.contextLView}function $T(){let n=_e.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function tj(n){return _e.lFrame.bindingIndex=n}function e_(){return _e.lFrame.bindingIndex++}function nj(n){let e=_e.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ij(){return _e.lFrame.inI18n}function rj(n,e){let t=_e.lFrame;t.bindingIndex=t.bindingRootIndex=n,uv(e)}function sj(){return _e.lFrame.currentDirectiveIndex}function uv(n){_e.lFrame.currentDirectiveIndex=n}function oj(n){let e=_e.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function zT(){return _e.lFrame.currentQueryIndex}function t_(n){_e.lFrame.currentQueryIndex=n}function aj(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[ei]:null}function HT(n,e,t){if(t&be.SkipSelf){let r=e,s=n;for(;r=r.parent,r===null&&!(t&be.Host);)if(r=aj(s),r===null||(s=s[Ta],r.type&10))break;if(r===null)return!1;e=r,n=s}let i=_e.lFrame=qT();return i.currentTNode=e,i.lView=n,!0}function n_(n){let e=qT(),t=n[ye];_e.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qT(){let n=_e.lFrame,e=n===null?null:n.child;return e===null?WT(n):e}function WT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function GT(){let n=_e.lFrame;return _e.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var KT=GT;function i_(){let n=GT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function cj(n){return(_e.lFrame.contextLView=H2(n,_e.lFrame.contextLView))[Nn]}function xa(){return _e.lFrame.selectedIndex}function zs(n){_e.lFrame.selectedIndex=n}function r_(){let n=_e.lFrame;return NT(n.tView,n.selectedIndex)}function lj(){return _e.lFrame.currentNamespace}var QT=!0;function s_(){return QT}function o_(n){QT=n}function uj(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=PT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}r&&(t.preOrderHooks??=[]).push(0-n,r),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function a_(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function $h(n,e,t){YT(n,e,3,t)}function zh(n,e,t,i){(n[ne]&3)===t&&YT(n,e,t,i)}function Hy(n,e){let t=n[ne];(t&3)===e&&(t&=16383,t+=1,n[ne]=t)}function YT(n,e,t,i){let r=i!==void 0?n[ma]&65535:0,s=i??-1,o=e.length-1,a=0;for(let c=r;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],i!=null&&a>=i)break}else e[c]<0&&(n[ma]+=65536),(a<s||s==-1)&&(dj(n,t,e,c),n[ma]=(n[ma]&4294901760)+c+2),c++}function LS(n,e){gi(4,n,e);let t=wn(null);try{e.call(n)}finally{wn(t),gi(5,n,e)}}function dj(n,e,t,i){let r=t[i]<0,s=t[i+1],o=r?-t[i]:t[i],a=n[o];r?n[ne]>>14<n[ma]>>16&&(n[ne]&3)===e&&(n[ne]+=16384,LS(a,s)):LS(a,s)}var _a=-1,Hs=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function hj(n){return n instanceof Hs}function fj(n){return(n.flags&8)!==0}function pj(n){return(n.flags&16)!==0}function XT(n){return n!==_a}function Zh(n){let e=n&32767;return n&32767}function gj(n){return n>>16}function Jh(n,e){let t=gj(n),i=e;for(;t>0;)i=i[Ta],t--;return i}var dv=!0;function ef(n){let e=dv;return dv=n,e}var mj=256,ZT=mj-1,JT=5,yj=0,mi={};function vj(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(ml)&&(i=t[ml]),i==null&&(i=t[ml]=yj++);let r=i&ZT,s=1<<r;e.data[n+(r>>JT)]|=s}function tf(n,e){let t=ex(n,e);if(t!==-1)return t;let i=e[ye];i.firstCreatePass&&(n.injectorIndex=e.length,qy(i.data,n),qy(e,null),qy(i.blueprint,null));let r=c_(n,e),s=n.injectorIndex;if(XT(r)){let o=Zh(r),a=Jh(r,e),c=a[ye].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=r,s}function qy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ex(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function c_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=sx(r),i===null)return _a;if(t++,r=r[Ta],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return _a}function hv(n,e,t){vj(n,e,t)}function _j(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let i=t.length,r=0;for(;r<i;){let s=t[r];if(_T(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof t[r]=="string";)r++;else{if(s===e)return t[r+1];r=r+2}}}return null}function tx(n,e,t){if(t&be.Optional||n!==void 0)return n;Yv(e,"NodeInjector")}function nx(n,e,t,i){if(t&be.Optional&&i===void 0&&(i=null),!(t&(be.Self|be.Host))){let r=n[wa],s=kn(void 0);try{return r?r.get(e,i,t&be.Optional):gT(e,i,t&be.Optional)}finally{kn(s)}}return tx(i,e,t)}function ix(n,e,t,i=be.Default,r){if(n!==null){if(e[ne]&2048&&!(i&be.Self)){let o=Cj(n,e,t,i,mi);if(o!==mi)return o}let s=rx(n,e,t,i,mi);if(s!==mi)return s}return nx(e,t,i,r)}function rx(n,e,t,i,r){let s=wj(t);if(typeof s=="function"){if(!HT(e,n,i))return i&be.Host?tx(r,t,i):nx(e,t,i,r);try{let o;if(o=s(i),o==null&&!(i&be.Optional))Yv(t);else return o}finally{KT()}}else if(typeof s=="number"){let o=null,a=ex(n,e),c=_a,l=i&be.Host?e[_i][ei]:null;for((a===-1||i&be.SkipSelf)&&(c=a===-1?c_(n,e):e[a+8],c===_a||!jS(i,!1)?a=-1:(o=e[ye],a=Zh(c),e=Jh(c,e)));a!==-1;){let u=e[ye];if(VS(s,a,u.data)){let d=bj(a,e,t,o,i,l);if(d!==mi)return d}c=e[a+8],c!==_a&&jS(i,e[ye].data[a+8]===l)&&VS(s,a,e)?(o=u,a=Zh(c),e=Jh(c,e)):a=-1}}return r}function bj(n,e,t,i,r,s){let o=e[ye],a=o.data[n+8],c=i==null?bf(a)&&dv:i!=o&&(a.type&3)!==0,l=r&be.Host&&s===a,u=Hh(a,o,t,c,l);return u!==null?qs(e,o,u,a):mi}function Hh(n,e,t,i,r){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:l;for(let f=d;f<h;f++){let p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(r){let f=o[c];if(f&&Ar(f)&&f.type===t)return c}return null}function qs(n,e,t,i){let r=n[t],s=e.data;if(hj(r)){let o=r;o.resolving&&a2(o2(s[t]));let a=ef(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?kn(o.injectImpl):null,u=HT(n,i,be.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&uj(t,s[t],e)}finally{l!==null&&kn(l),ef(a),o.resolving=!1,KT()}}return r}function wj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ml)?n[ml]:void 0;return typeof e=="number"?e>=0?e&ZT:Ej:e}function VS(n,e,t){let i=1<<n;return!!(t[e+(n>>JT)]&i)}function jS(n,e){return!(n&be.Self)&&!(n&be.Host&&e)}var Vs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return ix(this._tNode,this._lView,e,vf(i),t)}};function Ej(){return new Vs(Cn(),Ne())}function Aa(n){return Sl(()=>{let e=n.prototype.constructor,t=e[Kh]||fv(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let s=r[Kh]||fv(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function fv(n){return lT(n)?()=>{let e=fv(en(n));return e&&e()}:$s(n)}function Cj(n,e,t,i,r){let s=n,o=e;for(;s!==null&&o!==null&&o[ne]&2048&&!(o[ne]&512);){let a=rx(s,o,t,i|be.Self,mi);if(a!==mi)return a;let c=s.parent;if(!c){let l=o[xT];if(l){let u=l.get(t,mi,i);if(u!==mi)return u}c=sx(o),o=o[Ta]}s=c}return r}function sx(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[ei]:null}function l_(n){return _j(Cn(),n)}var Vh="__parameters__";function Dj(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function ox(n,e,t){return Sl(()=>{let i=Dj(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(c,l,u){let d=c.hasOwnProperty(Vh)?c[Vh]:Object.defineProperty(c,Vh,{value:[]})[Vh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}function Ij(n){return typeof n=="function"}function Sj(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}function Tj(n){return n.flat(Number.POSITIVE_INFINITY)}function u_(n,e){n.forEach(t=>Array.isArray(t)?u_(t,e):e(t))}function ax(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function nf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xj(n,e){let t=[];for(let i=0;i<n;i++)t.push(e);return t}function Aj(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let s=r-2;n[r]=n[s],r--}n[e]=t,n[e+1]=i}}function Mj(n,e,t){let i=Al(n,e);return i>=0?n[i|1]=t:(i=~i,Aj(n,i,e,t)),i}function Wy(n,e){let t=Al(n,e);if(t>=0)return n[t|1]}function Al(n,e){return Pj(n,e,1)}function Pj(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}var Ma=mT(ox("Optional"),8);var d_=mT(ox("SkipSelf"),4);var Ml=new q("ENVIRONMENT_INITIALIZER"),cx=new q("INJECTOR",-1),lx=new q("INJECTOR_DEF_TYPES"),rf=class{get(e,t=_l){if(t===_l){let i=new Error(`NullInjectorError: No provider for ${Ht(e)}!`);throw i.name="NullInjectorError",i}return t}};function Pa(n){return{\u0275providers:n}}function h_(...n){return{\u0275providers:ux(!0,n),\u0275fromNgModule:!0}}function ux(n,...e){let t=[],i=new Set,r,s=o=>{t.push(o)};return u_(e,o=>{let a=o;pv(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&dx(r,s),t}function dx(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];f_(r,s=>{e(s,i)})}}function pv(n,e,t,i){if(n=en(n),!n)return!1;let r=null,s=xS(n),o=!s&&js(n);if(!s&&!o){let c=n.ngModule;if(s=xS(c),s)r=c;else return!1}else{if(o&&!o.standalone)return!1;r=n}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)pv(l,e,t,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let l;try{u_(s.imports,u=>{pv(u,e,t,i)&&(l||=[],l.push(u))})}finally{}l!==void 0&&dx(l,e)}if(!a){let l=$s(r)||(()=>new r);e({provide:r,useFactory:l,deps:On},r),e({provide:lx,useValue:r,multi:!0},r),e({provide:Ml,useValue:()=>k(r),multi:!0},r)}let c=s.providers;if(c!=null&&!a){let l=n;f_(c,u=>{e(u,l)})}}else return!1;return r!==n&&n.providers!==void 0}function f_(n,e){for(let t of n)uT(t)&&(t=t.\u0275providers),Array.isArray(t)?f_(t,e):e(t)}var Rj=Be({provide:String,useValue:Be});function hx(n){return n!==null&&typeof n=="object"&&Rj in n}function kj(n){return!!(n&&n.useExisting)}function Oj(n){return!!(n&&n.useFactory)}function Ia(n){return typeof n=="function"}function Nj(n){return!!n.useClass}var Ef=new q("Set Injector scope."),qh={},Fj={},Gy;function p_(){return Gy===void 0&&(Gy=new rf),Gy}var dn=class{},sf=class extends dn{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,mv(e,o=>this.processProvider(o)),this.records.set(cx,ya(void 0,this)),r.has("environment")&&this.records.set(dn,ya(void 0,this));let s=this.records.get(Ef);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(lx,On,be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let t of this._ngOnDestroyHooks)t.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=ga(this),i=kn(void 0),r;try{return e()}finally{ga(t),kn(i)}}get(e,t=_l,i=be.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(SS))return e[SS](this);i=vf(i);let r,s=ga(this),o=kn(void 0);try{if(!(i&be.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=Uj(e)&&yf(e);l&&this.injectableDefInScope(l)?c=ya(gv(e),qh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=i&be.Self?p_():this.parent;return t=i&be.Optional&&t===_l?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Qh]=a[Qh]||[]).unshift(Ht(e)),s)throw a;return _2(a,e,"R3InjectorError",this.source)}else throw a}finally{kn(o),ga(s)}}resolveInjectorInitializers(){let e=ga(this),t=kn(void 0),i;try{let r=this.get(Ml,On,be.Self);for(let s of r)s()}finally{ga(e),kn(t)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Ht(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new O(205,!1)}processProvider(e){e=en(e);let t=Ia(e)?e:en(e&&e.provide),i=Vj(e);if(!Ia(e)&&e.multi===!0){let r=this.records.get(t);r||(r=ya(void 0,qh,!0),r.factory=()=>ov(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}else{let r=this.records.get(t)}this.records.set(t,i)}hydrate(e,t){return t.value===qh&&(t.value=Fj,t.value=t.factory()),typeof t.value=="object"&&t.value&&Bj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;let t=en(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function gv(n){let e=yf(n),t=e!==null?e.factory:$s(n);if(t!==null)return t;if(n instanceof q)throw new O(204,!1);if(n instanceof Function)return Lj(n);throw new O(204,!1)}function Lj(n){let e=n.length;if(e>0){let i=xj(e,"?");throw new O(204,!1)}let t=u2(n);return t!==null?()=>t.factory(n):()=>new n}function Vj(n){if(hx(n))return ya(void 0,n.useValue);{let e=fx(n);return ya(e,qh)}}function fx(n,e,t){let i;if(Ia(n)){let r=en(n);return $s(r)||gv(r)}else if(hx(n))i=()=>en(n.useValue);else if(Oj(n))i=()=>n.useFactory(...ov(n.deps||[]));else if(kj(n))i=()=>k(en(n.useExisting));else{let r=en(n&&(n.useClass||n.provide));if(jj(n))i=()=>new r(...ov(n.deps));else return $s(r)||gv(r)}return i}function ya(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function jj(n){return!!n.deps}function Bj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Uj(n){return typeof n=="function"||typeof n=="object"&&n instanceof q}function mv(n,e){for(let t of n)Array.isArray(t)?mv(t,e):t&&uT(t)?mv(t.\u0275providers,e):e(t)}function BS(n,e=null,t=null,i){let r=px(n,e,t,i);return r.resolveInjectorInitializers(),r}function px(n,e=null,t=null,i,r=new Set){let s=[t||On,h_(n)];return i=i||(typeof n=="object"?void 0:Ht(n)),new sf(s,e||p_(),i||null,r)}var Js=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return BS({name:""},r,i,"");{let s=i.name??"";return BS({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=_l,e.NULL=new rf,e.\u0275prov=W({token:e,providedIn:"any",factory:()=>k(cx)}),e.__NG_ELEMENT_ID__=-1;let n=e;return n})();var yv;function gx(n){yv=n}function $j(){if(yv!==void 0)return yv;if(typeof document<"u")return document;throw new O(210,!1)}var g_=new q("AppId",{providedIn:"root",factory:()=>zj}),zj="ng",m_=new q("Platform Initializer"),hn=new q("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var y_=new q("AnimationModuleType"),v_=new q("CSP nonce",{providedIn:"root",factory:()=>$j().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function mx(n){return n instanceof Function?n():n}function yx(n){return(n.flags&128)===128}var Ki=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ki||{});var vx=new Map,Hj=0;function qj(){return Hj++}function Wj(n){vx.set(n[_f],n)}function Gj(n){vx.delete(n[_f])}var US="__ngContext__";function Ws(n,e){xr(e)?(n[US]=e[_f],Wj(e)):n[US]=e}var Kj;function __(n,e){return Kj(n,e)}function b_(n){let e=n[mt];return Jn(e)?e[mt]:e}function _x(n){return wx(n[El])}function bx(n){return wx(n[Xn])}function wx(n){for(;n!==null&&!Jn(n);)n=n[Xn];return n}function va(n,e,t,i,r){if(i!=null){let s,o=!1;Jn(i)?s=i:xr(i)&&(o=!0,i=i[Xi]);let a=bi(i);n===0&&t!==null?r==null?Ix(e,t,a):of(e,t,a,r||null,!0):n===1&&t!==null?of(e,t,a,r||null,!0):n===2?hB(e,a,o):n===3&&e.destroyNode(a),s!=null&&pB(e,n,s,t,r)}}function Qj(n,e){return n.createText(e)}function Yj(n,e,t){n.setValue(e,t)}function Ex(n,e,t){return n.createElement(e,t)}function Xj(n,e){let t=e[Dt];Pl(n,e,t,2,null,null),e[Xi]=null,e[ei]=null}function Zj(n,e,t,i,r,s){i[Xi]=r,i[ei]=e,Pl(n,i,t,1,r,s)}function Jj(n,e){Pl(n,e,e[Dt],2,null,null)}function eB(n){let e=n[El];if(!e)return Ky(n[ye],n);for(;e;){let t=null;if(xr(e))t=e[El];else{let i=e[En];i&&(t=i)}if(!t){for(;e&&!e[Xn]&&e!==n;)xr(e)&&Ky(e[ye],e),e=e[mt];e===null&&(e=n),xr(e)&&Ky(e[ye],e),t=e&&e[Xn]}e=t}}function tB(n,e,t,i){let r=En+i,s=t.length;i>0&&(t[r-1][Xn]=e),i<s-En?(e[Xn]=t[r],ax(t,En+i,e)):(t.push(e),e[Xn]=null),e[mt]=t;let o=e[Tl];o!==null&&t!==o&&nB(o,e);let a=e[yi];a!==null&&a.insertView(n),VT(e),e[ne]|=128}function nB(n,e){let t=n[Ca],r=e[mt][mt][_i];e[_i]!==r&&(n[ne]|=Da.HasTransplantedViews),t===null?n[Ca]=[e]:t.push(e)}function Cx(n,e){let t=n[Ca],i=t.indexOf(e),r=e[mt];t.splice(i,1)}function vv(n,e){if(n.length<=En)return;let t=En+e,i=n[t];if(i){let r=i[Tl];r!==null&&r!==n&&Cx(r,i),e>0&&(n[t-1][Xn]=i[Xn]);let s=nf(n,En+e);Xj(i[ye],i);let o=s[yi];o!==null&&o.detachView(s[ye]),i[mt]=null,i[Xn]=null,i[ne]&=-129}return i}function Dx(n,e){if(!(e[ne]&256)){let t=e[Dt];e[Bs]&&iS(e[Bs]),t.destroyNode&&Pl(n,e,t,3,null,null),eB(e)}}function Ky(n,e){if(!(e[ne]&256)){e[ne]&=-129,e[ne]|=256,rB(n,e),iB(n,e),e[ye].type===1&&e[Dt].destroy();let t=e[Tl];if(t!==null&&Jn(e[mt])){t!==e[mt]&&Cx(t,e);let i=e[yi];i!==null&&i.detachView(n)}Gj(e)}}function iB(n,e){let t=n.cleanup,i=e[wl];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[t[s+1]];t[s].call(o)}i!==null&&(e[wl]=null);let r=e[vl];if(r!==null){e[vl]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function rB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Hs)){let s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],c=s[o+1];gi(4,a,c);try{c.call(a)}finally{gi(5,a,c)}}else{gi(4,r,s);try{s.call(r)}finally{gi(5,r,s)}}}}}function sB(n,e,t){return oB(n,e.parent,t)}function oB(n,e,t){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return t[Xi];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=n.data[i.directiveStart+r];if(s===vi.None||s===vi.Emulated)return null}return Fn(i,t)}}function of(n,e,t,i,r){n.insertBefore(e,t,i,r)}function Ix(n,e,t){n.appendChild(e,t)}function $S(n,e,t,i,r){i!==null?of(n,e,t,i,r):Ix(n,e,t)}function aB(n,e,t,i){n.removeChild(e,t,i)}function w_(n,e){return n.parentNode(e)}function cB(n,e){return n.nextSibling(e)}function lB(n,e,t){return dB(n,e,t)}function uB(n,e,t){return n.type&40?Fn(n,t):null}var dB=uB,zS;function E_(n,e,t,i){let r=sB(n,i,e),s=e[Dt],o=i.parent||e[ei],a=lB(o,i,e);if(r!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)$S(s,r,t[c],a,!1);else $S(s,r,t,a,!1);zS!==void 0&&zS(s,i,e,t,r)}function Wh(n,e){if(e!==null){let t=e.type;if(t&3)return Fn(e,n);if(t&4)return _v(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return Wh(n,i);{let r=n[e.index];return Jn(r)?_v(-1,r):bi(r)}}else{if(t&32)return __(e,n)()||bi(n[e.index]);{let i=Sx(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=b_(n[_i]);return Wh(r,i)}else return Wh(n,e.next)}}}return null}function Sx(n,e){if(e!==null){let i=n[_i][ei],r=e.projection;return i.projection[r]}return null}function _v(n,e){let t=En+n+1;if(t<e.length){let i=e[t],r=i[ye].firstChild;if(r!==null)return Wh(i,r)}return e[Us]}function hB(n,e,t){let i=w_(n,e);i&&aB(n,i,e,t)}function C_(n,e,t,i,r,s,o){for(;t!=null;){let a=i[t.index],c=t.type;if(o&&e===0&&(a&&Ws(bi(a),i),t.flags|=2),(t.flags&32)!==32)if(c&8)C_(n,e,t.child,i,r,s,!1),va(e,n,r,a,s);else if(c&32){let l=__(t,i),u;for(;u=l();)va(e,n,r,u,s);va(e,n,r,a,s)}else c&16?fB(n,e,i,t,r,s):va(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Pl(n,e,t,i,r,s){C_(t,i,n.firstChild,e,r,s,!1)}function fB(n,e,t,i,r,s){let o=t[_i],c=o[ei].projection[i.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];va(e,n,r,u,s)}else{let l=c,u=o[mt];yx(i)&&(l.flags|=128),C_(n,e,l,u,r,s,!0)}}function pB(n,e,t,i,r){let s=t[Us],o=bi(t);s!==o&&va(e,n,i,s,r);for(let a=En;a<t.length;a++){let c=t[a];Pl(c[ye],c,n,e,i,s)}}function gB(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=i.indexOf("-")===-1?void 0:Ki.DashCase;r==null?n.removeStyle(t,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ki.Important),n.setStyle(t,i,r,s))}}function mB(n,e,t){n.setAttribute(e,"style",t)}function Tx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function xx(n,e,t){let{mergedAttrs:i,classes:r,styles:s}=t;i!==null&&av(n,e,i),r!==null&&Tx(n,e,r),s!==null&&mB(n,e,s)}var jh;function yB(){if(jh===void 0&&(jh=null,Ls.trustedTypes))try{jh=Ls.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return jh}function HS(n){return yB()?.createScriptURL(n)||n}var af=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dT})`}};function Rl(n){return n instanceof af?n.changingThisBreaksApplicationSecurity:n}function D_(n,e){let t=vB(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${dT})`)}return t===e}function vB(n){return n instanceof af&&n.getTypeName()||null}var _B=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ax(n){return n=String(n),n.match(_B)?n:"unsafe:"+n}var Cf=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Cf||{});function kr(n){let e=Px();return e?e.sanitize(Cf.URL,n)||"":D_(n,"URL")?Rl(n):Ax(mf(n))}function bB(n){let e=Px();if(e)return HS(e.sanitize(Cf.RESOURCE_URL,n)||"");if(D_(n,"ResourceURL"))return HS(Rl(n));throw new O(904,!1)}function wB(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?bB:kr}function Mx(n,e,t){return wB(e,t)(n)}function Px(){let n=Ne();return n&&n[Ea].sanitizer}var EB="h",CB="b";var DB=(n,e,t)=>null;function I_(n,e,t=!1){return DB(n,e,t)}var bv=class{},cf=class{};function IB(n){let e=Error(`No component factory found for ${Ht(n)}.`);return e[SB]=n,e}var SB="ngComponent";var wv=class{resolveComponentFactory(e){throw IB(e)}},Df=(()=>{let e=class e{};e.NULL=new wv;let n=e;return n})();function TB(){return Ra(Cn(),Ne())}function Ra(n,e){return new Ln(Fn(n,e))}var Ln=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=TB;let n=e;return n})();function xB(n){return n instanceof Ln?n.nativeElement:n}var Gs=class{},Or=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>AB();let n=e;return n})();function AB(){let n=Ne(),e=Cn(),t=Rr(e.index,n);return(xr(t)?t:n)[Dt]}var MB=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let n=e;return n})(),Qi=class{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}},S_=new Qi("17.0.4"),Qy={};function Rx(n){return T_(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function PB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function T_(n){return n!==null&&(typeof n=="function"||typeof n=="object")}var Ev=class{constructor(){}supports(e){return Rx(e)}create(e){return new Cv(e)}},RB=(n,e)=>e,Cv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||RB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){let o=!i||t&&t.currentIndex<qS(i,r,s)?t:i,a=qS(o,r,s),c=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,o.previousIndex==null)r++;else{s||(s=[]);let l=a-r,u=c-r;if(l!=u){for(let h=0;h<l;h++){let f=h<s.length?s[h]:s[h]=0,p=f+h;u<=p&&p<l&&(s[h]=f+1)}let d=o.previousIndex;s[d]=u-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Rx(e))throw new O(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),i=!0):(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else r=0,PB(e,a=>{o=this._trackByFn(r,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new Dv(t,i),s,r)),e}_verifyReinsertion(e,t,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new lf),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new lf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Dv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Iv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},lf=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new Iv,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function qS(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}var Sv=class{constructor(){}supports(e){return e instanceof Map||T_(e)}create(){return new Tv}},Tv=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||T_(e)))throw new O(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,t);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new xv(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}},xv=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function WS(){return new If([new Ev])}var If=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||WS()),deps:[[e,new d_,new Ma]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r!=null)return r;throw new O(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:WS});let n=e;return n})();function GS(){return new x_([new Sv])}var x_=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||GS()),deps:[[e,new d_,new Ma]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r)return r;throw new O(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:GS});let n=e;return n})();function uf(n,e,t,i,r=!1){for(;t!==null;){let s=e[t.index];s!==null&&i.push(bi(s)),Jn(s)&&kB(s,i);let o=t.type;if(o&8)uf(n,e,t.child,i);else if(o&32){let a=__(t,e),c;for(;c=a();)i.push(c)}else if(o&16){let a=Sx(e,t);if(Array.isArray(a))i.push(...a);else{let c=b_(e[_i]);uf(c[ye],c,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function kB(n,e){for(let t=En;t<n.length;t++){let i=n[t],r=i[ye].firstChild;r!==null&&uf(i[ye],i,r,e)}n[Us]!==n[Xi]&&e.push(n[Us])}var kx=[];function OB(n){return n[Bs]??NB(n)}function NB(n){let e=kx.pop()??Object.create(LB);return e.lView=n,e}function FB(n){n.lView[Bs]!==n&&(n.lView=null,kx.push(n))}var LB=Te($({},eS),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wf(n.lView)},consumerOnSignalRead(){this.lView[Bs]=this}}),VB="ngOriginalError";function Yy(n){return n[VB]}var Yi=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Yy(e);for(;t&&Yy(t);)t=Yy(t);return t||null}};var Ox=!1,jB=new q("",{providedIn:"root",factory:()=>Ox});var Nr={};function U(n){Nx(tn(),Ne(),xa()+n,!1)}function Nx(n,e,t,i){if(!i)if((e[ne]&3)===3){let s=n.preOrderCheckHooks;s!==null&&$h(e,s,t)}else{let s=n.preOrderHooks;s!==null&&zh(e,s,0,t)}zs(t)}function G(n,e=be.Default){let t=Ne();if(t===null)return k(n,e);let i=Cn();return ix(i,t,en(n),e)}function BB(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)zs(~r);else{let s=r,o=t[++i],a=t[++i];rj(o,s);let c=e[s];a(2,c)}}}finally{zs(-1)}}function Sf(n,e,t,i,r,s,o,a,c,l,u){let d=e.blueprint.slice();return d[Xi]=r,d[ne]=i|4|128|8,(l!==null||n&&n[ne]&2048)&&(d[ne]|=2048),LT(d),d[mt]=d[Ta]=n,d[Nn]=t,d[Ea]=o||n&&n[Ea],d[Dt]=a||n&&n[Dt],d[wa]=c||n&&n[wa]||null,d[ei]=s,d[_f]=qj(),d[cv]=u,d[xT]=l,d[_i]=e.type==2?n[_i]:d,d}function Tf(n,e,t,i,r){let s=n.data[e];if(s===null)s=UB(n,e,t,i,r),ij()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=i,s.attrs=r;let o=Z2();s.injectorIndex=o===null?-1:o.injectorIndex}return xl(s,!0),s}function UB(n,e,t,i,r){let s=BT(),o=UT(),a=o?s:s&&s.parent,c=n.data[e]=GB(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Fx(n,e,t,i){if(t===0)return-1;let r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function Lx(n,e,t,i,r){let s=xa(),o=i&2;try{zs(-1),o&&e.length>Zn&&Nx(n,e,Zn,!1),gi(o?2:0,r),t(i,r)}finally{zs(s),gi(o?3:1,r)}}function Vx(n,e,t){if(MT(e)){let i=wn(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{wn(i)}}}function jx(n,e,t){jT()&&(JB(n,e,t,Fn(t,e)),(t.flags&64)===64&&qx(n,e,t))}function Bx(n,e,t=Fn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?t(e,n):n[o];n[r++]=a}}}function Ux(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=A_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function A_(n,e,t,i,r,s,o,a,c,l,u){let d=Zn+i,h=d+r,f=$B(d,h),p=typeof l=="function"?l():l;return f[ye]={type:n,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function $B(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:Nr);return t}function zB(n,e,t,i){let s=i.get(jB,Ox)||t===vi.ShadowDom,o=n.selectRootElement(e,s);return HB(o),o}function HB(n){qB(n)}var qB=n=>null;function WB(n,e,t,i){let r=Qx(e);r.push(t),n.firstCreatePass&&Yx(n).push(i,r.length-1)}function GB(n,e,t,i,r,s){let o=e?e.injectorIndex:-1,a=0;return Q2()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function KS(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=t===null?{}:t;let s=n[r];i===null?QS(t,e,r,s):i.hasOwnProperty(r)&&QS(t,e,i[r],s)}return t}function QS(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function KB(n,e,t){let i=e.directiveStart,r=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let u=i;u<r;u++){let d=s[u],h=t?t.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;c=KS(d.inputs,u,c,f),l=KS(d.outputs,u,l,p);let g=c!==null&&o!==null&&!wT(e)?uU(c,u,o):null;a.push(g)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function QB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function $x(n,e,t,i,r,s,o,a){let c=Fn(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[i])?(M_(n,t,u,i,r),bf(e)&&YB(t,e.index)):e.type&3?(i=QB(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(c,i,r)):e.type&12}function YB(n,e){let t=Rr(e,n);t[ne]&16||(t[ne]|=64)}function zx(n,e,t,i){if(jT()){let r=i===null?null:{"":-1},s=tU(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Hx(n,e,t,o,r,a),r&&nU(t,i,r)}t.mergedAttrs=bl(t.mergedAttrs,t.attrs)}function Hx(n,e,t,i,r,s){for(let l=0;l<i.length;l++)hv(tf(t,e),n,i[l].type);rU(t,n.data.length,i.length);for(let l=0;l<i.length;l++){let u=i[l];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,c=Fx(n,e,i.length,null);for(let l=0;l<i.length;l++){let u=i[l];t.mergedAttrs=bl(t.mergedAttrs,u.hostAttrs),sU(n,t,e,c,u),iU(c,u,r),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}KB(n,t,s)}function XB(n,e,t,i,r){let s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;ZB(o)!=a&&o.push(a),o.push(t,i,s)}}function ZB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function JB(n,e,t,i){let r=t.directiveStart,s=t.directiveEnd;bf(t)&&oU(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||tf(t,e),Ws(i,e);let o=t.initialInputs;for(let a=r;a<s;a++){let c=n.data[a],l=qs(e,n,a,t);if(Ws(l,e),o!==null&&lU(e,a-r,l,c,t,o),Ar(c)){let u=Rr(t.index,e);u[Nn]=qs(e,n,a,t)}}}function qx(n,e,t){let i=t.directiveStart,r=t.directiveEnd,s=t.index,o=sj();try{zs(s);for(let a=i;a<r;a++){let c=n.data[a],l=e[a];uv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&eU(c,l)}}finally{zs(-1),uv(o)}}function eU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tU(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(S2(e,o.selectors,!1))if(i||(i=[]),Ar(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let c=a.length;Av(n,e,c)}else i.unshift(o),Av(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function Av(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nU(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let s=t[e[r+1]];if(s==null)throw new O(-301,!1);i.push(e[r],s)}}}function iU(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Ar(e)&&(t[""]=n)}}function rU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sU(n,e,t,i,r){n.data[i]=r;let s=r.factory||(r.factory=$s(r.type,!0)),o=new Hs(s,Ar(r),G);n.blueprint[i]=o,t[i]=o,XB(n,e,i,Fx(n,t,r.hostVars,Nr),r)}function oU(n,e,t){let i=Fn(e,n),r=Ux(t),s=n[Ea].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=xf(n,Sf(n,r,null,o,i,e,null,s.createRenderer(i,t),null,null,null));n[e.index]=a}function aU(n,e,t,i,r,s){let o=Fn(n,e);cU(e[Dt],o,s,n.value,t,i,r)}function cU(n,e,t,i,r,s,o){if(s==null)n.removeAttribute(e,r,t);else{let a=o==null?mf(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}function lU(n,e,t,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],u=o[a++];Wx(i,t,c,l,u)}}function Wx(n,e,t,i,r){let s=wn(null);try{let o=n.inputTransforms;o!==null&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),n.setInput!==null?n.setInput(e,r,t,i):e[i]=r}finally{wn(s)}}function uU(n,e,t){let i=null,r=0;for(;r<t.length;){let s=t[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){i===null&&(i=[]);let o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}return i}function Gx(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function Kx(n,e){let t=n.contentQueries;if(t!==null){let i=wn(null);try{for(let r=0;r<t.length;r+=2){let s=t[r],o=t[r+1];if(o!==-1){let a=n.data[o];t_(s),a.contentQueries(2,e[o],o)}}}finally{wn(i)}}}function xf(n,e){return n[El]?n[NS][Xn]=e:n[El]=e,n[NS]=e,e}function Mv(n,e,t){t_(0);let i=wn(null);try{e(n,t)}finally{wn(i)}}function Qx(n){return n[wl]||(n[wl]=[])}function Yx(n){return n.cleanup||(n.cleanup=[])}function Xx(n,e){let t=n[wa],i=t?t.get(Yi,null):null;i&&i.handleError(e)}function M_(n,e,t,i,r){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=e[o],l=n.data[o];Wx(l,c,i,a,r)}}function dU(n,e,t){let i=OT(e,n);Yj(n[Dt],i,t)}var hU=100;function fU(n,e=!0){let t=n[Ea],i=t.rendererFactory,r=t.afterRenderEventManager,s=!1;s||(i.begin?.(),r?.begin());try{let o=n[ye],a=n[Nn];Zx(o,n,o.template,a),pU(n)}catch(o){throw e&&Xx(n,o),o}finally{s||(i.end?.(),t.inlineEffectRunner?.flush(),r?.end())}}function pU(n){let e=0;for(;n[ne]&9216||n[Bs]?.dirty;){if(e===hU)throw new O(103,!1);e++,tA(n,1)}}function Zx(n,e,t,i){let r=e[ne];if((r&256)===256)return;let s=!1;!s&&e[Ea].inlineEffectRunner?.flush(),n_(e);let o=null,a=null;!s&&gU(n)&&(a=OB(e),o=tS(a));try{LT(e),tj(n.bindingStartIndex),t!==null&&Lx(n,e,t,2,i);let c=(r&3)===3;if(!s)if(c){let d=n.preOrderCheckHooks;d!==null&&$h(e,d,null)}else{let d=n.preOrderHooks;d!==null&&zh(e,d,0,null),Hy(e,0)}if(mU(e),Jx(e,0),n.contentQueries!==null&&Kx(n,e),!s)if(c){let d=n.contentCheckHooks;d!==null&&$h(e,d)}else{let d=n.contentHooks;d!==null&&zh(e,d,1),Hy(e,1)}BB(n,e);let l=n.components;l!==null&&nA(e,l,0);let u=n.viewQuery;if(u!==null&&Mv(2,u,i),!s)if(c){let d=n.viewCheckHooks;d!==null&&$h(e,d)}else{let d=n.viewHooks;d!==null&&zh(e,d,2),Hy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zy]){for(let d of e[zy])d();e[zy]=null}s||(e[ne]&=-73)}catch(c){throw wf(e),c}finally{a!==null&&(nS(a,o),FB(a)),i_()}}function gU(n){return n.type!==2}function Jx(n,e){for(let t=_x(n);t!==null;t=bx(t)){t[ne]&=~Da.HasChildViewsToRefresh;for(let i=En;i<t.length;i++){let r=t[i];eA(r,e)}}}function mU(n){for(let e=_x(n);e!==null;e=bx(e)){if(!(e[ne]&Da.HasTransplantedViews))continue;let t=e[Ca];for(let i=0;i<t.length;i++){let r=t[i],s=r[mt];z2(r)}}}function yU(n,e,t){let i=Rr(e,n);eA(i,t)}function eA(n,e){Jv(n)&&tA(n,e)}function tA(n,e){let i=n[ye],r=n[ne],s=n[Bs],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&Cy(s)),s&&(s.dirty=!1),n[ne]&=-9217,o)Zx(i,n,i.template,n[Nn]);else if(r&8192){Jx(n,1);let a=i.components;a!==null&&nA(n,a,1)}}function nA(n,e,t){for(let i=0;i<e.length;i++)yU(n,e[i],t)}function P_(n){for(;n;){n[ne]|=64;let e=b_(n);if(N2(n)&&!e)return n;n=e}return null}var Ks=class{get rootNodes(){let e=this._lView,t=e[ye];return uf(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[mt];if(Jn(e)){let t=e[Yh],i=t?t.indexOf(this):-1;i>-1&&(vv(e,i),nf(t,i))}this._attachedToViewContainer=!1}Dx(this._lView[ye],this._lView)}onDestroy(e){q2(this._lView,e)}markForCheck(){P_(this._cdRefInjectingView||this._lView)}detach(){this._lView[ne]&=-129}reattach(){VT(this._lView),this._lView[ne]|=128}detectChanges(){fU(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Jj(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e}},ka=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vU;let n=e;return n})();function vU(n){return _U(Cn(),Ne(),(n&16)===16)}function _U(n,e,t){if(bf(n)&&!t){let i=Rr(n.index,e);return new Ks(i,i)}else if(n.type&47){let i=e[_i];return new Ks(i,e)}return null}var YS=new Set;function R_(n){YS.has(n)||(YS.add(n),performance?.mark?.("mark_use_counter",{detail:{feature:n}}))}var Pv=class extends gt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=Xy(s),r&&(r=Xy(r)),o&&(o=Xy(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof pt&&e.add(a),a}};function Xy(n){return e=>{setTimeout(n,void 0,e)}}var Ot=Pv;function XS(...n){}function bU(){let n=typeof Ls.requestAnimationFrame=="function",e=Ls[n?"requestAnimationFrame":"setTimeout"],t=Ls[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var Pe=class n{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ot(!1),this.onMicrotaskEmpty=new Ot(!1),this.onStable=new Ot(!1),this.onError=new Ot(!1),typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=bU().nativeRequestAnimationFrame,CU(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new O(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,wU,XS,XS);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},wU={};function k_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function EU(n){n.isCheckStableRunning||n.lastRequestAnimationFrameId!==-1||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Ls,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Rv(n),n.isCheckStableRunning=!0,k_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Rv(n))}function CU(n){let e=()=>{EU(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{if(DU(a))return t.invokeTask(r,s,o,a);try{return ZS(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),JS(n)}},onInvoke:(t,i,r,s,o,a,c)=>{try{return ZS(n),t.invoke(r,s,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),JS(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Rv(n),k_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Rv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.lastRequestAnimationFrameId!==-1?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function JS(n){n._nesting--,k_(n)}var iA=new q("",{providedIn:"root",factory:rA});function rA(){let n=H(Pe),e=!0,t=new oe(r=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{r.next(e),r.complete()})}),i=new oe(r=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});let o=n.onUnstable.subscribe(()=>{Pe.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}});return fl(t,i.pipe(pa()))}function DU(n){return!Array.isArray(n)||n.length!==1?!1:n[0].data?.__ignore_ng_zone__===!0}var IU=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let i of this.internalCallbacks)i();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();function SU(n,e){let t=Rr(e,n),i=t[ye];TU(i,t);let r=t[Xi];r!==null&&t[cv]===null&&(t[cv]=I_(r,t[wa])),O_(i,t,t[Nn])}function TU(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function O_(n,e,t){n_(e);try{let i=n.viewQuery;i!==null&&Mv(1,i,t);let r=n.template;r!==null&&Lx(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Kx(n,e),n.staticViewQueries&&Mv(2,n.viewQuery,t);let s=n.components;s!==null&&xU(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ne]&=-5,i_()}}function xU(n,e){for(let t=0;t<e.length;t++)SU(n,e[t])}function kv(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=IS(r,a);else if(s==2){let c=a,l=e[++o];i=IS(i,c+": "+l+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var df=class extends Df{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=js(e);return new Cl(t,this.ngModule)}};function eT(n){let e=[];for(let t in n)if(n.hasOwnProperty(t)){let i=n[t];e.push({propName:i,templateName:t})}return e}function AU(n){let e=n.toLowerCase();return e==="svg"?j2:e==="math"?B2:null}var Ov=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=vf(i);let r=this.injector.get(e,Qy,i);return r!==Qy||t===Qy?r:this.parentInjector.get(e,t,i)}},Cl=class extends cf{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=eT(e.inputs);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return eT(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=M2(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){r=r||this.ngModule;let s=r instanceof dn?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new Ov(e,s):e,a=o.get(Gs,null);if(a===null)throw new O(407,!1);let c=o.get(MB,null),l=o.get(IU,null),u={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:l},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",f=i?zB(d,i,this.componentDef.encapsulation,o):Ex(d,h,AU(h)),p=4608,g=this.componentDef.onPush?576:528,m=this.componentDef.signals?p:g,y=null;f!==null&&(y=I_(f,o,!0));let v=A_(0,null,null,1,0,null,null,null,null,null,null),b=Sf(null,v,null,m,null,null,u,d,o,null,y);n_(b);let E,C;try{let D=this.componentDef,A,M=null;D.findHostDirectiveDefs?(A=[],M=new Map,D.findHostDirectiveDefs(D,A,M),A.push(D)):A=[D];let B=MU(b,f),ee=PU(B,f,D,A,b,u,d);C=NT(v,Zn),f&&OU(d,D,f,i),t!==void 0&&NU(C,this.ngContentSelectors,t),E=kU(ee,D,A,M,b,[FU]),O_(v,b,null)}finally{i_()}return new Nv(this.componentType,E,Ra(C,b),b,C)}},Nv=class extends bv{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ks(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;M_(s[ye],s,r,e,t),this.previousInputValues.set(e,t);let o=Rr(this._tNode.index,s);P_(o)}}get injector(){return new Vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function MU(n,e){let t=n[ye],i=Zn;return n[i]=e,Tf(t,i,2,"#host",null)}function PU(n,e,t,i,r,s,o){let a=r[ye];RU(i,n,e,o);let c=null;e!==null&&(c=I_(e,r[wa]));let l=s.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=Sf(r,Ux(t),null,u,r[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Av(a,n,i.length-1),xf(r,d),r[n.index]=d}function RU(n,e,t,i){for(let r of n)e.mergedAttrs=bl(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(kv(e,e.mergedAttrs,!0),t!==null&&xx(i,t,e))}function kU(n,e,t,i,r,s){let o=Cn(),a=r[ye],c=Fn(o,r);Hx(a,r,o,t,null,i);for(let u=0;u<t.length;u++){let d=o.directiveStart+u,h=qs(r,a,d,o);Ws(h,r)}qx(a,r,o),c&&Ws(c,r);let l=qs(r,a,o.directiveStart+o.componentOffset,o);if(n[Nn]=r[Nn]=l,s!==null)for(let u of s)u(l,e);return Vx(a,o,n),l}function OU(n,e,t,i){if(i)av(n,t,["ng-version",S_.full]);else{let{attrs:r,classes:s}=P2(e.selectors[0]);r&&av(n,t,r),s&&s.length>0&&Tx(n,t,s.join(" "))}}function NU(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let s=t[r];i.push(s!=null?Array.from(s):null)}}function FU(){let n=Cn();a_(Ne()[ye],n)}function LU(n){return Object.getPrototypeOf(n.prototype).constructor}function er(n){let e=LU(n.type),t=!0,i=[n];for(;e;){let r;if(Ar(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let o=n;o.inputs=Bh(n.inputs),o.inputTransforms=Bh(n.inputTransforms),o.declaredInputs=Bh(n.declaredInputs),o.outputs=Bh(n.outputs);let a=r.hostBindings;a&&UU(n,a);let c=r.viewQuery,l=r.contentQueries;if(c&&jU(n,c),l&&BU(n,l),Lh(n.inputs,r.inputs),Lh(n.declaredInputs,r.declaredInputs),Lh(n.outputs,r.outputs),r.inputTransforms!==null&&(o.inputTransforms===null&&(o.inputTransforms={}),Lh(o.inputTransforms,r.inputTransforms)),Ar(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===er&&(t=!1)}}e=Object.getPrototypeOf(e)}VU(i)}function VU(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=bl(r.hostAttrs,t=bl(t,r.hostAttrs))}}function Bh(n){return n===ba?{}:n===On?[]:n}function jU(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function BU(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,s)=>{e(i,r,s),t(i,r,s)}:n.contentQueries=e}function UU(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}function N_(n){let e=n.inputConfig,t={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[2]&&(t[i]=r[2])}n.inputTransforms=t}function sA(n,e,t){return n[e]=t}function Qs(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function $U(n,e,t,i){let r=Qs(n,e,t);return Qs(n,e+1,i)||r}function kl(n,e,t,i){let r=Ne(),s=e_();if(Qs(r,s,e)){let o=tn(),a=r_();aU(a,r,n,e,t,i)}return kl}function oA(n,e,t,i){return Qs(n,e_(),t)?e+mf(t)+i:Nr}function Uh(n,e){return n<<17|e<<2}function Ys(n){return n>>17&32767}function zU(n){return(n&2)==2}function HU(n,e){return n&131071|e<<17}function Fv(n){return n|2}function Sa(n){return(n&131068)>>2}function Zy(n,e){return n&-131069|e<<2}function qU(n){return(n&1)===1}function Lv(n){return n|1}function WU(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Ys(o),c=Sa(o);n[i]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Al(d,u)>0)&&(l=!0)}else u=t;if(r)if(c!==0){let h=Ys(n[a+1]);n[i+1]=Uh(h,a),h!==0&&(n[h+1]=Zy(n[h+1],i)),n[a+1]=HU(n[a+1],i)}else n[i+1]=Uh(a,0),a!==0&&(n[a+1]=Zy(n[a+1],i)),a=i;else n[i+1]=Uh(c,0),a===0?a=i:n[c+1]=Zy(n[c+1],i),c=i;l&&(n[i+1]=Fv(n[i+1])),tT(n,u,i,!0,s),tT(n,u,i,!1,s),GU(e,u,n,i,s),o=Uh(a,c),s?e.classBindings=o:e.styleBindings=o}function GU(n,e,t,i,r){let s=r?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Al(s,e)>=0&&(t[i+1]=Lv(t[i+1]))}function tT(n,e,t,i,r){let s=n[t+1],o=e===null,a=i?Ys(s):Sa(s),c=!1;for(;a!==0&&(c===!1||o);){let l=n[a],u=n[a+1];KU(l,e)&&(c=!0,n[a+1]=i?Lv(u):Fv(u)),a=i?Ys(u):Sa(u)}c&&(n[t+1]=i?Fv(s):Lv(s))}function KU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Al(n,e)>=0:!1}function ve(n,e,t){let i=Ne(),r=e_();if(Qs(i,r,e)){let s=tn(),o=r_();$x(s,o,i,n,e,i[Dt],t,!1)}return ve}function nT(n,e,t,i,r){let s=e.inputs,o=r?"class":"style";M_(n,t,s[o],o,i)}function Af(n,e){return QU(n,e,null,!0),Af}function QU(n,e,t,i){let r=Ne(),s=tn(),o=nj(2);if(s.firstUpdatePass&&XU(s,n,o,i),e!==Nr&&Qs(r,o,e)){let a=s.data[xa()];n$(s,a,r,r[Dt],n,r[o+1]=i$(e,t),i,o)}}function YU(n,e){return e>=n.expandoStartIndex}function XU(n,e,t,i){let r=n.data;if(r[t+1]===null){let s=r[xa()],o=YU(n,t);r$(s,i)&&e===null&&!o&&(e=!1),e=ZU(r,s,e,i),WU(r,s,e,t,o,i)}}function ZU(n,e,t,i){let r=oj(n),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=Jy(null,n,e,t,i),t=Dl(t,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==r)if(t=Jy(r,n,e,t,i),s===null){let c=JU(n,e,i);c!==void 0&&Array.isArray(c)&&(c=Jy(null,n,e,c[1],i),c=Dl(c,e.attrs,i),e$(n,e,i,c))}else s=t$(n,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),t}function JU(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Sa(i)!==0)return n[Ys(i)]}function e$(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[Ys(r)]=i}function t$(n,e,t){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=n[s].hostAttrs;i=Dl(i,o,t)}return Dl(i,e.attrs,t)}function Jy(n,e,t,i,r){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],i=Dl(i,s.hostAttrs,r),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Dl(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Mj(n,o,t?!0:e[++s]))}return n===void 0?null:n}function n$(n,e,t,i,r,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=qU(l)?iT(c,e,t,r,Sa(l),o):void 0;if(!hf(u)){hf(s)||zU(l)&&(s=iT(c,null,t,r,a,o));let d=OT(xa(),t);gB(i,o,d,r,s)}}function iT(n,e,t,i,r,s){let o=e===null,a;for(;r>0;){let c=n[r],l=Array.isArray(c),u=l?c[1]:c,d=u===null,h=t[r+1];h===Nr&&(h=d?On:void 0);let f=d?Wy(h,i):u===i?h:void 0;if(l&&!hf(f)&&(f=Wy(c,i)),hf(f)&&(a=f,o))return a;let p=n[r+1];r=o?Ys(p):Sa(p)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Wy(c,i))}return a}function hf(n){return n!==void 0}function i$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ht(Rl(n)))),n}function r$(n,e){return(n.flags&(e?8:16))!==0}var Xne=new RegExp(`^(\\d+)*(${CB}|${EB})*(.*)`);var s$=(n,e)=>null;function rT(n,e){return s$(n,e)}function o$(n,e,t,i){let r=e.tView,o=n[ne]&4096?4096:16,a=Sf(n,r,t,o,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null),c=n[e.index];a[Tl]=c;let l=n[yi];return l!==null&&(a[yi]=l.createEmbeddedView(r)),O_(r,a,t),a}function sT(n,e){return!e||yx(n)}function a$(n,e,t,i=!0){let r=e[ye];if(tB(r,e,n,t),i){let s=_v(t,n),o=e[Dt],a=w_(o,n[Us]);a!==null&&Zj(r,n[ei],o,e,a,s)}}var Fr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=c$;let n=e;return n})();function c$(){let n=Cn();return cA(n,Ne())}var l$=Fr,aA=class extends l${constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ra(this._hostTNode,this._hostLView)}get injector(){return new Vs(this._hostTNode,this._hostLView)}get parentInjector(){let e=c_(this._hostTNode,this._hostLView);if(XT(e)){let t=Jh(e,this._hostLView),i=Zh(e),r=t[ye].data[i+8];return new Vs(r,t)}else return new Vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-En}createEmbeddedView(e,t,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=rT(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,r,sT(this._hostTNode,o)),a}createComponent(e,t,i,r,s){let o=e&&!Ij(e),a;if(o)a=t;else{let p=t||{};a=p.index,i=p.injector,r=p.projectableNodes,s=p.environmentInjector||p.ngModuleRef}let c=o?e:new Cl(js(e)),l=i||this.parentInjector;if(!s&&c.ngModule==null){let g=(o?l:this.parentInjector).get(dn,null);g&&(s=g)}let u=js(c.componentType??{}),d=rT(this._lContainer,u?.id??null),h=d?.firstChild??null,f=c.create(l,r,h,s);return this.insertImpl(f.hostView,a,sT(this._hostTNode,d)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if($2(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=r[mt],l=new aA(c,c[ei],c[mt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return a$(o,r,s,i),e.attachToViewContainerRef(),ax(ev(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=vv(this._lContainer,t);i&&(nf(ev(this._lContainer),t),Dx(i[ye],i))}detach(e){let t=this._adjustIndex(e,-1),i=vv(this._lContainer,t);return i&&nf(ev(this._lContainer),t)!=null?new Ks(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function oT(n){return n[Yh]}function ev(n){return n[Yh]||(n[Yh]=[])}function cA(n,e){let t,i=e[n.index];return Jn(i)?t=i:(t=Gx(i,e,null,n),e[n.index]=t,xf(e,t)),d$(t,e,n,i),new aA(t,n,e)}function u$(n,e){let t=n[Dt],i=t.createComment(""),r=Fn(e,n),s=w_(t,r);return of(t,s,i,cB(t,r),!1),i}var d$=p$,h$=(n,e,t)=>!1;function f$(n,e,t){return h$(n,e,t)}function p$(n,e,t,i){if(n[Us])return;let r;t.type&8?r=bi(i):r=u$(e,t),n[Us]=r}function g$(n,e,t,i,r,s,o,a,c){let l=e.consts,u=Tf(e,n,4,o||null,Xh(l,a));zx(e,t,u,Xh(l,c)),a_(e,u);let d=u.tView=A_(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function tt(n,e,t,i,r,s,o,a){let c=Ne(),l=tn(),u=n+Zn,d=l.firstCreatePass?g$(u,l,c,e,t,i,r,s,o):l.data[u];xl(d,!1);let h=m$(l,c,d,n);s_()&&E_(l,c,h,d),Ws(h,c);let f=Gx(h,c,h,d);return c[u]=f,xf(c,f),f$(f,d,c),Zv(d)&&jx(l,c,d),o!=null&&Bx(c,d,a),tt}var m$=y$;function y$(n,e,t,i){return o_(!0),e[Dt].createComment("")}function v$(n,e,t,i,r,s){let o=e.consts,a=Xh(o,r),c=Tf(e,n,2,i,a);return zx(e,t,c,Xh(o,s)),c.attrs!==null&&kv(c,c.attrs,!1),c.mergedAttrs!==null&&kv(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function _(n,e,t,i){let r=Ne(),s=tn(),o=Zn+n,a=r[Dt],c=s.firstCreatePass?v$(o,s,r,e,t,i):s.data[o],l=_$(s,r,c,a,e,n);r[o]=l;let u=Zv(c);return xl(c,!0),xx(a,l,c),(c.flags&32)!==32&&s_()&&E_(s,r,l,c),W2()===0&&Ws(l,r),G2(),u&&(jx(s,r,c),Vx(s,c,r)),i!==null&&Bx(r,c),_}function w(){let n=Cn();UT()?J2():(n=n.parent,xl(n,!1));let e=n;Y2(e)&&X2(),K2();let t=tn();return t.firstCreatePass&&(a_(t,n),MT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&fj(e)&&nT(t,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&pj(e)&&nT(t,e,Ne(),e.stylesWithoutHost,!1),w}function Q(n,e,t,i){return _(n,e,t,i),w(),Q}var _$=(n,e,t,i,r,s)=>(o_(!0),Ex(i,r,lj()));function tr(){return Ne()}var ff="en-US";var b$=ff;function w$(n){c2(n,"Expected localeId to be defined"),typeof n=="string"&&(b$=n.toLowerCase().replace(/_/g,"-"))}function eo(n){return!!n&&typeof n.then=="function"}function lA(n){return!!n&&typeof n.subscribe=="function"}function je(n,e,t,i){let r=Ne(),s=tn(),o=Cn();return C$(s,r,r[Dt],o,n,e,i),je}function E$(n,e,t,i){let r=n.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===t&&r[s+1]===i){let a=e[wl],c=r[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function C$(n,e,t,i,r,s,o){let a=Zv(i),l=n.firstCreatePass&&Yx(n),u=e[Nn],d=Qx(e),h=!0;if(i.type&3||o){let g=Fn(i,e),m=o?o(g):g,y=d.length,v=o?E=>o(bi(E[i.index])):i.index,b=null;if(!o&&a&&(b=E$(n,e,r,i.index)),b!==null){let E=b.__ngLastListenerFn__||b;E.__ngNextListenerFn__=s,b.__ngLastListenerFn__=s,h=!1}else{s=cT(i,e,u,s,!1);let E=t.listen(m,r,s);d.push(s,E),l&&l.push(r,v,y,y+1)}}else s=cT(i,e,u,s,!1);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let g=p.length;if(g)for(let m=0;m<g;m+=2){let y=p[m],v=p[m+1],C=e[y][v].subscribe(s),D=d.length;d.push(s,C),l&&l.push(r,i.index,D,-(D+1))}}}function aT(n,e,t,i){try{return gi(6,e,t),t(i)!==!1}catch(r){return Xx(n,r),!1}finally{gi(7,e,t)}}function cT(n,e,t,i,r){return function s(o){if(o===Function)return i;let a=n.componentOffset>-1?Rr(n.index,e):e;P_(a);let c=aT(e,t,i,o),l=s.__ngNextListenerFn__;for(;l;)c=aT(e,t,l,o)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&o.preventDefault(),c}}function fn(n=1){return cj(n)}function nr(n,e,t){return uA(n,"",e,"",t),nr}function uA(n,e,t,i,r){let s=Ne(),o=oA(s,e,t,i);if(o!==Nr){let a=tn(),c=r_();$x(a,c,s,n,o,s[Dt],r,!1)}return uA}function D$(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function Mf(n){let e=ej();return FT(e,Zn+n)}function I(n,e=""){let t=Ne(),i=tn(),r=n+Zn,s=i.firstCreatePass?Tf(i,r,1,e,null):i.data[r],o=I$(i,t,s,e,n);t[r]=o,s_()&&E_(i,t,o,s),xl(s,!1)}var I$=(n,e,t,i,r)=>(o_(!0),Qj(e[Dt],i));function Fe(n){return ti("",n,""),Fe}function ti(n,e,t){let i=Ne(),r=oA(i,n,e,t);return r!==Nr&&dU(i,xa(),r),ti}function S$(n,e,t){let i=tn();if(i.firstCreatePass){let r=Ar(n);Vv(t,i.data,i.blueprint,r,!0),Vv(e,i.data,i.blueprint,r,!1)}}function Vv(n,e,t,i,r){if(n=en(n),Array.isArray(n))for(let s=0;s<n.length;s++)Vv(n[s],e,t,i,r);else{let s=tn(),o=Ne(),a=Cn(),c=Ia(n)?n:en(n.provide),l=fx(n),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ia(n)||!n.multi){let f=new Hs(l,r,G),p=nv(c,e,r?u:u+h,d);p===-1?(hv(tf(a,o),s,c),tv(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{let f=nv(c,e,u+h,d),p=nv(c,e,u,u+h),g=f>=0&&t[f],m=p>=0&&t[p];if(r&&!m||!r&&!g){hv(tf(a,o),s,c);let y=A$(r?x$:T$,t.length,r,i,l);!r&&m&&(t[p].providerFactory=y),tv(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(y),o.push(y)}else{let y=dA(t[r?p:f],l,!r&&i);tv(s,n,f>-1?f:p,y)}!r&&i&&m&&t[p].componentProviders++}}}function tv(n,e,t,i){let r=Ia(e),s=Nj(e);if(r||s){let c=(s?en(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[i,c]):l[u+1].push(i,c)}else l.push(t,c)}}}function dA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function nv(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function T$(n,e,t,i){return jv(this.multi,[])}function x$(n,e,t,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=qs(t,t[ye],this.providerFactory.index,i);s=a.slice(0,o),jv(r,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],jv(r,s);return s}function jv(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function A$(n,e,t,i,r){let s=new Hs(n,t,G);return s.multi=[],s.index=e,s.componentProviders=0,dA(s,r,i&&!t),s}function Ol(n,e=[]){return t=>{t.providersResolver=(i,r)=>S$(i,r?r(n):n,e)}}var Mr=class{},Il=class{};var Bv=class extends Mr{constructor(e,t,i){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new df(this);let r=IT(e);this._bootstrapComponents=mx(r.bootstrap),this._r3Injector=px(e,t,[{provide:Mr,useValue:this},{provide:Df,useValue:this.componentFactoryResolver},...i],Ht(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Uv=class extends Il{constructor(e){super(),this.moduleType=e}create(e){return new Bv(this.moduleType,e,[])}};var pf=class extends Mr{constructor(e){super(),this.componentFactoryResolver=new df(this),this.instance=null;let t=new sf([...e.providers,{provide:Mr,useValue:this},{provide:Df,useValue:this.componentFactoryResolver}],e.parent||p_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function F_(n,e,t=null){return new pf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var M$=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=ux(!1,i.type),s=r.length>0?F_([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(k(dn))});let n=e;return n})();function ce(n){R_("NgStandalone"),n.getStandaloneInjector=e=>e.get(M$).getOrCreateStandaloneInjector(n)}function L_(n,e,t,i){return P$(Ne(),$T(),n,e,t,i)}function hA(n,e){let t=n[e];return t===Nr?void 0:t}function P$(n,e,t,i,r,s){let o=e+t;return Qs(n,o,r)?sA(n,o+1,s?i.call(s,r):i(r)):hA(n,o+1)}function R$(n,e,t,i,r,s,o){let a=e+t;return $U(n,a,r,s)?sA(n,a+2,o?i.call(o,r,s):i(r,s)):hA(n,a+2)}function fA(n,e){let t=tn(),i,r=n+Zn;t.firstCreatePass?(i=k$(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let s=i.factory||(i.factory=$s(i.type,!0)),o,a=kn(G);try{let c=ef(!1),l=s();return ef(c),D$(t,Ne(),r,l),l}finally{kn(a)}}function k$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function pA(n,e,t,i){let r=n+Zn,s=Ne(),o=FT(s,r);return O$(s,r)?R$(s,$T(),e,o.transform,t,i,o):o.transform(t,i)}function O$(n,e){return n[ye].data[e].pure}function N$(){return this._results[Symbol.iterator]()}var $v=class n{get changes(){return this._changes||(this._changes=new Ot)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=N$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=Tj(e);(this._changesDetected=!Sj(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}},Xs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=V$;let n=e;return n})(),F$=Xs,L$=class extends F${constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=o$(this._declarationLView,this._declarationTContainer,e,{injector:t,dehydratedView:i});return new Ks(r)}};function V$(){return V_(Cn(),Ne())}function V_(n,e){return n.type&4?new L$(e,n,Ra(n,e)):null}var zv=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Hv=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)yA(e,t).matches!==null&&this.queries[t].setDirty()}},qv=class{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}},Wv=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Gv=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,t,j$(t,s)),this.matchTNodeWithReadOption(e,t,Hh(t,e,s,!1,!1))}else i===Xs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Hh(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ln||r===Fr||r===Xs&&t.type&4)this.addMatch(t.index,-2);else{let s=Hh(t,e,r,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function j$(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function B$(n,e){return n.type&11?Ra(n,e):n.type&4?V_(n,e):null}function U$(n,e,t,i){return t===-1?B$(e,n):t===-2?$$(n,e,i):qs(n,n[ye],t,e)}function $$(n,e,t){if(t===Ln)return Ra(e,n);if(t===Xs)return V_(e,n);if(t===Fr)return cA(e,n)}function gA(n,e,t,i){let r=e[yi].queries[i];if(r.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let u=s[l];a.push(U$(e,u,o[c+1],t.metadata.read))}}r.matches=a}return r.matches}function Kv(n,e,t,i){let r=n.queries.getByIndex(t),s=r.matches;if(s!==null){let o=gA(n,e,r,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)i.push(o[a/2]);else{let l=s[a+1],u=e[-c];for(let d=En;d<u.length;d++){let h=u[d];h[Tl]===h[mt]&&Kv(h[ye],h,l,i)}if(u[Ca]!==null){let d=u[Ca];for(let h=0;h<d.length;h++){let f=d[h];Kv(f[ye],f,l,i)}}}}}return i}function j_(n){let e=Ne(),t=tn(),i=zT();t_(i+1);let r=yA(t,i);if(n.dirty&&U2(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let s=r.crossesNgTemplate?Kv(t,e,i,[]):gA(t,e,r,i);n.reset(s,xB),n.notifyOnChanges()}return!0}return!1}function mA(n,e,t){let i=tn();i.firstCreatePass&&(q$(i,new qv(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),H$(i,Ne(),e)}function B_(){return z$(Ne(),zT())}function z$(n,e){return n[yi].queries[e].queryList}function H$(n,e,t){let i=new $v((t&4)===4);WB(n,e,i,i.destroy),e[yi]===null&&(e[yi]=new Hv),e[yi].queries.push(new zv(i))}function q$(n,e,t){n.queries===null&&(n.queries=new Wv),n.queries.track(new Gv(e,t))}function yA(n,e){return n.queries.getByIndex(e)}var vA=new q("Application Initializer"),_A=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=H(vA,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(eo(o))i.push(o);else if(lA(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Pf=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function W$(){return typeof $localize<"u"&&$localize.locale||ff}var U_=new q("LocaleId",{providedIn:"root",factory:()=>H(U_,be.Optional|be.SkipSelf)||W$()});var Oa=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new kt(!1)}add(){this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Qv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},$_=(()=>{let e=class e{compileModuleSync(i){return new Uv(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=IT(i),o=mx(s.declarations).reduce((a,c)=>{let l=js(c);return l&&a.push(new Cl(l)),a},[]);return new Qv(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var bA=new q("");var Gh=null;var wA=new q("PlatformDestroyListeners"),Rf=new q("appBootstrapListener");function G$(){rS(()=>{throw new O(600,!1)})}function K$(n){return n.isBoundToModule}function Q$(n=[]){if(Gh)return Gh;let e=X$(n);return Gh=e,G$(),Y$(e),e}function Y$(n){n.get(m_,null)?.forEach(t=>t())}function EA(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=Q$(i),s=[iz(),...t||[]],a=new pf({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(Pe);return c.run(()=>{a.resolveInjectorInitializers();let l=a.get(Yi,null),u;c.runOutsideAngular(()=>{u=c.onError.subscribe({next:f=>{l.handleError(f)}})});let d=()=>a.destroy(),h=r.get(wA);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),J$(l,c,()=>{let f=a.get(_A);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(U_,ff);w$(p||ff);let g=a.get(Lr);return e!==void 0&&g.bootstrap(e),g})})})}catch(e){return Promise.reject(e)}}function X$(n=[],e){return Js.create({name:e,providers:[{provide:Ef,useValue:"platform"},{provide:wA,useValue:new Set([()=>Gh=null])},...n]})}function Z$(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}function J$(n,e,t){try{let i=t();return eo(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var Lr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=H(CA),this.zoneIsStable=H(iA),this.componentTypes=[],this.components=[],this.isStable=H(Oa).hasPendingTasks.pipe(Ye(i=>i?X(!1):this.zoneIsStable),pl(),pa()),this._injector=H(dn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof cf;if(!this._injector.get(_A).done){let p="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&DT(i)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new O(405,!1)}let a;s?a=i:a=this._injector.get(Df).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let c=K$(a)?void 0:this._injector.get(Mr),l=r||a.selector,u=a.create(Js.NULL,[],l,c),d=u.location.nativeElement,h=u.injector.get(bA,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),iv(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new O(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;iv(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Rf,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>iv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new O(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function iv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var CA=new q("",{providedIn:"root",factory:()=>H(Yi).handleError.bind(void 0)});function ez(){let n=H(Pe),e=H(Yi);return t=>n.runOutsideAngular(()=>e.handleError(t))}var tz=(()=>{let e=class e{constructor(){this.zone=H(Pe),this.applicationRef=H(Lr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function nz(n){return[{provide:Pe,useFactory:n},{provide:Ml,multi:!0,useFactory:()=>{let e=H(tz,{optional:!0});return()=>e.initialize()}},{provide:CA,useFactory:ez},{provide:iA,useFactory:rA}]}function iz(n){let e=nz(()=>new Pe(Z$(n)));return Pa([[],e])}function z_(){return!1}function Vr(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var q_=null;function ir(){return q_}function AA(n){q_||(q_=n)}var kf=class{},Nt=new q("DocumentToken"),MA=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>(()=>H(rz))(),providedIn:"platform"});let n=e;return n})();var rz=(()=>{let e=class e extends MA{constructor(){super(),this._doc=H(Nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ir().getBaseHref(this._doc)}onPopState(i){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=ir().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let n=e;return n})();function PA(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function DA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function to(n){return n&&n[0]!=="?"?"?"+n:n}var Fa=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>(()=>H(RA))(),providedIn:"root"});let n=e;return n})(),sz=new q("appBaseHref"),RA=(()=>{let e=class e extends Fa{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??H(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return PA(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+to(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+to(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+to(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(k(MA),k(sz,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Nl=(()=>{let e=class e{constructor(i){this._subject=new Ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=cz(DA(IA(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+to(r))}normalize(i){return e.stripTrailingSlash(az(this._basePath,IA(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+to(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+to(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=to,e.joinWithSlash=PA,e.stripTrailingSlash=DA,e.\u0275fac=function(r){return new(r||e)(k(Fa))},e.\u0275prov=W({token:e,factory:()=>oz(),providedIn:"root"});let n=e;return n})();function oz(){return new Nl(k(Fa))}function az(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function IA(n){return n.replace(/\/index.html$/,"")}function cz(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Of(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,s]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var H_=/\s+/,SA=[],kA=(()=>{let e=class e{constructor(i,r,s,o){this._iterableDiffers=i,this._keyValueDiffers=r,this._ngEl=s,this._renderer=o,this.initialClasses=SA,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(H_):SA}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(H_):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(H_).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(G(If),G(x_),G(Ln),G(Or))},e.\u0275dir=xt({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var W_=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},pn=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(!1)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(s.previousIndex==null)r.createEmbeddedView(this._template,new W_(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let c=r.get(o);r.move(c,a),TA(c,s)}});for(let s=0,o=r.length;s<o;s++){let c=r.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{let o=r.get(s.currentIndex);TA(o,s)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(G(Fr),G(Xs),G(If))},e.\u0275dir=xt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function TA(n,e){n.context.$implicit=e.item}var jr=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new G_,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){xA("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){xA("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(G(Fr),G(Xs))},e.\u0275dir=xt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),G_=class{constructor(){this.$implicit=null,this.ngIf=null}};function xA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Ht(e)}'.`)}var le=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Wt({type:e}),e.\u0275inj=qt({});let n=e;return n})(),OA="browser",lz="server";function no(n){return n===lz}var Na=class{};var Ll=class{},Ff=class{},io=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Q_=class{encodeKey(e){return NA(e)}encodeValue(e){return NA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function hz(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var fz=/%(\d[a-f0-9])/gi,pz={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function NA(n){return encodeURIComponent(n).replace(fz,(e,t)=>pz[t]??e)}function Nf(n){return`${n}`}var Br=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Q_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=hz(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Nf):[Nf(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Nf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Nf(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Y_=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function gz(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function FA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function LA(n){return typeof Blob<"u"&&n instanceof Blob}function VA(n){return typeof FormData<"u"&&n instanceof FormData}function mz(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Fl=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(gz(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers||(this.headers=new io),this.context||(this.context=new Y_),!this.params)this.params=new Br,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:FA(this.body)||LA(this.body)||VA(this.body)||mz(this.body)||typeof this.body=="string"?this.body:this.body instanceof Br?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||VA(this.body)?null:LA(this.body)?this.body.type||null:FA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Br?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,l=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(l=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),l)),new n(t,i,s,{params:l,headers:c,context:u,reportProgress:a,responseType:r,withCredentials:o})}},La=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(La||{}),Vl=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new io,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},X_=class n extends Vl{constructor(e={}){super(e),this.type=La.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Lf=class n extends Vl{constructor(e={}){super(e),this.type=La.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Vf=class extends Vl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function K_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Z_=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Fl)o=i;else{let l;s.headers instanceof io?l=s.headers:l=new io(s.headers);let u;s.params&&(s.params instanceof Br?u=s.params:u=new Br({fromObject:s.params})),o=new Fl(i,r,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=X(o).pipe(Ir(l=>this.handler.handle(l)));if(i instanceof Fl||s.observe==="events")return a;let c=a.pipe(Tt(l=>l instanceof Lf));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(Z(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(Z(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(Z(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(Z(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Br().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,K_(s,r))}post(i,r,s={}){return this.request("POST",i,K_(s,r))}put(i,r,s={}){return this.request("PUT",i,K_(s,r))}};e.\u0275fac=function(r){return new(r||e)(k(Ll))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function $A(n,e){return e(n)}function yz(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function vz(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}var _z=new q(""),J_=new q(""),bz=new q(""),wz=new q("");function Ez(){let n=null;return(e,t)=>{n===null&&(n=(H(_z,{optional:!0})??[]).reduceRight(yz,$A));let i=H(Oa),r=i.add();return n(e,t).pipe(Tr(()=>i.remove(r)))}}var jA=(()=>{let e=class e extends Ll{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=H(Oa);let s=H(wz,{optional:!0});this.backend=s??i}handle(i){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(J_),...this.injector.get(bz,[])]));this.chain=s.reduceRight((o,a)=>vz(o,a,this.injector),$A)}let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(Tr(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(k(Ff),k(dn))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();var Cz=/^\)\]\}',?\n/;function Dz(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var BA=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new O(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?xe(r.\u0275loadImpl()):X(null)).pipe(Ye(()=>new oe(o=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((m,y)=>a.setRequestHeader(m,y.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let m=i.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(i.responseType){let m=i.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=i.serializeBody(),l=null,u=()=>{if(l!==null)return l;let m=a.statusText||"OK",y=new io(a.getAllResponseHeaders()),v=Dz(a)||i.url;return l=new X_({headers:y,status:a.status,statusText:m,url:v}),l},d=()=>{let{headers:m,status:y,statusText:v,url:b}=u(),E=null;y!==204&&(E=typeof a.response>"u"?a.responseText:a.response),y===0&&(y=E?200:0);let C=y>=200&&y<300;if(i.responseType==="json"&&typeof E=="string"){let D=E;E=E.replace(Cz,"");try{E=E!==""?JSON.parse(E):null}catch(A){E=D,C&&(C=!1,E={error:A,text:E})}}C?(o.next(new Lf({body:E,headers:m,status:y,statusText:v,url:b||void 0})),o.complete()):o.error(new Vf({error:E,headers:m,status:y,statusText:v,url:b||void 0}))},h=m=>{let{url:y}=u(),v=new Vf({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:y||void 0});o.error(v)},f=!1,p=m=>{f||(o.next(u()),f=!0);let y={type:La.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(y.total=m.total),i.responseType==="text"&&a.responseText&&(y.partialText=a.responseText),o.next(y)},g=m=>{let y={type:La.UploadProgress,loaded:m.loaded};m.lengthComputable&&(y.total=m.total),o.next(y)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),i.reportProgress&&(a.addEventListener("progress",p),c!==null&&a.upload&&a.upload.addEventListener("progress",g)),a.send(c),o.next({type:La.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),i.reportProgress&&(a.removeEventListener("progress",p),c!==null&&a.upload&&a.upload.removeEventListener("progress",g)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(k(Na))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),zA=new q("XSRF_ENABLED"),Iz="XSRF-TOKEN",Sz=new q("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>Iz}),Tz="X-XSRF-TOKEN",xz=new q("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>Tz}),jf=class{},Az=(()=>{let e=class e{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=Of(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(k(Nt),k(hn),k(Sz))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function Mz(n,e){let t=n.url.toLowerCase();if(!H(zA)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=H(jf).getToken(),r=H(xz);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var HA=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(HA||{});function Pz(n,e){return{\u0275kind:n,\u0275providers:e}}function Rz(...n){let e=[Z_,BA,jA,{provide:Ll,useExisting:jA},{provide:Ff,useExisting:BA},{provide:J_,useValue:Mz,multi:!0},{provide:zA,useValue:!0},{provide:jf,useClass:Az}];for(let t of n)e.push(...t.\u0275providers);return Pa(e)}var UA=new q("LEGACY_INTERCEPTOR_FN");function kz(){return Pz(HA.LegacyInterceptors,[{provide:UA,useFactory:Ez},{provide:J_,useExisting:UA,multi:!0}])}var Bf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Wt({type:e}),e.\u0275inj=qt({providers:[Rz(kz())]});let n=e;return n})();var n0=class extends kf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},i0=class n extends n0{static makeCurrent(){AA(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Nz();return t==null?null:Fz(t)}resetBaseElement(){jl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Of(document.cookie,e)}},jl=null;function Nz(){return jl=jl||document.querySelector("base"),jl?jl.getAttribute("href"):null}var Uf;function Fz(n){Uf=Uf||document.createElement("a"),Uf.setAttribute("href",n);let e=Uf.pathname;return e.charAt(0)==="/"?e:`/${e}`}var Lz=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),r0=new q("EventManagerPlugins"),GA=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new O(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(k(r0),k(Pe))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),$f=class{constructor(e){this._doc=e}},e0="ng-app-id",KA=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=no(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${e0}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(e0),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(e0,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(k(Nt),k(g_),k(v_,8),k(hn))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),t0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},o0=/%COMP%/g,QA="%COMP%",Vz=`_nghost-${QA}`,jz=`_ngcontent-${QA}`,Bz=!0,Uz=new q("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>Bz});function $z(n){return jz.replace(o0,n)}function zz(n){return Vz.replace(o0,n)}function YA(n,e){return e.map(t=>t.replace(o0,n))}var zf=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=no(c),this.defaultRenderer=new Bl(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===vi.ShadowDom&&(r=Te($({},r),{encapsulation:vi.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Hf?s.applyToHost(i):s instanceof Ul&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case vi.Emulated:o=new Hf(l,u,r,this.appId,d,a,c,h);break;case vi.ShadowDom:return new s0(l,u,i,r,a,c,this.nonce,h);default:o=new Ul(l,u,r,d,a,c,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(k(GA),k(KA),k(g_),k(Uz),k(Nt),k(hn),k(Pe),k(v_))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Bl=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(t0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(qA(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(qA(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new O(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=t0[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=t0[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ki.DashCase|Ki.Important)?e.style.setProperty(t,i,r&Ki.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ki.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=ir().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function qA(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var s0=class extends Bl{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=YA(r.id,r.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ul=class extends Bl{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?YA(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hf=class extends Ul{constructor(e,t,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=$z(l),this.hostAttr=zz(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},Hz=(()=>{let e=class e extends $f{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(k(Nt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),WA=["alt","control","meta","shift"],qz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Wz={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Gz=(()=>{let e=class e extends $f{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ir().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),WA.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=qz[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),WA.forEach(a=>{if(a!==s){let c=Wz[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(k(Nt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function XA(n,e){return EA($({rootComponent:n},Kz(e)))}function Kz(n){return{appProviders:[...Jz,...n?.providers??[]],platformProviders:Zz}}function Qz(){i0.makeCurrent()}function Yz(){return new Yi}function Xz(){return gx(document),document}var Zz=[{provide:hn,useValue:OA},{provide:m_,useValue:Qz,multi:!0},{provide:Nt,useFactory:Xz,deps:[]}];var Jz=[{provide:Ef,useValue:"root"},{provide:Yi,useFactory:Yz,deps:[]},{provide:r0,useClass:Hz,multi:!0,deps:[Nt,Pe,hn]},{provide:r0,useClass:Gz,multi:!0,deps:[Nt]},zf,KA,GA,{provide:Gs,useExisting:zf},{provide:Na,useClass:Lz,deps:[]},[]];function e4(){return new a0(k(Nt))}var a0=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(k(Nt))},e.\u0275prov=W({token:e,factory:function(r){let s=null;return r?s=new r:s=e4(),s},providedIn:"root"});let n=e;return n})();var pe="primary",nu=Symbol("RouteTitle"),h0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function $a(n){return new h0(n)}function n4(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function i4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wi(n[t],e[t]))return!1;return!0}function wi(n,e){let t=n?f0(n):void 0,i=e?f0(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!rM(n[r],e[r]))return!1;return!0}function f0(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function rM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function sM(n){return n.length>0?n[n.length-1]:null}function Hr(n){return Ly(n)?n:eo(n)?xe(Promise.resolve(n)):X(n)}var r4={exact:aM,subset:cM},oM={exact:s4,subset:o4,ignored:()=>!0};function ZA(n,e,t){return r4[t.paths](n.root,e.root,t.matrixParams)&&oM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function s4(n,e){return wi(n,e)}function aM(n,e,t){if(!so(n.segments,e.segments)||!Gf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!aM(n.children[i],e.children[i],t))return!1;return!0}function o4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>rM(n[t],e[t]))}function cM(n,e,t){return lM(n,e,e.segments,t)}function lM(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!so(r,t)||e.hasChildren()||!Gf(r,t,i))}else if(n.segments.length===t.length){if(!so(n.segments,t)||!Gf(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!cM(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!so(n.segments,r)||!Gf(n.segments,r,i)||!n.children[pe]?!1:lM(n.children[pe],e,s,i)}}function Gf(n,e,t){return e.every((i,r)=>oM[t](n[r].parameters,i.parameters))}var Ur=class{constructor(e=new Re([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$a(this.queryParams)),this._queryParamMap}toString(){return l4.serialize(this)}},Re=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kf(this)}},ro=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=$a(this.parameters)),this._parameterMap}toString(){return dM(this)}};function a4(n,e){return so(n,e)&&n.every((t,i)=>wi(t.parameters,e[i].parameters))}function so(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function c4(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===pe&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==pe&&(t=t.concat(e(r,i)))}),t}var V0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>(()=>new Yf)(),providedIn:"root"});let n=e;return n})(),Yf=class{parse(e){let t=new g0(e);return new Ur(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${$l(e.root,!0)}`,i=h4(e.queryParams),r=typeof e.fragment=="string"?`#${u4(e.fragment)}`:"";return`${t}${i}${r}`}},l4=new Yf;function Kf(n){return n.segments.map(e=>dM(e)).join("/")}function $l(n,e){if(!n.hasChildren())return Kf(n);if(e){let t=n.children[pe]?$l(n.children[pe],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==pe&&i.push(`${r}:${$l(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=c4(n,(i,r)=>r===pe?[$l(n.children[pe],!1)]:[`${r}:${$l(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[pe]!=null?`${Kf(n)}/${t[0]}`:`${Kf(n)}/(${t.join("//")})`}}function uM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qf(n){return uM(n).replace(/%3B/gi,";")}function u4(n){return encodeURI(n)}function p0(n){return uM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qf(n){return decodeURIComponent(n)}function JA(n){return Qf(n.replace(/\+/g,"%20"))}function dM(n){return`${p0(n.path)}${d4(n.parameters)}`}function d4(n){return Object.keys(n).map(e=>`;${p0(e)}=${p0(n[e])}`).join("")}function h4(n){let e=Object.keys(n).map(t=>{let i=n[t];return Array.isArray(i)?i.map(r=>`${qf(t)}=${qf(r)}`).join("&"):`${qf(t)}=${qf(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}var f4=/^[^\/()?;#]+/;function c0(n){let e=n.match(f4);return e?e[0]:""}var p4=/^[^\/()?;=#]+/;function g4(n){let e=n.match(p4);return e?e[0]:""}var m4=/^[^=?&#]+/;function y4(n){let e=n.match(m4);return e?e[0]:""}var v4=/^[^&#]+/;function _4(n){let e=n.match(v4);return e?e[0]:""}var g0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[pe]=new Re(e,t)),i}parseSegment(){let e=c0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new O(4009,!1);return this.capture(e),new ro(Qf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=g4(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=c0(this.remaining);r&&(i=r,this.capture(i))}e[Qf(t)]=Qf(i)}parseQueryParam(e){let t=y4(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=_4(this.remaining);o&&(i=o,this.capture(i))}let r=JA(t),s=JA(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=c0(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new O(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[pe]:new Re([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new O(4011,!1)}};function hM(n){return n.segments.length>0?new Re([],{[pe]:n}):n}function fM(n){let e={};for(let i of Object.keys(n.children)){let r=n.children[i],s=fM(r);if(i===pe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new Re(n.segments,e);return b4(t)}function b4(n){if(n.numberOfChildren===1&&n.children[pe]){let e=n.children[pe];return new Re(n.segments.concat(e.segments),e.children)}return n}function za(n){return n instanceof Ur}function w4(n,e,t=null,i=null){let r=pM(n);return gM(r,e,t,i)}function pM(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Re(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=hM(i);return e??r}function gM(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return l0(r,r,r,t,i);let s=E4(e);if(s.toRoot())return l0(r,r,new Re([],{}),t,i);let o=C4(s,r,n),a=o.processChildren?ql(o.segmentGroup,o.index,s.commands):yM(o.segmentGroup,o.index,s.commands);return l0(r,o.segmentGroup,a,t,i)}function Xf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Kl(n){return typeof n=="object"&&n!=null&&n.outlets}function l0(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let o;n===e?o=t:o=mM(n,e,t);let a=hM(fM(o));return new Ur(a,s,r)}function mM(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=mM(s,e,t)}),new Re(n.segments,i)}var Zf=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Xf(i[0]))throw new O(4003,!1);let r=i.find(Kl);if(r&&r!==sM(i))throw new O(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function E4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Zf(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Zf(t,e,i)}var Ba=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function C4(n,e,t){if(n.isAbsolute)return new Ba(e,!0,0);if(!t)return new Ba(e,!1,NaN);if(t.parent===null)return new Ba(t,!0,0);let i=Xf(n.commands[0])?0:1,r=t.segments.length-1+i;return D4(t,r,n.numberOfDoubleDots)}function D4(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new O(4005,!1);r=i.segments.length}return new Ba(i,!1,r-s)}function I4(n){return Kl(n[0])?n[0].outlets:{[pe]:n}}function yM(n,e,t){if(n||(n=new Re([],{})),n.segments.length===0&&n.hasChildren())return ql(n,e,t);let i=S4(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new Re(n.segments.slice(0,i.pathIndex),{});return s.children[pe]=new Re(n.segments.slice(i.pathIndex),n.children),ql(s,0,r)}else return i.match&&r.length===0?new Re(n.segments,{}):i.match&&!n.hasChildren()?m0(n,e,t):i.match?ql(n,0,r):m0(n,e,t)}function ql(n,e,t){if(t.length===0)return new Re(n.segments,{});{let i=I4(t),r={};if(Object.keys(i).some(s=>s!==pe)&&n.children[pe]&&n.numberOfChildren===1&&n.children[pe].segments.length===0){let s=ql(n.children[pe],e,t);return new Re(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=yM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Re(n.segments,r)}}function S4(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(Kl(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!tM(c,l,o))return s;i+=2}else{if(!tM(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function m0(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Kl(s)){let c=T4(s.outlets);return new Re(i,c)}if(r===0&&Xf(t[0])){let c=n.segments[e];i.push(new ro(c.path,eM(t[0]))),r++;continue}let o=Kl(s)?s.outlets[pe]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Xf(a)?(i.push(new ro(o,eM(a))),r+=2):(i.push(new ro(o,{})),r++)}return new Re(i,{})}function T4(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=m0(new Re([],{}),0,i))}),e}function eM(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function tM(n,e,t){return n==t.path&&wi(e,t.parameters)}var Wl="imperative",Vn=class{constructor(e,t){this.id=e,this.url=t}},Ql=class extends Vn{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},$r=class extends Vn{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zr=class extends Vn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},oo=class extends Vn{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}},Yl=class extends Vn{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jf=class extends Vn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y0=class extends Vn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v0=class extends Vn{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_0=class extends Vn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},b0=class extends Vn{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},w0=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},E0=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},C0=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},D0=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},I0=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},S0=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Xl=class{},Zl=class{constructor(e){this.url=e}};var T0=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new sp,this.attachRef=null}},sp=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new T0,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ep=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=x0(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=x0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=A0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return A0(e,this._root).map(t=>t.value)}};function x0(n,e){if(n===e.value)return e;for(let t of e.children){let i=x0(n,t);if(i)return i}return null}function A0(n,e){if(n===e.value)return[e];for(let t of e.children){let i=A0(n,t);if(i.length)return i.unshift(e),i}return[]}var Dn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ja(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var tp=class extends ep{constructor(e,t){super(e),this.snapshot=t,B0(this,e)}toString(){return this.snapshot.toString()}};function vM(n,e){let t=x4(n,e),i=new kt([new ro("",{})]),r=new kt({}),s=new kt({}),o=new kt({}),a=new kt(""),c=new ao(i,r,o,a,s,pe,e,t.root);return c.snapshot=t.root,new tp(new Dn(c,[]),t)}function x4(n,e){let t={},i={},r={},s="",o=new Jl([],t,r,s,i,pe,e,null,{});return new np("",new Dn(o,[]))}var ao=class{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Z(l=>l[nu]))??X(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Z(e=>$a(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Z(e=>$a(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function j0(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:$($({},e.params),n.params),data:$($({},e.data),n.data),resolve:$($($($({},n.data),e.data),r?.data),n._resolvedData)}:i={params:n.params,data:n.data,resolve:$($({},n.data),n._resolvedData??{})},r&&bM(r)&&(i.resolve[nu]=r.title),i}var Jl=class{get title(){return this.data?.[nu]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=$a(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=$a(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},np=class extends ep{constructor(e,t){super(t),this.url=e,B0(this,t)}toString(){return _M(this._root)}};function B0(n,e){e.value._routerState=n,e.children.forEach(t=>B0(n,t))}function _M(n){let e=n.children.length>0?` { ${n.children.map(_M).join(", ")} } `:"";return`${n.value}${e}`}function u0(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wi(e.params,t.params)||n.paramsSubject.next(t.params),i4(e.url,t.url)||n.urlSubject.next(t.url),wi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function M0(n,e){let t=wi(n.params,e.params)&&a4(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||M0(n.parent,e.parent))}function bM(n){return typeof n.title=="string"||n.title===null}var iu=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=pe,this.activateEvents=new Ot,this.deactivateEvents=new Ot,this.attachEvents=new Ot,this.detachEvents=new Ot,this.parentContexts=H(sp),this.location=H(Fr),this.changeDetector=H(ka),this.environmentInjector=H(dn),this.inputBinder=H(U0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new O(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new O(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new O(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new O(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new P0(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=xt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pr]});let n=e;return n})(),P0=class{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ao?this.route:e===sp?this.childContexts:this.parent.get(e,t)}},U0=new q("");function A4(n,e,t){let i=eu(n,e._root,t?t._root:void 0);return new tp(i,e)}function eu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=M4(n,e,t);return new Dn(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>eu(n,a)),o}}let i=P4(e.value),r=e.children.map(s=>eu(n,s));return new Dn(i,r)}}function M4(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return eu(n,i,r);return eu(n,i)})}function P4(n){return new ao(new kt(n.url),new kt(n.params),new kt(n.queryParams),new kt(n.fragment),new kt(n.data),n.outlet,n.component,n)}var wM="ngNavigationCancelingError";function EM(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=za(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=CM(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function CM(n,e,t){let i=new Error("NavigationCancelingError: "+(n||""));return i[wM]=!0,i.cancellationCode=e,t&&(i.url=t),i}function R4(n){return DM(n)&&za(n.url)}function DM(n){return n&&n[wM]}var k4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["ng-component"]],standalone:!0,features:[ce],decls:1,vars:0,template:function(r,s){r&1&&Q(0,"router-outlet")},dependencies:[iu],encapsulation:2});let n=e;return n})();function O4(n,e){return n.providers&&!n._injector&&(n._injector=F_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function $0(n){let e=n.children&&n.children.map($0),t=e?Te($({},n),{children:e}):$({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pe&&(t.component=k4),t}function Ei(n){return n.outlet||pe}function N4(n,e){let t=n.filter(i=>Ei(i)===e);return t.push(...n.filter(i=>Ei(i)!==e)),t}function ru(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var F4=(n,e,t,i)=>Z(r=>(new R0(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),R0=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),u0(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=ja(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ja(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ja(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=ja(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new S0(s.value.snapshot))}),e.children.length&&this.forwardEvent(new D0(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(u0(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),u0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=ru(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},ip=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ua=class{constructor(e,t){this.component=e,this.route=t}};function L4(n,e,t){let i=n._root,r=e?e._root:null;return zl(i,r,t,[i.value])}function V4(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function qa(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!hT(n)?n:e.get(n):i}function zl(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ja(e);return n.children.forEach(o=>{j4(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Gl(a,t.getContext(o),r)),r}function j4(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=B4(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new ip(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?zl(n,e,a?a.children:null,i,r):zl(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ua(a.outlet.component,o))}else o&&Gl(e,a,r),r.canActivateChecks.push(new ip(i)),s.component?zl(n,null,a?a.children:null,i,r):zl(n,null,t,i,r);return r}function B4(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!so(n.url,e.url);case"pathParamsOrQueryParamsChange":return!so(n.url,e.url)||!wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!M0(n,e)||!wi(n.queryParams,e.queryParams);case"paramsChange":default:return!M0(n,e)}}function Gl(n,e,t){let i=ja(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Gl(o,e.children.getContext(s),t):Gl(o,null,t):Gl(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ua(e.outlet.component,r)):t.canDeactivateChecks.push(new Ua(null,r)):t.canDeactivateChecks.push(new Ua(null,r))}function su(n){return typeof n=="function"}function U4(n){return typeof n=="boolean"}function $4(n){return n&&su(n.canLoad)}function z4(n){return n&&su(n.canActivate)}function H4(n){return n&&su(n.canActivateChild)}function q4(n){return n&&su(n.canDeactivate)}function W4(n){return n&&su(n.canMatch)}function IM(n){return n instanceof Gi||n?.name==="EmptyError"}var Wf=Symbol("INITIAL_VALUE");function Ha(){return Ye(n=>Rh(n.map(e=>e.pipe(Qn(1),Fs(Wf)))).pipe(Z(e=>{for(let t of e)if(t!==!0){if(t===Wf)return Wf;if(t===!1||t instanceof Ur)return t}return!0}),Tt(e=>e!==Wf),Qn(1)))}function G4(n,e){return Ct(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?X(Te($({},t),{guardsResult:!0})):K4(o,i,r,n).pipe(Ct(a=>a&&U4(a)?Q4(i,s,n,e):X(a)),Z(a=>Te($({},t),{guardsResult:a})))})}function K4(n,e,t,i){return xe(n).pipe(Ct(r=>eH(r.component,r.route,t,e,i)),Rn(r=>r!==!0,!0))}function Q4(n,e,t,i){return xe(e).pipe(Ir(r=>ha(X4(r.route.parent,i),Y4(r.route,i),J4(n,r.path,t),Z4(n,r.route,t))),Rn(r=>r!==!0,!0))}function Y4(n,e){return n!==null&&e&&e(new I0(n)),X(!0)}function X4(n,e){return n!==null&&e&&e(new C0(n)),X(!0)}function Z4(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return X(!0);let r=i.map(s=>kh(()=>{let o=ru(e)??t,a=qa(s,o),c=z4(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n));return Hr(c).pipe(Rn())}));return X(r).pipe(Ha())}function J4(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>V4(o)).filter(o=>o!==null).map(o=>kh(()=>{let a=o.guards.map(c=>{let l=ru(o.node)??t,u=qa(c,l),d=H4(u)?u.canActivateChild(i,n):l.runInContext(()=>u(i,n));return Hr(d).pipe(Rn())});return X(a).pipe(Ha())}));return X(s).pipe(Ha())}function eH(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return X(!0);let o=s.map(a=>{let c=ru(e)??r,l=qa(a,c),u=q4(l)?l.canDeactivate(n,e,t,i):c.runInContext(()=>l(n,e,t,i));return Hr(u).pipe(Rn())});return X(o).pipe(Ha())}function tH(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return X(!0);let s=r.map(o=>{let a=qa(o,n),c=$4(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t));return Hr(c)});return X(s).pipe(Ha(),SM(i))}function SM(n){return Py(lt(e=>{if(za(e))throw EM(n,e)}),Z(e=>e===!0))}function nH(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return X(!0);let s=r.map(o=>{let a=qa(o,n),c=W4(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t));return Hr(c)});return X(s).pipe(Ha(),SM(i))}var tu=class{constructor(e){this.segmentGroup=e||null}},rp=class extends Error{constructor(e){super(),this.urlTree=e}};function Va(n){return da(new tu(n))}function iH(n){return da(new O(4e3,!1))}function rH(n){return da(CM(!1,3))}var k0=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new O(4002,!1)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return X(i);if(r.numberOfChildren>1||!r.children[pe])return iH(e.redirectTo);r=r.children[pe]}}applyRedirectCommands(e,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new rp(r);return r}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Ur(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new Re(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new O(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},O0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sH(n,e,t,i,r){let s=z0(n,e,t);return s.matched?(i=O4(e,i),nH(i,e,t,r).pipe(Z(o=>o===!0?s:$({},O0)))):X(s)}function z0(n,e,t){if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?$({},O0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||n4)(t,n,e);if(!r)return $({},O0);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?$($({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function nM(n,e,t,i){return t.length>0&&cH(n,t,i)?{segmentGroup:new Re(e,aH(i,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&lH(n,t,i)?{segmentGroup:new Re(n.segments,oH(n,e,t,i,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function oH(n,e,t,i,r){let s={};for(let o of i)if(op(n,t,o)&&!r[Ei(o)]){let a=new Re([],{});s[Ei(o)]=a}return $($({},r),s)}function aH(n,e){let t={};t[pe]=e;for(let i of n)if(i.path===""&&Ei(i)!==pe){let r=new Re([],{});t[Ei(i)]=r}return t}function cH(n,e,t){return t.some(i=>op(n,e,i)&&Ei(i)!==pe)}function lH(n,e,t){return t.some(i=>op(n,e,i))}function op(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function uH(n,e,t,i){return Ei(n)!==i&&(i===pe||!op(e,t,n))?!1:n.path==="**"?!0:z0(e,n,t).matched}function dH(n,e,t){return e.length===0&&!n.children[t]}var N0=class{};function hH(n,e,t,i,r,s,o="emptyOnly"){return new F0(n,e,t,i,r,o,s).recognize()}var fH=31,F0=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new k0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new O(4002,!1)}recognize(){let e=nM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Z(t=>{let i=new Jl([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,{},pe,this.rootComponentType,null,{}),r=new Dn(i,t),s=new np("",r),o=w4(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,pe).pipe(Dr(i=>{if(i instanceof rp)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof tu?this.noMatchError(i):i}))}inheritParamsAndData(e,t){let i=e.value,r=j0(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(Z(s=>s instanceof Dn?[s]:[]))}processChildren(e,t,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return xe(r).pipe(Ir(s=>{let o=i.children[s],a=N4(t,s);return this.processSegmentGroup(e,a,o,s)}),Ns((s,o)=>(s.push(...o),s)),Sr(null),By(),Ct(s=>{if(s===null)return Va(i);let o=TM(s);return pH(o),X(o)}))}processSegment(e,t,i,r,s,o){return xe(t).pipe(Ir(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(Dr(c=>{if(c instanceof tu)return X(null);throw c}))),Rn(a=>!!a),Dr(a=>{if(IM(a))return dH(i,r,s)?X(new N0):Va(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return uH(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):Va(r):Va(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:u}=r.path==="**"?iM(s):z0(t,r,s);if(!a)return Va(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fH&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(Ct(h=>this.processSegment(e,i,t,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){let o;return i.path==="**"?(o=X(iM(r)),t.children={}):o=sH(t,i,r,e,this.urlSerializer),o.pipe(Ye(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Ye(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,f=new Jl(u,h,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,mH(i),Ei(i),i.component??i._loadedComponent??null,i,yH(i)),{segmentGroup:p,slicedSegments:g}=nM(t,u,d,c);if(g.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(Z(y=>y===null?null:new Dn(f,y)));if(c.length===0&&g.length===0)return X(new Dn(f,[]));let m=Ei(i)===s;return this.processSegment(l,c,p,g,m?pe:s,!0).pipe(Z(y=>new Dn(f,y instanceof Dn?[y]:[])))}))):Va(t)))}getChildConfig(e,t,i){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):tH(e,t,i,this.urlSerializer).pipe(Ct(r=>r?this.configLoader.loadChildren(e,t).pipe(lt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):rH(t))):X({routes:[],injector:e})}};function pH(n){n.sort((e,t)=>e.value.outlet===pe?-1:t.value.outlet===pe?1:e.value.outlet.localeCompare(t.value.outlet))}function gH(n){let e=n.value.routeConfig;return e&&e.path===""}function TM(n){let e=[],t=new Set;for(let i of n){if(!gH(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=TM(i.children);e.push(new Dn(i.value,r))}return e.filter(i=>!t.has(i))}function mH(n){return n.data||{}}function yH(n){return n.resolve||{}}function iM(n){return{matched:!0,parameters:n.length>0?sM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function vH(n,e,t,i,r,s){return Ct(o=>hH(n,e,t,i,o.extractedUrl,r,s).pipe(Z(({state:a,tree:c})=>Te($({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function _H(n,e){return Ct(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return X(t);let s=r.map(l=>l.route),o=new Set(s),a=xM(s[0].parent).slice(1),c=0;return xe(a).pipe(Ir(l=>o.has(l)?bH(l,i,n,e):(l.data=j0(l,l.parent,n).resolve,X(void 0))),lt(()=>c++),fa(1),Ct(l=>c===a.length?X(t):ln))})}function xM(n){let e=n.children.map(t=>xM(t)).flat();return[n,...e]}function bH(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!bM(r)&&(s[nu]=r.title),wH(s,n,e,i).pipe(Z(o=>(n._resolvedData=o,n.data=j0(n,n.parent,t).resolve,null)))}function wH(n,e,t,i){let r=f0(n);if(r.length===0)return X({});let s={};return xe(r).pipe(Ct(o=>EH(n[o],e,t,i).pipe(Rn(),lt(a=>{s[o]=a}))),fa(1),jy(s),Dr(o=>IM(o)?ln:da(o)))}function EH(n,e,t,i){let r=ru(e)??i,s=qa(n,r),o=s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t));return Hr(o)}function d0(n){return Ye(e=>{let t=n(e);return t?xe(t).pipe(Z(()=>e)):X(e)})}var AM=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===pe);return r}getResolvedTitleForRoute(i){return i.data[nu]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>(()=>H(CH))(),providedIn:"root"});let n=e;return n})(),CH=(()=>{let e=class e extends AM{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(k(a0))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),H0=new q("",{providedIn:"root",factory:()=>({})}),q0=new q("ROUTES"),DH=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=H($_)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return X(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Hr(i.loadComponent()).pipe(Z(MM),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Tr(()=>{this.componentLoaders.delete(i)})),s=new aa(r,()=>new gt).pipe(oa());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=IH(r,this.compiler,i,this.onLoadEndListener).pipe(Tr(()=>{this.childrenLoaders.delete(r)})),a=new aa(o,()=>new gt).pipe(oa());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function IH(n,e,t,i){return Hr(n.loadChildren()).pipe(Z(MM),Ct(r=>r instanceof Il||Array.isArray(r)?X(r):xe(e.compileModuleAsync(r))),Z(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(q0,[],{optional:!0,self:!0}).flat()),{routes:o.map($0),injector:s}}))}function SH(n){return n&&typeof n=="object"&&"default"in n}function MM(n){return SH(n)?n.default:n}var W0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>(()=>H(TH))(),providedIn:"root"});let n=e;return n})(),TH=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xH=new q("");var AH=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new gt,this.transitionAbortSubject=new gt,this.configLoader=H(DH),this.environmentInjector=H(dn),this.urlSerializer=H(V0),this.rootContexts=H(sp),this.location=H(Nl),this.inputBindingEnabled=H(U0,{optional:!0})!==null,this.titleStrategy=H(AM),this.options=H(H0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=H(W0),this.createViewTransition=H(xH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let i=s=>this.events.next(new w0(s)),r=s=>this.events.next(new E0(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Te($($({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new kt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Wl,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Tt(o=>o.id!==0),Z(o=>Te($({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ye(o=>{this.currentTransition=o;let a=!1,c=!1;return X(o).pipe(lt(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Te($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ye(l=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new oo(l.id,this.urlSerializer.serialize(l.rawUrl),h,0)),l.resolve(null),ln}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return X(l).pipe(Ye(h=>{let f=this.transitions?.getValue();return this.events.next(new Ql(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?ln:Promise.resolve(h)}),vH(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=Te($({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Jf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:m}=l,y=new Ql(h,this.urlSerializer.serialize(f),p,g);this.events.next(y);let v=vM(f,this.rootComponentType).snapshot;return this.currentTransition=o=Te($({},l),{targetSnapshot:v,urlAfterRedirects:f,extras:Te($({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,X(o)}else{let h="";return this.events.next(new oo(l.id,this.urlSerializer.serialize(l.extractedUrl),h,1)),l.resolve(null),ln}}),lt(l=>{let u=new y0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),Z(l=>(this.currentTransition=o=Te($({},l),{guards:L4(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),G4(this.environmentInjector,l=>this.events.next(l)),lt(l=>{if(o.guardsResult=l.guardsResult,za(l.guardsResult))throw EM(this.urlSerializer,l.guardsResult);let u=new v0(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),Tt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",3),!1)),d0(l=>{if(l.guards.canActivateChecks.length)return X(l).pipe(lt(u=>{let d=new _0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ye(u=>{let d=!1;return X(u).pipe(_H(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",2)}}))}),lt(u=>{let d=new b0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),d0(l=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(lt(f=>{d.component=f}),Z(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Rh(u(l.targetSnapshot.root)).pipe(Sr(),Qn(1))}),d0(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return d?xe(d).pipe(Z(()=>o)):X(o)}),Z(l=>{let u=A4(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Te($({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),lt(()=>{this.events.next(new Xl)}),F4(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Qn(1),lt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new $r(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),$y(this.transitionAbortSubject.pipe(lt(l=>{throw l}))),Tr(()=>{if(!a&&!c){let l="";this.cancelNavigationTransition(o,l,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Dr(l=>{if(c=!0,DM(l))this.events.next(new zr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),R4(l)?this.events.next(new Zl(l.url)):o.resolve(!1);else{this.events.next(new Yl(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(u){o.reject(u)}}return ln}))}))}cancelNavigationTransition(i,r,s){let o=new zr(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function MH(n){return n!==Wl}var PH=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>(()=>H(RH))(),providedIn:"root"});let n=e;return n})(),L0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},RH=(()=>{let e=class e extends L0{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),PM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:()=>(()=>H(kH))(),providedIn:"root"});let n=e;return n})(),kH=(()=>{let e=class e extends PM{constructor(){super(...arguments),this.location=H(Nl),this.urlSerializer=H(V0),this.options=H(H0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=H(W0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ur,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vM(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Ql)this.stateMemento=this.createStateMemento();else if(i instanceof oo)this.rawUrlTree=r.initialUrl;else if(i instanceof Jf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Xl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof zr&&(i.code===3||i.code===2)?this.restoreHistory(r):i instanceof Yl?this.restoreHistory(r,!0):i instanceof $r&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=$($({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=$($({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Hl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Hl||{});function OH(n,e){n.events.pipe(Tt(t=>t instanceof $r||t instanceof zr||t instanceof Yl||t instanceof oo),Z(t=>t instanceof $r||t instanceof oo?Hl.COMPLETE:(t instanceof zr?t.code===0||t.code===1:!1)?Hl.REDIRECTING:Hl.FAILED),Tt(t=>t!==Hl.REDIRECTING),Qn(1)).subscribe(()=>{e()})}function NH(n){throw n}var FH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ft=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=H(Pf),this.stateManager=H(PM),this.options=H(H0,{optional:!0})||{},this.pendingTasks=H(Oa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=H(AH),this.urlSerializer=H(V0),this.location=H(Nl),this.urlHandlingStrategy=H(W0),this._events=new gt,this.errorHandler=this.options.errorHandler||NH,this.navigated=!1,this.routeReuseStrategy=H(PH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=H(q0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!H(U0,{optional:!0}),this.eventsSubscription=new pt,this.isNgZoneEnabled=H(Pe)instanceof Pe&&Pe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof zr&&r.code!==0&&r.code!==1)this.navigated=!0;else if(r instanceof $r)this.navigated=!0;else if(r instanceof Zl){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||MH(s.source)};this.scheduleNavigation(a,Wl,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}jH(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Wl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)}))}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=$({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map($0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=pM(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return gM(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=za(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Wl,null,r)}navigate(i,r={skipLocationChange:!1}){return VH(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=$({},FH):r===!1?s=$({},LH):s=r,za(i))return ZA(this.currentUrlTree,i,s);let o=this.parseUrl(i);return ZA(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.keys(i).reduce((r,s)=>{let o=i[s];return o!=null&&(r[s]=o),r},{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,u;a?(c=a.resolve,l=a.reject,u=a.promise):u=new Promise((h,f)=>{c=h,l=f});let d=this.pendingTasks.add();return OH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function VH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new O(4008,!1)}function jH(n){return!(n instanceof Xl)&&!(n instanceof Zl)}var Ci=(()=>{let e=class e{constructor(i,r,s,o,a,c){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=c,this.href=null,this.commands=null,this.onChanges=new gt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof $r&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let i=this.href===null?null:Mx(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(G(Ft),G(ao),l_("tabindex"),G(Or),G(Ln),G(Fa))},e.\u0275dir=xt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&je("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&kl("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",Vr],skipLocationChange:["skipLocationChange","skipLocationChange",Vr],replaceUrl:["replaceUrl","replaceUrl",Vr],routerLink:"routerLink"},standalone:!0,features:[N_,Pr]});let n=e;return n})();var BH=new q("");function RM(n,...e){return Pa([{provide:q0,multi:!0,useValue:n},[],{provide:ao,useFactory:UH,deps:[Ft]},{provide:Rf,multi:!0,useFactory:$H},e.map(t=>t.\u0275providers)])}function UH(n){return n.routerState.root}function $H(){let n=H(Js);return e=>{let t=n.get(Lr);if(e!==t.components[0])return;let i=n.get(Ft),r=n.get(zH);n.get(HH)===1&&i.initialNavigation(),n.get(qH,null,be.Optional)?.setUpPreloading(),n.get(BH,null,be.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var zH=new q("",{factory:()=>new gt}),HH=new q("",{providedIn:"root",factory:()=>1});var qH=new q("");var kM={firebase:{apiKey:"AIzaSyAG0hszH-LeA5KP1PQUYzZuPRp98ump2Ow",authDomain:"test-fb550.firebaseapp.com",databaseURL:"https://test-fb550-default-rtdb.europe-west1.firebasedatabase.app",projectId:"test-fb550",storageBucket:"test-fb550.appspot.com",messagingSenderId:"422343817880",appId:"1:422343817880:web:91df2b92b6f6663c9faeed"},production:!0,useEmulators:!1};var Di="*";function OM(n,e=null){return{type:2,steps:n,options:e}}function G0(n){return{type:6,styles:n,offset:null}}var qr=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},ou=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},ap="!";function NM(n){return new O(3e3,!1)}function WH(){return new O(3100,!1)}function GH(){return new O(3101,!1)}function KH(n){return new O(3001,!1)}function QH(n){return new O(3003,!1)}function YH(n){return new O(3004,!1)}function XH(n,e){return new O(3005,!1)}function ZH(){return new O(3006,!1)}function JH(){return new O(3007,!1)}function e3(n,e){return new O(3008,!1)}function t3(n){return new O(3002,!1)}function n3(n,e,t,i,r){return new O(3010,!1)}function i3(){return new O(3011,!1)}function r3(){return new O(3012,!1)}function s3(){return new O(3200,!1)}function o3(){return new O(3202,!1)}function a3(){return new O(3013,!1)}function c3(n){return new O(3014,!1)}function l3(n){return new O(3015,!1)}function u3(n){return new O(3016,!1)}function d3(n,e){return new O(3404,!1)}function h3(n){return new O(3502,!1)}function f3(n){return new O(3503,!1)}function p3(){return new O(3300,!1)}function g3(n){return new O(3504,!1)}function m3(n){return new O(3301,!1)}function y3(n,e){return new O(3302,!1)}function v3(n){return new O(3303,!1)}function _3(n,e){return new O(3400,!1)}function b3(n){return new O(3401,!1)}function w3(n){return new O(3402,!1)}function E3(n,e){return new O(3505,!1)}function Wr(n){switch(n.length){case 0:return new qr;case 1:return n[0];default:return new ou(n)}}function QM(n,e,t=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(c=>{let l=c.get("offset"),u=l==o,d=u&&a||new Map;c.forEach((h,f)=>{let p=f,g=h;if(f!=="offset")switch(p=n.normalizePropertyName(p,r),g){case ap:g=t.get(f);break;case Di:g=i.get(f);break;default:g=n.normalizeStyleValue(f,p,g,r);break}d.set(p,g)}),u||s.push(d),a=d,o=l}),r.length)throw h3(r);return s}function gb(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&K0(t,"start",n)));break;case"done":n.onDone(()=>i(t&&K0(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&K0(t,"destroy",n)));break}}function K0(n,e,t){let i=t.totalTime,r=!!t.disabled,s=mb(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),o=n._data;return o!=null&&(s._data=o),s}function mb(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Sn(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function FM(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var C3=(()=>typeof document>"u"?null:document.documentElement)();function yb(n){let e=n.parentNode||n.host||null;return e===C3?null:e}function D3(n){return n.substring(1,6)=="ebkit"}var lo=null,LM=!1;function I3(n){lo||(lo=S3()||{},LM=lo.style?"WebkitAppearance"in lo.style:!1);let e=!0;return lo.style&&!D3(n)&&(e=n in lo.style,!e&&LM&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in lo.style)),e}function S3(){return typeof document<"u"?document.body:null}function YM(n,e){for(;e;){if(e===n)return!0;e=yb(e)}return!1}function XM(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var vb=(()=>{let e=class e{validateStyleProperty(i){return I3(i)}matchesElement(i,r){return!1}containsElement(i,r){return YM(i,r)}getParentElement(i){return yb(i)}query(i,r,s){return XM(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,o,a,c=[],l){return new qr(s,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),fu=(()=>{let e=class e{};e.NOOP=new vb;let n=e;return n})(),fo=class{};var T3=1e3,ZM="{{",x3="}}",JM="ng-enter",eb="ng-leave",cp="ng-trigger",fp=".ng-trigger",VM="ng-animating",tb=".ng-animating";function rr(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:nb(parseFloat(e[1]),e[2])}function nb(n,e){switch(e){case"s":return n*T3;default:return n}}function pp(n,e,t){return n.hasOwnProperty("duration")?n:A3(n,e,t)}function A3(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(NM(n)),{duration:0,delay:0,easing:""};r=nb(parseFloat(a[1]),a[2]);let c=a[3];c!=null&&(s=nb(parseFloat(c),a[4]));let l=a[5];l&&(o=l)}else r=n;if(!t){let a=!1,c=e.length;r<0&&(e.push(WH()),a=!0),s<0&&(e.push(GH()),a=!0),a&&e.splice(c,0,NM(n))}return{duration:r,delay:s,easing:o}}function pu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function eP(n){let e=new Map;return Object.keys(n).forEach(t=>{let i=n[t];e.set(t,i)}),e}function M3(n){return n.length?n[0]instanceof Map?n:n.map(e=>eP(e)):[]}function Ga(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function Ii(n,e,t){e.forEach((i,r)=>{let s=_b(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function ho(n,e){e.forEach((t,i)=>{let r=_b(i);n.style[r]=""})}function au(n){return Array.isArray(n)?n.length==1?n[0]:OM(n):n}function P3(n,e,t){let i=e.params||{},r=tP(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(KH(s))})}var ib=new RegExp(`${ZM}\\s*(.+?)\\s*${x3}`,"g");function tP(n){let e=[];if(typeof n=="string"){let t;for(;t=ib.exec(n);)e.push(t[1]);ib.lastIndex=0}return e}function lu(n,e,t){let i=n.toString(),r=i.replace(ib,(s,o)=>{let a=e[o];return a==null&&(t.push(QH(o)),a=""),a.toString()});return r==i?n:r}function gp(n){let e=[],t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}var R3=/-+([a-z0-9])/g;function _b(n){return n.replace(R3,(...e)=>e[1].toUpperCase())}function k3(n,e){return n===0||e===0}function O3(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,nP(n,a)))}}return e}function In(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw YH(e.type)}}function nP(n,e){return window.getComputedStyle(n)[e]}var N3=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),mp=class extends fo{normalizePropertyName(e,t){return _b(e)}normalizeStyleValue(e,t,i,r){let s="",o=i.toString().trim();if(N3.has(t)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(XH(e,i))}return o+s}};var yp="*";function F3(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>L3(i,t,e)):t.push(n),t}function L3(n,e,t){if(n[0]==":"){let c=V3(n,t);if(typeof c=="function"){e.push(c);return}n=c}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(l3(n)),e;let r=i[1],s=i[2],o=i[3];e.push(jM(r,o));let a=r==yp&&o==yp;s[0]=="<"&&!a&&e.push(jM(o,r))}function V3(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(u3(n)),"* => *"}}var lp=new Set(["true","1"]),up=new Set(["false","0"]);function jM(n,e){let t=lp.has(n)||up.has(n),i=lp.has(e)||up.has(e);return(r,s)=>{let o=n==yp||n==r,a=e==yp||e==s;return!o&&t&&typeof r=="boolean"&&(o=r?lp.has(n):up.has(n)),!a&&i&&typeof s=="boolean"&&(a=s?lp.has(e):up.has(e)),o&&a}}var iP=":self",j3=new RegExp(`s*${iP}s*,?`,"g");function rP(n,e,t,i){return new rb(n).build(e,t,i)}var BM="",rb=class{constructor(e){this._driver=e}build(e,t,i){let r=new sb(t);return this._resetContextStyleTimingState(r),In(this,au(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=BM,e.collectedStyles=new Map,e.collectedStyles.set(BM,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(ZH()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==0){let c=a,l=c.name;l.toString().split(/\s*,\s*/).forEach(u=>{c.name=u,s.push(this.visitState(c,t))}),c.name=l}else if(a.type==1){let c=this.visitTransition(a,t);i+=c.queryCount,r+=c.depCount,o.push(c)}else t.errors.push(JH())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};if(i.styles.forEach(a=>{a instanceof Map&&a.forEach(c=>{tP(c).forEach(l=>{o.hasOwnProperty(l)||s.add(l)})})}),s.size){let a=gp(s.values());t.errors.push(e3(e.name,a))}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=In(this,au(e.animation),t);return{type:1,matchers:F3(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:uo(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>In(this,i,t)),options:uo(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,s=e.steps.map(o=>{t.currentTime=i;let a=In(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:uo(e.options)}}visitAnimate(e,t){let i=z3(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:G0({});if(s.type==5)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let l={};i.easing&&(l.easing=i.easing),o=G0(l)}t.currentTime+=i.duration+i.delay;let c=this.visitStyle(o,t);c.isEmptyStep=a,r=c}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Di?i.push(a):t.errors.push(t3(a)):i.push(eP(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let c of a.values())if(c.toString().indexOf(ZM)>=0){s=!0;break}}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,c)=>{let l=t.collectedStyles.get(t.currentQuerySelector),u=l.get(c),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(n3(c,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&l.set(c,{startTime:s,endTime:r}),t.options&&P3(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(i3()),i;let r=1,s=0,o=[],a=!1,c=!1,l=0,u=e.steps.map(y=>{let v=this._makeStyleAst(y,t),b=v.offset!=null?v.offset:$3(v.styles),E=0;return b!=null&&(s++,E=v.offset=b),c=c||E<0||E>1,a=a||E<l,l=E,o.push(E),v});c&&t.errors.push(r3()),a&&t.errors.push(s3());let d=e.steps.length,h=0;s>0&&s<d?t.errors.push(o3()):s==0&&(h=r/(d-1));let f=d-1,p=t.currentTime,g=t.currentAnimateTimings,m=g.duration;return u.forEach((y,v)=>{let b=h>0?v==f?1:h*v:o[v],E=b*m;t.currentTime=p+g.delay+E,g.duration=E,this._validateStyleAst(y,t),y.offset=b,i.styles.push(y)}),i}visitReference(e,t){return{type:8,animation:In(this,au(e.animation),t),options:uo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:uo(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:uo(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=B3(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Sn(t.collectedStyles,t.currentQuerySelector,new Map);let a=In(this,au(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:uo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(a3());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:pp(e.timings,t.errors,!0);return{type:12,animation:In(this,au(e.animation),t),timings:i,options:null}}};function B3(n){let e=!!n.split(/\s*,\s*/).find(t=>t==iP);return e&&(n=n.replace(j3,"")),n=n.replace(/@\*/g,fp).replace(/@\w+/g,t=>fp+"-"+t.slice(1)).replace(/:animating/g,tb),[n,e]}function U3(n){return n?pu(n):null}var sb=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function $3(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function z3(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=pp(n,e).duration;return Q0(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Q0(0,0,"");return s.dynamic=!0,s.strValue=t,s}let r=pp(t,e);return Q0(r.duration,r.delay,r.easing)}function uo(n){return n?(n=pu(n),n.params&&(n.params=U3(n.params))):n={},n}function Q0(n,e,t){return{duration:n,delay:e,easing:t}}function bb(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var uu=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},H3=1,q3=":enter",W3=new RegExp(q3,"g"),G3=":leave",K3=new RegExp(G3,"g");function sP(n,e,t,i,r,s=new Map,o=new Map,a,c,l=[]){return new ob().buildKeyframes(n,e,t,i,r,s,o,a,c,l)}var ob=class{buildKeyframes(e,t,i,r,s,o,a,c,l,u=[]){l=l||new uu;let d=new ab(e,t,l,r,s,u,[]);d.options=c;let h=c.delay?rr(c.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,c),In(this,i,d);let f=d.timelines.filter(p=>p.containsAnimation());if(f.length&&a.size){let p;for(let g=f.length-1;g>=0;g--){let m=f[g];if(m.element===t){p=m;break}}p&&!p.allowOnlyTimelineStyles()&&p.setStyles([a],null,d.errors,c)}return f.length?f.map(p=>p.buildKeyframes()):[bb(t,[],[],[],0,h,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:rr(lu(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime,o=i.duration!=null?rr(i.duration):null,a=i.delay!=null?rr(i.delay):null;return o!==0&&e.forEach(c=>{let l=t.appendInstructionToTimeline(c,o,a);s=Math.max(s,l.duration+l.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),In(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==6&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=vp);let o=rr(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>In(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,s=e.options&&e.options.delay?rr(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),In(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?lu(i,t.params,t.errors):i;return pp(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==5?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(c=>{let l=c.offset||0;a.forwardTime(l*s),a.setStyles(c.styles,c.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?rr(r.delay):0;s&&(t.previousNode.type===6||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=vp);let o=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let c=null;a.forEach((l,u)=>{t.currentQueryIndex=u;let d=t.createSubContext(e.options,l);s&&d.delayNextStep(s),l===t.element&&(c=d.currentTimeline),In(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),c=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=a-c;break;case"full":c=i.currentStaggerTime;break}let u=t.currentTimeline;c&&u.delayNextStep(c);let d=u.currentTime;In(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},vp={},ab=class n{constructor(e,t,i,r,s,o,a,c){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=vp,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new _p(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=rr(i.duration)),i.delay!=null&&(r.delay=rr(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=lu(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=vp,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new cb(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(W3,"."+this._enterClassName),e=e.replace(K3,"."+this._leaveClassName);let c=i!=1,l=this._driver.query(this.element,e,c);i!==0&&(l=i<0?l.slice(l.length+i,l.length):l.slice(0,i)),a.push(...l)}return!s&&a.length==0&&o.push(c3(t)),a}},_p=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=H3,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Di),this._currentKeyframe.set(t,Di);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let s=r&&r.params||{},o=Q3(e,this._globalTimelineStyles);for(let[a,c]of o){let l=lu(c,s,i);this._pendingStyles.set(a,l),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Di),this._updateStyle(a,l)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,c)=>{let l=Ga(a,new Map,this._backFill);l.forEach((u,d)=>{u===ap?e.add(d):u===Di&&t.add(d)}),i||l.set("offset",c/this.duration),r.push(l)});let s=e.size?gp(e.values()):[],o=t.size?gp(t.values()):[];if(i){let a=r[0],c=new Map(a);a.set("offset",0),c.set("offset",1),r=[a,c]}return bb(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},cb=class extends _p{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=i+t,a=t/o,c=Ga(e[0]);c.set("offset",0),s.push(c);let l=Ga(e[0]);l.set("offset",UM(a)),s.push(l);let u=e.length-1;for(let d=1;d<=u;d++){let h=Ga(e[d]),f=h.get("offset"),p=t+f*i;h.set("offset",UM(p/o)),s.push(h)}i=o,t=0,r="",e=s}return bb(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function UM(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Q3(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i=i||e.keys();for(let s of i)t.set(s,Di)}else Ga(r,t)}),t}function $M(n,e,t,i,r,s,o,a,c,l,u,d,h){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:c,preStyleProps:l,postStyleProps:u,totalTime:d,errors:h}}var Y0={},bp=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Y3(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,c,l,u){let d=[],h=this.ast.options&&this.ast.options.params||Y0,f=a&&a.params||Y0,p=this.buildStyles(i,f,d),g=c&&c.params||Y0,m=this.buildStyles(r,g,d),y=new Set,v=new Map,b=new Map,E=r==="void",C={params:X3(g,h),delay:this.ast.options?.delay},D=u?[]:sP(e,t,this.ast.animation,s,o,p,m,C,l,d),A=0;if(D.forEach(B=>{A=Math.max(B.duration+B.delay,A)}),d.length)return $M(t,this._triggerName,i,r,E,p,m,[],[],v,b,A,d);D.forEach(B=>{let ee=B.element,se=Sn(v,ee,new Set);B.preStyleProps.forEach(Ge=>se.add(Ge));let he=Sn(b,ee,new Set);B.postStyleProps.forEach(Ge=>he.add(Ge)),ee!==t&&y.add(ee)});let M=gp(y.values());return $M(t,this._triggerName,i,r,E,p,m,D,M,v,b,A)}};function Y3(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}function X3(n,e){let t=pu(e);for(let i in n)n.hasOwnProperty(i)&&n[i]!=null&&(t[i]=n[i]);return t}var lb=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=pu(this.defaultParams);return Object.keys(e).forEach(s=>{let o=e[s];o!==null&&(r[s]=o)}),this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=lu(o,r,t));let c=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,c,o,t),i.set(a,o)})}),i}};function Z3(n,e,t){return new ub(n,e,t)}var ub=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new lb(r.style,s,i))}),zM(this.states,"true","1"),zM(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new bp(e,r,this.states))}),this.fallbackTransition=J3(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function J3(n,e,t){let s={type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0};return new bp(n,s,e)}function zM(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var e5=new uu,db=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],s=rP(this._driver,t,i,r);if(i.length)throw f3(i);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,t,i){let r=e.element,s=QM(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=sP(this._driver,t,s,JM,eb,new Map,new Map,i,e5,r),o.forEach(u=>{let d=Sn(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(p3()),o=[]),r.length)throw g3(r);a.forEach((u,d)=>{u.forEach((h,f)=>{u.set(f,this._driver.computeStyle(d,f,Di))})});let c=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),l=Wr(c);return this._playersById.set(e,l),l.onDestroy(()=>this.destroy(e)),this.players.push(l),l}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw m3(e);return t}listen(e,t,i,r){let s=mb(t,"","","");return gb(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},HM="ng-animate-queued",t5=".ng-animate-queued",X0="ng-animate-disabled",n5=".ng-animate-disabled",i5="ng-star-inserted",r5=".ng-star-inserted",s5=[],oP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},o5={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ii="__ng_removed",du=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=c5(r),i){let s=pu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},cu="void",Z0=new du(cu),hb=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,jn(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw y3(i,t);if(i==null||i.length==0)throw v3(t);if(!l5(i))throw _3(i,t);let s=Sn(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);let a=Sn(this._engine.statesByElement,e,new Map);return a.has(t)||(jn(e,cp),jn(e,cp+"-"+t),a.set(t,Z0)),()=>{this._engine.afterFlush(()=>{let c=s.indexOf(o);c>=0&&s.splice(c,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw b3(e);return t}trigger(e,t,i,r=!0){let s=this._getTrigger(t),o=new hu(this.id,t,e),a=this._engine.statesByElement.get(e);a||(jn(e,cp),jn(e,cp+"-"+t),this._engine.statesByElement.set(e,a=new Map));let c=a.get(t),l=new du(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&c&&l.absorbOptions(c.options),a.set(t,l),c||(c=Z0),!(l.value===cu)&&c.value===l.value){if(!h5(c.params,l.params)){let g=[],m=s.matchStyles(c.value,c.params,g),y=s.matchStyles(l.value,l.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{ho(e,m),Ii(e,y)})}return}let h=Sn(this._engine.playersByElement,e,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==t&&g.queued&&g.destroy()});let f=s.matchTransition(c.value,l.value,e,l.params),p=!1;if(!f){if(!r)return;f=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:f,fromState:c,toState:l,player:o,isFallbackTransition:p}),p||(jn(e,HM),o.onStart(()=>{Wa(e,HM)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);let m=this._engine.playersByElement.get(e);if(m){let y=m.indexOf(o);y>=0&&m.splice(y,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,fp,!0);i.forEach(r=>{if(r[ii])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((c,l)=>{if(o.set(l,c.value),this._triggers.has(l)){let u=this.trigger(e,l,cu,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Wr(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let c=this._triggers.get(o).fallbackTransition,l=i.get(o)||Z0,u=new du(cu),d=new hu(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:c,fromState:l,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let s=e[ii];(!s||s===oP)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){jn(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let c=mb(s,i.triggerName,i.fromState.value,i.toState.value);c._data=e,gb(i.player,a.phase,c,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},fb=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new hb(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let c=r.get(a);if(c){let l=i.indexOf(c);i.splice(l+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}}return t}trigger(e,t,i,r){if(dp(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!dp(t))return;let s=t[ii];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),jn(e,X0)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Wa(e,X0))}removeNode(e,t,i){if(dp(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[ii]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return dp(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,fp,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,tb,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Wr(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[ii];if(t&&t.setForRemoval){if(e[ii]=oP,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(X0)&&this.markElementAsDisabled(e,!1),this.driver.query(e,n5,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];jn(r,i5)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Wr(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw w3(e)}_flushAnimations(e,t){let i=new uu,r=[],s=new Map,o=[],a=new Map,c=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(N=>{u.add(N);let L=this.driver.query(N,t5,!0);for(let K=0;K<L.length;K++)u.add(L[K])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),f=GM(h,this.collectedEnterElements),p=new Map,g=0;f.forEach((N,L)=>{let K=JM+g++;p.set(L,K),N.forEach(te=>jn(te,K))});let m=[],y=new Set,v=new Set;for(let N=0;N<this.collectedLeaveElements.length;N++){let L=this.collectedLeaveElements[N],K=L[ii];K&&K.setForRemoval&&(m.push(L),y.add(L),K.hasAnimation?this.driver.query(L,r5,!0).forEach(te=>y.add(te)):v.add(L))}let b=new Map,E=GM(h,Array.from(y));E.forEach((N,L)=>{let K=eb+g++;b.set(L,K),N.forEach(te=>jn(te,K))}),e.push(()=>{f.forEach((N,L)=>{let K=p.get(L);N.forEach(te=>Wa(te,K))}),E.forEach((N,L)=>{let K=b.get(L);N.forEach(te=>Wa(te,K))}),m.forEach(N=>{this.processLeaveNode(N)})});let C=[],D=[];for(let N=this._namespaceList.length-1;N>=0;N--)this._namespaceList[N].drainQueuedTransitions(t).forEach(K=>{let te=K.player,Ke=K.element;if(C.push(te),this.collectedEnterElements.length){let zt=Ke[ii];if(zt&&zt.setForMove){if(zt.previousTriggersValues&&zt.previousTriggersValues.has(K.triggerName)){let Ms=zt.previousTriggersValues.get(K.triggerName),Mn=this.statesByElement.get(K.element);if(Mn&&Mn.has(K.triggerName)){let ih=Mn.get(K.triggerName);ih.value=Ms,Mn.set(K.triggerName,ih)}}te.destroy();return}}let Zt=!d||!this.driver.containsElement(d,Ke),ft=b.get(Ke),an=p.get(Ke),Oe=this._buildInstruction(K,i,an,ft,Zt);if(Oe.errors&&Oe.errors.length){D.push(Oe);return}if(Zt){te.onStart(()=>ho(Ke,Oe.fromStyles)),te.onDestroy(()=>Ii(Ke,Oe.toStyles)),r.push(te);return}if(K.isFallbackTransition){te.onStart(()=>ho(Ke,Oe.fromStyles)),te.onDestroy(()=>Ii(Ke,Oe.toStyles)),r.push(te);return}let Er=[];Oe.timelines.forEach(zt=>{zt.stretchStartingKeyframe=!0,this.disabledNodes.has(zt.element)||Er.push(zt)}),Oe.timelines=Er,i.append(Ke,Oe.timelines);let As={instruction:Oe,player:te,element:Ke};o.push(As),Oe.queriedElements.forEach(zt=>Sn(a,zt,[]).push(te)),Oe.preStyleProps.forEach((zt,Ms)=>{if(zt.size){let Mn=c.get(Ms);Mn||c.set(Ms,Mn=new Set),zt.forEach((ih,_y)=>Mn.add(_y))}}),Oe.postStyleProps.forEach((zt,Ms)=>{let Mn=l.get(Ms);Mn||l.set(Ms,Mn=new Set),zt.forEach((ih,_y)=>Mn.add(_y))})});if(D.length){let N=[];D.forEach(L=>{N.push(E3(L.triggerName,L.errors))}),C.forEach(L=>L.destroy()),this.reportError(N)}let A=new Map,M=new Map;o.forEach(N=>{let L=N.element;i.has(L)&&(M.set(L,L),this._beforeAnimationBuild(N.player.namespaceId,N.instruction,A))}),r.forEach(N=>{let L=N.element;this._getPreviousPlayers(L,!1,N.namespaceId,N.triggerName,null).forEach(te=>{Sn(A,L,[]).push(te),te.destroy()})});let B=m.filter(N=>KM(N,c,l)),ee=new Map;WM(ee,this.driver,v,l,Di).forEach(N=>{KM(N,c,l)&&B.push(N)});let he=new Map;f.forEach((N,L)=>{WM(he,this.driver,new Set(N),c,ap)}),B.forEach(N=>{let L=ee.get(N),K=he.get(N);ee.set(N,new Map([...L?.entries()??[],...K?.entries()??[]]))});let Ge=[],$t=[],Me={};o.forEach(N=>{let{element:L,player:K,instruction:te}=N;if(i.has(L)){if(u.has(L)){K.onDestroy(()=>Ii(L,te.toStyles)),K.disabled=!0,K.overrideTotalTime(te.totalTime),r.push(K);return}let Ke=Me;if(M.size>1){let ft=L,an=[];for(;ft=ft.parentNode;){let Oe=M.get(ft);if(Oe){Ke=Oe;break}an.push(ft)}an.forEach(Oe=>M.set(Oe,Ke))}let Zt=this._buildAnimation(K.namespaceId,te,A,s,he,ee);if(K.setRealPlayer(Zt),Ke===Me)Ge.push(K);else{let ft=this.playersByElement.get(Ke);ft&&ft.length&&(K.parentPlayer=Wr(ft)),r.push(K)}}else ho(L,te.fromStyles),K.onDestroy(()=>Ii(L,te.toStyles)),$t.push(K),u.has(L)&&r.push(K)}),$t.forEach(N=>{let L=s.get(N.element);if(L&&L.length){let K=Wr(L);N.setRealPlayer(K)}}),r.forEach(N=>{N.parentPlayer?N.syncPlayerEvents(N.parentPlayer):N.destroy()});for(let N=0;N<m.length;N++){let L=m[N],K=L[ii];if(Wa(L,eb),K&&K.hasAnimation)continue;let te=[];if(a.size){let Zt=a.get(L);Zt&&Zt.length&&te.push(...Zt);let ft=this.driver.query(L,tb,!0);for(let an=0;an<ft.length;an++){let Oe=a.get(ft[an]);Oe&&Oe.length&&te.push(...Oe)}}let Ke=te.filter(Zt=>!Zt.destroyed);Ke.length?u5(this,L,Ke):this.processLeaveNode(L)}return m.length=0,Ge.forEach(N=>{this.players.push(N),N.onDone(()=>{N.destroy();let L=this.players.indexOf(N);this.players.splice(L,1)}),N.play()}),Ge}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let c=!s||s==cu;a.forEach(l=>{l.queued||!c&&l.triggerName!=r||o.push(l)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){let r=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let c of t.timelines){let l=c.element,u=l!==s,d=Sn(i,l,[]);this._getPreviousPlayers(l,u,o,a,t.toState).forEach(f=>{let p=f.getRealPlayer();p.beforeDestroy&&p.beforeDestroy(),f.destroy(),d.push(f)})}ho(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){let a=t.triggerName,c=t.element,l=[],u=new Set,d=new Set,h=t.timelines.map(p=>{let g=p.element;u.add(g);let m=g[ii];if(m&&m.removedBeforeQueried)return new qr(p.duration,p.delay);let y=g!==c,v=d5((i.get(g)||s5).map(A=>A.getRealPlayer())).filter(A=>{let M=A;return M.element?M.element===g:!1}),b=s.get(g),E=o.get(g),C=QM(this._normalizer,p.keyframes,b,E),D=this._buildPlayer(p,C,v);if(p.subTimeline&&r&&d.add(g),y){let A=new hu(e,a,g);A.setRealPlayer(D),l.push(A)}return D});l.forEach(p=>{Sn(this.playersByQueriedElement,p.element,[]).push(p),p.onDone(()=>a5(this.playersByQueriedElement,p.element,p))}),u.forEach(p=>jn(p,VM));let f=Wr(h);return f.onDestroy(()=>{u.forEach(p=>Wa(p,VM)),Ii(c,t.toStyles)}),d.forEach(p=>{Sn(r,p,[]).push(f)}),f}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new qr(e.duration,e.delay)}},hu=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new qr,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>gb(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Sn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function a5(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function c5(n){return n??null}function dp(n){return n&&n.nodeType===1}function l5(n){return n=="start"||n=="done"}function qM(n,e){let t=n.style.display;return n.style.display=e??"none",t}function WM(n,e,t,i,r){let s=[];t.forEach(c=>s.push(qM(c)));let o=[];i.forEach((c,l)=>{let u=new Map;c.forEach(d=>{let h=e.computeStyle(l,d,r);u.set(d,h),(!h||h.length==0)&&(l[ii]=o5,o.push(l))}),n.set(l,u)});let a=0;return t.forEach(c=>qM(c,s[a++])),o}function GM(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let c=s.get(a);if(c)return c;let l=a.parentNode;return t.has(l)?c=l:r.has(l)?c=i:c=o(l),s.set(a,c),c}return e.forEach(a=>{let c=o(a);c!==i&&t.get(c).push(a)}),t}function jn(n,e){n.classList?.add(e)}function Wa(n,e){n.classList?.remove(e)}function u5(n,e,t){Wr(t).onDone(()=>n.processLeaveNode(e))}function d5(n){let e=[];return aP(n,e),e}function aP(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof ou?aP(i.players,e):e.push(i)}}function h5(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function KM(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}var Ka=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new fb(e.body,t,i),this._timelineEngine=new db(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let c=[],l=[],u=rP(this._driver,s,c,l);if(c.length)throw d3(r,c);l.length&&void 0,a=Z3(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[s,o]=FM(i),a=r;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if(i.charAt(0)=="@"){let[o,a]=FM(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function f5(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=J0(e[0]),e.length>1&&(i=J0(e[e.length-1]))):e instanceof Map&&(t=J0(e)),t||i?new p5(n,t,i):null}var p5=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._startStyles=r,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(i);o||e.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Ii(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ii(this._element,this._initialStyles),this._endStyles&&(Ii(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ho(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ho(this._element,this._endStyles),this._endStyles=null),Ii(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let n=e;return n})();function J0(n){let e=null;return n.forEach((t,i)=>{g5(i)&&(e=e||new Map,e.set(i,t))}),e}function g5(n){return n==="display"||n==="position"}var wp=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:nP(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Ep=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return YM(e,t)}getParentElement(e){return yb(e)}query(e,t,i){return XM(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){let a=r==0?"both":"forwards",c={duration:i,delay:r,fill:a};s&&(c.easing=s);let l=new Map,u=o.filter(f=>f instanceof wp);k3(i,r)&&u.forEach(f=>{f.currentSnapshot.forEach((p,g)=>l.set(g,p))});let d=M3(t).map(f=>Ga(f));d=O3(e,d,l);let h=f5(e,d);return new wp(e,d,c,h)}};var hp="@",cP="@.disabled",Cp=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==hp&&t==cP?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},pb=class extends Cp{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==hp?t.charAt(1)=="."&&t==cP?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==hp){let r=m5(e),s=t.slice(1),o="";return s.charAt(0)!=hp&&([s,o]=y5(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{let c=a._data||-1;this.factory.scheduleListenerCallback(c,i,a)})}return this.delegate.listen(e,t,i)}};function m5(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function y5(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var Dp=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,s)=>{let o=s?.parentNode(r);o&&s.removeChild(o,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let l=this._rendererCache,u=l.get(r);if(!u){let d=()=>l.delete(r);u=new Cp(i,r,this.engine,d),l.set(r,u)}return u}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=l=>{Array.isArray(l)?l.forEach(a):this.engine.registerTrigger(s,o,e,l.name,l)};return t.data.animation.forEach(a),new pb(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var _5=(()=>{let e=class e extends Ka{constructor(i,r,s,o){super(i,r,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(k(Nt),k(fu),k(fo),k(Lr))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function b5(){return new mp}function w5(n,e,t){return new Dp(n,e,t)}var lP=[{provide:fo,useFactory:b5},{provide:Ka,useClass:_5},{provide:Gs,useFactory:w5,deps:[zf,Ka,Pe]}],E5=[{provide:fu,useFactory:()=>new Ep},{provide:y_,useValue:"BrowserAnimations"},...lP],zre=[{provide:fu,useClass:vb},{provide:y_,useValue:"NoopAnimations"},...lP];function uP(){return[...E5]}var dP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-navbar"]],standalone:!0,features:[ce],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-lg"],[1,"container"],[1,"col-4","d-flex","justify-content-start"],[1,"navbar-nav","menu"],[1,"nav-item"],["aria-current","page","routerLink","/",1,"nav-link","active"],["routerLink","/about",1,"nav-link"],["routerLink","/contact",1,"nav-link"],[1,"col-4","d-flex","justify-content-center"],["routerLink","/",1,"title"],[1,"col-4","d-flex","justify-content-end"],["routerLink","/",1,"nav-link"],["routerLink","/login",1,"btn","btn-light"]],template:function(r,s){r&1&&(_(0,"nav",0)(1,"div",1)(2,"div",2)(3,"ul",3)(4,"li",4)(5,"a",5),I(6,"Home"),w()(),_(7,"li",4)(8,"a",6),I(9,"About"),w()(),_(10,"li",4)(11,"a",7),I(12,"Contact"),w()()()(),_(13,"div",8)(14,"a",9),I(15,"EDUCLASH"),w()(),_(16,"div",10)(17,"ul",3)(18,"li",4)(19,"a",11),I(20,"Testo 1"),w()(),_(21,"li",4)(22,"a",11),I(23,"Testo 2"),w()(),_(24,"li",4)(25,"button",12),I(26,"Login"),w()()()()()())},dependencies:[le,Ci],styles:[".navbar[_ngcontent-%COMP%]{background:transparent}.navbar[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{padding:25px 0;border-bottom:1px solid purple}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#4a148c}.navbar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px}.navbar[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#4a148c;font-size:40px;cursor:pointer;text-decoration:none;font-weight:600}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{list-style:none;display:flex;gap:25px}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0;margin:0}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#4a148c;transition:color .3s;font-size:20px}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:purple;font-weight:700}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:2px solid #4a148c;color:#4a148c;font-size:18px;background-color:transparent}.navbar[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(to bottom,#4a148c,purple);font-weight:700;color:#fff}"]});let n=e;return n})();var hP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-footer"]],standalone:!0,features:[ce],decls:59,vars:1,consts:[[1,"footer"],[1,"container"],[1,"row"],[1,"col-4"],[1,"ms-4"],[1,"d-flex","mt-5","link"],["routerLink","/",1,"me-5"],["routerLink","/"],[1,"d-flex","mt-3","link"],["routerLink","/privacy"],[1,"ms-4","mt-5","newsletter"],[1,"mb-5"],[1,"d-flex"],["type","text","placeholder","Email address"],[1,"btn","btn-light","ms-3"],[1,"col-4","logo"],[1,"d-flex","mt-5","contacts"],[1,"me-5"],[1,"d-flex","mt-3","contacts"],[1,"ms-4","social","d-flex","mt-5"],["routerLink","/",1,"me-4"],[1,"bi","bi-facebook","fs-4"],[1,"bi","bi-instagram","fs-4"],[1,"bi","bi-twitter","fs-4"],[1,"bi","bi-linkedin","fs-4"],[1,"ms-4","mt-4"]],template:function(r,s){r&1&&(_(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h2"),I(6,"Educlah"),w(),_(7,"div",5)(8,"a",6),I(9,"Testo 1"),w(),_(10,"a",7),I(11,"Testo 2"),w()(),_(12,"div",8)(13,"a",6),I(14,"Testo 3"),w(),_(15,"a",9),I(16,"Privacy Policy"),w()()(),_(17,"div",10)(18,"h2",11),I(19,"Newsletter our"),w(),_(20,"div",12),Q(21,"input",13),_(22,"button",14),I(23,"go"),w()()()(),_(24,"div",15)(25,"p"),I(26," Educlash - Lorem ipsum dolor sit amet consectetur, adipisicing elit. "),w(),_(27,"h1"),I(28,"Educlash"),w(),_(29,"p"),I(30," Educlash - Lorem ipsum dolor sit amet consectetur, adipisicing elit. "),w()(),_(31,"div",3)(32,"div",4)(33,"h2"),I(34,"Contacts"),w(),_(35,"div",16)(36,"p",17),I(37,"IT: +39 123456789"),w(),_(38,"p"),I(39,"www.educlash.it"),w()(),_(40,"div",18)(41,"p",17),I(42),w(),_(43,"p"),I(44,"Italy, Rome"),w()()(),_(45,"div",19)(46,"a",20),Q(47,"i",21),w(),_(48,"a",20),Q(49,"i",22),w(),_(50,"a",20),Q(51,"i",23),w(),_(52,"a",7),Q(53,"i",24),w()(),_(54,"div",25)(55,"p"),I(56," Lorem ipsum dolor "),w(),_(57,"p"),I(58," \xA9 2023 Educlash "),w()()()()()()),r&2&&(U(42),ti("educlash","@","gmail.com"))},dependencies:[le,Ci],styles:[".footer[_ngcontent-%COMP%]{display:flex;background-color:#ececec;padding:70px 20px;color:#4a148c;position:relative;width:100%;bottom:0;cursor:pointer}.footer[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:20px;text-decoration:none;color:#4a148c}.footer[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:purple;font-weight:700}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:3.5rem;margin-bottom:0;padding-left:1.5rem;border:2px solid #4a148c;border-radius:.75rem;background-color:transparent;color:#4a148c;font-size:18px}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#4a148c}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:1px solid purple}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border-radius:.75rem;background:linear-gradient(to bottom,#4a148c,purple);color:#fff;font-size:20px;text-transform:uppercase;padding-left:14px;padding-right:14px}.footer[_ngcontent-%COMP%]   .newsletter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:scale(1.1);font-weight:700}.footer[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{border-left:1px dashed purple;border-right:1px dashed purple;text-align:center}.footer[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding:80px 0}.footer[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px}.footer[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;color:#4a148c;margin:0}.footer[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:hover{color:purple;font-weight:700}.footer[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:2px solid #4a148c;padding:8px 14px;border-radius:13px;color:#4a148c}.footer[_ngcontent-%COMP%]   .social[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:linear-gradient(to bottom,#4a148c,purple);color:#fff}"]});let n=e;return n})();var fP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-landing-page"]],standalone:!0,features:[ce],decls:34,vars:0,consts:[[1,"landing"],[1,"landing-page"],[1,"header"],[1,"section","features"],[1,"feature"],[1,"fas","fa-graduation-cap"],[1,"fas","fa-lightbulb"],[1,"section","mission"],[1,"section","call-to-action"],[1,"btn-primary"]],template:function(r,s){r&1&&(_(0,"div",0),Q(1,"app-navbar"),_(2,"section",1)(3,"div",2)(4,"h1"),I(5,"Welcome to Our Project"),w(),_(6,"p"),I(7,"Empowering Young Entrepreneurs"),w()(),_(8,"div",3)(9,"div",4),Q(10,"i",5),_(11,"h2"),I(12,"Free for Schools"),w(),_(13,"p"),I(14,"We offer our program free of charge to schools."),w()(),_(15,"div",4),Q(16,"i",6),_(17,"h2"),I(18,"Incubating Innovation"),w(),_(19,"p"),I(20,'Every class becomes a "mini startup" to promote creativity and entrepreneurship.'),w()()(),_(21,"div",7)(22,"h2"),I(23,"Our Mission"),w(),_(24,"p"),I(25," We are dedicated to nurturing the next generation of entrepreneurs by providing educational resources, mentorship, and a platform for young minds to turn their ideas into reality. "),w()(),_(26,"div",8)(27,"h2"),I(28,"Join Us Today!"),w(),_(29,"p"),I(30,"Unlock the potential of your students and schools."),w(),_(31,"button",9),I(32,"Get Started"),w()()()(),Q(33,"app-footer"))},dependencies:[dP,le,hP],styles:['.landing[_ngcontent-%COMP%]{background-image:url("./media/paper-texture_1194-5999-3JKWGJ7K.avif");background-size:cover}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]{text-align:center;padding:40px}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2.5rem;margin-bottom:10px}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#777}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{margin-top:40px}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:40px}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]{text-align:left}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px;color:#4a148c}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:10px}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.features[_ngcontent-%COMP%]   .feature[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#777}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.mission[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:20px}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.mission[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#777}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.call-to-action[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.call-to-action[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;color:#777;margin-bottom:20px}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.call-to-action[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background-color:#4a148c;color:#fff;padding:10px 20px;font-size:1.2rem;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.landing[_ngcontent-%COMP%]   .landing-page[_ngcontent-%COMP%]   .section.call-to-action[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:hover{background-color:#7b1fa2}']});let n=e;return n})();var EP=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(G(Or),G(Ln))},e.\u0275dir=xt({type:e});let n=e;return n})(),C5=(()=>{let e=class e extends EP{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(e)))(s||e)}})(),e.\u0275dir=xt({type:e,features:[er]});let n=e;return n})(),CP=new q("NgValueAccessor");var D5={provide:CP,useExisting:Zs(()=>Gr),multi:!0};function I5(){let n=ir()?ir().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var S5=new q("CompositionEventMode"),Gr=(()=>{let e=class e extends EP{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!I5())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(G(Or),G(Ln),G(S5,8))},e.\u0275dir=xt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&je("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Ol([D5]),er]});let n=e;return n})();function T5(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Eb=new q("NgValidators"),DP=new q("NgAsyncValidators");function x5(n){return T5(n.value)?{required:!0}:null}function pP(n){return null}function IP(n){return n!=null}function SP(n){return eo(n)?xe(n):n}function TP(n){let e={};return n.forEach(t=>{e=t!=null?$($({},e),t):e}),Object.keys(e).length===0?null:e}function xP(n,e){return e.map(t=>t(n))}function A5(n){return!n.validate}function AP(n){return n.map(e=>A5(e)?e:t=>e.validate(t))}function M5(n){if(!n)return null;let e=n.filter(IP);return e.length==0?null:function(t){return TP(xP(t,e))}}function Cb(n){return n!=null?M5(AP(n)):null}function P5(n){if(!n)return null;let e=n.filter(IP);return e.length==0?null:function(t){let i=xP(t,e).map(SP);return Vy(i).pipe(Z(TP))}}function Db(n){return n!=null?P5(AP(n)):null}function gP(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function R5(n){return n._rawValidators}function k5(n){return n._rawAsyncValidators}function wb(n){return n?Array.isArray(n)?n:[n]:[]}function Sp(n,e){return Array.isArray(n)?n.includes(e):n===e}function mP(n,e){let t=wb(e);return wb(n).forEach(r=>{Sp(t,r)||t.push(r)}),t}function yP(n,e){return wb(e).filter(t=>!Sp(n,t))}var Tp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Db(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ya=class extends Tp{get formDirective(){return null}get path(){return null}},vu=class extends Tp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},xp=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},O5={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mse=Te($({},O5),{"[class.ng-submitted]":"isSubmitted"}),Xa=(()=>{let e=class e extends xp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(G(vu,2))},e.\u0275dir=xt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Af("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[er]});let n=e;return n})(),Pp=(()=>{let e=class e extends xp{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(G(Ya,10))},e.\u0275dir=xt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Af("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[er]});let n=e;return n})();var gu="VALID",Ip="INVALID",Qa="PENDING",mu="DISABLED";function MP(n){return(Rp(n)?n.validators:n)||null}function N5(n){return Array.isArray(n)?Cb(n):n||null}function PP(n,e){return(Rp(e)?e.asyncValidators:n)||null}function F5(n){return Array.isArray(n)?Db(n):n||null}function Rp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function L5(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new O(1e3,"");if(!i[t])throw new O(1001,"")}function V5(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new O(1002,"")})}var Ap=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===gu}get invalid(){return this.status===Ip}get pending(){return this.status==Qa}get disabled(){return this.status===mu}get enabled(){return this.status!==mu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yP(e,this._rawAsyncValidators))}hasValidator(e){return Sp(this._rawValidators,e)}hasAsyncValidator(e){return Sp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Qa,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=mu,this.errors=null,this._forEachChild(i=>{i.disable(Te($({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Te($({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=gu,this._forEachChild(i=>{i.enable(Te($({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Te($({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===gu||this.status===Qa)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mu:gu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Qa,this._hasOwnPendingAsyncValidator=!0;let t=SP(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ot,this.statusChanges=new Ot}_calculateStatus(){return this._allControlsDisabled()?mu:this.errors?Ip:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Qa)?Qa:this._anyControlsHaveStatus(Ip)?Ip:gu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=N5(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=F5(this._rawAsyncValidators)}},Mp=class extends Ap{constructor(e,t,i){super(MP(t),PP(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){V5(this,!0,e),Object.keys(e).forEach(i=>{L5(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ib=new q("CallSetDisabledState",{providedIn:"root",factory:()=>Sb}),Sb="always";function j5(n,e){return[...e.path,n]}function RP(n,e,t=Sb){kP(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),U5(n,e),z5(n,e),$5(n,e),B5(n,e)}function vP(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function B5(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function kP(n,e){let t=R5(n);e.validator!==null?n.setValidators(gP(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=k5(n);e.asyncValidator!==null?n.setAsyncValidators(gP(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();vP(e._rawValidators,r),vP(e._rawAsyncValidators,r)}function U5(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&OP(n,e)})}function $5(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&OP(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function OP(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function z5(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function H5(n,e){n==null,kP(n,e)}function q5(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function W5(n){return Object.getPrototypeOf(n.constructor)===C5}function G5(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function K5(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Gr?t=s:W5(s)?i=s:r=s}),r||i||t||null}var Q5={provide:Ya,useExisting:Zs(()=>_u)},yu=(()=>Promise.resolve())(),_u=(()=>{let e=class e extends Ya{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Ot,this.form=new Mp({},Cb(i),Db(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){yu.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),RP(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){yu.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){yu.then(()=>{let r=this._findContainer(i.path),s=new Mp({});H5(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){yu.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){yu.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,G5(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(G(Eb,10),G(DP,10),G(Ib,8))},e.\u0275dir=xt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&je("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ol([Q5]),er]});let n=e;return n})();function _P(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function bP(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Y5=class extends Ap{constructor(e=null,t,i){super(MP(t),PP(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(bP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_P(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_P(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){bP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var X5={provide:vu,useExisting:Zs(()=>po)},wP=(()=>Promise.resolve())(),po=(()=>{let e=class e extends vu{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Y5,this._registered=!1,this.name="",this.update=new Ot,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=K5(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),q5(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){RP(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){wP.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Vr(r);wP.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?j5(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(G(Ya,9),G(Eb,10),G(DP,10),G(CP,10),G(ka,8),G(Ib,8))},e.\u0275dir=xt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ol([X5]),er,Pr]});let n=e;return n})(),kp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=xt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var Z5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Wt({type:e}),e.\u0275inj=qt({});let n=e;return n})();var J5=(()=>{let e=class e{constructor(){this._validator=pP}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):pP,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=xt({type:e,features:[Pr]});let n=e;return n})();var eq={provide:Eb,useExisting:Zs(()=>bu),multi:!0};var bu=(()=>{let e=class e extends J5{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Vr,this.createValidator=i=>x5}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Aa(e)))(s||e)}})(),e.\u0275dir=xt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&kl("required",s._enabled?"":null)},inputs:{required:"required"},features:[Ol([eq]),er]});let n=e;return n})();var tq=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Wt({type:e}),e.\u0275inj=qt({imports:[Z5]});let n=e;return n})();var Za=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Ib,useValue:i.callSetDisabledState??Sb}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Wt({type:e}),e.\u0275inj=qt({imports:[tq]});let n=e;return n})();var nq="firebase",iq="10.7.0";Cr(nq,iq,"app");var Ja=new Qi("ANGULARFIRE2_VERSION");var rq=(n,e)=>{let t=e?[e]:ZI(),i=[];return t.forEach(r=>{r.container.getProvider(n).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},go=class{constructor(){return rq(sq)}},sq="app-check";function xb(){}var Op=class{zone;delegate;constructor(e,t=Ny){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,i)}},Ab=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",xb,{},xb,xb)),t.pipe(lt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Np=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Op(Zone.current)),this.insideAngular=t.run(()=>new Op(Zone.current,dl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||n)(k(Pe))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oq(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function gn(n){return aq(oq())(n)}function aq(n){return function(t){return t=t.lift(new Ab(n.ngZone)),t.pipe(Kn(n.outsideAngular),Pn(n.insideAngular))}}var uq=new Map,dq={activated:!1,tokenObservers:[]},hq={initialized:!1,enabled:!1};function ri(n){return uq.get(n)||Object.assign({},dq)}function BP(){return hq}var fq="https://content-firebaseappcheck.googleapis.com/v1";var pq="exchangeDebugToken",FP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Nse=24*60*60*1e3;var Pb=class{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return x(this,null,function*(){this.stop();try{this.pending=new wy,yield gq(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new wy,yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function gq(n){return new Promise(e=>{setTimeout(e,n)})}var mq={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Kr=new YI("appCheck","AppCheck",mq);function UP(n){if(!ri(n).activated)throw Kr.create("use-before-activation",{appName:n.name})}function $P(i,r){return x(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let f=yield o.getHeartbeatsHeader();f&&(s["X-Firebase-Client"]=f)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(f){throw Kr.create("fetch-network-error",{originalErrorMessage:f?.message})}if(c.status!==200)throw Kr.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(f){throw Kr.create("fetch-parse-error",{originalErrorMessage:f?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let d=Number(u[1])*1e3,h=Date.now();return{token:l.token,expireTimeMillis:h+d,issuedAtTimeMillis:h}})}function zP(n,e){let{projectId:t,appId:i,apiKey:r}=n.options;return{url:`${fq}/projects/${t}/apps/${i}:${pq}?key=${r}`,body:{debug_token:e}}}var yq="firebase-app-check-database",vq=1,Rb="firebase-app-check-store";var Fp=null;function _q(){return Fp||(Fp=new Promise((n,e)=>{try{let t=indexedDB.open(yq,vq);t.onsuccess=i=>{n(i.target.result)},t.onerror=i=>{var r;e(Kr.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},t.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Rb,{keyPath:"compositeKey"})}}}catch(t){e(Kr.create("storage-open",{originalErrorMessage:t?.message}))}}),Fp)}function bq(n,e){return wq(Eq(n),e)}function wq(n,e){return x(this,null,function*(){let i=(yield _q()).transaction(Rb,"readwrite"),s=i.objectStore(Rb).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},i.onerror=c=>{var l;a(Kr.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function Eq(n){return`${n.options.appId}-${n.name}`}var kb=new ah("@firebase/app-check");function Mb(n,e){return oh()?bq(n,e).catch(t=>{kb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function HP(){return BP().enabled}function qP(){return x(this,null,function*(){let n=BP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Cq={error:"UNKNOWN_ERROR"};function Dq(n){return WI.encodeString(JSON.stringify(n),!1)}function Ob(n,e=!1){return x(this,null,function*(){let t=n.app;UP(t);let i=ri(t),r=i.token,s;if(r&&!wu(r)&&(i.token=void 0,r=void 0),!r){let c=yield i.cachedTokenPromise;c&&(wu(c)?r=c:yield Mb(t,void 0))}if(!e&&r&&wu(r))return{token:r.token};let o=!1;if(HP()){i.exchangeTokenPromise||(i.exchangeTokenPromise=$P(zP(t,yield qP()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),o=!0);let c=yield i.exchangeTokenPromise;return yield Mb(t,c),i.token=c,{token:c.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),o=!0),r=yield ri(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?kb.warn(c.message):kb.error(c),s=c}let a;return r?s?wu(r)?a={token:r.token,internalError:s}:a=VP(s):(a={token:r.token},i.token=r,yield Mb(t,r)):a=VP(s),o&&xq(t,a),a})}function Iq(n){return x(this,null,function*(){let e=n.app;UP(e);let{provider:t}=ri(e);if(HP()){let i=yield qP(),{token:r}=yield $P(zP(e,i),n.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield t.getToken();return{token:i}}})}function Sq(n,e,t,i){let{app:r}=n,s=ri(r),o={next:t,error:i,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&wu(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),LP(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>LP(n))}function WP(n,e){let t=ri(n),i=t.tokenObservers.filter(r=>r.next!==e);i.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=i}function LP(n){let{app:e}=n,t=ri(e),i=t.tokenRefresher;i||(i=Tq(n),t.tokenRefresher=i),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function Tq(n){let{app:e}=n;return new Pb(()=>x(this,null,function*(){let t=ri(e),i;if(t.token?i=yield Ob(n,!0):i=yield Ob(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let t=ri(e);if(t.token){let i=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,r=t.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},FP.RETRIAL_MIN_WAIT,FP.RETRIAL_MAX_WAIT)}function xq(n,e){let t=ri(n).tokenObservers;for(let i of t)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function wu(n){return n.expireTimeMillis-Date.now()>0}function VP(n){return{token:Dq(Cq),error:n}}var Nb=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=ri(this.app);for(let t of e)WP(this.app,t.next);return Promise.resolve()}};function Aq(n,e){return new Nb(n,e)}function Mq(n){return{getToken:e=>Ob(n,e),getLimitedUseToken:()=>Iq(n),addTokenListener:e=>Sq(n,"INTERNAL",e),removeTokenListener:e=>WP(n.app,e)}}var Pq="@firebase/app-check",Rq="0.8.0";var kq="app-check",jP="app-check-internal";function Oq(){al(new Ps(kq,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Aq(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jP).initialize()})),al(new Ps(jP,n=>{let e=n.getProvider("app-check").getImmediate();return Mq(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Cr(Pq,Rq)}Oq();var Nq=["localhost","0.0.0.0","127.0.0.1"],Gse=typeof window<"u"&&Nq.includes(window.location.hostname);var Fq="firebase",Lq="10.7.0";cn.registerVersion(Fq,Lq,"app-compat");var Vq=["ngOnDestroy"],QP=(n,e,t,i={})=>new Proxy(n,{get:(r,s)=>t.runOutsideAngular(()=>{if(n[s])return i?.spy?.get&&i.spy.get(s,n[s]),n[s];if(Vq.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(u=>{let d=u?.(...l);return i?.spy?.apply&&i.spy.apply(s,l,d),d})})})});var Lp=class{constructor(e){return e}},ec=new q("angularfire2.app.options"),tc=new q("angularfire2.app.name");function Eu(n,e,t){let i=typeof t=="string"&&t||"[DEFAULT]",r=typeof t=="object"&&t||{};r.name=r.name||i;let o=cn.apps.filter(a=>a&&a.name===r.name)[0]||e.runOutsideAngular(()=>cn.initializeApp(n,r));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;jq("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Lp(o)}var jq=(n,...e)=>{z_()&&typeof console<"u"&&console[n](...e)},Bq={provide:Lp,useFactory:Eu,deps:[ec,Pe,[new Ma,tc]]},YP=(()=>{class n{static initializeApp(t,i){return{ngModule:n,providers:[{provide:ec,useValue:t},{provide:tc,useValue:i}]}}constructor(t){cn.registerVersion("angularfire",Ja.full,"core"),cn.registerVersion("angularfire",Ja.full,"app-compat"),cn.registerVersion("angular",S_.full,t.toString())}static \u0275fac=function(i){return new(i||n)(k(hn))};static \u0275mod=Wt({type:n});static \u0275inj=qt({providers:[Bq]})}return n})();function Vp(n,e,t,i,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return Uq(r,o)||(KP("error",`${e} was already initialized on the ${t} Firebase App with different settings.${$q?" You may need to reload as Firebase is not HMR aware.":""}`),KP("warn",{is:r,was:o})),s;{let a=i();return globalThis.\u0275AngularfireInstanceCache.push([n,a,r]),a}}function Uq(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var $q=typeof module<"u"&&!!module.hot,KP=(n,...e)=>{z_()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Fb=new q("angularfire2.auth.use-emulator"),Lb=new q("angularfire2.auth.settings"),Vb=new q("angularfire2.auth.tenant-id"),jb=new q("angularfire2.auth.langugage-code"),Bb=new q("angularfire2.auth.use-device-language"),Ub=new q("angularfire.auth.persistence"),$b=(n,e,t,i,r,s,o,a)=>Vp(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),i&&(c.tenantId=i),c.languageCode=r,s&&c.useDeviceLanguage(),o)for(let[l,u]of Object.entries(o))c.settings[l]=u;return a&&c.setPersistence(a),c},[t,i,r,s,o,a]),mo=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,i,r,s,o,a,c,l,u,d,h,f){let p=new gt,g=X(void 0).pipe(Pn(o.outsideAngular),Ye(()=>s.runOutsideAngular(()=>import("./chunk-JZSMLUNY.js"))),Z(()=>Eu(t,s,i)),Z(m=>$b(m,s,a,l,u,d,c,h)),Nh({bufferSize:1,refCount:!1}));if(no(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{g.pipe(Rn()).subscribe();let m=g.pipe(Ye(b=>b.getRedirectResult().then(E=>E,()=>null)),gn,Nh({bufferSize:1,refCount:!1})),y=g.pipe(Ye(b=>new oe(E=>({unsubscribe:s.runOutsideAngular(()=>b.onAuthStateChanged(C=>E.next(C),C=>E.error(C),()=>E.complete()))})))),v=g.pipe(Ye(b=>new oe(E=>({unsubscribe:s.runOutsideAngular(()=>b.onIdTokenChanged(C=>E.next(C),C=>E.error(C),()=>E.complete()))}))));this.authState=m.pipe(Fh(y),Kn(o.outsideAngular),Pn(o.insideAngular)),this.user=m.pipe(Fh(v),Kn(o.outsideAngular),Pn(o.insideAngular)),this.idToken=this.user.pipe(Ye(b=>b?xe(b.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(Ye(b=>b?xe(b.getIdTokenResult()):X(null))),this.credential=fl(m,p,this.authState.pipe(Tt(b=>!b))).pipe(Z(b=>b?.user?b:null),Kn(o.outsideAngular),Pn(o.insideAngular))}return QP(this,g,s,{spy:{apply:(m,y,v)=>{(m.startsWith("signIn")||m.startsWith("createUser"))&&v.then(b=>p.next(b))}}})}static \u0275fac=function(i){return new(i||n)(k(ec),k(tc,8),k(hn),k(Pe),k(Np),k(Fb,8),k(Lb,8),k(Vb,8),k(jb,8),k(Bb,8),k(Ub,8),k(go,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})(),XP=(()=>{class n{constructor(){cn.registerVersion("angularfire",Ja.full,"auth-compat")}static \u0275fac=function(i){return new(i||n)};static \u0275mod=Wt({type:n});static \u0275inj=qt({providers:[mo]})}return n})();var zq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oi={},V,dw=dw||{},re=zq||self;function Zp(n){var e=typeof n;return e=e!="object"?e:n?Array.isArray(n)?"array":e:"null",e=="array"||e=="object"&&typeof n.length=="number"}function Fu(n){var e=typeof n;return e=="object"&&n!=null||e=="function"}function Hq(n){return Object.prototype.hasOwnProperty.call(n,Hb)&&n[Hb]||(n[Hb]=++qq)}var Hb="closure_uid_"+(1e9*Math.random()>>>0),qq=0;function Wq(n,e,t){return n.call.apply(n.bind,arguments)}function Gq(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Gt(n,e,t){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Gt=Wq:Gt=Gq,Gt.apply(null,arguments)}function jp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Mt(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Qr(){this.s=this.s,this.o=this.o}var Kq=0;Qr.prototype.s=!1;Qr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Kq!=0)&&Hq(this)};Qr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var u1=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if(typeof n=="string")return typeof e!="string"||e.length!=1?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function hw(n){let e=n.length;if(0<e){let t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function ZP(n,e){for(let t=1;t<arguments.length;t++){let i=arguments[t];if(Zp(i)){let r=n.length||0,s=i.length||0;n.length=r+s;for(let o=0;o<s;o++)n[r+o]=i[o]}else n.push(i)}}function Kt(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Kt.prototype.h=function(){this.defaultPrevented=!0};var Qq=function(){if(!re.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{let t=()=>{};re.addEventListener("test",t,e),re.removeEventListener("test",t,e)}catch{}return n}();function xu(n){return/^[\s\xa0]*$/.test(n)}function Jp(){var n=re.navigator;return n&&(n=n.userAgent)?n:""}function Si(n){return Jp().indexOf(n)!=-1}function fw(n){return fw[" "](n),n}fw[" "]=function(){};function Yq(n,e){var t=V9;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}var Xq=Si("Opera"),sc=Si("Trident")||Si("MSIE"),d1=Si("Edge"),Qb=d1||sc,h1=Si("Gecko")&&!(Jp().toLowerCase().indexOf("webkit")!=-1&&!Si("Edge"))&&!(Si("Trident")||Si("MSIE"))&&!Si("Edge"),Zq=Jp().toLowerCase().indexOf("webkit")!=-1&&!Si("Edge");function f1(){var n=re.document;return n?n.documentMode:void 0}var Yb;e:{if(Bp="",Up=function(){var n=Jp();if(h1)return/rv:([^\);]+)(\)|;)/.exec(n);if(d1)return/Edge\/([\d\.]+)/.exec(n);if(sc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(Zq)return/WebKit\/(\S+)/.exec(n);if(Xq)return/(?:Version)[ \/]?(\S+)/.exec(n)}(),Up&&(Bp=Up?Up[1]:""),sc&&($p=f1(),$p!=null&&$p>parseFloat(Bp))){Yb=String($p);break e}Yb=Bp}var Bp,Up,$p,Xb;re.document&&sc?(qb=f1(),Xb=qb||parseInt(Yb,10)||void 0):Xb=void 0;var qb,Jq=Xb;function Au(n,e){if(Kt.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(h1){e:{try{fw(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else t=="mouseover"?e=n.fromElement:t=="mouseout"&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:e9[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Au.$.h.call(this)}}Mt(Au,Kt);var e9={2:"touch",3:"pen",4:"mouse"};Au.prototype.h=function(){Au.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Lu="closure_listenable_"+(1e6*Math.random()|0),t9=0;function n9(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.la=r,this.key=++t9,this.fa=this.ia=!1}function eg(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function pw(n,e,t){for(let i in n)e.call(t,n[i],i,n)}function i9(n,e){for(let t in n)e.call(void 0,n[t],t,n)}function p1(n){let e={};for(let t in n)e[t]=n[t];return e}var JP="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function g1(n,e){let t,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(t in i)n[t]=i[t];for(let s=0;s<JP.length;s++)t=JP[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function tg(n){this.src=n,this.g={},this.h=0}tg.prototype.add=function(n,e,t,i,r){var s=n.toString();n=this.g[s],n||(n=this.g[s]=[],this.h++);var o=Jb(n,e,i,r);return-1<o?(e=n[o],t||(e.ia=!1)):(e=new n9(e,this.src,s,!!i,r),e.ia=t,n.push(e)),e};function Zb(n,e){var t=e.type;if(t in n.g){var i=n.g[t],r=u1(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(eg(e),n.g[t].length==0&&(delete n.g[t],n.h--))}}function Jb(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==i)return r}return-1}var gw="closure_lm_"+(1e6*Math.random()|0),Wb={};function m1(n,e,t,i,r){if(i&&i.once)return v1(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)m1(n,e[s],t,i,r);return null}return t=vw(t),n&&n[Lu]?n.O(e,t,Fu(i)?!!i.capture:!!i,r):y1(n,e,t,!1,i,r)}function y1(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var o=Fu(r)?!!r.capture:!!r,a=yw(n);if(a||(n[gw]=a=new tg(n)),t=a.add(e,t,i,o,s),t.proxy)return t;if(i=r9(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)Qq||(r=o),r===void 0&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(b1(e.toString()),i);else if(n.addListener&&n.removeListener)n.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return t}function r9(){function n(t){return e.call(n.src,n.listener,t)}let e=s9;return n}function v1(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)v1(n,e[s],t,i,r);return null}return t=vw(t),n&&n[Lu]?n.P(e,t,Fu(i)?!!i.capture:!!i,r):y1(n,e,t,!0,i,r)}function _1(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)_1(n,e[s],t,i,r);else i=Fu(i)?!!i.capture:!!i,t=vw(t),n&&n[Lu]?(n=n.i,e=String(e).toString(),e in n.g&&(s=n.g[e],t=Jb(s,t,i,r),-1<t&&(eg(s[t]),Array.prototype.splice.call(s,t,1),s.length==0&&(delete n.g[e],n.h--)))):n&&(n=yw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Jb(e,t,i,r)),(t=-1<n?e[n]:null)&&mw(t))}function mw(n){if(typeof n!="number"&&n&&!n.fa){var e=n.src;if(e&&e[Lu])Zb(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(b1(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=yw(e))?(Zb(t,n),t.h==0&&(t.src=null,e[gw]=null)):eg(n)}}}function b1(n){return n in Wb?Wb[n]:Wb[n]="on"+n}function s9(n,e){if(n.fa)n=!0;else{e=new Au(e,this);var t=n.listener,i=n.la||n.src;n.ia&&mw(n),n=t.call(i,e)}return n}function yw(n){return n=n[gw],n instanceof tg?n:null}var Gb="__closure_events_fn_"+(1e9*Math.random()>>>0);function vw(n){return typeof n=="function"?n:(n[Gb]||(n[Gb]=function(e){return n.handleEvent(e)}),n[Gb])}function At(){Qr.call(this),this.i=new tg(this),this.S=this,this.J=null}Mt(At,Qr);At.prototype[Lu]=!0;At.prototype.removeEventListener=function(n,e,t,i){_1(this,n,e,t,i)};function Vt(n,e){var t,i=n.J;if(i)for(t=[];i;i=i.J)t.push(i);if(n=n.S,i=e.type||e,typeof e=="string")e=new Kt(e,n);else if(e instanceof Kt)e.target=e.target||n;else{var r=e;e=new Kt(i,n),g1(e,r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];r=zp(o,i,!0,e)&&r}if(o=e.g=n,r=zp(o,i,!0,e)&&r,r=zp(o,i,!1,e)&&r,t)for(s=0;s<t.length;s++)o=e.g=t[s],r=zp(o,i,!1,e)&&r}At.prototype.N=function(){if(At.$.N.call(this),this.i){var n=this.i,e;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)eg(t[i]);delete n.g[e],n.h--}}this.J=null};At.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)};At.prototype.P=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};function zp(n,e,t,i){if(e=n.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,c=o.la||o.src;o.ia&&Zb(n.i,o),r=a.call(c,i)!==!1&&r}}return r&&!i.defaultPrevented}var _w=re.JSON.stringify,ew=class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function o9(){var n=bw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var tw=class{constructor(){this.h=this.g=null}add(e,t){let i=w1.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}},w1=new ew(()=>new nw,n=>n.reset()),nw=class{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}};function a9(n){var e=1;n=n.split(":");let t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function c9(n){re.setTimeout(()=>{throw n},0)}var Mu,Pu=!1,bw=new tw,E1=()=>{let n=re.Promise.resolve(void 0);Mu=()=>{n.then(l9)}},l9=()=>{for(var n;n=o9();){try{n.h.call(n.g)}catch(t){c9(t)}var e=w1;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Pu=!1};function ng(n,e){At.call(this),this.h=n||1,this.g=e||re,this.j=Gt(this.qb,this),this.l=Date.now()}Mt(ng,At);V=ng.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Vt(this,"tick"),this.ga&&(ww(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ww(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}V.N=function(){ng.$.N.call(this),ww(this),delete this.g};function Ew(n,e,t){if(typeof n=="function")t&&(n=Gt(n,t));else if(n&&typeof n.handleEvent=="function")n=Gt(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:re.setTimeout(n,e||0)}function C1(n){n.g=Ew(()=>{n.g=null,n.i&&(n.i=!1,C1(n))},n.j);let e=n.h;n.h=null,n.m.apply(null,e)}var iw=class extends Qr{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:C1(this)}N(){super.N(),this.g&&(re.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Ru(n){Qr.call(this),this.h=n,this.g={}}Mt(Ru,Qr);var e1=[];function D1(n,e,t,i){Array.isArray(t)||(t&&(e1[0]=t.toString()),t=e1);for(var r=0;r<t.length;r++){var s=m1(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function I1(n){pw(n.g,function(e,t){this.g.hasOwnProperty(t)&&mw(e)},n),n.g={}}Ru.prototype.N=function(){Ru.$.N.call(this),I1(this)};Ru.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ig(){this.g=!0}ig.prototype.Ea=function(){this.g=!1};function u9(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+l+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+t+`
`+o})}function d9(n,e,t,i,r,s,o){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+t+`
`+s+" "+o})}function ic(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+f9(n,t)+(i?" "+i:"")})}function h9(n,e){n.info(function(){return"TIMEOUT: "+e})}ig.prototype.info=function(){};function f9(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t){for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return _w(t)}catch{return e}}var bo={},t1=null;function rg(){return t1=t1||new At}bo.Ta="serverreachability";function S1(n){Kt.call(this,bo.Ta,n)}Mt(S1,Kt);function ku(n){let e=rg();Vt(e,new S1(e))}bo.STAT_EVENT="statevent";function T1(n,e){Kt.call(this,bo.STAT_EVENT,n),this.stat=e}Mt(T1,Kt);function nn(n){let e=rg();Vt(e,new T1(e,n))}bo.Ua="timingevent";function x1(n,e){Kt.call(this,bo.Ua,n),this.size=e}Mt(x1,Kt);function Vu(n,e){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return re.setTimeout(function(){n()},e)}var sg={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},A1={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Cw(){}Cw.prototype.h=null;function n1(n){return n.h||(n.h=n.i())}function M1(){}var ju={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Dw(){Kt.call(this,"d")}Mt(Dw,Kt);function Iw(){Kt.call(this,"c")}Mt(Iw,Kt);var rw;function og(){}Mt(og,Cw);og.prototype.g=function(){return new XMLHttpRequest};og.prototype.i=function(){return{}};rw=new og;function Bu(n,e,t,i){this.l=n,this.j=e,this.m=t,this.W=i||1,this.U=new Ru(this),this.P=p9,n=Qb?125:void 0,this.V=new ng(n),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new P1}function P1(){this.i=null,this.g="",this.h=!1}var p9=45e3,R1={},sw={};V=Bu.prototype;V.setTimeout=function(n){this.P=n};function ow(n,e,t){n.L=1,n.A=cg(or(e)),n.u=t,n.S=!0,k1(n,null)}function k1(n,e){n.G=Date.now(),Uu(n),n.B=or(n.A);var t=n.B,i=n.W;Array.isArray(i)||(i=[String(i)]),U1(t.i,"t",i),n.o=0,t=n.l.J,n.h=new P1,n.g=cR(n.l,t?e:null,!n.u),0<n.O&&(n.M=new iw(Gt(n.Pa,n,n.g),n.O)),D1(n.U,n.g,"readystatechange",n.nb),e=n.I?p1(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),ku(),u9(n.j,n.v,n.B,n.m,n.W,n.u)}V.nb=function(n){n=n.target;let e=this.M;e&&Ti(n)==3?e.l():this.Pa(n)};V.Pa=function(n){try{if(n==this.g)e:{let u=Ti(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||Qb||this.g&&(this.h.h||this.g.ja()||o1(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?ku(3):ku(2)),ag(this);var t=this.g.da();this.ca=t;t:if(O1(this)){var i=o1(this.g);n="";var r=i.length,s=Ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){yo(this),Tu(this);var o="";break t}this.h.i=new re.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=t==200,d9(this.j,this.v,this.B,this.m,this.W,u,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xu(a)){var l=a;break t}}l=null}if(t=l)ic(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,aw(this,t);else{this.i=!1,this.s=3,nn(12),yo(this),Tu(this);break e}}this.S?(N1(this,u,o),Qb&&this.i&&u==3&&(D1(this.U,this.V,"tick",this.mb),this.V.start())):(ic(this.j,this.m,o,null),aw(this,o)),u==4&&yo(this),this.i&&!this.J&&(u==4?rR(this.l,this):(this.i=!1,Uu(this)))}else N9(this.g),t==400&&0<o.indexOf("Unknown SID")?(this.s=3,nn(12)):(this.s=0,nn(13)),yo(this),Tu(this)}}}catch{}finally{}};function O1(n){return n.g?n.v=="GET"&&n.L!=2&&n.l.Ha:!1}function N1(n,e,t){let i=!0,r;for(;!n.J&&n.o<t.length;)if(r=g9(n,t),r==sw){e==4&&(n.s=4,nn(14),i=!1),ic(n.j,n.m,null,"[Incomplete Response]");break}else if(r==R1){n.s=4,nn(15),ic(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}else ic(n.j,n.m,r,null),aw(n,r);O1(n)&&n.o!=0&&(n.h.g=n.h.g.slice(n.o),n.o=0),e!=4||t.length!=0||n.h.h||(n.s=1,nn(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.ba&&(n.ba=!0,e=n.l,e.g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Pw(e),e.M=!0,nn(11))):(ic(n.j,n.m,t,"[Invalid Chunked Response]"),yo(n),Tu(n))}V.mb=function(){if(this.g){var n=Ti(this.g),e=this.g.ja();this.o<e.length&&(ag(this),N1(this,n,e),this.i&&n!=4&&Uu(this))}};function g9(n,e){var t=n.o,i=e.indexOf(`
`,t);return i==-1?sw:(t=Number(e.substring(t,i)),isNaN(t)?R1:(i+=1,i+t>e.length?sw:(e=e.slice(i,i+t),n.o=i+t,e)))}V.cancel=function(){this.J=!0,yo(this)};function Uu(n){n.Y=Date.now()+n.P,F1(n,n.P)}function F1(n,e){if(n.C!=null)throw Error("WatchDog timer not null");n.C=Vu(Gt(n.lb,n),e)}function ag(n){n.C&&(re.clearTimeout(n.C),n.C=null)}V.lb=function(){this.C=null;let n=Date.now();0<=n-this.Y?(h9(this.j,this.B),this.L!=2&&(ku(),nn(17)),yo(this),this.s=2,Tu(this)):F1(this,this.Y-n)};function Tu(n){n.l.H==0||n.J||rR(n.l,n)}function yo(n){ag(n);var e=n.M;e&&typeof e.sa=="function"&&e.sa(),n.M=null,ww(n.V),I1(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function aw(n,e){try{var t=n.l;if(t.H!=0&&(t.g==n||cw(t.i,n))){if(!n.K&&cw(t.i,n)&&t.H==3){try{var i=t.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!t.u){if(t.g)if(t.g.G+3e3<n.G)Kp(t),dg(t);else break e;Mw(t),nn(18)}}else t.Fa=r[1],0<t.Fa-t.V&&37500>r[2]&&t.G&&t.A==0&&!t.v&&(t.v=Vu(Gt(t.ib,t),6e3));if(1>=H1(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else vo(t,11)}else if((n.K||t.g==n)&&Kp(t),!xu(e))for(r=t.Ja.g.parse(e),e=0;e<r.length;e++){let l=r[e];if(t.V=l[0],l=l[1],t.H==2)if(l[0]=="c"){t.K=l[1],t.pa=l[2];let u=l[3];u!=null&&(t.ra=u,t.l.info("VER="+t.ra));let d=l[4];d!=null&&(t.Ga=d,t.l.info("SVER="+t.Ga));let h=l[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,t.L=i,t.l.info("backChannelRequestTimeoutMs_="+i)),i=t;let f=n.g;if(f){let p=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var s=i.i;s.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Sw(s,s.h),s.h=null))}if(i.F){let g=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;g&&(i.Da=g,Xe(i.I,i.F,g))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms")),i=t;var o=n;if(i.wa=aR(i,i.J?i.pa:null,i.Y),o.K){q1(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.C&&(ag(a),Uu(a)),i.g=o}else nR(i);0<t.j.length&&hg(t)}else l[0]!="stop"&&l[0]!="close"||vo(t,7);else t.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?vo(t,7):Aw(t):l[0]!="noop"&&t.h&&t.h.Aa(l),t.A=0)}}ku(4)}catch{}}function m9(n){if(n.Z&&typeof n.Z=="function")return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if(typeof n=="string")return n.split("");if(Zp(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}e=[],t=0;for(i in n)e[t++]=n[i];return e}function y9(n){if(n.ta&&typeof n.ta=="function")return n.ta();if(!n.Z||typeof n.Z!="function"){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Zp(n)||typeof n=="string"){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(let i in n)e[t++]=i;return e}}}function L1(n,e){if(n.forEach&&typeof n.forEach=="function")n.forEach(e,void 0);else if(Zp(n)||typeof n=="string")Array.prototype.forEach.call(n,e,void 0);else for(var t=y9(n),i=m9(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}var V1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function v9(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function _o(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof _o){this.h=n.h,Wp(this,n.j),this.s=n.s,this.g=n.g,Gp(this,n.m),this.l=n.l;var e=n.i,t=new Ou;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),i1(this,t),this.o=n.o}else n&&(e=String(n).match(V1))?(this.h=!1,Wp(this,e[1]||"",!0),this.s=Iu(e[2]||""),this.g=Iu(e[3]||"",!0),Gp(this,e[4]),this.l=Iu(e[5]||"",!0),i1(this,e[6]||"",!0),this.o=Iu(e[7]||"")):(this.h=!1,this.i=new Ou(null,this.h))}_o.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Su(e,r1,!0),":");var t=this.g;return(t||e=="file")&&(n.push("//"),(e=this.s)&&n.push(Su(e,r1,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.m,t!=null&&n.push(":",String(t))),(t=this.l)&&(this.g&&t.charAt(0)!="/"&&n.push("/"),n.push(Su(t,t.charAt(0)=="/"?w9:b9,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Su(t,C9)),n.join("")};function or(n){return new _o(n)}function Wp(n,e,t){n.j=t?Iu(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function i1(n,e,t){e instanceof Ou?(n.i=e,D9(n.i,n.h)):(t||(e=Su(e,E9)),n.i=new Ou(e,n.h))}function Xe(n,e,t){n.i.set(e,t)}function cg(n){return Xe(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Iu(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Su(n,e,t){return typeof n=="string"?(n=encodeURI(n).replace(e,_9),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function _9(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var r1=/[#\/\?@]/g,b9=/[#\?:]/g,w9=/[#\?]/g,E9=/[#\?@]/g,C9=/#/g;function Ou(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yr(n){n.g||(n.g=new Map,n.h=0,n.i&&v9(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}V=Ou.prototype;V.add=function(n,e){Yr(this),this.i=null,n=oc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this};function j1(n,e){Yr(n),e=oc(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function B1(n,e){return Yr(n),e=oc(n,e),n.g.has(e)}V.forEach=function(n,e){Yr(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)};V.ta=function(){Yr(this);let n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){let r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t};V.Z=function(n){Yr(this);let e=[];if(typeof n=="string")B1(this,n)&&(e=e.concat(this.g.get(oc(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e};V.set=function(n,e){return Yr(this),this.i=null,n=oc(this,n),B1(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this};V.get=function(n,e){return n?(n=this.Z(n),0<n.length?String(n[0]):e):e};function U1(n,e,t){j1(n,e),0<t.length&&(n.i=null,n.g.set(oc(n,e),hw(t)),n.h+=t.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";let n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),n.push(r)}}return this.i=n.join("&")};function oc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function D9(n,e){e&&!n.j&&(Yr(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(j1(this,i),U1(this,r,t))},n)),n.j=e}var I9=class{constructor(n,e){this.g=n,this.map=e}};function $1(n){this.l=n||S9,re.PerformanceNavigationTiming?(n=re.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(re.g&&re.g.Ka&&re.g.Ka()&&re.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var S9=10;function z1(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function H1(n){return n.h?1:n.g?n.g.size:0}function cw(n,e){return n.h?n.h==e:n.g?n.g.has(e):!1}function Sw(n,e){n.g?n.g.add(e):n.h=e}function q1(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}$1.prototype.cancel=function(){if(this.i=W1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let n of this.g.values())n.cancel();this.g.clear()}};function W1(n){if(n.h!=null)return n.i.concat(n.h.F);if(n.g!=null&&n.g.size!==0){let e=n.i;for(let t of n.g.values())e=e.concat(t.F);return e}return hw(n.i)}var T9=class{stringify(n){return re.JSON.stringify(n,void 0)}parse(n){return re.JSON.parse(n,void 0)}};function x9(){this.g=new T9}function A9(n,e,t){let i=t||"";try{L1(n,function(r,s){let o=r;Fu(r)&&(o=_w(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function M9(n,e){let t=new ig;if(re.Image){let i=new Image;i.onload=jp(Hp,t,i,"TestLoadImage: loaded",!0,e),i.onerror=jp(Hp,t,i,"TestLoadImage: error",!1,e),i.onabort=jp(Hp,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=jp(Hp,t,i,"TestLoadImage: timeout",!1,e),re.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}function Hp(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function $u(n){this.l=n.ec||null,this.j=n.ob||!1}Mt($u,Cw);$u.prototype.g=function(){return new lg(this.l,this.j)};$u.prototype.i=function(n){return function(){return n}}({});function lg(n,e){At.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Tw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mt(lg,At);var Tw=0;V=lg.prototype;V.open=function(n,e){if(this.readyState!=Tw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Nu(this)};V.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||re).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zu(this)),this.readyState=Tw};V.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Nu(this)),this.g&&(this.readyState=3,Nu(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof re.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;G1(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))};function G1(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}V.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?zu(this):Nu(this),this.readyState==3&&G1(this)}};V.Za=function(n){this.g&&(this.response=this.responseText=n,zu(this))};V.Ya=function(n){this.g&&(this.response=n,zu(this))};V.ka=function(){this.g&&zu(this)};function zu(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Nu(n)}V.setRequestHeader=function(n,e){this.v.append(n,e)};V.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";let n=[],e=this.h.entries();for(var t=e.next();!t.done;)t=t.value,n.push(t[0]+": "+t[1]),t=e.next();return n.join(`\r
`)};function Nu(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(lg.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var P9=re.JSON.parse;function st(n){At.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=K1,this.L=this.M=!1}Mt(st,At);var K1="",R9=/^https?$/i,k9=["POST","PUT"];V=st.prototype;V.Oa=function(n){this.M=n};V.ha=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():rw.g(),this.C=this.u?n1(this.u):n1(rw),this.g.onreadystatechange=Gt(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){s1(this,s);return}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())t.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(t.keys()).find(s=>s.toLowerCase()=="content-type"),r=re.FormData&&n instanceof re.FormData,!(0<=u1(k9,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{X1(this),0<this.B&&((this.L=O9(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gt(this.ua,this)):this.A=Ew(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){s1(this,s)}};function O9(n){return sc&&typeof n.timeout=="number"&&n.ontimeout!==void 0}V.ua=function(){typeof dw<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vt(this,"timeout"),this.abort(8))};function s1(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Q1(n),ug(n)}function Q1(n){n.F||(n.F=!0,Vt(n,"complete"),Vt(n,"error"))}V.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Vt(this,"complete"),Vt(this,"abort"),ug(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ug(this,!0)),st.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?Y1(this):this.kb())};V.kb=function(){Y1(this)};function Y1(n){if(n.h&&typeof dw<"u"&&(!n.C[1]||Ti(n)!=4||n.da()!=2)){if(n.v&&Ti(n)==4)Ew(n.La,0,n);else if(Vt(n,"readystatechange"),Ti(n)==4){n.h=!1;try{let o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=o===0){var r=String(n.I).match(V1)[1]||null;!r&&re.self&&re.self.location&&(r=re.self.location.protocol.slice(0,-1)),i=!R9.test(r?r.toLowerCase():"")}t=i}if(t)Vt(n,"complete"),Vt(n,"success");else{n.m=6;try{var s=2<Ti(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",Q1(n)}}finally{ug(n)}}}}function ug(n,e){if(n.g){X1(n);let t=n.g,i=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Vt(n,"ready");try{t.onreadystatechange=i}catch{}}}function X1(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(re.clearTimeout(n.A),n.A=null)}V.isActive=function(){return!!this.g};function Ti(n){return n.g?n.g.readyState:0}V.da=function(){try{return 2<Ti(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&e.indexOf(n)==0&&(e=e.substring(n.length)),P9(e)}};function o1(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case K1:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function N9(n){let e={};n=(n.g&&2<=Ti(n)&&n.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<n.length;i++){if(xu(n[i]))continue;var t=a9(n[i]);let r=t[0];if(t=t[1],typeof t!="string")continue;t=t.trim();let s=e[r]||[];e[r]=s,s.push(t)}i9(e,function(i){return i.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Z1(n){let e="";return pw(n,function(t,i){e+=i,e+=":",e+=t,e+=`\r
`}),e}function xw(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Z1(t),typeof n=="string"?t!=null&&encodeURIComponent(String(t)):Xe(n,e,t))}function Cu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function J1(n){this.Ga=0,this.j=[],this.l=new ig,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Cu("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Cu("baseRetryDelayMs",5e3,n),this.hb=Cu("retryDelaySeedMs",1e4,n),this.eb=Cu("forwardChannelMaxRetries",2,n),this.xa=Cu("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new $1(n&&n.concurrentRequestLimit),this.Ja=new x9,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=J1.prototype;V.ra=8;V.H=1;function Aw(n){if(eR(n),n.H==3){var e=n.W++,t=or(n.I);if(Xe(t,"SID",n.K),Xe(t,"RID",e),Xe(t,"TYPE","terminate"),Hu(n,t),e=new Bu(n,n.l,e),e.L=2,e.A=cg(or(t)),t=!1,re.navigator&&re.navigator.sendBeacon)try{t=re.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&re.Image&&(new Image().src=e.A,t=!0),t||(e.g=cR(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Uu(e)}oR(n)}function dg(n){n.g&&(Pw(n),n.g.cancel(),n.g=null)}function eR(n){dg(n),n.u&&(re.clearTimeout(n.u),n.u=null),Kp(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&re.clearTimeout(n.m),n.m=null)}function hg(n){if(!z1(n.i)&&!n.m){n.m=!0;var e=n.Na;Mu||E1(),Pu||(Mu(),Pu=!0),bw.add(e,n),n.C=0}}function F9(n,e){return H1(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.j=e.F.concat(n.j),!0):n.H==1||n.H==2||n.C>=(n.cb?0:n.eb)?!1:(n.m=Vu(Gt(n.Na,n,e),sR(n,n.C)),n.C++,!0)}V.Na=function(n){if(this.m)if(this.m=null,this.H==1){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;let r=new Bu(this,this.l,n),s=this.s;if(this.U&&(s?(s=p1(s),g1(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){t:{var i=this.j[t];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=t;break e}if(e===4096||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=tR(this,r,e),t=or(this.I),Xe(t,"RID",n),Xe(t,"CVER",22),this.F&&Xe(t,"X-HTTP-Session-Id",this.F),Hu(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(Z1(s)))+"&"+e:this.o&&xw(t,this.o,s)),Sw(this.i,r),this.bb&&Xe(t,"TYPE","init"),this.P?(Xe(t,"$req",e),Xe(t,"SID","null"),r.aa=!0,ow(r,t,null)):ow(r,t,e),this.H=2}}else this.H==3&&(n?a1(this,n):this.j.length==0||z1(this.i)||a1(this))};function a1(n,e){var t;e?t=e.m:t=n.W++;let i=or(n.I);Xe(i,"SID",n.K),Xe(i,"RID",t),Xe(i,"AID",n.V),Hu(n,i),n.o&&n.s&&xw(i,n.o,n.s),t=new Bu(n,n.l,t,n.C+1),n.o===null&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=tR(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Sw(n.i,t),ow(t,i,e)}function Hu(n,e){n.na&&pw(n.na,function(t,i){Xe(e,i,t)}),n.h&&L1({},function(t,i){Xe(e,i,t)})}function tR(n,e,t){t=Math.min(n.j.length,t);var i=n.h?Gt(n.h.Va,n.h,n):null;e:{var r=n.j;let s=-1;for(;;){let o=["count="+t];s==-1?0<t?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<t;c++){let l=r[c].g,u=r[c].map;if(l-=s,0>l)s=Math.max(0,r[c].g-100),a=!1;else try{A9(u,o,"req"+l+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,i}function nR(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Mu||E1(),Pu||(Mu(),Pu=!0),bw.add(e,n),n.A=0}}function Mw(n){return n.g||n.u||3<=n.A?!1:(n.ba++,n.u=Vu(Gt(n.Ma,n),sR(n,n.A)),n.A++,!0)}V.Ma=function(){if(this.u=null,iR(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Vu(Gt(this.jb,this),n)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,nn(10),dg(this),iR(this))};function Pw(n){n.B!=null&&(re.clearTimeout(n.B),n.B=null)}function iR(n){n.g=new Bu(n,n.l,"rpc",n.ba),n.o===null&&(n.g.I=n.s),n.g.O=0;var e=or(n.wa);Xe(e,"RID","rpc"),Xe(e,"SID",n.K),Xe(e,"AID",n.V),Xe(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Xe(e,"TO",n.qa),Xe(e,"TYPE","xmlhttp"),Hu(n,e),n.o&&n.s&&xw(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=cg(or(e)),t.u=null,t.S=!0,k1(t,n)}V.ib=function(){this.v!=null&&(this.v=null,dg(this),Mw(this),nn(19))};function Kp(n){n.v!=null&&(re.clearTimeout(n.v),n.v=null)}function rR(n,e){var t=null;if(n.g==e){Kp(n),Pw(n),n.g=null;var i=2}else if(cw(n.i,e))t=e.F,q1(n.i,e),i=1;else return;if(n.H!=0){if(e.i)if(i==1){t=e.u?e.u.length:0,e=Date.now()-e.G;var r=n.C;i=rg(),Vt(i,new x1(i,t)),hg(n)}else nR(n);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&F9(n,e)||i==2&&Mw(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),r){case 1:vo(n,5);break;case 4:vo(n,10);break;case 3:vo(n,6);break;default:vo(n,2)}}}function sR(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function vo(n,e){if(n.l.info("Error code "+e),e==2){var t=null;n.h&&(t=null);var i=Gt(n.pb,n);t||(t=new _o("//www.google.com/images/cleardot.gif"),re.location&&re.location.protocol=="http"||Wp(t,"https"),cg(t)),M9(t.toString(),i)}else nn(2);n.H=0,n.h&&n.h.za(e),oR(n),eR(n)}V.pb=function(n){n?(this.l.info("Successfully pinged google.com"),nn(2)):(this.l.info("Failed to ping google.com"),nn(1))};function oR(n){if(n.H=0,n.ma=[],n.h){let e=W1(n.i);(e.length!=0||n.j.length!=0)&&(ZP(n.ma,e),ZP(n.ma,n.j),n.i.i.length=0,hw(n.j),n.j.length=0),n.h.ya()}}function aR(n,e,t){var i=t instanceof _o?or(t):new _o(t);if(i.g!="")e&&(i.g=e+"."+i.g),Gp(i,i.m);else{var r=re.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new _o(null);i&&Wp(s,i),e&&(s.g=e),r&&Gp(s,r),t&&(s.l=t),i=s}return t=n.F,e=n.Da,t&&e&&Xe(i,t,e),Xe(i,"VER",n.ra),Hu(n,i),i}function cR(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n.Ha&&!n.va?new st(new $u({ob:t})):new st(n.va),e.Oa(n.J),e}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function lR(){}V=lR.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function Qp(){if(sc&&!(10<=Number(Jq)))throw Error("Environmental error: no available transport.")}Qp.prototype.g=function(n,e){return new Tn(n,e)};function Tn(n,e){At.call(this),this.g=new J1(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!xu(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xu(e)&&(this.g.F=e,n=this.h,n!==null&&e in n&&(n=this.h,e in n&&delete n[e])),this.j=new ac(this)}Mt(Tn,At);Tn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;nn(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=aR(n,null,n.Y),hg(n)};Tn.prototype.close=function(){Aw(this.g)};Tn.prototype.u=function(n){var e=this.g;if(typeof n=="string"){var t={};t.__data__=n,n=t}else this.v&&(t={},t.__data__=_w(n),n=t);e.j.push(new I9(e.fb++,n)),e.H==3&&hg(e)};Tn.prototype.N=function(){this.g.h=null,delete this.j,Aw(this.g),delete this.g,Tn.$.N.call(this)};function uR(n){Dw.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(let t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=e!==null&&n in e?e[n]:void 0),this.data=e}else this.data=n}Mt(uR,Dw);function dR(){Iw.call(this),this.status=1}Mt(dR,Iw);function ac(n){this.g=n}Mt(ac,lR);ac.prototype.Ba=function(){Vt(this.g,"a")};ac.prototype.Aa=function(n){Vt(this.g,new uR(n))};ac.prototype.za=function(n){Vt(this.g,new dR)};ac.prototype.ya=function(){Vt(this.g,"b")};function L9(){this.blockSize=-1}function si(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Mt(si,L9);si.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Kb(n,e,t){t||(t=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(r=0;16>r;++r)i[r]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;e=n.g[0],t=n.g[1],r=n.g[2];var s=n.g[3],o=e+(s^t&(r^s))+i[0]+3614090360&4294967295;e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[3]+3250441966&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[4]+4118548399&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[7]+4249261313&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[8]+1770035416&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[11]+2304563134&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(s^t&(r^s))+i[12]+1804603682&4294967295,e=t+(o<<7&4294967295|o>>>25),o=s+(r^e&(t^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(t^s&(e^t))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=t+(e^r&(s^e))+i[15]+1236535329&4294967295,t=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(t^r))+i[1]+4129170786&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[0]+3921069994&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[5]+3593408605&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[4]+3889429448&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[9]+568446438&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[8]+1163531501&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(t^r))+i[13]+2850285829&4294967295,e=t+(o<<5&4294967295|o>>>27),o=s+(t^r&(e^t))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^t&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=t+(s^e&(r^s))+i[12]+2368359562&4294967295,t=r+(o<<20&4294967295|o>>>12),o=e+(t^r^s)+i[5]+4294588738&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[14]+4259657740&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[1]+2763975236&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[10]+3200236656&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[13]+681279174&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[6]+76029189&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(t^r^s)+i[9]+3654602809&4294967295,e=t+(o<<4&4294967295|o>>>28),o=s+(e^t^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^t)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=t+(r^s^e)+i[2]+3299628645&4294967295,t=r+(o<<23&4294967295|o>>>9),o=e+(r^(t|~s))+i[0]+4096336452&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[5]+4237533241&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[12]+1700485571&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[1]+2240044497&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[8]+1873313359&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[13]+1309151649&4294967295,t=r+(o<<21&4294967295|o>>>11),o=e+(r^(t|~s))+i[4]+4149444226&4294967295,e=t+(o<<6&4294967295|o>>>26),o=s+(t^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~t))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=t+(s^(r|~e))+i[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+r&4294967295,n.g[3]=n.g[3]+s&4294967295}si.prototype.j=function(n,e){e===void 0&&(e=n.length);for(var t=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=t;)Kb(this,n,s),s+=this.blockSize;if(typeof n=="string"){for(;s<e;)if(i[r++]=n.charCodeAt(s++),r==this.blockSize){Kb(this,i),r=0;break}}else for(;s<e;)if(i[r++]=n[s++],r==this.blockSize){Kb(this,i),r=0;break}}this.h=r,this.i+=e};si.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=t&255,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var i=0;32>i;i+=8)n[t++]=this.g[e]>>>i&255;return n};function Le(n,e){this.h=e;for(var t=[],i=!0,r=n.length-1;0<=r;r--){var s=n[r]|0;i&&s==e||(t[r]=s,i=!1)}this.g=t}var V9={};function Rw(n){return-128<=n&&128>n?Yq(n,function(e){return new Le([e|0],0>e?-1:0)}):new Le([n|0],0>n?-1:0)}function xi(n){if(isNaN(n)||!isFinite(n))return rc;if(0>n)return Lt(xi(-n));for(var e=[],t=1,i=0;n>=t;i++)e[i]=n/t|0,t*=lw;return new Le(e,0)}function hR(n,e){if(n.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(n.charAt(0)=="-")return Lt(hR(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=xi(Math.pow(e,8)),i=rc,r=0;r<n.length;r+=8){var s=Math.min(8,n.length-r),o=parseInt(n.substring(r,r+s),e);8>s?(s=xi(Math.pow(e,s)),i=i.R(s).add(xi(o))):(i=i.R(t),i=i.add(xi(o)))}return i}var lw=4294967296,rc=Rw(0),uw=Rw(1),c1=Rw(16777216);V=Le.prototype;V.ea=function(){if(Bn(this))return-Lt(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var i=this.D(t);n+=(0<=i?i:lw+i)*e,e*=lw}return n};V.toString=function(n){if(n=n||10,2>n||36<n)throw Error("radix out of range: "+n);if(sr(this))return"0";if(Bn(this))return"-"+Lt(this).toString(n);for(var e=xi(Math.pow(n,6)),t=this,i="";;){var r=Xp(t,e).g;t=Yp(t,r.R(e));var s=((0<t.g.length?t.g[0]:t.h)>>>0).toString(n);if(t=r,sr(t))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};V.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h};function sr(n){if(n.h!=0)return!1;for(var e=0;e<n.g.length;e++)if(n.g[e]!=0)return!1;return!0}function Bn(n){return n.h==-1}V.X=function(n){return n=Yp(this,n),Bn(n)?-1:sr(n)?0:1};function Lt(n){for(var e=n.g.length,t=[],i=0;i<e;i++)t[i]=~n.g[i];return new Le(t,~n.h).add(uw)}V.abs=function(){return Bn(this)?Lt(this):this};V.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(n.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(n.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,t[r]=o<<16|s}return new Le(t,t[t.length-1]&-2147483648?-1:0)};function Yp(n,e){return n.add(Lt(e))}V.R=function(n){if(sr(this)||sr(n))return rc;if(Bn(this))return Bn(n)?Lt(this).R(Lt(n)):Lt(Lt(this).R(n));if(Bn(n))return Lt(this.R(Lt(n)));if(0>this.X(c1)&&0>n.X(c1))return xi(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],i=0;i<2*e;i++)t[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<n.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=n.D(r)>>>16,c=n.D(r)&65535;t[2*i+2*r]+=o*c,qp(t,2*i+2*r),t[2*i+2*r+1]+=s*c,qp(t,2*i+2*r+1),t[2*i+2*r+1]+=o*a,qp(t,2*i+2*r+1),t[2*i+2*r+2]+=s*a,qp(t,2*i+2*r+2)}for(i=0;i<e;i++)t[i]=t[2*i+1]<<16|t[2*i];for(i=e;i<2*e;i++)t[i]=0;return new Le(t,0)};function qp(n,e){for(;(n[e]&65535)!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Du(n,e){this.g=n,this.h=e}function Xp(n,e){if(sr(e))throw Error("division by zero");if(sr(n))return new Du(rc,rc);if(Bn(n))return e=Xp(Lt(n),e),new Du(Lt(e.g),Lt(e.h));if(Bn(e))return e=Xp(n,Lt(e)),new Du(Lt(e.g),e.h);if(30<n.g.length){if(Bn(n)||Bn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=uw,i=e;0>=i.X(n);)t=l1(t),i=l1(i);var r=nc(t,1),s=nc(i,1);for(i=nc(i,2),t=nc(t,2);!sr(i);){var o=s.add(i);0>=o.X(n)&&(r=r.add(t),s=o),i=nc(i,1),t=nc(t,1)}return e=Yp(n,r.R(e)),new Du(r,e)}for(r=rc;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),i=Math.ceil(Math.log(t)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=xi(t),o=s.R(e);Bn(o)||0<o.X(n);)t-=i,s=xi(t),o=s.R(e);sr(s)&&(s=uw),r=r.add(s),n=Yp(n,o)}return new Du(r,n)}V.gb=function(n){return Xp(this,n).h};V.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)&n.D(i);return new Le(t,this.h&n.h)};V.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)|n.D(i);return new Le(t,this.h|n.h)};V.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],i=0;i<e;i++)t[i]=this.D(i)^n.D(i);return new Le(t,this.h^n.h)};function l1(n){for(var e=n.g.length+1,t=[],i=0;i<e;i++)t[i]=n.D(i)<<1|n.D(i-1)>>>31;return new Le(t,n.h)}function nc(n,e){var t=e>>5;e%=32;for(var i=n.g.length-t,r=[],s=0;s<i;s++)r[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Le(r,n.h)}Qp.prototype.createWebChannel=Qp.prototype.g;Tn.prototype.send=Tn.prototype.u;Tn.prototype.open=Tn.prototype.m;Tn.prototype.close=Tn.prototype.close;sg.NO_ERROR=0;sg.TIMEOUT=8;sg.HTTP_ERROR=6;A1.COMPLETE="complete";M1.EventType=ju;ju.OPEN="a";ju.CLOSE="b";ju.ERROR="c";ju.MESSAGE="d";At.prototype.listen=At.prototype.O;st.prototype.listenOnce=st.prototype.P;st.prototype.getLastError=st.prototype.Sa;st.prototype.getLastErrorCode=st.prototype.Ia;st.prototype.getStatus=st.prototype.da;st.prototype.getResponseJson=st.prototype.Wa;st.prototype.getResponseText=st.prototype.ja;st.prototype.send=st.prototype.ha;st.prototype.setWithCredentials=st.prototype.Oa;si.prototype.digest=si.prototype.l;si.prototype.reset=si.prototype.reset;si.prototype.update=si.prototype.j;Le.prototype.add=Le.prototype.add;Le.prototype.multiply=Le.prototype.R;Le.prototype.modulo=Le.prototype.gb;Le.prototype.compare=Le.prototype.X;Le.prototype.toNumber=Le.prototype.ea;Le.prototype.toString=Le.prototype.toString;Le.prototype.getBits=Le.prototype.D;Le.fromNumber=xi;Le.fromString=hR;var fR=oi.createWebChannelTransport=function(){return new Qp},pR=oi.getStatEventTarget=function(){return rg()},fg=oi.ErrorCode=sg,gR=oi.EventType=A1,mR=oi.Event=bo,kw=oi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},voe=oi.FetchXmlHttpFactory=$u,qu=oi.WebChannel=M1,yR=oi.XhrIo=st,vR=oi.Md5=si,wo=oi.Integer=Le;var _R="@firebase/firestore";var _t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");var Lc="10.7.0";var is=new ah("@firebase/firestore");function hc(){return is.logLevel}function vk(n){is.setLogLevel(n)}function R(n,...e){if(is.logLevel<=fi.DEBUG){let t=e.map(OC);is.debug(`Firestore (${Lc}): ${n}`,...t)}}function ut(n,...e){if(is.logLevel<=fi.ERROR){let t=e.map(OC);is.error(`Firestore (${Lc}): ${n}`,...t)}}function $n(n,...e){if(is.logLevel<=fi.WARN){let t=e.map(OC);is.warn(`Firestore (${Lc}): ${n}`,...t)}}function OC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Lc}) INTERNAL ASSERTION FAILED: `+n;throw ut(e),new Error(e)}function Y(n,e){n||z()}function _k(n,e){n||z()}function j(n,e){return n}var T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends QI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var bt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Dg=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Vw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_t.UNAUTHENTICATED))}shutdown(){}},jw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Bw=class{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new bt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new bt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>x(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{R("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(R("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new bt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(R("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Y(typeof i.accessToken=="string"),new Dg(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new _t(e)}},Uw=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},$w=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Uw(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Hw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&R("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,R("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{R("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):R("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string"),this.R=t.token,new zw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function j9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Ig=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=j9(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function ue(n,e){return n<e?-1:n>e?1:0}function wc(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function bk(n){return n+"\0"}var nt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new nt(0,0))}static max(){return new n(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sg=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&z(),i===void 0?i=e.length-t:i>e.length-t&&z(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ae=class n extends Sg{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new P(T.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},B9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,dt=class n extends Sg{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return B9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new P(T.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new P(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new P(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new P(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var F=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ae.fromString(e))}static fromName(e){return new n(Ae.fromString(e).popFirst(5))}static empty(){return new n(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ae.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ae(e.slice()))}};var Ec=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};function qw(n){return n.fields.find(e=>e.kind===2)}function Co(n){return n.fields.filter(e=>e.kind!==2)}Ec.UNKNOWN_ID=-1;var vc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var id=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,zn.min())}};function wk(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=J.fromTimestamp(i===1e9?new nt(t+1,0):new nt(t,i));return new zn(r,F.empty(),e)}function Ek(n){return new zn(n.readTime,n.key,-1)}var zn=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(J.min(),F.empty(),-1)}static max(){return new n(J.max(),F.empty(),-1)}};function NC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=F.comparator(n.documentKey,e.documentKey),t!==0?t:ue(n.largestBatchId,e.largestBatchId))}var Ck="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ps(n){return x(this,null,function*(){if(n.code!==T.FAILED_PRECONDITION||n.message!==Ck)throw n;R("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(u=>{o[l]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};var xg=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new bt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ao(e,t.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=FC(i.target.error);this.V.reject(new Ao(e,r))}}static open(e,t,i,r){try{return new n(t,e.transaction(r,i))}catch(s){throw new Ao(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(R("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Gw(t)}},rs=class n{constructor(e,t,i){this.name=e,this.version=t,this.p=i,n.S(sh())===12.2&&ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return R("SimpleDb","Removing database:",e),Do(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!oh())return!1;if(n.C())return!0;let e=sh(),t=n.S(e),i=0<t&&t<10,r=n.v(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static C(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static v(e){let t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}O(e){return x(this,null,function*(){return this.db||(R("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;t(o)},r.onblocked=()=>{i(new Ao(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?i(new P(T.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new P(T.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new Ao(e,o))},r.onupgradeneeded=s=>{R("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,r.transaction,s.oldVersion,this.version).next(()=>{R("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){return x(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=xg.open(this.db,e,s?"readonly":"readwrite",i),c=r(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(R("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Ww=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Do(this.k.delete())}},Ao=class extends P{constructor(e,t){super(T.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function gs(n){return n.name==="IndexedDbTransactionError"}var Gw=class{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(R("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(R("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Do(i)}add(e){return R("SimpleDb","ADD",this.store.name,e,e),Do(this.store.add(e))}get(e){return Do(this.store.get(e)).next(t=>(t===void 0&&(t=null),R("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return R("SimpleDb","DELETE",this.store.name,e),Do(this.store.delete(e))}count(){return R("SimpleDb","COUNT",this.store.name),Do(this.store.count())}W(e,t){let i=this.options(e,t);if(i.index||typeof this.store.getAll!="function"){let r=this.cursor(i),s=[];return this.G(r,(o,a)=>{s.push(a)}).next(()=>s)}{let r=this.store.getAll(i.range);return new S((s,o)=>{r.onerror=a=>{o(a.target.error)},r.onsuccess=a=>{s(a.target.result)}})}}j(e,t){let i=this.store.getAll(e,t===null?void 0:t);return new S((r,s)=>{i.onerror=o=>{s(o.target.error)},i.onsuccess=o=>{r(o.target.result)}})}H(e,t){R("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,t);i.J=!1;let r=this.cursor(i);return this.G(r,(s,o,a)=>a.delete())}Y(e,t){let i;t?i=e:(i={},t=e);let r=this.cursor(i);return this.G(r,t)}Z(e){let t=this.cursor({});return new S((i,r)=>{t.onerror=s=>{let o=FC(s.target.error);r(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():i()}):i()}})}G(e,t){let i=[];return new S((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void r();let c=new Ww(a),l=t(a.primaryKey,a.value,c);if(l instanceof S){let u=l.catch(d=>(c.done(),S.reject(d)));i.push(u)}c.isDone?r():c.$===null?a.continue():a.continue(c.$)}}).next(()=>S.waitFor(i))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let i=this.store.index(e.index);return e.J?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Do(n){return new S((e,t)=>{n.onsuccess=i=>{let r=i.target.result;e(r)},n.onerror=i=>{let r=FC(i.target.error);t(r)}})}var bR=!1;function FC(n){let e=rs.S(sh());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let i=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return bR||(bR=!0,setTimeout(()=>{throw i},0)),i}}return n}var Kw=class{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){R("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>x(this,null,function*(){this.task=null;try{R("IndexBackiller",`Documents written: ${yield this.X.te()}`)}catch(t){gs(t)?R("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):yield ps(t)}yield this.ee(6e4)}))}},Qw=class{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){return x(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.ne(t,e))})}ne(e,t){let i=new Set,r=t,s=!0;return S.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!i.has(o))return R("IndexBackiller",`Processing collection: ${o}`),this.re(e,o,r).next(a=>{r-=a,i.add(o)});s=!1})).next(()=>t-r)}re(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(r,s)).next(a=>(R("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let i=e;return t.changes.forEach((r,s)=>{let o=Ek(s);NC(o,i)>0&&(i=o)}),new zn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}};var xn=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.se(r),this.oe=r=>i.writeSequenceNumber(r))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function Td(n){return n==null}function rd(n){return n===0&&1/n==-1/0}function Dk(n){return typeof n=="number"&&Number.isInteger(n)&&!rd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function rn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=wR(e)),e=U9(n.get(t),e);return wR(e)}function U9(n,e){let t=e,i=n.length;for(let r=0;r<i;r++){let s=n.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function wR(n){return n+""}function Ai(n){let e=n.length;if(Y(e>=2),e===2)return Y(n.charAt(0)===""&&n.charAt(1)===""),Ae.emptyPath();let t=e-2,i=[],r="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&z(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;r.length===0?c=a:(r+=a,c=r,r=""),i.push(c);break;case"":r+=n.substring(s,o),r+="\0";break;case"":r+=n.substring(s,o+1);break;default:z()}s=o+2}return new Ae(i)}var ER=["userId","batchId"];function vg(n,e){return[n,rn(e)]}function Ik(n,e,t){return[n,rn(e),t]}var $9={},z9=["prefixPath","collectionGroup","readTime","documentId"],H9=["prefixPath","collectionGroup","documentId"],q9=["collectionGroup","readTime","prefixPath","documentId"],W9=["canonicalId","targetId"],G9=["targetId","path"],K9=["path","targetId"],Q9=["collectionId","parent"],Y9=["indexId","uid"],X9=["uid","sequenceNumber"],Z9=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],J9=["indexId","uid","orderedDocumentKey"],eW=["userId","collectionPath","documentId"],tW=["userId","collectionPath","largestBatchId"],nW=["userId","collectionGroup","largestBatchId"],Sk=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iW=[...Sk,"documentOverlays"],Tk=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xk=Tk,rW=[...xk,"indexConfiguration","indexState","indexEntries"];var sd=class extends Tg{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}};function Rt(n,e){let t=j(n);return rs.M(t.ae,e)}function CR(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Uo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ak(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ze=class n{constructor(e,t){this.comparator=e,this.root=t||Pi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}},yc=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pi=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Pi.EMPTY=null,Pi.RED=!0,Pi.BLACK=!1;Pi.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Pi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ue=class n{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ag(this.data.getIterator())}getIteratorFrom(e){return new Ag(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ag=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function cc(n){return n.hasNext()?n.getNext():void 0}var An=class n{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ue(dt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wc(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Mg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Mk(){return typeof atob<"u"}var Pt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Mg("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Pt.EMPTY_BYTE_STRING=new Pt("");var sW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(n){if(Y(!!n),typeof n=="string"){let e=0,t=sW.exec(n);if(Y(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function os(n){return typeof n=="string"?Pt.fromBase64String(n):Pt.fromUint8Array(n)}function bm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function LC(n){let e=n.mapValue.fields.__previous_value__;return bm(e)?LC(e):e}function od(n){let e=ss(n.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}var Yw=class{constructor(e,t,i,r,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},as=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ts={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_g={nullValue:"NULL_VALUE"};function Mo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bm(n)?4:Pk(n)?9007199254740991:10:z()}function Oi(n,e){if(n===e)return!0;let t=Mo(n);if(t!==Mo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return od(n).isEqual(od(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=ss(r.timestampValue),a=ss(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return os(r.bytesValue).isEqual(os(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ot(r.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(r.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ot(r.integerValue)===ot(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=ot(r.doubleValue),a=ot(s.doubleValue);return o===a?rd(o)===rd(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return wc(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(CR(o)!==CR(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Oi(o[c],a[c])))return!1;return!0}(n,e);default:return z()}}function ad(n,e){return(n.values||[]).find(t=>Oi(t,e))!==void 0}function cs(n,e){if(n===e)return 0;let t=Mo(n),i=Mo(e);if(t!==i)return ue(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return ue(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ot(s.integerValue||s.doubleValue),c=ot(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return DR(n.timestampValue,e.timestampValue);case 4:return DR(od(n),od(e));case 5:return ue(n.stringValue,e.stringValue);case 6:return function(s,o){let a=os(s),c=os(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=ue(a[l],c[l]);if(u!==0)return u}return ue(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ue(ot(s.latitude),ot(o.latitude));return a!==0?a:ue(ot(s.longitude),ot(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let u=cs(a[l],c[l]);if(u)return u}return ue(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===ts.mapValue&&o===ts.mapValue)return 0;if(s===ts.mapValue)return 1;if(o===ts.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let d=0;d<c.length&&d<u.length;++d){let h=ue(c[d],u[d]);if(h!==0)return h;let f=cs(a[c[d]],l[u[d]]);if(f!==0)return f}return ue(c.length,u.length)}(n.mapValue,e.mapValue);default:throw z()}}function DR(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ue(n,e);let t=ss(n),i=ss(e),r=ue(t.seconds,i.seconds);return r!==0?r:ue(t.nanos,i.nanos)}function Cc(n){return Xw(n)}function Xw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=ss(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return os(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return F.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Xw(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Xw(t.fields[o])}`;return r+"}"}(n.mapValue):z()}function Po(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zw(n){return!!n&&"integerValue"in n}function cd(n){return!!n&&"arrayValue"in n}function IR(n){return!!n&&"nullValue"in n}function SR(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bg(n){return!!n&&"mapValue"in n}function Zu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Uo(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Zu(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Pk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function oW(n){return"nullValue"in n?_g:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Po(as.empty(),F.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:z()}function aW(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Po(as.empty(),F.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ts:z()}function TR(n,e){let t=cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function xR(n,e){let t=cs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Yt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!bg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(t)}setAll(e){let t=dt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Zu(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());bg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];bg(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Uo(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Zu(this.value))}};function Rk(n){let e=[];return Uo(n.fields,(t,i)=>{let r=new dt([t]);if(bg(i)){let s=Rk(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new An(e)}var wt=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),Yt.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,J.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),Yt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),Yt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ni=class{constructor(e,t){this.position=e,this.inclusive=t}};function AR(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=F.comparator(F.fromName(o.referenceValue),t.key):i=cs(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function MR(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}var Ro=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function cW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Pg=class{},Ce=class n extends Pg{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new tE(e,t,i):t==="array-contains"?new rE(e,i):t==="in"?new Rg(e,i):t==="not-in"?new sE(e,i):t==="array-contains-any"?new oE(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new nE(e,i):new iE(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(cs(t,this.value)):t!==null&&Mo(this.value)===Mo(t)&&this.matchesComparison(cs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ve=class n extends Pg{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new n(e,t)}matches(e){return Dc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Dc(n){return n.op==="and"}function Jw(n){return n.op==="or"}function VC(n){return kk(n)&&Dc(n)}function kk(n){for(let e of n.filters)if(e instanceof Ve)return!1;return!0}function eE(n){if(n instanceof Ce)return n.field.canonicalString()+n.op.toString()+Cc(n.value);if(VC(n))return n.filters.map(e=>eE(e)).join(",");{let e=n.filters.map(t=>eE(t)).join(",");return`${n.op}(${e})`}}function Ok(n,e){return n instanceof Ce?function(i,r){return r instanceof Ce&&i.op===r.op&&i.field.isEqual(r.field)&&Oi(i.value,r.value)}(n,e):n instanceof Ve?function(i,r){return r instanceof Ve&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Ok(o,r.filters[a]),!0):!1}(n,e):void z()}function Nk(n,e){let t=n.filters.concat(e);return Ve.create(t,n.op)}function Fk(n){return n instanceof Ce?function(t){return`${t.field.canonicalString()} ${t.op} ${Cc(t.value)}`}(n):n instanceof Ve?function(t){return t.op.toString()+" {"+t.getFilters().map(Fk).join(" ,")+"}"}(n):"Filter"}var tE=class extends Ce{constructor(e,t,i){super(e,t,i),this.key=F.fromName(i.referenceValue)}matches(e){let t=F.comparator(e.key,this.key);return this.matchesComparison(t)}},nE=class extends Ce{constructor(e,t){super(e,"in",t),this.keys=Lk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},iE=class extends Ce{constructor(e,t){super(e,"not-in",t),this.keys=Lk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Lk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>F.fromName(i.referenceValue))}var rE=class extends Ce{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return cd(t)&&ad(t.arrayValue,this.value)}},Rg=class extends Ce{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ad(this.value.arrayValue,t)}},sE=class extends Ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ad(this.value.arrayValue,t)}},oE=class extends Ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!cd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>ad(this.value.arrayValue,i))}};var aE=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function cE(n,e=null,t=[],i=[],r=null,s=null,o=null){return new aE(n,e,t,i,r,s,o)}function ko(n){let e=j(n);if(e.ce===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>eE(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Td(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Cc(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Cc(i)).join(",")),e.ce=t}return e.ce}function xd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!cW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ok(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MR(n.startAt,e.startAt)&&MR(n.endAt,e.endAt)}function kg(n){return F.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Og(n,e){return n.filters.filter(t=>t instanceof Ce&&t.field.isEqual(e))}function PR(n,e,t){let i=_g,r=!0;for(let s of Og(n,e)){let o=_g,a=!0;switch(s.op){case"<":case"<=":o=oW(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=_g}TR({value:i,inclusive:r},{value:o,inclusive:a})<0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];TR({value:i,inclusive:r},{value:o,inclusive:t.inclusive})<0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}function RR(n,e,t){let i=ts,r=!0;for(let s of Og(n,e)){let o=ts,a=!0;switch(s.op){case">=":case">":o=aW(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ts}xR({value:i,inclusive:r},{value:o,inclusive:a})>0&&(i=o,r=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];xR({value:i,inclusive:r},{value:o,inclusive:t.inclusive})>0&&(i=o,r=t.inclusive);break}}return{value:i,inclusive:r}}var ai=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function Vk(n,e,t,i,r,s,o,a){return new ai(n,e,t,i,r,s,o,a)}function Vc(n){return new ai(n)}function kR(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jC(n){return n.collectionGroup!==null}function _c(n){let e=j(n);if(e.le===null){e.le=[];let t=new Set;for(let s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ue(dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ro(s,i))}),t.has(dt.keyField().canonicalString())||e.le.push(new Ro(dt.keyField(),i))}return e.le}function sn(n){let e=j(n);return e.he||(e.he=lW(e,_c(n))),e.he}function lW(n,e){if(n.limitType==="F")return cE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Ro(r.field,s)});let t=n.endAt?new Ni(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ni(n.startAt.position,n.startAt.inclusive):null;return cE(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function lE(n,e){let t=n.filters.concat([e]);return new ai(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ng(n,e,t){return new ai(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ad(n,e){return xd(sn(n),sn(e))&&n.limitType===e.limitType}function jk(n){return`${ko(sn(n))}|lt:${n.limitType}`}function fc(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>Fk(r)).join(", ")}]`),Td(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Cc(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Cc(r)).join(",")),`Target(${i})`}(sn(n))}; limitType=${n.limitType})`}function Md(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):F.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of _c(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=AR(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,_c(i),r)||i.endAt&&!function(o,a,c){let l=AR(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,_c(i),r))}(n,e)}function Bk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Uk(n){return(e,t)=>{let i=!1;for(let r of _c(n)){let s=uW(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function uW(n,e,t){let i=n.field.isKeyField()?F.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?cs(c,l):z()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return z()}}var Fi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Uo(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return Ak(this.inner)}size(){return this.innerSize}};var dW=new Ze(F.comparator);function mn(){return dW}var $k=new Ze(F.comparator);function Yu(...n){let e=$k;for(let t of n)e=e.insert(t.key,t);return e}function zk(n){let e=$k;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Mi(){return Ju()}function Hk(){return Ju()}function Ju(){return new Fi(n=>n.toString(),(n,e)=>n.isEqual(e))}var hW=new Ze(F.comparator),fW=new Ue(F.comparator);function fe(...n){let e=fW;for(let t of n)e=e.add(t);return e}var pW=new Ue(ue);function BC(){return pW}function qk(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rd(e)?"-0":e}}function Wk(n){return{integerValue:""+n}}function Gk(n,e){return Dk(e)?Wk(e):qk(n,e)}var Ic=class{constructor(){this._=void 0}};function gW(n,e,t){return n instanceof ls?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&bm(s)&&(s=LC(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof lr?Qk(n,e):n instanceof ur?Yk(n,e):function(r,s){let o=Kk(r,s),a=OR(o)+OR(r.Ie);return Zw(o)&&Zw(r.Ie)?Wk(a):qk(r.serializer,a)}(n,e)}function mW(n,e,t){return n instanceof lr?Qk(n,e):n instanceof ur?Yk(n,e):t}function Kk(n,e){return n instanceof us?function(i){return Zw(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var ls=class extends Ic{},lr=class extends Ic{constructor(e){super(),this.elements=e}};function Qk(n,e){let t=Xk(e);for(let i of n.elements)t.some(r=>Oi(r,i))||t.push(i);return{arrayValue:{values:t}}}var ur=class extends Ic{constructor(e){super(),this.elements=e}};function Yk(n,e){let t=Xk(e);for(let i of n.elements)t=t.filter(r=>!Oi(r,i));return{arrayValue:{values:t}}}var us=class extends Ic{constructor(e,t){super(),this.serializer=e,this.Ie=t}};function OR(n){return ot(n.integerValue||n.doubleValue)}function Xk(n){return cd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Oo=class{constructor(e,t){this.field=e,this.transform=t}};function yW(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof lr&&r instanceof lr||i instanceof ur&&r instanceof ur?wc(i.elements,r.elements,Oi):i instanceof us&&r instanceof us?Oi(i.Ie,r.Ie):i instanceof ls&&r instanceof ls}(n.transform,e.transform)}var uE=class{constructor(e,t){this.version=e,this.transformResults=t}},at=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wg(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Sc=class{};function Zk(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hs(n.key,at.none()):new ds(n.key,n.data,at.none());{let t=n.data,i=Yt.empty(),r=new Ue(dt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ci(n.key,i,new An(r.toArray()),at.none())}}function vW(n,e,t){n instanceof ds?function(r,s,o){let a=r.value.clone(),c=FR(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ci?function(r,s,o){if(!wg(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=FR(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Jk(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ed(n,e,t,i){return n instanceof ds?function(s,o,a,c){if(!wg(s.precondition,o))return a;let l=s.value.clone(),u=LR(s.fieldTransforms,c,o);return l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,i):n instanceof ci?function(s,o,a,c){if(!wg(s.precondition,o))return a;let l=LR(s.fieldTransforms,c,o),u=o.data;return u.setAll(Jk(s)),u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,i):function(s,o,a){return wg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function _W(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=Kk(i.transform,r||null);s!=null&&(t===null&&(t=Yt.empty()),t.set(i.field,s))}return t||null}function NR(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&wc(i,r,(s,o)=>yW(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ds=class extends Sc{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ci=class extends Sc{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Jk(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function FR(n,e,t){let i=new Map;Y(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,mW(o,a,t[r]))}return i}function LR(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,gW(s,o,e))}return i}var hs=class extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ld=class extends Sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ud=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&vW(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=ed(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=ed(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=Hk();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=Zk(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(J.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&wc(this.mutations,e.mutations,(t,i)=>NR(t,i))&&wc(this.baseMutations,e.baseMutations,(t,i)=>NR(t,i))}},dE=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Y(e.mutations.length===i.length);let r=function(){return hW}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var dd=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var yt,De;function eO(n){switch(n){default:return z();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function tO(n){if(n===void 0)return ut("GRPC error has no .code"),T.UNKNOWN;switch(n){case yt.OK:return T.OK;case yt.CANCELLED:return T.CANCELLED;case yt.UNKNOWN:return T.UNKNOWN;case yt.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case yt.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case yt.INTERNAL:return T.INTERNAL;case yt.UNAVAILABLE:return T.UNAVAILABLE;case yt.UNAUTHENTICATED:return T.UNAUTHENTICATED;case yt.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case yt.NOT_FOUND:return T.NOT_FOUND;case yt.ALREADY_EXISTS:return T.ALREADY_EXISTS;case yt.PERMISSION_DENIED:return T.PERMISSION_DENIED;case yt.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case yt.ABORTED:return T.ABORTED;case yt.OUT_OF_RANGE:return T.OUT_OF_RANGE;case yt.UNIMPLEMENTED:return T.UNIMPLEMENTED;case yt.DATA_LOSS:return T.DATA_LOSS;default:return z()}}(De=yt||(yt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var VR=null;function nO(){return new TextEncoder}var bW=new wo([4294967295,4294967295],0);function jR(n){let e=nO().encode(n),t=new vR;return t.update(e),new Uint8Array(t.digest())}function BR(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wo([t,i],0),new wo([r,s],0)]}var fE=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new xo(`Invalid padding: ${t}`);if(i<0)throw new xo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new xo(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new xo(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=wo.fromNumber(this.Te)}de(e,t,i){let r=e.add(t.multiply(wo.fromNumber(i)));return r.compare(bW)===1&&(r=new wo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=jR(e),[i,r]=BR(t);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);if(!this.Ae(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let t=jR(e),[i,r]=BR(t);for(let s=0;s<this.hashCount;s++){let o=this.de(i,r,s);this.Re(o)}}Re(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},xo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var hd=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,fd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(J.min(),r,new Ze(ue),mn(),fe())}},fd=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,fe(),fe(),fe())}};var bc=class{constructor(e,t,i,r){this.Ve=e,this.removedTargetIds=t,this.key=i,this.me=r}},Fg=class{constructor(e,t){this.targetId=e,this.fe=t}},Lg=class{constructor(e,t,i=Pt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},Vg=class{constructor(){this.ge=0,this.pe=$R(),this.ye=Pt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=fe(),t=fe(),i=fe();return this.pe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:z()}}),new fd(this.ye,this.we,e,t,i)}Fe(){this.Se=!1,this.pe=$R()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Y(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},pE=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=mn(),this.Qe=UR(),this.Ke=new Ze(ue)}$e(e){for(let t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(let t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{let i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.Ce(e.resumeToken);break;case 1:i.Ne(),i.be||i.Fe(),i.Ce(e.resumeToken);break;case 2:i.Ne(),i.be||this.removeTarget(t);break;case 3:this.je(t)&&(i.Be(),i.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.Ce(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){let t=e.targetId,i=e.fe.count,r=this.Ye(t);if(r){let s=r.target;if(kg(s))if(i===0){let o=new F(s.path);this.We(t,o,wt.newNoDocument(o,J.min()))}else Y(i===1);else{let o=this.Ze(t);if(o!==i){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}VR?.tt(function(u,d,h,f,p){var g,m,y,v,b,E;let C={localCacheCount:u,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},D=d.unchangedNames;return D&&(C.bloomFilter={applied:p===0,hashCount:(g=D?.hashCount)!==null&&g!==void 0?g:0,bitmapLength:(v=(y=(m=D?.bits)===null||m===void 0?void 0:m.bitmap)===null||y===void 0?void 0:y.length)!==null&&v!==void 0?v:0,padding:(E=(b=D?.bits)===null||b===void 0?void 0:b.padding)!==null&&E!==void 0?E:0,mightContain:A=>{var M;return(M=f?.mightContain(A))!==null&&M!==void 0&&M}}),C}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let t=e.fe.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=os(i).toUint8Array()}catch(c){if(c instanceof Mg)return $n("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new fE(o,r,s)}catch(c){return $n(c instanceof xo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,t,i){return t.fe.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),r++)}),r}it(e){let t=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&kg(a.target)){let c=new F(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,wt.newNoDocument(c,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let i=fe();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let r=new hd(e,t,this.Ke,this.qe,i);return this.qe=mn(),this.Qe=UR(),this.Ke=new Ze(ue),r}Ue(e,t){if(!this.je(e))return;let i=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,i),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,i){if(!this.je(e))return;let r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),i&&(this.qe=this.qe.insert(t,i))}removeTarget(e){this.ke.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Vg,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Ue(ue),this.Qe=this.Qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||R("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Vg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function UR(){return new Ze(F.comparator)}function $R(){return new Ze(F.comparator)}var wW=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),EW=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),CW=(()=>({and:"AND",or:"OR"}))(),gE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function mE(n,e){return n.useProto3Json||Td(e)?e:{value:e}}function Tc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function iO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DW(n,e){return Tc(n,e.toTimestamp())}function ht(n){return Y(!!n),J.fromTimestamp(function(t){let i=ss(t);return new nt(i.seconds,i.nanos)}(n))}function UC(n,e){return function(i){return new Ae(["projects",i.projectId,"databases",i.database])}(n).child("documents").child(e).canonicalString()}function rO(n){let e=Ae.fromString(n);return Y(fO(e)),e}function pd(n,e){return UC(n.databaseId,e.path)}function Ri(n,e){let t=rO(e);if(t.get(1)!==n.databaseId.projectId)throw new P(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new F(oO(t))}function yE(n,e){return UC(n.databaseId,e)}function sO(n){let e=rO(n);return e.length===4?Ae.emptyPath():oO(e)}function gd(n){return new Ae(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oO(n){return Y(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function zR(n,e,t){return{name:pd(n,e),fields:t.value.mapValue.fields}}function aO(n,e,t){let i=Ri(n,e.name),r=ht(e.updateTime),s=e.createTime?ht(e.createTime):J.min(),o=new Yt({mapValue:{fields:e.fields}}),a=wt.newFoundDocument(i,r,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function IW(n,e){return"found"in e?function(i,r){Y(!!r.found),r.found.name,r.found.updateTime;let s=Ri(i,r.found.name),o=ht(r.found.updateTime),a=r.found.createTime?ht(r.found.createTime):J.min(),c=new Yt({mapValue:{fields:r.found.fields}});return wt.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(i,r){Y(!!r.missing),Y(!!r.readTime);let s=Ri(i,r.missing),o=ht(r.readTime);return wt.newNoDocument(s,o)}(n,e):z()}function SW(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,u){return l.useProto3Json?(Y(u===void 0||typeof u=="string"),Pt.fromBase64String(u||"")):(Y(u===void 0||u instanceof Uint8Array),Pt.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let u=l.code===void 0?T.UNKNOWN:tO(l.code);return new P(u,l.message||"")}(o);t=new Lg(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Ri(n,i.document.name),s=ht(i.document.updateTime),o=i.document.createTime?ht(i.document.createTime):J.min(),a=new Yt({mapValue:{fields:i.document.fields}}),c=wt.newFoundDocument(r,s,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];t=new bc(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Ri(n,i.document),s=i.readTime?ht(i.readTime):J.min(),o=wt.newNoDocument(r,s),a=i.removedTargetIds||[];t=new bc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Ri(n,i.document),s=i.removedTargetIds||[];t=new bc([],s,r,null)}else{if(!("filter"in e))return z();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new hE(r,s),a=i.targetId;t=new Fg(a,o)}}return t}function md(n,e){let t;if(e instanceof ds)t={update:zR(n,e.key,e.value)};else if(e instanceof hs)t={delete:pd(n,e.key)};else if(e instanceof ci)t={update:zR(n,e.key,e.data),updateMask:RW(e.fieldMask)};else{if(!(e instanceof ld))return z();t={verify:pd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof ls)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof lr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ur)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof us)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw z()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:DW(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:z()}(n,e.precondition)),t}function vE(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?at.updateTime(ht(s.updateTime)):s.exists!==void 0?at.exists(s.exists):at.none()}(e.currentDocument):at.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(o,a){let c=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),c=new ls;else if("appendMissingElements"in a){let u=a.appendMissingElements.values||[];c=new lr(u)}else if("removeAllFromArray"in a){let u=a.removeAllFromArray.values||[];c=new ur(u)}else"increment"in a?c=new us(o,a.increment):z();let l=dt.fromServerFormat(a.fieldPath);return new Oo(l,c)}(n,r)):[];if(e.update){e.update.name;let r=Ri(n,e.update.name),s=new Yt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new An(l.map(u=>dt.fromServerFormat(u)))}(e.updateMask);return new ci(r,s,o,t,i)}return new ds(r,s,t,i)}if(e.delete){let r=Ri(n,e.delete);return new hs(r,t)}if(e.verify){let r=Ri(n,e.verify);return new ld(r,t)}return z()}function TW(n,e){return n&&n.length>0?(Y(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?ht(r.updateTime):ht(s);return o.isEqual(J.min())&&(o=ht(s)),new uE(o,r.transformResults||[])}(t,e))):[]}function cO(n,e){return{documents:[yE(n,e.path)]}}function lO(n,e){let t={structuredQuery:{}},i=e.path;e.collectionGroup!==null?(t.parent=yE(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yE(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);let r=function(c){if(c.length!==0)return hO(Ve.create(c,"and"))}(e.filters);r&&(t.structuredQuery.where=r);let s=function(c){if(c.length!==0)return c.map(l=>function(d){return{field:pc(d.field),direction:AW(d.dir)}}(l))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let o=mE(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),t}function uO(n){let e=sO(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Y(i===1);let u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(d){let h=dO(d);return h instanceof Ve&&VC(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(h=>function(p){return new Ro(gc(p.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Td(h)?null:h}(t.limit));let c=null;t.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Ni(f,h)}(t.startAt));let l=null;return t.endAt&&(l=function(d){let h=!d.before,f=d.values||[];return new Ni(f,h)}(t.endAt)),Vk(e,r,o,s,a,"F",c,l)}function xW(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dO(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=gc(t.unaryFilter.field);return Ce.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=gc(t.unaryFilter.field);return Ce.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=gc(t.unaryFilter.field);return Ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=gc(t.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return Ce.create(gc(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ve.create(t.compositeFilter.filters.map(i=>dO(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function AW(n){return wW[n]}function MW(n){return EW[n]}function PW(n){return CW[n]}function pc(n){return{fieldPath:n.canonicalString()}}function gc(n){return dt.fromServerFormat(n.fieldPath)}function hO(n){return n instanceof Ce?function(t){if(t.op==="=="){if(SR(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NAN"}};if(IR(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(SR(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NOT_NAN"}};if(IR(t.value))return{unaryFilter:{field:pc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pc(t.field),op:MW(t.op),value:t.value}}}(n):n instanceof Ve?function(t){let i=t.getFilters().map(r=>hO(r));return i.length===1?i[0]:{compositeFilter:{op:PW(t.op),filters:i}}}(n):z()}function RW(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var xc=class n{constructor(e,t,i,r,s=J.min(),o=J.min(),a=Pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jg=class{constructor(e){this.ut=e}};function kW(n,e){let t;if(e.document)t=aO(n.ut,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=F.fromSegments(e.noDocument.path),r=Fo(e.noDocument.readTime);t=wt.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let i=F.fromSegments(e.unknownDocument.path),r=Fo(e.unknownDocument.version);t=wt.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(r){let s=new nt(r[0],r[1]);return J.fromTimestamp(s)}(e.readTime)),t}function HR(n,e){let t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(s,o){return{name:pd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Tc(s,o.version.toTimestamp()),createTime:Tc(s,o.createTime.toTimestamp())}}(n.ut,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:No(e.version)};else{if(!e.isUnknownDocument())return z();i.unknownDocument={path:t.path.toArray(),version:No(e.version)}}return i}function Bg(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function No(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fo(n){let e=new nt(n.seconds,n.nanoseconds);return J.fromTimestamp(e)}function Io(n,e){let t=(e.baseMutations||[]).map(s=>vE(n.ut,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let i=e.mutations.map(s=>vE(n.ut,s)),r=nt.fromMillis(e.localWriteTimeMs);return new ud(e.batchId,r,t,i)}function Xu(n){let e=Fo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Fo(n.lastLimboFreeSnapshotVersion):J.min(),i;return i=function(s){return s.documents!==void 0}(n.query)?function(s){return Y(s.documents.length===1),sn(Vc(sO(s.documents[0])))}(n.query):function(s){return sn(uO(s))}(n.query),new xc(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Pt.fromBase64String(n.resumeToken))}function pO(n,e){let t=No(e.snapshotVersion),i=No(e.lastLimboFreeSnapshotVersion),r;r=kg(e.target)?cO(n.ut,e.target):lO(n.ut,e.target);let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ko(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function $C(n){let e=uO({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ng(e,e.limit,"L"):e}function Ow(n,e){return new dd(e.largestBatchId,vE(n.ut,e.overlayMutation))}function qR(n,e){let t=e.path.lastSegment();return[n,rn(e.path.popLast()),t]}function WR(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:No(i.readTime),documentKey:rn(i.documentKey.path),largestBatchId:i.largestBatchId}}var _E=class{getBundleMetadata(e,t){return GR(e).get(t).next(i=>{if(i)return function(s){return{id:s.bundleId,createTime:Fo(s.createTime),version:s.version}}(i)})}saveBundleMetadata(e,t){return GR(e).put(function(r){return{bundleId:r.id,createTime:No(ht(r.createTime)),version:r.version}}(t))}getNamedQuery(e,t){return KR(e).get(t).next(i=>{if(i)return function(s){return{name:s.name,query:$C(s.bundledQuery),readTime:Fo(s.readTime)}}(i)})}saveNamedQuery(e,t){return KR(e).put(function(r){return{name:r.name,readTime:No(ht(r.readTime)),bundledQuery:r.bundledQuery}}(t))}};function GR(n){return Rt(n,"bundles")}function KR(n){return Rt(n,"namedQueries")}var Ug=class n{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){let i=t.uid||"";return new n(e,i)}getOverlay(e,t){return Wu(e).get(qR(this.userId,t)).next(i=>i?Ow(this.serializer,i):null)}getOverlays(e,t){let i=Mi();return S.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){let r=[];return i.forEach((s,o)=>{let a=new dd(t,o);r.push(this.lt(e,a))}),S.waitFor(r)}removeOverlaysForBatchId(e,t,i){let r=new Set;t.forEach(o=>r.add(rn(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);s.push(Wu(e).H("collectionPathOverlayIndex",a))}),S.waitFor(s)}getOverlaysForCollection(e,t,i){let r=Mi(),s=rn(t),o=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Wu(e).W("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=Ow(this.serializer,c);r.set(l.getKey(),l)}return r})}getOverlaysForCollectionGroup(e,t,i,r){let s=Mi(),o,a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wu(e).Y({index:"collectionGroupOverlayIndex",range:a},(c,l,u)=>{let d=Ow(this.serializer,l);s.size()<r||d.largestBatchId===o?(s.set(d.getKey(),d),o=d.largestBatchId):u.done()}).next(()=>s)}lt(e,t){return Wu(e).put(function(r,s,o){let[a,c,l]=qR(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:md(r.ut,o.mutation)}}(this.serializer,this.userId,t))}};function Wu(n){return Rt(n,"documentOverlays")}var ar=class{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(ot(e.integerValue));else if("doubleValue"in e){let i=ot(e.doubleValue);isNaN(i)?this.Tt(t,13):(this.Tt(t,15),rd(i)?t.Et(0):t.Et(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Tt(t,20),typeof i=="string"?t.dt(i):(t.dt(`${i.seconds||""}`),t.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(os(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.Tt(t,45),t.Et(i.latitude||0),t.Et(i.longitude||0)}else"mapValue"in e?Pk(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):z()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){let i=e.fields||{};this.Tt(t,55);for(let r of Object.keys(i))this.At(r,t),this.Pt(i[r],t)}yt(e,t){let i=e.values||[];this.Tt(t,50);for(let r of i)this.Pt(r,t)}ft(e,t){this.Tt(t,37),F.fromName(e).path.forEach(i=>{this.Tt(t,60),this.wt(i,t)})}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}};ar.St=new ar;function OW(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function QR(n){let e=64-function(i){let r=0;for(let s=0;s<8;++s){let o=OW(255&i[s]);if(r+=o,o!==8)break}return r}(n);return Math.ceil(e/8)}var bE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Dt(i.value),i=t.next();this.Ct()}vt(e){let t=e[Symbol.iterator](),i=t.next();for(;!i.done;)this.Ft(i.value),i=t.next();this.Mt()}xt(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Dt(i);else if(i<2048)this.Dt(960|i>>>6),this.Dt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Dt(480|i>>>12),this.Dt(128|63&i>>>6),this.Dt(128|63&i);else{let r=t.codePointAt(0);this.Dt(240|r>>>18),this.Dt(128|63&r>>>12),this.Dt(128|63&r>>>6),this.Dt(128|63&r)}}this.Ct()}Ot(e){for(let t of e){let i=t.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{let r=t.codePointAt(0);this.Ft(240|r>>>18),this.Ft(128|63&r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r)}}this.Mt()}Nt(e){let t=this.Bt(e),i=QR(t);this.Lt(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){let t=this.Bt(e),i=QR(t);this.Lt(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),i=(128&t[0])!=0;t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Dt(e){let t=255&e;t===0?(this.Qt(0),this.Qt(255)):t===255?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){let t=255&e;t===0?(this.$t(0),this.$t(255)):t===255?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){let t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},wE=class{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}},EE=class{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}},So=class{constructor(){this.Wt=new bE,this.Gt=new wE(this.Wt),this.zt=new EE(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return e===0?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}};var To=class n{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ht(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new n(this.indexId,this.documentKey,this.arrayValue,i)}};function Xr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=YR(n.arrayValue,e.arrayValue),t!==0?t:(t=YR(n.directionalValue,e.directionalValue),t!==0?t:F.comparator(n.documentKey,e.documentKey)))}function YR(n,e){for(let t=0;t<n.length&&t<e.length;++t){let i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}var $g=class{constructor(e){this.Jt=new Ue((t,i)=>dt.comparator(t.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(let t of e.filters){let i=t;i.isInequality()?this.Jt=this.Jt.add(i):this.Zt.push(i)}}get Xt(){return this.Jt.size>1}en(e){if(Y(e.collectionGroup===this.collectionId),this.Xt)return!1;let t=qw(e);if(t!==void 0&&!this.tn(t))return!1;let i=Co(e),r=new Set,s=0,o=0;for(;s<i.length&&this.tn(i[s]);++s)r=r.add(i[s].fieldPath.canonicalString());if(s===i.length)return!0;if(this.Jt.size>0){let a=this.Jt.getIterator().getNext();if(!r.has(a.field.canonicalString())){let c=i[s];if(!this.nn(a,c)||!this.rn(this.Yt[o++],c))return!1}++s}for(;s<i.length;++s){let a=i[s];if(o>=this.Yt.length||!this.rn(this.Yt[o++],a))return!1}return!0}sn(){if(this.Xt)return null;let e=new Ue(dt.comparator),t=[];for(let i of this.Zt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new vc(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new vc(i.field,0))}for(let i of this.Yt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new vc(i.field,i.dir==="asc"?0:1)));return new Ec(Ec.UNKNOWN_ID,this.collectionId,t,id.empty())}tn(e){for(let t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function gO(n){var e,t;if(Y(n instanceof Ce||n instanceof Ve),n instanceof Ce){if(n instanceof Rg){let r=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ce.create(n.field,"==",s)))||[];return Ve.create(r,"or")}return n}let i=n.filters.map(r=>gO(r));return Ve.create(i,n.op)}function NW(n){if(n.getFilters().length===0)return[];let e=IE(gO(n));return Y(mO(e)),CE(e)||DE(e)?[e]:e.getFilters()}function CE(n){return n instanceof Ce}function DE(n){return n instanceof Ve&&VC(n)}function mO(n){return CE(n)||DE(n)||function(t){if(t instanceof Ve&&Jw(t)){for(let i of t.getFilters())if(!CE(i)&&!DE(i))return!1;return!0}return!1}(n)}function IE(n){if(Y(n instanceof Ce||n instanceof Ve),n instanceof Ce)return n;if(n.filters.length===1)return IE(n.filters[0]);let e=n.filters.map(i=>IE(i)),t=Ve.create(e,n.op);return t=zg(t),mO(t)?t:(Y(t instanceof Ve),Y(Dc(t)),Y(t.filters.length>1),t.filters.reduce((i,r)=>zC(i,r)))}function zC(n,e){let t;return Y(n instanceof Ce||n instanceof Ve),Y(e instanceof Ce||e instanceof Ve),t=n instanceof Ce?e instanceof Ce?function(r,s){return Ve.create([r,s],"and")}(n,e):XR(n,e):e instanceof Ce?XR(e,n):function(r,s){if(Y(r.filters.length>0&&s.filters.length>0),Dc(r)&&Dc(s))return Nk(r,s.getFilters());let o=Jw(r)?r:s,a=Jw(r)?s:r,c=o.filters.map(l=>zC(l,a));return Ve.create(c,"or")}(n,e),zg(t)}function XR(n,e){if(Dc(e))return Nk(e,n.getFilters());{let t=e.filters.map(i=>zC(n,i));return Ve.create(t,"or")}}function zg(n){if(Y(n instanceof Ce||n instanceof Ve),n instanceof Ce)return n;let e=n.getFilters();if(e.length===1)return zg(e[0]);if(kk(n))return n;let t=e.map(r=>zg(r)),i=[];return t.forEach(r=>{r instanceof Ce?i.push(r):r instanceof Ve&&(r.op===n.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:Ve.create(i,n.op)}var SE=class{constructor(){this.on=new yd}addToCollectionParentIndex(e,t){return this.on.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(zn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(zn.min())}updateCollectionGroup(e,t,i){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},yd=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ue(Ae.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ue(Ae.comparator)).toArray()}};var pg=new Uint8Array(0),TE=class{constructor(e,t){this.user=e,this.databaseId=t,this._n=new yd,this.an=new Fi(i=>ko(i),(i,r)=>xd(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){let i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this._n.add(t)});let s={collectionId:i,parent:rn(r)};return ZR(e).put(s)}return S.resolve()}getCollectionParents(e,t){let i=[],r=IDBKeyRange.bound([t,""],[bk(t),""],!1,!0);return ZR(e).W(r).next(s=>{for(let o of s){if(o.collectionId!==t)break;i.push(Ai(o.parent))}return i})}addFieldIndex(e,t){let i=Gu(e),r=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete r.indexId;let s=i.add(r);if(t.indexState){let o=uc(e);return s.next(a=>{o.put(WR(a,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let i=Gu(e),r=uc(e),s=lc(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Gu(e),i=lc(e),r=uc(e);return t.H().next(()=>i.H()).next(()=>r.H())}createTargetIndexes(e,t){return S.forEach(this.un(t),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let s=new $g(i).sn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let i=lc(e),r=!0,s=new Map;return S.forEach(this.un(t),o=>this.cn(e,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=fe(),a=[];return S.forEach(s,(c,l)=>{R("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(E=>`${E.fieldPath}:${E.kind}`).join(",")}`}(c)} to execute ${ko(t)}`);let u=function(b,E){let C=qw(E);if(C===void 0)return null;for(let D of Og(b,C.fieldPath))switch(D.op){case"array-contains-any":return D.value.arrayValue.values||[];case"array-contains":return[D.value]}return null}(l,c),d=function(b,E){let C=new Map;for(let D of Co(E))for(let A of Og(b,D.fieldPath))switch(A.op){case"==":case"in":C.set(D.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return C.set(D.fieldPath.canonicalString(),A.value),Array.from(C.values())}return null}(l,c),h=function(b,E){let C=[],D=!0;for(let A of Co(E)){let M=A.kind===0?PR(b,A.fieldPath,b.startAt):RR(b,A.fieldPath,b.startAt);C.push(M.value),D&&(D=M.inclusive)}return new Ni(C,D)}(l,c),f=function(b,E){let C=[],D=!0;for(let A of Co(E)){let M=A.kind===0?RR(b,A.fieldPath,b.endAt):PR(b,A.fieldPath,b.endAt);C.push(M.value),D&&(D=M.inclusive)}return new Ni(C,D)}(l,c),p=this.ln(c,l,h),g=this.ln(c,l,f),m=this.hn(c,l,d),y=this.Pn(c.indexId,u,p,h.inclusive,g,f.inclusive,m);return S.forEach(y,v=>i.j(v,t.limit).next(b=>{b.forEach(E=>{let C=F.fromSegments(E.documentKey);o.has(C)||(o=o.add(C),a.push(C))})}))}).next(()=>a)}return S.resolve(null)})}un(e){let t=this.an.get(e);return t||(e.filters.length===0?t=[e]:t=NW(Ve.create(e.filters,"and")).map(i=>cE(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.an.set(e,t),t)}Pn(e,t,i,r,s,o,a){let c=(t!=null?t.length:1)*Math.max(i.length,s.length),l=c/(t!=null?t.length:1),u=[];for(let d=0;d<c;++d){let h=t?this.In(t[d/l]):pg,f=this.Tn(e,h,i[d%l],r),p=this.En(e,h,s[d%l],o),g=a.map(m=>this.Tn(e,h,m,!0));u.push(...this.createRange(f,p,g))}return u}Tn(e,t,i,r){let s=new To(e,F.empty(),t,i);return r?s:s.Ht()}En(e,t,i,r){let s=new To(e,F.empty(),t,i);return r?s.Ht():s}cn(e,t){let i=new $g(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(let a of s)i.en(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let i=2,r=this.un(t);return S.forEach(r,s=>this.cn(e,s).next(o=>{o?i!==0&&o.fields.length<function(c){let l=new Ue(dt.comparator),u=!1;for(let d of c.filters)for(let h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(let d of c.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(u?1:0)}(s)&&(i=1):i=0})).next(()=>function(o){return o.limit!==null}(t)&&r.length>1&&i===2?1:i)}dn(e,t){let i=new So;for(let r of Co(e)){let s=t.data.field(r.fieldPath);if(s==null)return null;let o=i.jt(r.kind);ar.St.ht(s,o)}return i.Ut()}In(e){let t=new So;return ar.St.ht(e,t.jt(0)),t.Ut()}An(e,t){let i=new So;return ar.St.ht(Po(this.databaseId,t),i.jt(function(s){let o=Co(s);return o.length===0?0:o[o.length-1].kind}(e))),i.Ut()}hn(e,t,i){if(i===null)return[];let r=[];r.push(new So);let s=0;for(let o of Co(e)){let a=i[s++];for(let c of r)if(this.Rn(t,o.fieldPath)&&cd(a))r=this.Vn(r,o,a);else{let l=c.jt(o.kind);ar.St.ht(a,l)}}return this.mn(r)}ln(e,t,i){return this.hn(e,t,i.position)}mn(e){let t=[];for(let i=0;i<e.length;++i)t[i]=e[i].Ut();return t}Vn(e,t,i){let r=[...e],s=[];for(let o of i.arrayValue.values||[])for(let a of r){let c=new So;c.seed(a.Ut()),ar.St.ht(o,c.jt(t.kind)),s.push(c)}return s}Rn(e,t){return!!e.filters.find(i=>i instanceof Ce&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,t){let i=Gu(e),r=uc(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{let o=[];return S.forEach(s,a=>r.get([a.indexId,this.uid]).next(c=>{o.push(function(u,d){let h=d?new id(d.sequenceNumber,new zn(Fo(d.readTime),new F(Ai(d.documentKey)),d.largestBatchId)):id.empty(),f=u.fields.map(([p,g])=>new vc(dt.fromServerFormat(p),g));return new Ec(u.indexId,u.collectionGroup,f,h)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((i,r)=>{let s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:ue(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){let r=Gu(e),s=uc(e);return this.fn(e).next(o=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,c=>s.put(WR(c.indexId,this.user,o,i)))))}updateIndexEntries(e,t){let i=new Map;return S.forEach(t,(r,s)=>{let o=i.get(r.collectionGroup);return(o?S.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(a=>(i.set(r.collectionGroup,a),S.forEach(a,c=>this.gn(e,r,c).next(l=>{let u=this.pn(s,c);return l.isEqual(u)?S.resolve():this.yn(e,s,c,l,u)}))))})}wn(e,t,i,r){return lc(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(i,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,i,r){return lc(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(i,t.key),t.key.path.toArray()])}gn(e,t,i){let r=lc(e),s=new Ue(Xr);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.An(i,t)])},(o,a)=>{s=s.add(new To(i.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}pn(e,t){let i=new Ue(Xr),r=this.dn(t,e);if(r==null)return i;let s=qw(t);if(s!=null){let o=e.data.field(s.fieldPath);if(cd(o))for(let a of o.arrayValue.values||[])i=i.add(new To(t.indexId,e.key,this.In(a),r))}else i=i.add(new To(t.indexId,e.key,pg,r));return i}yn(e,t,i,r,s){R("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,u,d,h){let f=c.getIterator(),p=l.getIterator(),g=cc(f),m=cc(p);for(;g||m;){let y=!1,v=!1;if(g&&m){let b=u(g,m);b<0?v=!0:b>0&&(y=!0)}else g!=null?v=!0:y=!0;y?(d(m),m=cc(p)):v?(h(g),g=cc(f)):(g=cc(f),m=cc(p))}}(r,s,Xr,a=>{o.push(this.wn(e,t,i,a))},a=>{o.push(this.Sn(e,t,i,a))}),S.waitFor(o)}fn(e){let t=1;return uc(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((o,a)=>Xr(o,a)).filter((o,a,c)=>!a||Xr(o,c[a-1])!==0);let r=[];r.push(e);for(let o of i){let a=Xr(o,e),c=Xr(o,t);if(a===0)r[0]=e.Ht();else if(a>0&&c<0)r.push(o),r.push(o.Ht());else if(c>0)break}r.push(t);let s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,pg,[]],c=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,pg,[]];s.push(IDBKeyRange.bound(a,c))}return s}bn(e,t){return Xr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(JR)}getMinOffset(e,t){return S.mapArray(this.un(t),i=>this.cn(e,i).next(r=>r||z())).next(JR)}};function ZR(n){return Rt(n,"collectionParents")}function lc(n){return Rt(n,"indexEntries")}function Gu(n){return Rt(n,"indexConfiguration")}function uc(n){return Rt(n,"indexState")}function JR(n){Y(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){let r=n[i].indexState.offset;NC(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new zn(e.readTime,e.documentKey,t)}var ek={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Un=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function yO(n,e,t){let i=n.store("mutations"),r=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=i.Y({range:o},(u,d,h)=>(a++,h.delete()));s.push(c.next(()=>{Y(a===1)}));let l=[];for(let u of t.mutations){let d=Ik(e,u.key.path,t.batchId);s.push(r.delete(d)),l.push(u.key)}return S.waitFor(s).next(()=>l)}function Hg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}Un.DEFAULT_COLLECTION_PERCENTILE=10,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Un.DEFAULT=new Un(41943040,Un.DEFAULT_COLLECTION_PERCENTILE,Un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Un.DISABLED=new Un(-1,0,0);var qg=class n{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Dn={}}static ct(e,t,i,r){Y(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,i,r)}checkEmpty(e){let t=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zr(e).Y({index:"userMutationsIndex",range:i},(r,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,i,r){let s=mc(e),o=Zr(e);return o.add({}).next(a=>{Y(typeof a=="number");let c=new ud(a,t,i,r),l=function(f,p,g){let m=g.baseMutations.map(v=>md(f.ut,v)),y=g.mutations.map(v=>md(f.ut,v));return{userId:p,batchId:g.batchId,localWriteTimeMs:g.localWriteTime.toMillis(),baseMutations:m,mutations:y}}(this.serializer,this.userId,c),u=[],d=new Ue((h,f)=>ue(h.canonicalString(),f.canonicalString()));for(let h of r){let f=Ik(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),u.push(o.put(l)),u.push(s.put(f,$9))}return d.forEach(h=>{u.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Dn[a]=c.keys()}),S.waitFor(u).next(()=>c)})}lookupMutationBatch(e,t){return Zr(e).get(t).next(i=>i?(Y(i.userId===this.userId),Io(this.serializer,i)):null)}Cn(e,t){return this.Dn[t]?S.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){let r=i.keys();return this.Dn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]),s=null;return Zr(e).Y({index:"userMutationsIndex",range:r},(o,a,c)=>{a.userId===this.userId&&(Y(a.batchId>=i),s=Io(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Zr(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(r,s,o)=>{i=s.batchId,o.done()}).next(()=>i)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Zr(e).W("userMutationsIndex",t).next(i=>i.map(r=>Io(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){let i=vg(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return mc(e).Y({range:r},(o,a,c)=>{let[l,u,d]=o,h=Ai(u);if(l===this.userId&&t.path.isEqual(h))return Zr(e).get(d).next(f=>{if(!f)throw z();Y(f.userId===this.userId),s.push(Io(this.serializer,f))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ue(ue),r=[];return t.forEach(s=>{let o=vg(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=mc(e).Y({range:a},(l,u,d)=>{let[h,f,p]=l,g=Ai(f);h===this.userId&&s.path.isEqual(g)?i=i.add(p):d.done()});r.push(c)}),S.waitFor(r).next(()=>this.vn(e,i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=vg(this.userId,i),o=IDBKeyRange.lowerBound(s),a=new Ue(ue);return mc(e).Y({range:o},(c,l,u)=>{let[d,h,f]=c,p=Ai(h);d===this.userId&&i.isPrefixOf(p)?p.length===r&&(a=a.add(f)):u.done()}).next(()=>this.vn(e,a))}vn(e,t){let i=[],r=[];return t.forEach(s=>{r.push(Zr(e).get(s).next(o=>{if(o===null)throw z();Y(o.userId===this.userId),i.push(Io(this.serializer,o))}))}),S.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return yO(e.ae,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.Fn(t.batchId)}),S.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let i=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),r=[];return mc(e).Y({range:i},(s,o,a)=>{if(s[0]===this.userId){let c=Ai(s[1]);r.push(c)}else a.done()}).next(()=>{Y(r.length===0)})})}containsKey(e,t){return vO(e,this.userId,t)}Mn(e){return _O(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function vO(n,e,t){let i=vg(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i),o=!1;return mc(n).Y({range:s,J:!0},(a,c,l)=>{let[u,d,h]=a;u===e&&d===r&&(o=!0),l.done()}).next(()=>o)}function Zr(n){return Rt(n,"mutations")}function mc(n){return Rt(n,"documentMutations")}function _O(n){return Rt(n,"mutationQueues")}var Ac=class n{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new n(0)}static Nn(){return new n(-1)}};var xE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next(t=>{let i=new Ac(t.highestTargetId);return t.highestTargetId=i.next(),this.Ln(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(t=>J.fromTimestamp(new nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r)))}addTargetData(e,t){return this.kn(e,t).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.qn(t,i),this.Ln(e,i))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>dc(e).delete(t.targetId)).next(()=>this.Bn(e)).next(i=>(Y(i.targetCount>0),i.targetCount-=1,this.Ln(e,i)))}removeTargets(e,t,i){let r=0,s=[];return dc(e).Y((o,a)=>{let c=Xu(a);c.sequenceNumber<=t&&i.get(c.targetId)===null&&(r++,s.push(this.removeTargetData(e,c)))}).next(()=>S.waitFor(s)).next(()=>r)}forEachTarget(e,t){return dc(e).Y((i,r)=>{let s=Xu(r);t(s)})}Bn(e){return tk(e).get("targetGlobalKey").next(t=>(Y(t!==null),t))}Ln(e,t){return tk(e).put("targetGlobalKey",t)}kn(e,t){return dc(e).put(pO(this.serializer,t))}qn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(t=>t.targetCount)}getTargetData(e,t){let i=ko(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),s=null;return dc(e).Y({range:r,index:"queryTargetsIndex"},(o,a,c)=>{let l=Xu(a);xd(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,i){let r=[],s=Jr(e);return t.forEach(o=>{let a=rn(o.path);r.push(s.put({targetId:i,path:a})),r.push(this.referenceDelegate.addReference(e,i,o))}),S.waitFor(r)}removeMatchingKeys(e,t,i){let r=Jr(e);return S.forEach(t,s=>{let o=rn(s.path);return S.waitFor([r.delete([i,o]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){let i=Jr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){let i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Jr(e),s=fe();return r.Y({range:i,J:!0},(o,a,c)=>{let l=Ai(o[1]),u=new F(l);s=s.add(u)}).next(()=>s)}containsKey(e,t){let i=rn(t.path),r=IDBKeyRange.bound([i],[bk(i)],!1,!0),s=0;return Jr(e).Y({index:"documentTargetsIndex",J:!0,range:r},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}_t(e,t){return dc(e).get(t).next(i=>i?Xu(i):null)}};function dc(n){return Rt(n,"targets")}function tk(n){return Rt(n,"targetGlobal")}function Jr(n){return Rt(n,"targetDocuments")}function nk([n,e],[t,i]){let r=ue(n,t);return r===0?ue(e,i):r}var AE=class{constructor(e){this.Qn=e,this.buffer=new Ue(nk),this.Kn=0}$n(){return++this.Kn}Un(e){let t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{let i=this.buffer.last();nk(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}},ME=class{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Wn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return this.Wn!==null}Gn(e){R("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>x(this,null,function*(){this.Wn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){gs(t)?R("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ps(t)}yield this.Gn(3e5)}))}},PE=class{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return S.resolve(xn._e);let i=new AE(t);return this.zn.forEachTarget(e,r=>i.Un(r.sequenceNumber)).next(()=>this.zn.Hn(e,r=>i.Un(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(R("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(ek)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(R("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ek):this.Jn(e,t))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let i,r,s,o,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(R("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),r=this.params.maximumSequenceNumbersToCollect):r=d,o=Date.now(),this.nthSequenceNumber(e,r))).next(d=>(i=d,a=Date.now(),this.removeTargets(e,i,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(l=Date.now(),hc()<=fi.DEBUG&&R("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:d})))}};function FW(n,e){return new PE(n,e)}var RE=class{constructor(e,t){this.db=e,this.garbageCollector=FW(this,t)}jn(e){let t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}Yn(e){let t=0;return this.Hn(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,(i,r)=>t(r))}addReference(e,t,i){return gg(e,i)}removeReference(e,t,i){return gg(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return gg(e,t)}Xn(e,t){return function(r,s){let o=!1;return _O(r).Z(a=>vO(r,a,s).next(c=>(c&&(o=!0),S.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],s=0;return this.Zn(e,(o,a)=>{if(a<=t){let c=this.Xn(e,o).next(l=>{if(!l)return s++,i.getEntry(e,o).next(()=>(i.removeEntry(o,J.min()),Jr(e).delete(function(d){return[0,rn(d.path)]}(o))))});r.push(c)}}).next(()=>S.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){let i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return gg(e,t)}Zn(e,t){let i=Jr(e),r,s=xn._e;return i.Y({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==xn._e&&t(new F(Ai(r)),s),s=l,r=c):s=xn._e}).next(()=>{s!==xn._e&&t(new F(Ai(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function gg(n,e){return Jr(n).put(function(i,r){return{targetId:0,path:rn(i.path),sequenceNumber:r}}(e,n.currentSequenceNumber))}var Wg=class{constructor(){this.changes=new Fi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?S.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var kE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Eo(e).put(i)}removeEntry(e,t,i){return Eo(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Bg(o),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.er(e,i)))}getEntry(e,t){let i=wt.newInvalidDocument(t);return Eo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ku(t))},(r,s)=>{i=this.tr(t,s)}).next(()=>i)}nr(e,t){let i={size:0,document:wt.newInvalidDocument(t)};return Eo(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ku(t))},(r,s)=>{i={document:this.tr(t,s),size:Hg(s)}}).next(()=>i)}getEntries(e,t){let i=mn();return this.rr(e,t,(r,s)=>{let o=this.tr(r,s);i=i.insert(r,o)}).next(()=>i)}ir(e,t){let i=mn(),r=new Ze(F.comparator);return this.rr(e,t,(s,o)=>{let a=this.tr(s,o);i=i.insert(s,a),r=r.insert(s,Hg(o))}).next(()=>({documents:i,sr:r}))}rr(e,t,i){if(t.isEmpty())return S.resolve();let r=new Ue(sk);t.forEach(c=>r=r.add(c));let s=IDBKeyRange.bound(Ku(r.first()),Ku(r.last())),o=r.getIterator(),a=o.getNext();return Eo(e).Y({index:"documentKeyIndex",range:s},(c,l,u)=>{let d=F.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&sk(a,d)<0;)i(a,null),a=o.getNext();a&&a.isEqual(d)&&(i(a,l),a=o.hasNext()?o.getNext():null),a?u.U(Ku(a)):u.done()}).next(()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,i,r,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Bg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Eo(e).W(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let u=mn();for(let d of l){let h=this.tr(F.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Md(t,h)||r.has(h.key))&&(u=u.insert(h.key,h))}return u})}getAllFromCollectionGroup(e,t,i,r){let s=mn(),o=rk(t,i),a=rk(t,zn.max());return Eo(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,u)=>{let d=this.tr(F.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(d.key,d),s.size===r&&u.done()}).next(()=>s)}newChangeBuffer(e){return new OE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ik(e).get("remoteDocumentGlobalKey").next(t=>(Y(!!t),t))}er(e,t){return ik(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){let i=kW(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(J.min())))return i}return wt.newInvalidDocument(e)}};function bO(n){return new kE(n)}var OE=class extends Wg{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Fi(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let t=[],i=0,r=new Ue((s,o)=>ue(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.ar.get(s);if(t.push(this._r.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=HR(this._r.serializer,o);r=r.add(s.path.popLast());let l=Hg(c);i+=l-a.size,t.push(this._r.addEntry(e,s,c))}else if(i-=a.size,this.trackRemovals){let c=HR(this._r.serializer,o.convertToNoDocument(J.min()));t.push(this._r.addEntry(e,s,c))}}),r.forEach(s=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,s))}),t.push(this._r.updateMetadata(e,i)),S.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next(i=>(this.ar.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this._r.ir(e,t).next(({documents:i,sr:r})=>(r.forEach((s,o)=>{this.ar.set(s,{size:o,readTime:i.get(s).readTime})}),i))}};function ik(n){return Rt(n,"remoteDocumentGlobal")}function Eo(n){return Rt(n,"remoteDocumentsV14")}function Ku(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function rk(n,e){let t=e.documentKey.path.toArray();return[n,Bg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sk(n,e){let t=n.path.toArray(),i=e.path.toArray(),r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=ue(t[s],i[s]),r)return r;return r=ue(t.length,i.length),r||(r=ue(t[t.length-2],i[i.length-2]),r||ue(t[t.length-1],i[i.length-1]))}var NE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Gg=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&ed(i.mutation,r,An.empty(),nt.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,fe()).next(()=>i))}getLocalViewOfDocuments(e,t,i=fe()){let r=Mi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Yu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=Mi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,fe()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=mn(),o=Ju(),a=function(){return Ju()}();return t.forEach((c,l)=>{let u=i.get(l.key);r.has(l.key)&&(u===void 0||u.mutation instanceof ci)?s=s.insert(l.key,l):u!==void 0?(o.set(l.key,u.mutation.getFieldMask()),ed(u.mutation,l,u.mutation.getFieldMask(),nt.now())):o.set(l.key,An.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,u)=>o.set(l,u)),t.forEach((l,u)=>{var d;return a.set(l,new NE(u,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let i=Ju(),r=new Ze((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=i.get(c)||An.empty();u=a.applyToLocalView(l,u),i.set(c,u);let d=(r.get(a.batchId)||fe()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,d=Hk();u.forEach(h=>{if(!s.has(h)){let f=Zk(t.get(h),i.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return S.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return F.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):S.resolve(Mi()),a=-1,c=s;return o.next(l=>S.forEach(l,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(u)?S.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{c=c.insert(u,h)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,fe())).next(u=>({batchId:a,changes:zk(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new F(t)).next(i=>{let r=Yu();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Yu();return this.indexManager.getCollectionParents(e,s).next(a=>S.forEach(a,c=>{let l=function(d,h){return new ai(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let u=l.getKey();o.get(u)===null&&(o=o.insert(u,wt.newInvalidDocument(u)))});let a=Yu();return o.forEach((c,l)=>{let u=s.get(c);u!==void 0&&ed(u.mutation,l,An.empty(),nt.now()),Md(t,l)&&(a=a.insert(c,l))}),a})}};var FE=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return S.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(r){return{id:r.id,version:r.version,createTime:ht(r.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(r){return{name:r.name,query:$C(r.bundledQuery),readTime:ht(r.readTime)}}(t)),S.resolve()}};var LE=class{constructor(){this.overlays=new Ze(F.comparator),this.lr=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Mi();return S.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.lt(e,t,s)}),S.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.lr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(i)),S.resolve()}getOverlaysForCollection(e,t,i){let r=Mi(),s=t.length+1,o=new F(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return S.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Ze((l,u)=>l-u),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let u=s.get(l.largestBatchId);u===null&&(u=Mi(),s=s.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=Mi(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=r)););return S.resolve(a)}lt(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.lr.get(r.largestBatchId).delete(i.key);this.lr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new dd(t,i));let s=this.lr.get(t);s===void 0&&(s=fe(),this.lr.set(t,s)),this.lr.set(t,s.add(i.key))}};var vd=class{constructor(){this.hr=new Ue(vt.Pr),this.Ir=new Ue(vt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){let i=new vt(e,t);this.hr=this.hr.add(i),this.Ir=this.Ir.add(i)}Er(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.dr(new vt(e,t))}Ar(e,t){e.forEach(i=>this.removeReference(i,t))}Rr(e){let t=new F(new Ae([])),i=new vt(t,e),r=new vt(t,e+1),s=[];return this.Ir.forEachInRange([i,r],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let t=new F(new Ae([])),i=new vt(t,e),r=new vt(t,e+1),s=fe();return this.Ir.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new vt(e,0),i=this.hr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},vt=class{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return F.comparator(e.key,t.key)||ue(e.gr,t.gr)}static Tr(e,t){return ue(e.gr,t.gr)||F.comparator(e.key,t.key)}};var VE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Ue(vt.Pr)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ud(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.yr=this.yr.add(new vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(o)}lookupMutationBatch(e,t){return S.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Sr(i),s=r<0?0:r;return S.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new vt(t,0),r=new vt(t,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([i,r],o=>{let a=this.wr(o.gr);s.push(a)}),S.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ue(ue);return t.forEach(r=>{let s=new vt(r,0),o=new vt(r,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{i=i.add(a.gr)})}),S.resolve(this.br(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;F.isDocumentKey(s)||(s=s.child(""));let o=new vt(new F(s),0),a=new Ue(ue);return this.yr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.gr)),!0)},o),S.resolve(this.br(a))}br(e){let t=[];return e.forEach(i=>{let r=this.wr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Y(this.Dr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.yr;return S.forEach(t.mutations,r=>{let s=new vt(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.yr=i})}Fn(e){}containsKey(e,t){let i=new vt(t,0),r=this.yr.firstAfterOrEqual(i);return S.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var jE=class{constructor(e){this.Cr=e,this.docs=function(){return new Ze(F.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return S.resolve(i?i.document.mutableCopy():wt.newInvalidDocument(t))}getEntries(e,t){let i=mn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():wt.newInvalidDocument(r))}),S.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=mn(),o=t.path,a=new F(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||NC(Ek(u),i)<=0||(r.has(u.key)||Md(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return S.resolve(s)}getAllFromCollectionGroup(e,t,i,r){z()}vr(e,t){return S.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new BE(this)}getSize(e){return S.resolve(this.size)}},BE=class extends Wg{constructor(e){super(),this._r=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(i)}),S.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}};var UE=class{constructor(e){this.persistence=e,this.Fr=new Fi(t=>ko(t),xd),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Mr=0,this.Or=new vd,this.targetCount=0,this.Nr=Ac.On()}forEachTarget(e,t){return this.Fr.forEach((i,r)=>t(r)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Mr&&(this.Mr=t),S.resolve()}kn(e){this.Fr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Nr=new Ac(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.kn(t),S.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),S.waitFor(s).next(()=>r)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let i=this.Fr.get(t)||null;return S.resolve(i)}addMatchingKeys(e,t,i){return this.Or.Er(t,i),S.resolve()}removeMatchingKeys(e,t,i){this.Or.Ar(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),S.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Or.mr(t);return S.resolve(i)}containsKey(e,t){return S.resolve(this.Or.containsKey(t))}};var Kg=class{constructor(e,t){this.Br={},this.overlays={},this.Lr=new xn(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new UE(this),this.indexManager=new SE,this.remoteDocumentCache=function(r){return new jE(r)}(i=>this.referenceDelegate.Qr(i)),this.serializer=new jg(t),this.Kr=new FE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Br[e.toKey()];return i||(i=new VE(t,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,i){R("MemoryPersistence","Starting transaction:",e);let r=new $E(this.Lr.next());return this.referenceDelegate.$r(),i(r).next(s=>this.referenceDelegate.Ur(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Wr(e,t){return S.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,t)))}},$E=class extends Tg{constructor(e){super(),this.currentSequenceNumber=e}},Qg=class n{constructor(e){this.persistence=e,this.Gr=new vd,this.zr=null}static jr(e){return new n(e)}get Hr(){if(this.zr)return this.zr;throw z()}addReference(e,t,i){return this.Gr.addReference(i,t),this.Hr.delete(i.toString()),S.resolve()}removeReference(e,t,i){return this.Gr.removeReference(i,t),this.Hr.add(i.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach(r=>this.Hr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Hr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}$r(){this.zr=new Set}Ur(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Hr,i=>{let r=F.fromPath(i);return this.Jr(e,r).next(s=>{s||t.removeEntry(r,J.min())})}).next(()=>(this.zr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Jr(e,t).next(i=>{i?this.Hr.delete(t.toString()):this.Hr.add(t.toString())})}Qr(e){return 0}Jr(e,t){return S.or([()=>S.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}};var zE=class{constructor(e){this.serializer=e}N(e,t,i,r){let s=new xg("createOrUpgrade",t);i<1&&r>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ER,{unique:!0}),c.createObjectStore("documentMutations")}(e),ok(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=S.resolve();return i<3&&r>=3&&(i!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),ok(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:J.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(s))),i<4&&r>=4&&(i!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").W().next(u=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ER,{unique:!0});let d=l.store("mutations"),h=u.map(f=>d.put(f));return S.waitFor(h)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(o=o.next(()=>this.Zr(s))),i<6&&r>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(s)))),i<7&&r>=7&&(o=o.next(()=>this.ei(s))),i<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),i<9&&r>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(o=o.next(()=>this.ni(s))),i<11&&r>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:eW});l.createIndex("collectionPathOverlayIndex",tW,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",nW,{unique:!1})})(e)})),i<13&&r>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:z9});l.createIndex("documentKeyIndex",H9),l.createIndex("collectionGroupIndex",q9)}(e)).next(()=>this.ri(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(o=o.next(()=>this.ii(e,s))),i<15&&r>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:Y9}).createIndex("sequenceNumberIndex",X9,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:Z9}).createIndex("documentKeyIndex",J9,{unique:!1})}(e))),o}Xr(e){let t=0;return e.store("remoteDocuments").Y((i,r)=>{t+=Hg(r)}).next(()=>{let i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Zr(e){let t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>S.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",o).next(a=>S.forEach(a,c=>{Y(c.userId===s.userId);let l=Io(this.serializer,c);return yO(e,s.userId,l).next(()=>{})}))}))}ei(e){let t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let s=[];return i.Y((o,a)=>{let c=new Ae(o),l=function(d){return[0,rn(d)]}(c);s.push(t.get(l).next(u=>u?S.resolve():(d=>t.put({targetId:0,path:rn(d),sequenceNumber:r.highestListenSequenceNumber}))(c)))}).next(()=>S.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Q9});let i=t.store("collectionParents"),r=new yd,s=o=>{if(r.add(o)){let a=o.lastSegment(),c=o.popLast();return i.put({collectionId:a,parent:rn(c)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{let c=new Ae(o);return s(c.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,c],l)=>{let u=Ai(a);return s(u.popLast())}))}ni(e){let t=e.store("targets");return t.Y((i,r)=>{let s=Xu(r),o=pO(this.serializer,s);return t.put(o)})}ri(e,t){let i=t.store("remoteDocuments"),r=[];return i.Y((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(d){return d.document?new F(Ae.fromString(d.document.name).popFirst(5)):d.noDocument?F.fromSegments(d.noDocument.path):d.unknownDocument?F.fromSegments(d.unknownDocument.path):z()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(l))}).next(()=>S.waitFor(r))}ii(e,t){let i=t.store("mutations"),r=bO(this.serializer),s=new Kg(Qg.jr,this.serializer.ut);return i.W().next(o=>{let a=new Map;return o.forEach(c=>{var l;let u=(l=a.get(c.userId))!==null&&l!==void 0?l:fe();Io(this.serializer,c).keys().forEach(d=>u=u.add(d)),a.set(c.userId,u)}),S.forEach(a,(c,l)=>{let u=new _t(l),d=Ug.ct(this.serializer,u),h=s.getIndexManager(u),f=qg.ct(u,this.serializer,h,s.referenceDelegate);return new Gg(r,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new sd(t,xn._e),c).next()})})}};function ok(n){n.createObjectStore("targetDocuments",{keyPath:G9}).createIndex("documentTargetsIndex",K9,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",W9,{unique:!0}),n.createObjectStore("targetGlobal")}var Nw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",HE=class n{constructor(e,t,i,r,s,o,a,c,l,u,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.si=s,this.window=o,this.document=a,this.oi=l,this._i=u,this.ai=d,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=h=>Promise.resolve(),!n.D())throw new P(T.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new RE(this,r),this.Ii=t+"main",this.serializer=new jg(c),this.Ti=new rs(this.Ii,this.ai,new zE(this.serializer)),this.qr=new xE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bO(this.serializer),this.Kr=new _E,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,u===!1&&ut("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(T.FAILED_PRECONDITION,Nw);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.qr.getHighestSequenceNumber(e))}).then(e=>{this.Lr=new xn(e,this.oi)}).then(()=>{this.kr=!0}).catch(e=>(this.Ti&&this.Ti.close(),Promise.reject(e)))}mi(e){return this.Pi=t=>x(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L(t=>x(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget(()=>x(this,null,function*(){this.started&&(yield this.di())})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>mg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)))})}).next(()=>this.gi(e)).next(t=>this.isPrimary&&!t?this.pi(e).next(()=>!1):!!t&&this.yi(e).next(()=>!0))).catch(e=>{if(gs(e))return R("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return R("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.si.enqueueRetryable(()=>this.Pi(e)),this.isPrimary=e})}fi(e){return Qu(e).get("owner").next(t=>S.resolve(this.wi(t)))}Si(e){return mg(e).delete(this.clientId)}bi(){return x(this,null,function*(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let i=Rt(t,"clientMetadata");return i.W().next(r=>{let s=this.Ci(r,18e5),o=r.filter(a=>s.indexOf(a)===-1);return S.forEach(o,a=>i.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Ei)for(let t of e)this.Ei.removeItem(this.vi(t.clientId))}})}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.di().then(()=>this.bi()).then(()=>this.Vi()))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?S.resolve(!0):Qu(e).get("owner").next(t=>{if(t!==null&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new P(T.FAILED_PRECONDITION,Nw);return!1}}return!(!this.networkEnabled||!this.inForeground)||mg(e).W().next(i=>this.Ci(i,5e3).find(r=>{if(this.clientId!==r.clientId){let s=!this.networkEnabled&&r.networkEnabled,o=!this.inForeground&&r.inForeground,a=this.networkEnabled===r.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&R("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return x(this,null,function*(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),yield this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new sd(e,xn._e);return this.pi(t).next(()=>this.Si(t))}),this.Ti.close(),this.Ni()})}Ci(e,t){return e.filter(i=>this.Di(i.updateTimeMs,t)&&!this.Fi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>mg(e).W().next(t=>this.Ci(t,18e5).map(i=>i.clientId)))}get started(){return this.kr}getMutationQueue(e,t){return qg.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new TE(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return Ug.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,i){R("IndexedDbPersistence","Starting transaction:",e);let r=t==="readonly"?"readonly":"readwrite",s=function(c){return c===15?rW:c===14?xk:c===13?Tk:c===12?iW:c===11?Sk:void z()}(this.ai),o;return this.Ti.runTransaction(e,r,s,a=>(o=new sd(a,this.Lr?this.Lr.next():xn._e),t==="readwrite-primary"?this.fi(o).next(c=>!!c||this.gi(o)).next(c=>{if(!c)throw ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.si.enqueueRetryable(()=>this.Pi(!1)),new P(T.FAILED_PRECONDITION,Ck);return i(o)}).next(c=>this.yi(o).next(()=>c)):this.Li(o).next(()=>i(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Li(e){return Qu(e).get("owner").next(t=>{if(t!==null&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)&&!this.wi(t)&&!(this._i||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(T.FAILED_PRECONDITION,Nw)})}yi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qu(e).put("owner",t)}static D(){return rs.D()}pi(e){let t=Qu(e);return t.get("owner").next(i=>this.wi(i)?(R("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Di(e,t){let i=Date.now();return!(e<i-t)&&(!(e>i)||(ut(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ai(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ci=()=>{this.si.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.di()))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground=this.document.visibilityState==="visible")}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ui=()=>{this.Mi();let t=/(?:Version|Mobile)\/1[456]/;KI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{let i=((t=this.Ei)===null||t===void 0?void 0:t.getItem(this.vi(e)))!==null;return R("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return ut("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ut("Failed to set zombie client id.",e)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch{}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Qu(n){return Rt(n,"owner")}function mg(n){return Rt(n,"clientMetadata")}function HC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var qE=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.ki=i,this.qi=r}static Qi(e,t){let i=fe(),r=fe();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var WE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Yg=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.zi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new WE;return this.Hi(e,t,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,t,o,a.size)})}).next(()=>s.result)}Ji(e,t,i,r){return i.documentReadCount<this.Ui?(hc()<=fi.DEBUG&&R("QueryEngine","SDK will not create cache indexes for query:",fc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),S.resolve()):(hc()<=fi.DEBUG&&R("QueryEngine","Query:",fc(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Wi*r?(hc()<=fi.DEBUG&&R("QueryEngine","The SDK decides to create cache indexes for query:",fc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sn(t))):S.resolve())}zi(e,t){if(kR(t))return S.resolve(null);let i=sn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Ng(t,null,"F"),i=sn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=fe(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.Yi(t,a);return this.Zi(t,l,o,c.readTime)?this.zi(e,Ng(t,null,"F")):this.Xi(e,l,t,c)}))})))}ji(e,t,i,r){return kR(t)||r.isEqual(J.min())?S.resolve(null):this.Gi.getDocuments(e,i).next(s=>{let o=this.Yi(t,s);return this.Zi(t,o,i,r)?S.resolve(null):(hc()<=fi.DEBUG&&R("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),fc(t)),this.Xi(e,o,t,wk(r,-1)).next(a=>a))})}Yi(e,t){let i=new Ue(Uk(e));return t.forEach((r,s)=>{Md(e,s)&&(i=i.add(s))}),i}Zi(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Hi(e,t,i){return hc()<=fi.DEBUG&&R("QueryEngine","Using full collection scan to execute query:",fc(t)),this.Gi.getDocumentsMatchingQuery(e,t,zn.min(),i)}Xi(e,t,i,r){return this.Gi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var GE=class{constructor(e,t,i,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Ze(ue),this.ns=new Fi(s=>ko(s),xd),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(i)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Gg(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ts))}};function wO(n,e,t,i){return new GE(n,e,t,i)}function EO(n,e){return x(this,null,function*(){let t=j(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.os(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=fe();for(let l of r){o.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of s){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(i,c).next(l=>({_s:l,removedBatchIds:o,addedBatchIds:a}))})})})}function LW(n,e){let t=j(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let d=l.batch,h=d.keys(),f=S.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(c,p)).next(g=>{let m=l.docVersions.get(p);Y(m!==null),g.version.compareTo(m)<0&&(d.applyToRemoteDocument(g,l),g.isValidDocument()&&(g.setReadTime(l.commitVersion),u.addEntry(g)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function CO(n){let e=j(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.qr.getLastRemoteSnapshotVersion(t))}function VW(n,e){let t=j(n),i=e.snapshotVersion,r=t.ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.ss.newChangeBuffer({trackRemovals:!0});r=t.ts;let a=[];e.targetChanges.forEach((u,d)=>{let h=r.get(d);if(!h)return;a.push(t.qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>t.qr.addMatchingKeys(s,u.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Pt.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):u.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(u.resumeToken,i)),r=r.insert(d,f),function(g,m,y){return g.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,f,u)&&a.push(t.qr.updateTargetData(s,f))});let c=mn(),l=fe();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(DO(s,o,e.documentUpdates).next(u=>{c=u.us,l=u.cs})),!i.isEqual(J.min())){let u=t.qr.getLastRemoteSnapshotVersion(s).next(d=>t.qr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return S.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.ts=r,s))}function DO(n,e,t){let i=fe(),r=fe();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=mn();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(J.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):R("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{us:o,cs:r}})}function jW(n,e){let t=j(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Mc(n,e){let t=j(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.qr.getTargetData(i,e).next(s=>s?(r=s,S.resolve(r)):t.qr.allocateTargetId(i).next(o=>(r=new xc(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ts=t.ts.insert(i.targetId,i),t.ns.set(e,i.targetId)),i})}function Pc(n,e,t){return x(this,null,function*(){let i=j(n),r=i.ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!gs(o))throw o;R("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ts=i.ts.remove(e),i.ns.delete(r.target)})}function Xg(n,e,t){let i=j(n),r=J.min(),s=fe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,u){let d=j(c),h=d.ns.get(u);return h!==void 0?S.resolve(d.ts.get(h)):d.qr.getTargetData(l,u)}(i,o,sn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.es.getDocumentsMatchingQuery(o,e,t?r:J.min(),t?s:fe())).next(a=>(TO(i,Bk(e),a),{documents:a,ls:s})))}function IO(n,e){let t=j(n),i=j(t.qr),r=t.ts.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i._t(s,e).next(o=>o?o.target:null))}function SO(n,e){let t=j(n),i=t.rs.get(e)||J.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.ss.getAllFromCollectionGroup(r,e,wk(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(TO(t,e,r),r))}function TO(n,e,t){let i=n.rs.get(e)||J.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.rs.set(e,i)}function BW(n,e,t,i){return x(this,null,function*(){let r=j(n),s=fe(),o=mn();for(let l of t){let u=e.hs(l.metadata.name);l.document&&(s=s.add(u));let d=e.Ps(l);d.setReadTime(e.Is(l.metadata.readTime)),o=o.insert(u,d)}let a=r.ss.newChangeBuffer({trackRemovals:!0}),c=yield Mc(r,function(u){return sn(Vc(Ae.fromString(`__bundle__/docs/${u}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",l=>DO(l,a,o).next(u=>(a.apply(l),u)).next(u=>r.qr.removeMatchingKeysForTargetId(l,c.targetId).next(()=>r.qr.addMatchingKeys(l,s,c.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(l,u.us,u.cs)).next(()=>u.us)))})}function UW(i,r){return x(this,arguments,function*(n,e,t=fe()){let s=yield Mc(n,sn($C(e.bundledQuery))),o=j(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=ht(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Kr.saveNamedQuery(a,e);let l=s.withResumeToken(Pt.EMPTY_BYTE_STRING,c);return o.ts=o.ts.insert(l.targetId,l),o.qr.updateTargetData(a,l).next(()=>o.qr.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.qr.addMatchingKeys(a,t,s.targetId)).next(()=>o.Kr.saveNamedQuery(a,e))})})}function ak(n,e){return`firestore_clients_${n}_${e}`}function ck(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Fw(n,e){return`firestore_targets_${n}_${e}`}var Zg=class n{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Ts(e,t,i){let r=JSON.parse(i),s,o=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(s=new P(r.error.code,r.error.message))),o?new n(e,t,r.state,s):(ut("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},td=class n{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ts(e,t){let i=JSON.parse(t),r,s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(r=new P(i.error.code,i.error.message))),s?new n(e,i.state,r):(ut("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Es(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Jg=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){let i=JSON.parse(t),r=typeof i=="object"&&i.activeTargetIds instanceof Array,s=BC();for(let o=0;r&&o<i.activeTargetIds.length;++o)r=Dk(i.activeTargetIds[o]),s=s.add(i.activeTargetIds[o]);return r?new n(e,s):(ut("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},KE=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ut("SharedClientState",`Failed to parse online state: ${e}`),null)}},_d=class{constructor(){this.activeTargetIds=BC()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},nd=class{constructor(e,t,i,r,s){this.window=e,this.si=t,this.persistenceKey=i,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new Ze(ue),this.started=!1,this.ps=[];let o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ys=ak(this.persistenceKey,this.Rs),this.ws=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new _d),this.Ss=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.bs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ds=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Cs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.vs=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}start(){return x(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Rs)continue;let r=this.getItem(ak(this.persistenceKey,i));if(r){let s=Jg.Ts(i,r);s&&(this.gs=this.gs.insert(s.clientId,s))}}this.Fs();let t=this.storage.getItem(this.Cs);if(t){let i=this.Ms(t);i&&this.xs(i)}for(let i of this.ps)this.fs(i);this.ps=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,i){this.Ns(e,t,i),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Fw(this.persistenceKey,e));if(i){let r=td.Ts(e,i);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fw(this.persistenceKey,e))}updateQueryState(e,t,i){this.ks(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return R("SharedClientState","READ",e,t),t}setItem(e,t){R("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){R("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){let t=e;if(t.storageArea===this.storage){if(R("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable(()=>x(this,null,function*(){if(this.started){if(t.key!==null){if(this.Ss.test(t.key)){if(t.newValue==null){let i=this.Ks(t.key);return this.$s(i,null)}{let i=this.Us(t.key,t.newValue);if(i)return this.$s(i.clientId,i)}}else if(this.bs.test(t.key)){if(t.newValue!==null){let i=this.Ws(t.key,t.newValue);if(i)return this.Gs(i)}}else if(this.Ds.test(t.key)){if(t.newValue!==null){let i=this.zs(t.key,t.newValue);if(i)return this.js(i)}}else if(t.key===this.Cs){if(t.newValue!==null){let i=this.Ms(t.newValue);if(i)return this.xs(i)}}else if(t.key===this.ws){let i=function(s){let o=xn._e;if(s!=null)try{let a=JSON.parse(s);Y(typeof a=="number"),o=a}catch(a){ut("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);i!==xn._e&&this.sequenceNumberHandler(i)}else if(t.key===this.vs){let i=this.Hs(t.newValue);yield Promise.all(i.map(r=>this.syncEngine.Js(r)))}}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,i){let r=new Zg(this.currentUser,e,t,i),s=ck(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Es())}Bs(e){let t=ck(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){let t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,i){let r=Fw(this.persistenceKey,e),s=new td(e,t,i);this.setItem(r,s.Es())}Qs(e){let t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){let t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){let i=this.Ks(e);return Jg.Ts(i,t)}Ws(e,t){let i=this.bs.exec(e),r=Number(i[1]),s=i[2]!==void 0?i[2]:null;return Zg.Ts(new _t(s),r,t)}zs(e,t){let i=this.Ds.exec(e),r=Number(i[1]);return td.Ts(r,t)}Ms(e){return KE.Ts(e)}Hs(e){return JSON.parse(e)}Gs(e){return x(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);R("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){let i=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),s=this.Os(i),o=[],a=[];return s.forEach(c=>{r.has(c)||o.push(c)}),r.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.Xs(o,a).then(()=>{this.gs=i})}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=BC();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}},em=class{constructor(){this.eo=new _d,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,i){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new _d,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var QE=class{ro(e){}shutdown(){}};var tm=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){R("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){R("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var yg=null;function Lw(){return yg===null?yg=function(){return 268435456+Math.round(2147483648*Math.random())}():yg++,"0x"+yg.toString(16)}var $W={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var YE=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}};var Qt="WebChannelConnection",XE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.mo=i+"://"+t.host,this.fo=`projects/${r}/databases/${s}`,this.po=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get yo(){return!1}wo(t,i,r,s,o){let a=Lw(),c=this.So(t,i);R("RestConnection",`Sending RPC '${t}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(l,s,o),this.Do(t,c,l,r).then(u=>(R("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw $n("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",c,"request:",r),u})}Co(t,i,r,s,o,a){return this.wo(t,i,r,s,o)}bo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}So(t,i){let r=$W[t];return`${this.mo}/v1/${i}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,i,r){let s=Lw();return new Promise((o,a)=>{let c=new yR;c.setWithCredentials(!0),c.listenOnce(gR.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fg.NO_ERROR:let u=c.getResponseJson();R(Qt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case fg.TIMEOUT:R(Qt,`RPC '${e}' ${s} timed out`),a(new P(T.DEADLINE_EXCEEDED,"Request time out"));break;case fg.HTTP_ERROR:let d=c.getStatus();if(R(Qt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let p=function(m){let y=m.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(y)>=0?y:T.UNKNOWN}(f.status);a(new P(p,f.message))}else a(new P(T.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new P(T.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{R(Qt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);R(Qt,`RPC '${e}' ${s} sending request:`,r),c.send(t,"POST",l,i,15)})}vo(e,t,i){let r=Lw(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fR(),a=pR(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.bo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let u=s.join("");R(Qt,`Creating RPC '${e}' stream ${r}: ${u}`,c);let d=o.createWebChannel(u,c),h=!1,f=!1,p=new YE({co:m=>{f?R(Qt,`Not sending because RPC '${e}' stream ${r} is closed:`,m):(h||(R(Qt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),h=!0),R(Qt,`RPC '${e}' stream ${r} sending:`,m),d.send(m))},lo:()=>d.close()}),g=(m,y,v)=>{m.listen(y,b=>{try{v(b)}catch(E){setTimeout(()=>{throw E},0)}})};return g(d,qu.EventType.OPEN,()=>{f||R(Qt,`RPC '${e}' stream ${r} transport opened.`)}),g(d,qu.EventType.CLOSE,()=>{f||(f=!0,R(Qt,`RPC '${e}' stream ${r} transport closed`),p.Ro())}),g(d,qu.EventType.ERROR,m=>{f||(f=!0,$n(Qt,`RPC '${e}' stream ${r} transport errored:`,m),p.Ro(new P(T.UNAVAILABLE,"The operation could not be completed")))}),g(d,qu.EventType.MESSAGE,m=>{var y;if(!f){let v=m.data[0];Y(!!v);let b=v,E=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(E){R(Qt,`RPC '${e}' stream ${r} received error:`,E);let C=E.status,D=function(B){let ee=yt[B];if(ee!==void 0)return tO(ee)}(C),A=E.message;D===void 0&&(D=T.INTERNAL,A="Unknown error status: "+C+" with message "+E.message),f=!0,p.Ro(new P(D,A)),d.close()}else R(Qt,`RPC '${e}' stream ${r} received:`,v),p.Vo(v)}}),g(a,mR.STAT_EVENT,m=>{m.stat===kw.PROXY?R(Qt,`RPC '${e}' stream ${r} detected buffering proxy`):m.stat===kw.NOPROXY&&R(Qt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.Ao()},0),p}};function xO(){return typeof window<"u"?window:null}function Eg(){return typeof document<"u"?document:null}function Pd(n){return new gE(n,!0)}var bd=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=t,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let t=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-i);r>0&&R("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var nm=class{constructor(e,t,i,r,s,o,a,c){this.si=e,this.Ko=i,this.$o=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new bd(e,t)}jo(){return this.state===1||this.state===5||this.Ho()}Ho(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Jo()}stop(){return x(this,null,function*(){this.jo()&&(yield this.close(0))})}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&this.Wo===null&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,()=>this.Xo()))}e_(e){this.t_(),this.stream.send(e)}Xo(){return x(this,null,function*(){if(this.Ho())return this.close(0)})}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}close(e,t){return x(this,null,function*(){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,e!==4?this.zo.reset():t&&t.code===T.RESOURCE_EXHAUSTED?(ut(t.toString()),ut("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Io(t)})}r_(){}auth(){this.state=1;let e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Uo===t&&this.s_(i,r)},i=>{e(()=>{let r=new P(T.UNKNOWN,"Fetching auth token failed: "+i.message);return this.o_(r)})})}s_(e,t){let i=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho(()=>{i(()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,()=>(this.Ho()&&(this.state=3),Promise.resolve())),this.listener.ho()))}),this.stream.Io(r=>{i(()=>this.o_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Jo(){this.state=5,this.zo.ko(()=>x(this,null,function*(){this.state=0,this.start()}))}o_(e){return R("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget(()=>this.Uo===e?t():(R("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ZE=class extends nm{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();let t=SW(this.serializer,e),i=function(s){if(!("targetChange"in s))return J.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?ht(o.readTime):J.min()}(e);return this.listener.a_(t,i)}u_(e){let t={};t.database=gd(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=kg(c)?{documents:cO(s,c)}:{query:lO(s,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=iO(s,o.resumeToken);let l=mE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(J.min())>0){a.readTime=Tc(s,o.snapshotVersion.toTimestamp());let l=mE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=xW(this.serializer,e);i&&(t.labels=i),this.e_(t)}c_(e){let t={};t.database=gd(this.serializer),t.removeTarget=e,this.e_(t)}},JE=class extends nm{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();let t=TW(e.writeResults,e.commitTime),i=ht(e.commitTime);return this.listener.I_(i,t)}return Y(!e.writeResults||e.writeResults.length===0),this.l_=!0,this.listener.T_()}E_(){let e={};e.database=gd(this.serializer),this.e_(e)}P_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>md(this.serializer,i))};this.e_(t)}};var eC=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new P(T.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,i){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.wo(e,t,i,r,s)).catch(r=>{throw r.name==="FirebaseError"?(r.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new P(T.UNKNOWN,r.toString())})}Co(e,t,i,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,t,i,s,o,r)).catch(s=>{throw s.name==="FirebaseError"?(s.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(T.UNKNOWN,s.toString())})}terminate(){this.d_=!0}};var tC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){this.V_===0&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve())))}w_(e){this.state==="Online"?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.p_("Offline")))}set(e){this.S_(),this.V_=0,e==="Online"&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.f_?(ut(t),this.f_=!1):R("OnlineStateTracker",t)}S_(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}};var nC=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=s,this.F_.ro(o=>{i.enqueueAndForget(()=>x(this,null,function*(){ms(this)&&(R("RemoteStore","Restarting streams for network reachability change."),yield function(c){return x(this,null,function*(){let l=j(c);l.C_.add(4),yield jc(l),l.M_.set("Unknown"),l.C_.delete(4),yield Rd(l)})}(this))}))}),this.M_=new tC(i,r)}};function Rd(n){return x(this,null,function*(){if(ms(n))for(let e of n.v_)yield e(!0)})}function jc(n){return x(this,null,function*(){for(let e of n.v_)yield e(!1)})}function wm(n,e){let t=j(n);t.D_.has(e.targetId)||(t.D_.set(e.targetId,e),GC(t)?WC(t):Uc(t).Ho()&&qC(t,e))}function wd(n,e){let t=j(n),i=Uc(t);t.D_.delete(e),i.Ho()&&AO(t,e),t.D_.size===0&&(i.Ho()?i.Zo():ms(t)&&t.M_.set("Unknown"))}function qC(n,e){if(n.x_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uc(n).u_(e)}function AO(n,e){n.x_.Oe(e),Uc(n).c_(e)}function WC(n){n.x_=new pE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.D_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Uc(n).start(),n.M_.g_()}function GC(n){return ms(n)&&!Uc(n).jo()&&n.D_.size>0}function ms(n){return j(n).C_.size===0}function MO(n){n.x_=void 0}function zW(n){return x(this,null,function*(){n.D_.forEach((e,t)=>{qC(n,e)})})}function HW(n,e){return x(this,null,function*(){MO(n),GC(n)?(n.M_.w_(e),WC(n)):n.M_.set("Unknown")})}function qW(n,e,t){return x(this,null,function*(){if(n.M_.set("Online"),e instanceof Lg&&e.state===2&&e.cause)try{yield function(r,s){return x(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.D_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.D_.delete(a),r.x_.removeTarget(a))})}(n,e)}catch(i){R("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield im(n,i)}else if(e instanceof bc?n.x_.$e(e):e instanceof Fg?n.x_.Je(e):n.x_.Ge(e),!t.isEqual(J.min()))try{let i=yield CO(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let a=s.x_.it(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=s.D_.get(l);u&&s.D_.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let u=s.D_.get(c);if(!u)return;s.D_.set(c,u.withResumeToken(Pt.EMPTY_BYTE_STRING,u.snapshotVersion)),AO(s,c);let d=new xc(u.target,c,l,u.sequenceNumber);qC(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){R("RemoteStore","Failed to raise snapshot:",i),yield im(n,i)}})}function im(n,e,t){return x(this,null,function*(){if(!gs(e))throw e;n.C_.add(1),yield jc(n),n.M_.set("Offline"),t||(t=()=>CO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){R("RemoteStore","Retrying IndexedDB access"),yield t(),n.C_.delete(1),yield Rd(n)}))})}function PO(n,e){return e().catch(t=>im(n,t,e))}function Bc(n){return x(this,null,function*(){let e=j(n),t=fs(e),i=e.b_.length>0?e.b_[e.b_.length-1].batchId:-1;for(;WW(e);)try{let r=yield jW(e.localStore,i);if(r===null){e.b_.length===0&&t.Zo();break}i=r.batchId,GW(e,r)}catch(r){yield im(e,r)}RO(e)&&kO(e)})}function WW(n){return ms(n)&&n.b_.length<10}function GW(n,e){n.b_.push(e);let t=fs(n);t.Ho()&&t.h_&&t.P_(e.mutations)}function RO(n){return ms(n)&&!fs(n).jo()&&n.b_.length>0}function kO(n){fs(n).start()}function KW(n){return x(this,null,function*(){fs(n).E_()})}function QW(n){return x(this,null,function*(){let e=fs(n);for(let t of n.b_)e.P_(t.mutations)})}function YW(n,e,t){return x(this,null,function*(){let i=n.b_.shift(),r=dE.from(i,e,t);yield PO(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Bc(n)})}function XW(n,e){return x(this,null,function*(){e&&fs(n).h_&&(yield function(i,r){return x(this,null,function*(){if(function(o){return eO(o)&&o!==T.ABORTED}(r.code)){let s=i.b_.shift();fs(i).Yo(),yield PO(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Bc(i)}})}(n,e)),RO(n)&&kO(n)})}function lk(n,e){return x(this,null,function*(){let t=j(n);t.asyncQueue.verifyOperationInProgress(),R("RemoteStore","RemoteStore received new credentials");let i=ms(t);t.C_.add(3),yield jc(t),i&&t.M_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.C_.delete(3),yield Rd(t)})}function iC(n,e){return x(this,null,function*(){let t=j(n);e?(t.C_.delete(2),yield Rd(t)):e||(t.C_.add(2),yield jc(t),t.M_.set("Unknown"))})}function Uc(n){return n.O_||(n.O_=function(t,i,r){let s=j(t);return s.A_(),new ZE(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:zW.bind(null,n),Io:HW.bind(null,n),a_:qW.bind(null,n)}),n.v_.push(e=>x(this,null,function*(){e?(n.O_.Yo(),GC(n)?WC(n):n.M_.set("Unknown")):(yield n.O_.stop(),MO(n))}))),n.O_}function fs(n){return n.N_||(n.N_=function(t,i,r){let s=j(t);return s.A_(),new JE(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{ho:KW.bind(null,n),Io:XW.bind(null,n),T_:QW.bind(null,n),I_:YW.bind(null,n)}),n.v_.push(e=>x(this,null,function*(){e?(n.N_.Yo(),yield Bc(n)):(yield n.N_.stop(),n.b_.length>0&&(R("RemoteStore",`Stopping write stream with ${n.b_.length} pending writes`),n.b_=[]))}))),n.N_}var rC=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new bt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function $c(n,e){if(ut("AsyncQueue",`${e}: ${n}`),gs(n))return new P(T.UNAVAILABLE,`${e}: ${n}`);throw n}var rm=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||F.comparator(t.key,i.key):(t,i)=>F.comparator(t.key,i.key),this.keyedMap=Yu(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var sm=class{constructor(){this.B_=new Ze(F.comparator)}track(e){let t=e.doc.key,i=this.B_.get(t);i?e.type!==0&&i.type===3?this.B_=this.B_.insert(t,e):e.type===3&&i.type!==1?this.B_=this.B_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.B_=this.B_.remove(t):e.type===1&&i.type===2?this.B_=this.B_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):z():this.B_=this.B_.insert(t,e)}L_(){let e=[];return this.B_.inorderTraversal((t,i)=>{e.push(i)}),e}},Rc=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,rm.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var sC=class{constructor(){this.k_=void 0,this.listeners=[]}},oC=class{constructor(){this.queries=new Fi(e=>jk(e),Ad),this.onlineState="Unknown",this.q_=new Set}};function KC(n,e){return x(this,null,function*(){let t=j(n),i=e.query,r=!1,s=t.queries.get(i);if(s||(r=!0,s=new sC),r)try{s.k_=yield t.onListen(i)}catch(o){let a=$c(o,`Initialization of query '${fc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.listeners.push(e),e.Q_(t.onlineState),s.k_&&e.K_(s.k_)&&YC(t)})}function QC(n,e){return x(this,null,function*(){let t=j(n),i=e.query,r=!1,s=t.queries.get(i);if(s){let o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),r=s.listeners.length===0)}if(r)return t.queries.delete(i),t.onUnlisten(i)})}function ZW(n,e){let t=j(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.listeners)a.K_(r)&&(i=!0);o.k_=r}}i&&YC(t)}function JW(n,e,t){let i=j(n),r=i.queries.get(e);if(r)for(let s of r.listeners)s.onError(t);i.queries.delete(e)}function YC(n){n.q_.forEach(e=>{e.next()})}var Ed=class{constructor(e,t,i){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=i||{}}K_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Rc(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;let i=t!=="Offline";return(!this.options.J_||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}z_(e){if(e.docChanges.length>0)return!0;let t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}H_(e){e=Rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}};var aC=class{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}};var om=class{constructor(e){this.serializer=e}hs(e){return Ri(this.serializer,e)}Ps(e){return e.metadata.exists?aO(this.serializer,e.document,!1):wt.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return ht(e)}},cC=class{constructor(e,t,i){this.X_=e,this.localStore=t,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=OO(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;let i=Ae.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){let t=new Map,i=new om(this.serializer);for(let r of e)if(r.metadata.queries){let s=i.hs(r.metadata.name);for(let o of r.metadata.queries){let a=(t.get(o)||fe()).add(s);t.set(o,a)}}return t}complete(){return x(this,null,function*(){let e=yield BW(this.localStore,new om(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(let i of this.queries)yield UW(this.localStore,i,t.get(i.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}})}};function OO(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var am=class{constructor(e){this.key=e}},cm=class{constructor(e){this.key=e}},lm=class{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=fe(),this.mutatedKeys=fe(),this._a=Uk(e),this.aa=new rm(this._a)}get ua(){return this.ia}ca(e,t){let i=t?t.la:new sm,r=t?t.aa:this.aa,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,d)=>{let h=r.get(u),f=Md(this.query,d)?d:null,p=!!h&&this.mutatedKeys.has(h.key),g=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?p!==g&&(i.track({type:3,doc:f}),m=!0):this.ha(h,f)||(i.track({type:2,doc:f}),m=!0,(c&&this._a(f,c)>0||l&&this._a(f,l)<0)&&(a=!0)):!h&&f?(i.track({type:0,doc:f}),m=!0):h&&!f&&(i.track({type:1,doc:h}),m=!0,(c||l)&&(a=!0)),m&&(f?(o=o.add(f),s=g?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{aa:o,la:i,Zi:a,mutatedKeys:s}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;let o=e.la.L_();o.sort((u,d)=>function(f,p){let g=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return g(f)-g(p)}(u.type,d.type)||this._a(u.doc,d.doc)),this.Pa(i),r=r!=null&&r;let a=t&&!r?this.Ia():[],c=this.oa.size===0&&this.current&&!r?1:0,l=c!==this.sa;return this.sa=c,o.length!==0||l?{snapshot:new Rc(this.query,e.aa,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ta:a}:{Ta:a}}Q_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({aa:this.aa,la:new sm,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach(t=>this.ia=this.ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.ia=this.ia.delete(t)),this.current=e.current)}Ia(){if(!this.current)return[];let e=this.oa;this.oa=fe(),this.aa.forEach(i=>{this.Ea(i.key)&&(this.oa=this.oa.add(i.key))});let t=[];return e.forEach(i=>{this.oa.has(i)||t.push(new cm(i))}),this.oa.forEach(i=>{e.has(i)||t.push(new am(i))}),t}da(e){this.ia=e.ls,this.oa=fe();let t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return Rc.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,this.sa===0,this.hasCachedResults)}},lC=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},uC=class{constructor(e){this.key=e,this.Ra=!1}},dC=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new Fi(a=>jk(a),Ad),this.fa=new Map,this.ga=new Set,this.pa=new Ze(F.comparator),this.ya=new Map,this.wa=new vd,this.Sa={},this.ba=new Map,this.Da=Ac.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return this.Ca===!0}};function e6(n,e){return x(this,null,function*(){let t=tD(n),i,r,s=t.ma.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.Aa();else{let o=yield Mc(t.localStore,sn(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);i=o.targetId,r=yield XC(t,e,i,a==="current",o.resumeToken),t.isPrimaryClient&&wm(t.remoteStore,o)}return r})}function XC(n,e,t,i,r){return x(this,null,function*(){n.va=(d,h,f)=>function(g,m,y,v){return x(this,null,function*(){let b=m.view.ca(y);b.Zi&&(b=yield Xg(g.localStore,m.query,!1).then(({documents:A})=>m.view.ca(A,b)));let E=v&&v.targetChanges.get(m.targetId),C=v&&v.targetMismatches.get(m.targetId)!=null,D=m.view.applyChanges(b,g.isPrimaryClient,E,C);return hC(g,m.targetId,D.Ta),D.snapshot})}(n,d,h,f);let s=yield Xg(n.localStore,e,!0),o=new lm(e,s.ls),a=o.ca(s.documents),c=fd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);hC(n,t,l.Ta);let u=new lC(e,t,o);return n.ma.set(e,u),n.fa.has(t)?n.fa.get(t).push(e):n.fa.set(t,[e]),l.snapshot})}function t6(n,e){return x(this,null,function*(){let t=j(n),i=t.ma.get(e),r=t.fa.get(i.targetId);if(r.length>1)return t.fa.set(i.targetId,r.filter(s=>!Ad(s,e))),void t.ma.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Pc(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),wd(t.remoteStore,i.targetId),kc(t,i.targetId)}).catch(ps))):(kc(t,i.targetId),yield Pc(t.localStore,i.targetId,!0))})}function n6(n,e,t){return x(this,null,function*(){let i=nD(n);try{let r=yield function(o,a){let c=j(o),l=nt.now(),u=a.reduce((f,p)=>f.add(p.key),fe()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=mn(),g=fe();return c.ss.getEntries(f,u).next(m=>{p=m,p.forEach((y,v)=>{v.isValidDocument()||(g=g.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,p)).next(m=>{d=m;let y=[];for(let v of a){let b=_W(v,d.get(v.key).overlayedDocument);b!=null&&y.push(new ci(v.key,b,Rk(b.value.mapValue),at.exists(!0)))}return c.mutationQueue.addMutationBatch(f,l,y,a)}).next(m=>{h=m;let y=m.applyToLocalDocumentSet(d,g);return c.documentOverlayCache.saveOverlays(f,m.batchId,y)})}).then(()=>({batchId:h.batchId,changes:zk(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.Sa[o.currentUser.toKey()];l||(l=new Ze(ue)),l=l.insert(a,c),o.Sa[o.currentUser.toKey()]=l}(i,r.batchId,t),yield fr(i,r.changes),yield Bc(i.remoteStore)}catch(r){let s=$c(r,"Failed to persist write");t.reject(s)}})}function NO(n,e){return x(this,null,function*(){let t=j(n);try{let i=yield VW(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.ya.get(s);o&&(Y(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ra=!0:r.modifiedDocuments.size>0?Y(o.Ra):r.removedDocuments.size>0&&(Y(o.Ra),o.Ra=!1))}),yield fr(t,i,e)}catch(i){yield ps(i)}})}function uk(n,e,t){let i=j(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.ma.forEach((s,o)=>{let a=o.view.Q_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=j(o);c.onlineState=a;let l=!1;c.queries.forEach((u,d)=>{for(let h of d.listeners)h.Q_(a)&&(l=!0)}),l&&YC(c)}(i.eventManager,e),r.length&&i.Va.a_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function i6(n,e,t){return x(this,null,function*(){let i=j(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.ya.get(e),s=r&&r.key;if(s){let o=new Ze(F.comparator);o=o.insert(s,wt.newNoDocument(s,J.min()));let a=fe().add(s),c=new hd(J.min(),new Map,new Ze(ue),o,a);yield NO(i,c),i.pa=i.pa.remove(s),i.ya.delete(e),eD(i)}else yield Pc(i.localStore,e,!1).then(()=>kc(i,e,t)).catch(ps)})}function r6(n,e){return x(this,null,function*(){let t=j(n),i=e.batch.batchId;try{let r=yield LW(t.localStore,e);JC(t,i,null),ZC(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield fr(t,r)}catch(r){yield ps(r)}})}function s6(n,e,t){return x(this,null,function*(){let i=j(n);try{let r=yield function(o,a){let c=j(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(Y(d!==null),u=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(i.localStore,e);JC(i,e,t),ZC(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield fr(i,r)}catch(r){yield ps(r)}})}function o6(n,e){return x(this,null,function*(){let t=j(n);ms(t.remoteStore)||R("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(o){let a=j(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(i===-1)return void e.resolve();let r=t.ba.get(i)||[];r.push(e),t.ba.set(i,r)}catch(i){let r=$c(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function ZC(n,e){(n.ba.get(e)||[]).forEach(t=>{t.resolve()}),n.ba.delete(e)}function JC(n,e,t){let i=j(n),r=i.Sa[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Sa[i.currentUser.toKey()]=r}}function kc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.fa.get(e))n.ma.delete(i),t&&n.Va.Fa(i,t);n.fa.delete(e),n.isPrimaryClient&&n.wa.Rr(e).forEach(i=>{n.wa.containsKey(i)||FO(n,i)})}function FO(n,e){n.ga.delete(e.path.canonicalString());let t=n.pa.get(e);t!==null&&(wd(n.remoteStore,t),n.pa=n.pa.remove(e),n.ya.delete(t),eD(n))}function hC(n,e,t){for(let i of t)i instanceof am?(n.wa.addReference(i.key,e),a6(n,i)):i instanceof cm?(R("SyncEngine","Document no longer in limbo: "+i.key),n.wa.removeReference(i.key,e),n.wa.containsKey(i.key)||FO(n,i.key)):z()}function a6(n,e){let t=e.key,i=t.path.canonicalString();n.pa.get(t)||n.ga.has(i)||(R("SyncEngine","New document in limbo: "+t),n.ga.add(i),eD(n))}function eD(n){for(;n.ga.size>0&&n.pa.size<n.maxConcurrentLimboResolutions;){let e=n.ga.values().next().value;n.ga.delete(e);let t=new F(Ae.fromString(e)),i=n.Da.next();n.ya.set(i,new uC(t)),n.pa=n.pa.insert(t,i),wm(n.remoteStore,new xc(sn(Vc(t.path)),i,"TargetPurposeLimboResolution",xn._e))}}function fr(n,e,t){return x(this,null,function*(){let i=j(n),r=[],s=[],o=[];i.ma.isEmpty()||(i.ma.forEach((a,c)=>{o.push(i.va(c,e,t).then(l=>{if((l||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,l?.fromCache?"not-current":"current"),l){r.push(l);let u=qE.Qi(c.targetId,l);s.push(u)}}))}),yield Promise.all(o),i.Va.a_(r),yield function(c,l){return x(this,null,function*(){let u=j(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>S.forEach(l,h=>S.forEach(h.ki,f=>u.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>S.forEach(h.qi,f=>u.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!gs(d))throw d;R("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let h=d.targetId;if(!d.fromCache){let f=u.ts.get(h),p=f.snapshotVersion,g=f.withLastLimboFreeSnapshotVersion(p);u.ts=u.ts.insert(h,g)}}})}(i.localStore,s))})}function c6(n,e){return x(this,null,function*(){let t=j(n);if(!t.currentUser.isEqual(e)){R("SyncEngine","User change. New user:",e.toKey());let i=yield EO(t.localStore,e);t.currentUser=e,function(s,o){s.ba.forEach(a=>{a.forEach(c=>{c.reject(new P(T.CANCELLED,o))})}),s.ba.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield fr(t,i._s)}})}function l6(n,e){let t=j(n),i=t.ya.get(e);if(i&&i.Ra)return fe().add(i.key);{let r=fe(),s=t.fa.get(e);if(!s)return r;for(let o of s){let a=t.ma.get(o);r=r.unionWith(a.view.ua)}return r}}function u6(n,e){return x(this,null,function*(){let t=j(n),i=yield Xg(t.localStore,e.query,!0),r=e.view.da(i);return t.isPrimaryClient&&hC(t,e.targetId,r.Ta),r})}function d6(n,e){return x(this,null,function*(){let t=j(n);return SO(t.localStore,e).then(i=>fr(t,i))})}function h6(n,e,t,i){return x(this,null,function*(){let r=j(n),s=yield function(a,c){let l=j(a),u=j(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>u.Cn(d,c).next(h=>h?l.localDocuments.getDocuments(d,h):S.resolve(null)))}(r.localStore,e);s!==null?(t==="pending"?yield Bc(r.remoteStore):t==="acknowledged"||t==="rejected"?(JC(r,e,i||null),ZC(r,e),function(a,c){j(j(a).mutationQueue).Fn(c)}(r.localStore,e)):z(),yield fr(r,s)):R("SyncEngine","Cannot apply mutation batch with id: "+e)})}function f6(n,e){return x(this,null,function*(){let t=j(n);if(tD(t),nD(t),e===!0&&t.Ca!==!0){let i=t.sharedClientState.getAllActiveQueryTargets(),r=yield dk(t,i.toArray());t.Ca=!0,yield iC(t.remoteStore,!0);for(let s of r)wm(t.remoteStore,s)}else if(e===!1&&t.Ca!==!1){let i=[],r=Promise.resolve();t.fa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):r=r.then(()=>(kc(t,o),Pc(t.localStore,o,!0))),wd(t.remoteStore,o)}),yield r,yield dk(t,i),function(o){let a=j(o);a.ya.forEach((c,l)=>{wd(a.remoteStore,l)}),a.wa.Vr(),a.ya=new Map,a.pa=new Ze(F.comparator)}(t),t.Ca=!1,yield iC(t.remoteStore,!1)}})}function dk(n,e,t){return x(this,null,function*(){let i=j(n),r=[],s=[];for(let o of e){let a,c=i.fa.get(o);if(c&&c.length!==0){a=yield Mc(i.localStore,sn(c[0]));for(let l of c){let u=i.ma.get(l),d=yield u6(i,u);d.snapshot&&s.push(d.snapshot)}}else{let l=yield IO(i.localStore,o);a=yield Mc(i.localStore,l),yield XC(i,LO(l),o,!1,a.resumeToken)}r.push(a)}return i.Va.a_(s),r})}function LO(n){return Vk(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function p6(n){return function(t){return j(j(t).persistence).Bi()}(j(n).localStore)}function g6(n,e,t,i){return x(this,null,function*(){let r=j(n);if(r.Ca)return void R("SyncEngine","Ignoring unexpected query state notification.");let s=r.fa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield SO(r.localStore,Bk(s[0])),a=hd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Pt.EMPTY_BYTE_STRING);yield fr(r,o,a);break}case"rejected":yield Pc(r.localStore,e,!0),kc(r,e,i);break;default:z()}})}function m6(n,e,t){return x(this,null,function*(){let i=tD(n);if(i.Ca){for(let r of e){if(i.fa.has(r)){R("SyncEngine","Adding an already active target "+r);continue}let s=yield IO(i.localStore,r),o=yield Mc(i.localStore,s);yield XC(i,LO(s),o.targetId,!1,o.resumeToken),wm(i.remoteStore,o)}for(let r of t)i.fa.has(r)&&(yield Pc(i.localStore,r,!1).then(()=>{wd(i.remoteStore,r),kc(i,r)}).catch(ps))}})}function tD(n){let e=j(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=i6.bind(null,e),e.Va.a_=ZW.bind(null,e.eventManager),e.Va.Fa=JW.bind(null,e.eventManager),e}function nD(n){let e=j(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=r6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s6.bind(null,e),e}function y6(n,e,t){let i=j(n);(function(s,o,a){return x(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(f,p){let g=j(f),m=ht(p.createTime);return g.persistence.runTransaction("hasNewerBundle","readonly",y=>g.Kr.getBundleMetadata(y,p.id)).then(y=>!!y&&y.createTime.compareTo(m)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(OO(c));let l=new cC(c,s.localStore,o.serializer),u=yield o.Ma();for(;u;){let h=yield l.ea(u);h&&a._updateProgress(h),u=yield o.Ma()}let d=yield l.complete();return yield fr(s,d.ra,void 0),yield function(f,p){let g=j(f);return g.persistence.runTransaction("Save bundle","readwrite",m=>g.Kr.saveBundleMetadata(m,p))}(s.localStore,c),a._completeWith(d.progress),Promise.resolve(d.na)}catch(c){return $n("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Cd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){this.serializer=Pd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return wO(this.persistence,new Yg,e.initialUser,this.serializer)}createPersistence(e){return new Kg(Qg.jr,this.serializer)}createSharedClientState(e){return new em}terminate(){return x(this,null,function*(){this.gcScheduler&&this.gcScheduler.stop(),yield this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var um=class n extends Cd{constructor(e,t,i){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return x(this,null,function*(){yield by(n.prototype,this,"initialize").call(this,e),yield this.xa.initialize(this,e),yield nD(this.xa.syncEngine),yield Bc(this.xa.remoteStore),yield this.persistence.mi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return wO(this.persistence,new Yg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){let i=this.persistence.referenceDelegate.garbageCollector;return new ME(i,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let i=new Qw(t,this.persistence);return new Kw(e.asyncQueue,i)}createPersistence(e){let t=HC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Un.withCacheSize(this.cacheSizeBytes):Un.DEFAULT;return new HE(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,xO(),Eg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new em}},fC=class n extends um{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return x(this,null,function*(){yield by(n.prototype,this,"initialize").call(this,e);let t=this.xa.syncEngine;this.sharedClientState instanceof nd&&(this.sharedClientState.syncEngine={Ys:h6.bind(null,t),Zs:g6.bind(null,t),Xs:m6.bind(null,t),Bi:p6.bind(null,t),Js:d6.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.mi(i=>x(this,null,function*(){yield f6(this.xa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let t=xO();if(!nd.D(t))throw new P(T.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=HC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nd(t,e.asyncQueue,i,e.clientId,e.initialUser)}},Dd=class{initialize(e,t){return x(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>uk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=c6.bind(null,this.syncEngine),yield iC(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new oC}()}createDatastore(e){let t=Pd(e.databaseInfo.databaseId),i=function(s){return new XE(s)}(e.databaseInfo);return function(s,o,a,c){return new eC(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new nC(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>uk(this.syncEngine,t,0),function(){return tm.D()?new tm:new QE}())}createSyncEngine(e,t){return function(r,s,o,a,c,l,u){let d=new dC(r,s,o,a,c,l);return u&&(d.Ca=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return function(t){return x(this,null,function*(){let i=j(t);R("RemoteStore","RemoteStore shutting down."),i.C_.add(5),yield jc(i),i.F_.shutdown(),i.M_.set("Unknown")})}(this.remoteStore)}};function hk(n,e=10240){let t=0;return{read(){return x(this,null,function*(){if(t<n.byteLength){let r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})},cancel(){return x(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Oc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):ut("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var pC=class{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new bt,this.buffer=new Uint8Array,this.La=function(){return new TextDecoder("utf-8")}(),this.ka().then(i=>{i&&i.Z_()?this.metadata.resolve(i.Y_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.Y_)}`))},i=>this.metadata.reject(i))}close(){return this.Ba.cancel()}getMetadata(){return x(this,null,function*(){return this.metadata.promise})}Ma(){return x(this,null,function*(){return yield this.getMetadata(),this.ka()})}ka(){return x(this,null,function*(){let e=yield this.qa();if(e===null)return null;let t=this.La.decode(e),i=Number(t);isNaN(i)&&this.Qa(`length string (${t}) is not valid number`);let r=yield this.Ka(i);return new aC(JSON.parse(r),e.length+i)})}$a(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}qa(){return x(this,null,function*(){for(;this.$a()<0&&!(yield this.Ua()););if(this.buffer.length===0)return null;let e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}Ka(e){return x(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ua())&&this.Qa("Reached the end of bundle when more is expected.");let t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}Qa(e){throw this.Ba.cancel(),new Error(`Invalid bundle format: ${e}`)}Ua(){return x(this,null,function*(){let e=yield this.Ba.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var gC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new P(T.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");let t=yield function(r,s){return x(this,null,function*(){let o=j(r),a=gd(o.serializer)+"/documents",c={documents:s.map(h=>pd(o.serializer,h))},l=yield o.Co("BatchGetDocuments",a,c,s.length),u=new Map;l.forEach(h=>{let f=IW(o.serializer,h);u.set(f.key.toString(),f)});let d=[];return s.forEach(h=>{let f=u.get(h.toString());Y(!!f),d.push(f)}),d})}(this.datastore,e);return t.forEach(i=>this.recordVersion(i)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new hs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return x(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,i)=>{let r=F.fromPath(i);this.mutations.push(new ld(r,this.precondition(r)))}),yield function(i,r){return x(this,null,function*(){let s=j(i),o=gd(s.serializer)+"/documents",a={writes:r.map(c=>md(s.serializer,c))};yield s.wo("Commit",o,a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=J.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new P(T.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(J.min())?at.exists(!1):at.updateTime(t):at.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(J.min()))throw new P(T.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return at.updateTime(t)}return at.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var mC=class{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.Wa=i.maxAttempts,this.zo=new bd(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko(()=>x(this,null,function*(){let e=new gC(this.datastore),t=this.za(e);t&&t.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.ja(r)}))}).catch(i=>{this.ja(i)})}))}za(e){try{let t=this.updateFunction(e);return!Td(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ga(),Promise.resolve()))):this.deferred.reject(e)}Ha(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!eO(t)}return!1}};var yC=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=_t.UNAUTHENTICATED,this.clientId=Ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>x(this,null,function*(){R("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(R("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){return x(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new P(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new bt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=$c(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Cg(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),R("FirestoreClient","Initializing OfflineComponentProvider");let t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>x(this,null,function*(){i.isEqual(r)||(yield EO(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function vC(n,e){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield iD(n);R("FirestoreClient","Initializing OnlineComponentProvider");let i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>lk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>lk(e.remoteStore,s)),n._onlineComponents=e})}function VO(n){return n.name==="FirebaseError"?n.code===T.FAILED_PRECONDITION||n.code===T.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function iD(n){return x(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){R("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Cg(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!VO(t))throw t;$n("Error using user provided cache. Falling back to memory cache: "+t),yield Cg(n,new Cd)}}else R("FirestoreClient","Using default OfflineComponentProvider"),yield Cg(n,new Cd);return n._offlineComponents})}function Em(n){return x(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(R("FirestoreClient","Using user provided OnlineComponentProvider"),yield vC(n,n._uninitializedComponentsProvider._online)):(R("FirestoreClient","Using default OnlineComponentProvider"),yield vC(n,new Dd))),n._onlineComponents})}function jO(n){return iD(n).then(e=>e.persistence)}function rD(n){return iD(n).then(e=>e.localStore)}function BO(n){return Em(n).then(e=>e.remoteStore)}function sD(n){return Em(n).then(e=>e.syncEngine)}function v6(n){return Em(n).then(e=>e.datastore)}function Nc(n){return x(this,null,function*(){let e=yield Em(n),t=e.eventManager;return t.onListen=e6.bind(null,e.syncEngine),t.onUnlisten=t6.bind(null,e.syncEngine),t})}function _6(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield jO(n),t=yield BO(n);return e.setNetworkEnabled(!0),function(r){let s=j(r);return s.C_.delete(0),Rd(s)}(t)}))}function b6(n){return n.asyncQueue.enqueue(()=>x(this,null,function*(){let e=yield jO(n),t=yield BO(n);return e.setNetworkEnabled(!1),function(r){return x(this,null,function*(){let s=j(r);s.C_.add(0),yield jc(s),s.M_.set("Offline")})}(t)}))}function w6(n,e){let t=new bt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,s,o){return x(this,null,function*(){try{let a=yield function(l,u){let d=j(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,u))}(r,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new P(T.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=$c(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield rD(n),e,t)})),t.promise}function UO(n,e,t={}){let i=new bt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(s,o,a,c,l){let u=new Oc({next:h=>{o.enqueueAndForget(()=>QC(s,d));let f=h.docs.has(a);!f&&h.fromCache?l.reject(new P(T.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?l.reject(new P(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Ed(Vc(a.path),u,{includeMetadataChanges:!0,J_:!0});return KC(s,d)}(yield Nc(n),n.asyncQueue,e,t,i)})),i.promise}function E6(n,e){let t=new bt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,s,o){return x(this,null,function*(){try{let a=yield Xg(r,s,!0),c=new lm(s,a.ls),l=c.ca(a.documents),u=c.applyChanges(l,!1);o.resolve(u.snapshot)}catch(a){let c=$c(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield rD(n),e,t)})),t.promise}function $O(n,e,t={}){let i=new bt;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(s,o,a,c,l){let u=new Oc({next:h=>{o.enqueueAndForget(()=>QC(s,d)),h.fromCache&&c.source==="server"?l.reject(new P(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new Ed(a,u,{includeMetadataChanges:!0,J_:!0});return KC(s,d)}(yield Nc(n),n.asyncQueue,e,t,i)})),i.promise}function C6(n,e){let t=new Oc(e);return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,s){j(r).q_.add(s),s.next()}(yield Nc(n),t)})),()=>{t.Na(),n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(r,s){j(r).q_.delete(s)}(yield Nc(n),t)}))}}function D6(n,e,t,i){let r=function(o,a){let c;return c=typeof o=="string"?nO().encode(o):o,function(u,d){return new pC(u,d)}(function(u,d){if(u instanceof Uint8Array)return hk(u,d);if(u instanceof ArrayBuffer)return hk(new Uint8Array(u),d);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Pd(e));n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){y6(yield sD(n),r,i)}))}function I6(n,e){return n.asyncQueue.enqueue(()=>x(this,null,function*(){return function(i,r){let s=j(i);return s.persistence.runTransaction("Get named query","readonly",o=>s.Kr.getNamedQuery(o,r))}(yield rD(n),e)}))}function zO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var fk=new Map;function oD(n,e,t){if(!t)throw new P(T.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function aD(n,e,t,i){if(e===!0&&i===!0)throw new P(T.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pk(n){if(!F.isDocumentKey(n))throw new P(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gk(n){if(F.isDocumentKey(n))throw new P(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function Ie(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Cm(n);throw new P(T.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function HO(n,e){if(e<=0)throw new P(T.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var dm=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new P(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}aD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zO((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new P(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new P(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new P(T.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Lo=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dm({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new P(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new P(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dm(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Vw;switch(i.type){case"firstParty":return new $w(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new P(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=fk.get(t);i&&(R("ComponentProvider","Removing Datastore"),fk.delete(t),i.terminate())}(this),Promise.resolve()}};function qO(n,e,t,i={}){var r;let s=(n=Ie(n,Lo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$n("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=_t.MOCK_USER;else{a=GI(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new P(T.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new _t(l)}n._authCredentials=new jw(new Dg(a,c))}}var jt=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ze=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ki(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ki=class n extends jt{constructor(e,t,i){super(e,t,Vc(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new F(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function cD(n,e,...t){if(n=et(n),oD("collection","path",e),n instanceof Lo){let i=Ae.fromString(e,...t);return gk(i),new ki(n,null,i)}{if(!(n instanceof ze||n instanceof ki))throw new P(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ae.fromString(e,...t));return gk(i),new ki(n.firestore,null,i)}}function WO(n,e){if(n=Ie(n,Lo),oD("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(T.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new jt(n,null,function(i){return new ai(Ae.emptyPath(),i)}(e))}function kd(n,e,...t){if(n=et(n),arguments.length===1&&(e=Ig.newId()),oD("doc","path",e),n instanceof Lo){let i=Ae.fromString(e,...t);return pk(i),new ze(n,null,new F(i))}{if(!(n instanceof ze||n instanceof ki))throw new P(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ae.fromString(e,...t));return pk(i),new ze(n.firestore,n instanceof ki?n.converter:null,new F(i))}}function lD(n,e){return n=et(n),e=et(e),(n instanceof ze||n instanceof ki)&&(e instanceof ze||e instanceof ki)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uD(n,e){return n=et(n),e=et(e),n instanceof jt&&e instanceof jt&&n.firestore===e.firestore&&Ad(n._query,e._query)&&n.converter===e.converter}var _C=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new bd(this,"async_queue_retry"),this.iu=()=>{let t=Eg();t&&R("AsyncQueue","Visibility state changed to "+t.visibilityState),this.zo.Qo()};let e=Eg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let t=Eg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let t=new bt;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return x(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!gs(e))throw e;R("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let t=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw ut("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=t,t}enqueueAfterDelay(e,t,i){this.su(),this.ru.indexOf(e)>-1&&(t=0);let r=rC.createAndSchedule(this,e,t,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&z()}verifyOperationInProgress(){}uu(){return x(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.Xa)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let t=this.Xa.indexOf(e);this.Xa.splice(t,1)}};function bC(n){return function(t,i){if(typeof t!="object"||t===null)return!1;let r=t;for(let s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}var wC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new bt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var GO=-1,Je=class extends Lo{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new _C}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||KO(this),this._firestoreClient.terminate()}};function It(n){return n._firestoreClient||KO(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function KO(n){var e,t,i;let r=n._freezeSettings(),s=function(a,c,l,u){return new Yw(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,zO(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new yC(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function QO(n,e){rN(n=Ie(n,Je));let t=It(n);if(t._uninitializedComponentsProvider)throw new P(T.FAILED_PRECONDITION,"SDK cache is already specified.");$n("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=n._freezeSettings(),r=new Dd;return XO(t,r,new um(r,i.cacheSizeBytes,e?.forceOwnership))}function YO(n){rN(n=Ie(n,Je));let e=It(n);if(e._uninitializedComponentsProvider)throw new P(T.FAILED_PRECONDITION,"SDK cache is already specified.");$n("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings(),i=new Dd;return XO(e,i,new fC(i,t.cacheSizeBytes))}function XO(n,e,t){let i=new bt;return n.asyncQueue.enqueue(()=>x(this,null,function*(){try{yield Cg(n,t),yield vC(n,e),i.resolve()}catch(r){let s=r;if(!VO(s))throw s;$n("Error enabling indexeddb cache. Falling back to memory cache: "+s),i.reject(s)}})).then(()=>i.promise)}function ZO(n){if(n._initialized&&!n._terminated)throw new P(T.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new bt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{yield function(i){return x(this,null,function*(){if(!rs.D())return Promise.resolve();let r=i+"main";yield rs.delete(r)})}(HC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function JO(n){return function(t){let i=new bt;return t.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return o6(yield sD(t),i)})),i.promise}(It(n=Ie(n,Je)))}function eN(n){return _6(It(n=Ie(n,Je)))}function tN(n){return b6(It(n=Ie(n,Je)))}function nN(n,e){let t=It(n=Ie(n,Je)),i=new wC;return D6(t,n._databaseId,e,i),i}function iN(n,e){return I6(It(n=Ie(n,Je)),e).then(t=>t?new jt(n,null,t.query):null)}function rN(n){if(n._initialized||n._terminated)throw new P(T.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Li=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Pt.fromBase64String(e))}catch(t){throw new P(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var li=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var dr=class{constructor(e){this._methodName=e}};var Vo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}};var S6=/^__.*__$/,EC=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ci(e,this.data,this.fieldMask,t,this.fieldTransforms):new ds(e,this.data,t,this.fieldTransforms)}},hm=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new ci(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function sN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var fm=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Au(e),r}Ru(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.Tu({path:i,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return pm(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(e.length===0)throw this.mu("Document fields must not be empty");if(sN(this.Iu)&&S6.test(e))throw this.mu('Document fields cannot begin and end with "__"')}},CC=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Pd(e)}pu(e,t,i,r=!1){return new fm({Iu:e,methodName:t,gu:i,path:dt.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function $o(n){let e=n._freezeSettings(),t=Pd(n._databaseId);return new CC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Dm(n,e,t,i,r,s={}){let o=n.pu(s.merge||s.mergeFields?2:0,e,t,r);fD("Data must be an object, but it was:",o,i);let a=cN(i,o),c,l;if(s.merge)c=new An(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let u=[];for(let d of s.mergeFields){let h=xC(e,d,t);if(!o.contains(h))throw new P(T.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);uN(u,h)||u.push(h)}c=new An(u),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new EC(new Yt(a),c,l)}var Id=class n extends dr{_toFieldTransform(e){if(e.Iu!==2)throw e.Iu===1?e.mu(`${this._methodName}() can only appear at the top level of your update data`):e.mu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function oN(n,e,t){return new fm({Iu:3,gu:e.settings.gu,methodName:n._methodName,du:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var DC=class n extends dr{_toFieldTransform(e){return new Oo(e.path,new ls)}isEqual(e){return e instanceof n}},IC=class extends dr{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){let t=oN(this,e,!0),i=this.yu.map(s=>zo(s,t)),r=new lr(i);return new Oo(e.path,r)}isEqual(e){return this===e}},SC=class extends dr{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){let t=oN(this,e,!0),i=this.yu.map(s=>zo(s,t)),r=new ur(i);return new Oo(e.path,r)}isEqual(e){return this===e}},TC=class extends dr{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){let t=new us(e.serializer,Gk(e.serializer,this.wu));return new Oo(e.path,t)}isEqual(e){return this===e}};function dD(n,e,t,i){let r=n.pu(1,e,t);fD("Data must be an object, but it was:",r,i);let s=[],o=Yt.empty();Uo(i,(c,l)=>{let u=pD(e,c,t);l=et(l);let d=r.Ru(u);if(l instanceof Id)s.push(u);else{let h=zo(l,d);h!=null&&(s.push(u),o.set(u,h))}});let a=new An(s);return new hm(o,a,r.fieldTransforms)}function hD(n,e,t,i,r,s){let o=n.pu(1,e,t),a=[xC(e,i,t)],c=[r];if(s.length%2!=0)throw new P(T.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(xC(e,s[h])),c.push(s[h+1]);let l=[],u=Yt.empty();for(let h=a.length-1;h>=0;--h)if(!uN(l,a[h])){let f=a[h],p=c[h];p=et(p);let g=o.Ru(f);if(p instanceof Id)l.push(f);else{let m=zo(p,g);m!=null&&(l.push(f),u.set(f,m))}}let d=new An(l);return new hm(u,d,o.fieldTransforms)}function aN(n,e,t,i=!1){return zo(t,n.pu(i?4:3,e))}function zo(n,e){if(lN(n=et(n)))return fD("Unsupported field value:",e,n),cN(n,e);if(n instanceof dr)return function(i,r){if(!sN(r.Iu))throw r.mu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.mu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.du&&e.Iu!==4)throw e.mu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=zo(a,r.Vu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=et(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Gk(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=nt.fromDate(i);return{timestampValue:Tc(r.serializer,s)}}if(i instanceof nt){let s=new nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Tc(r.serializer,s)}}if(i instanceof Vo)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Li)return{bytesValue:iO(r.serializer,i._byteString)};if(i instanceof ze){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:UC(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.mu(`Unsupported field value: ${Cm(i)}`)}(n,e)}function cN(n,e){let t={};return Ak(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Uo(n,(i,r)=>{let s=zo(r,e.Eu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function lN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nt||n instanceof Vo||n instanceof Li||n instanceof ze||n instanceof dr)}function fD(n,e,t){if(!lN(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Cm(t);throw i==="an object"?e.mu(n+" a custom object"):e.mu(n+" "+i)}}function xC(n,e,t){if((e=et(e))instanceof li)return e._internalPath;if(typeof e=="string")return pD(n,e);throw pm("Field path arguments must be of type string or ",n,!1,void 0,t)}var T6=new RegExp("[~\\*/\\[\\]]");function pD(n,e,t){if(e.search(T6)>=0)throw pm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new li(...e.split("."))._internalPath}catch{throw pm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pm(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new P(T.INVALID_ARGUMENT,a+n+c)}function uN(n,e){return n.some(t=>t.isEqual(e))}var jo=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new AC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Im("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},AC=class extends jo{data(){return super.data()}};function Im(n,e){return typeof e=="string"?pD(n,e):e instanceof li?e._internalPath:e._delegate._internalPath}function dN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Sd=class{},Bo=class extends Sd{};function pr(n,e,...t){let i=[];e instanceof Sd&&i.push(e),i=i.concat(t),function(s){let o=s.filter(c=>c instanceof MC).length,a=s.filter(c=>c instanceof gm).length;if(o>1||o>0&&a>0)throw new P(T.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var gm=class n extends Bo{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return wN(e._query,t),new jt(e.firestore,e.converter,lE(e._query,t))}_parse(e){let t=$o(e.firestore);return function(s,o,a,c,l,u,d){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new P(T.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){yk(d,u);let f=[];for(let p of d)f.push(mk(c,s,p));h={arrayValue:{values:f}}}else h=mk(c,s,d)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||yk(d,u),h=aN(a,o,d,u==="in"||u==="not-in");return Ce.create(l,u,h)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function hN(n,e,t){let i=e,r=Im("where",n);return gm._create(r,i,t)}var MC=class n extends Sd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Ve.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)wN(o,c),o=lE(o,c)}(e._query,t),new jt(e.firestore,e.converter,lE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var PC=class n extends Bo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(r,s,o){if(r.startAt!==null)throw new P(T.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new P(T.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ro(s,o)}(e._query,this._field,this._direction);return new jt(e.firestore,e.converter,function(r,s){let o=r.explicitOrderBy.concat([s]);return new ai(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}};function fN(n,e="asc"){let t=e,i=Im("orderBy",n);return PC._create(i,t)}var mm=class n extends Bo{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){return new jt(e.firestore,e.converter,Ng(e._query,this._limit,this._limitType))}};function pN(n){return HO("limit",n),mm._create("limit",n,"F")}function gN(n){return HO("limitToLast",n),mm._create("limitToLast",n,"L")}var ym=class n extends Bo{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=bN(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(r,s){return new ai(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,t))}};function mN(...n){return ym._create("startAt",n,!0)}function yN(...n){return ym._create("startAfter",n,!1)}var vm=class n extends Bo{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=bN(e,this.type,this._docOrFields,this._inclusive);return new jt(e.firestore,e.converter,function(r,s){return new ai(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,t))}};function vN(...n){return vm._create("endBefore",n,!1)}function _N(...n){return vm._create("endAt",n,!0)}function bN(n,e,t,i){if(t[0]=et(t[0]),t[0]instanceof jo)return function(s,o,a,c,l){if(!c)throw new P(T.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let u=[];for(let d of _c(s))if(d.field.isKeyField())u.push(Po(o,c.key));else{let h=c.data.field(d.field);if(bm(h))throw new P(T.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){let f=d.field.canonicalString();throw new P(T.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Ni(u,l)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{let r=$o(n.firestore);return function(o,a,c,l,u,d){let h=o.explicitOrderBy;if(u.length>h.length)throw new P(T.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let f=[];for(let p=0;p<u.length;p++){let g=u[p];if(h[p].field.isKeyField()){if(typeof g!="string")throw new P(T.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof g}`);if(!jC(o)&&g.indexOf("/")!==-1)throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${g}' contains a slash.`);let m=o.path.child(Ae.fromString(g));if(!F.isDocumentKey(m))throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${m}' is not because it contains an odd number of segments.`);let y=new F(m);f.push(Po(a,y))}else{let m=aN(c,l,g);f.push(m)}}return new Ni(f,d)}(n._query,n.firestore._databaseId,r,e,t,i)}}function mk(n,e,t){if(typeof(t=et(t))=="string"){if(t==="")throw new P(T.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jC(e)&&t.indexOf("/")!==-1)throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Ae.fromString(t));if(!F.isDocumentKey(i))throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Po(n,new F(i))}if(t instanceof ze)return Po(n,t._key);throw new P(T.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cm(t)}.`)}function yk(n,e){if(!Array.isArray(n)||n.length===0)throw new P(T.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wN(n,e){let t=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(T.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(T.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Fc=class{convertValue(e,t="none"){switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Uo(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new Vo(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=LC(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(od(e));default:return null}}convertTimestamp(e){let t=ss(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ae.fromString(e);Y(fO(i));let r=new as(i.get(1),i.get(3)),s=new F(i.popFirst(5));return r.isEqual(t)||ut(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Sm(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var RC=class extends Fc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,t)}};var cr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Hn=class extends jo{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Im("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},ns=class extends Hn{data(e={}){return super.data(e)}},ui=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new cr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ns(this._firestore,this._userDataWriter,i.key,i,new cr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new ns(r._firestore,r._userDataWriter,a.doc.key,a.doc,new cr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ns(r._firestore,r._userDataWriter,a.doc.key,a.doc,new cr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:x6(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function x6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function gD(n,e){return n instanceof Hn&&e instanceof Hn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ui&&e instanceof ui&&n._firestore===e._firestore&&uD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function EN(n){n=Ie(n,ze);let e=Ie(n.firestore,Je);return UO(It(e),n._key).then(t=>_D(e,n,t))}var hr=class extends Fc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Li(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,t)}};function CN(n){n=Ie(n,ze);let e=Ie(n.firestore,Je),t=It(e),i=new hr(e);return w6(t,n._key).then(r=>new Hn(e,i,n._key,r,new cr(r!==null&&r.hasLocalMutations,!0),n.converter))}function DN(n){n=Ie(n,ze);let e=Ie(n.firestore,Je);return UO(It(e),n._key,{source:"server"}).then(t=>_D(e,n,t))}function IN(n){n=Ie(n,jt);let e=Ie(n.firestore,Je),t=It(e),i=new hr(e);return dN(n._query),$O(t,n._query).then(r=>new ui(e,i,n,r))}function SN(n){n=Ie(n,jt);let e=Ie(n.firestore,Je),t=It(e),i=new hr(e);return E6(t,n._query).then(r=>new ui(e,i,n,r))}function TN(n){n=Ie(n,jt);let e=Ie(n.firestore,Je),t=It(e),i=new hr(e);return $O(t,n._query,{source:"server"}).then(r=>new ui(e,i,n,r))}function mD(n,e,t){n=Ie(n,ze);let i=Ie(n.firestore,Je),r=Sm(n.converter,e,t);return zc(i,[Dm($o(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,at.none())])}function yD(n,e,t,...i){n=Ie(n,ze);let r=Ie(n.firestore,Je),s=$o(r),o;return o=typeof(e=et(e))=="string"||e instanceof li?hD(s,"updateDoc",n._key,e,t,i):dD(s,"updateDoc",n._key,e),zc(r,[o.toMutation(n._key,at.exists(!0))])}function xN(n){return zc(Ie(n.firestore,Je),[new hs(n._key,at.none())])}function AN(n,e){let t=Ie(n.firestore,Je),i=kd(n),r=Sm(n.converter,e);return zc(t,[Dm($o(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,at.exists(!1))]).then(()=>i)}function vD(n,...e){var t,i,r;n=et(n);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||bC(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges};if(bC(e[o])){let d=e[o];e[o]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let c,l,u;if(n instanceof ze)l=Ie(n.firestore,Je),u=Vc(n._key.path),c={next:d=>{e[o]&&e[o](_D(l,n,d))},error:e[o+1],complete:e[o+2]};else{let d=Ie(n,jt);l=Ie(d.firestore,Je),u=d._query;let h=new hr(l);c={next:f=>{e[o]&&e[o](new ui(l,h,d,f))},error:e[o+1],complete:e[o+2]},dN(n._query)}return function(h,f,p,g){let m=new Oc(g),y=new Ed(f,m,p);return h.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return KC(yield Nc(h),y)})),()=>{m.Na(),h.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return QC(yield Nc(h),y)}))}}(It(l),u,a,c)}function MN(n,e){return C6(It(n=Ie(n,Je)),bC(e)?e:{next:e})}function zc(n,e){return function(i,r){let s=new bt;return i.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return n6(yield sD(i),r,s)})),s.promise}(It(n),e)}function _D(n,e,t){let i=t.docs.get(e._key),r=new hr(n);return new Hn(n,r,e._key,i,new cr(t.hasPendingWrites,t.fromCache),e.converter)}var A6={maxAttempts:5};var _m=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$o(e)}set(e,t,i){this._verifyNotCommitted();let r=es(e,this._firestore),s=Sm(r.converter,t,i),o=Dm(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,i);return this._mutations.push(o.toMutation(r._key,at.none())),this}update(e,t,i,...r){this._verifyNotCommitted();let s=es(e,this._firestore),o;return o=typeof(t=et(t))=="string"||t instanceof li?hD(this._dataReader,"WriteBatch.update",s._key,t,i,r):dD(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,at.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=es(e,this._firestore);return this._mutations=this._mutations.concat(new hs(t._key,at.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(T.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function es(n,e){if((n=et(n)).firestore!==e)throw new P(T.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var kC=class extends class{constructor(t,i){this._firestore=t,this._transaction=i,this._dataReader=$o(t)}get(t){let i=es(t,this._firestore),r=new RC(this._firestore);return this._transaction.lookup([i._key]).then(s=>{if(!s||s.length!==1)return z();let o=s[0];if(o.isFoundDocument())return new jo(this._firestore,r,o.key,o,i.converter);if(o.isNoDocument())return new jo(this._firestore,r,i._key,null,i.converter);throw z()})}set(t,i,r){let s=es(t,this._firestore),o=Sm(s.converter,i,r),a=Dm(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,r);return this._transaction.set(s._key,a),this}update(t,i,r,...s){let o=es(t,this._firestore),a;return a=typeof(i=et(i))=="string"||i instanceof li?hD(this._dataReader,"Transaction.update",o._key,i,r,s):dD(this._dataReader,"Transaction.update",o._key,i),this._transaction.update(o._key,a),this}delete(t){let i=es(t,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=es(e,this._firestore),i=new hr(this._firestore);return super.get(e).then(r=>new Hn(this._firestore,i,t._key,r._document,new cr(!1,!1),t.converter))}};function PN(n,e,t){n=Ie(n,Je);let i=Object.assign(Object.assign({},A6),t);return function(s){if(s.maxAttempts<1)throw new P(T.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,o,a){let c=new bt;return s.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){let l=yield v6(s);new mC(s.asyncQueue,l,a,o,c).run()})),c.promise}(It(n),r=>e(new kC(n,r)),i)}function RN(){return new Id("deleteField")}function kN(){return new DC("serverTimestamp")}function ON(...n){return new IC("arrayUnion",n)}function NN(...n){return new SC("arrayRemove",n)}function FN(n){return new TC("increment",n)}(function(e,t=!0){(function(r){Lc=r})(XI),al(new Ps("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new Je(new Bw(i.getProvider("auth-internal")),new Hw(i.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new as(l.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Cr(_R,"4.4.0",e),Cr(_R,"4.4.0","esm2017")})();var M6="@firebase/firestore-compat",P6="0.3.23";function ID(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function LN(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function VN(){if(!Mk())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Tm=class n{constructor(e){this._delegate=e}static fromBase64String(e){return VN(),new n(Li.fromBase64String(e))}static fromUint8Array(e){return LN(),new n(Li.fromUint8Array(e))}toBase64(){return VN(),this._delegate.toBase64()}toUint8Array(){return LN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function bD(n){return R6(n,["next","error","complete"])}function R6(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}var wD=class{enableIndexedDbPersistence(e,t){return QO(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return YO(e._delegate)}clearIndexedDbPersistence(e){return ZO(e._delegate)}},xm=class{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof as||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$n("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){qO(this._delegate,e,t,i)}enableNetwork(){return eN(this._delegate)}disableNetwork(){return tN(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,aD("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return JO(this._delegate)}onSnapshotsInSync(e){return MN(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Wc(this,cD(this._delegate,e))}catch(t){throw on(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vi(this,kd(this._delegate,e))}catch(t){throw on(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Go(this,WO(this._delegate,e))}catch(t){throw on(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return PN(this._delegate,t=>e(new Am(this,t)))}batch(){return It(this._delegate),new Mm(new _m(this._delegate,e=>zc(this._delegate,e)))}loadBundle(e){return nN(this._delegate,e)}namedQuery(e){return iN(this._delegate,e).then(t=>t?new Go(this,t):null)}},Hc=class extends Fc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tm(new Li(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Vi.forKey(t,this.firestore,null)}};function k6(n){vk(n)}var Am=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Hc(e)}get(e){let t=Ho(e);return this._delegate.get(t).then(i=>new qo(this._firestore,new Hn(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){let r=Ho(e);return i?(ID("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=Ho(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=Ho(e);return this._delegate.delete(t),this}},Mm=class{constructor(e){this._delegate=e}set(e,t,i){let r=Ho(e);return i?(ID("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){let s=Ho(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){let t=Ho(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},qc=class n{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){let i=new ns(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wo(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let i=n.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new n(e,new Hc(e),t),r.set(t,s)),s}};qc.INSTANCES=new WeakMap;var Vi=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hc(e)}static forPath(e,t,i){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new ze(t._delegate,i,new F(e)))}static forKey(e,t,i){return new n(t,new ze(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Wc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Wc(this.firestore,cD(this._delegate,e))}catch(t){throw on(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=et(e),e instanceof ze?lD(this._delegate,e):!1}set(e,t){t=ID("DocumentReference.set",t);try{return t?mD(this._delegate,e,t):mD(this._delegate,e)}catch(i){throw on(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?yD(this._delegate,e):yD(this._delegate,e,t,...i)}catch(r){throw on(r,"updateDoc()","DocumentReference.update()")}}delete(){return xN(this._delegate)}onSnapshot(...e){let t=jN(e),i=BN(e,r=>new qo(this.firestore,new Hn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return vD(this._delegate,t,i)}get(e){let t;return e?.source==="cache"?t=CN(this._delegate):e?.source==="server"?t=DN(this._delegate):t=EN(this._delegate),t.then(i=>new qo(this.firestore,new Hn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function on(n,e,t){return n.message=n.message.replace(e,t),n}function jN(n){for(let e of n)if(typeof e=="object"&&!bD(e))return e;return{}}function BN(n,e){var t,i;let r;return bD(n[0])?r=n[0]:bD(n[1])?r=n[1]:typeof n[0]=="function"?r={next:n[0],error:n[1],complete:n[2]}:r={next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:(t=r.error)===null||t===void 0?void 0:t.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var qo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vi(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return gD(this._delegate,e._delegate)}},Wo=class extends qo{data(e){let t=this._delegate.data(e);return this._delegate._converter||_k(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Go=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Hc(e)}where(e,t,i){try{return new n(this.firestore,pr(this._delegate,hN(e,t,i)))}catch(r){throw on(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,pr(this._delegate,fN(e,t)))}catch(i){throw on(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,pr(this._delegate,pN(e)))}catch(t){throw on(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,pr(this._delegate,gN(e)))}catch(t){throw on(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,pr(this._delegate,mN(...e)))}catch(t){throw on(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,pr(this._delegate,yN(...e)))}catch(t){throw on(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,pr(this._delegate,vN(...e)))}catch(t){throw on(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,pr(this._delegate,_N(...e)))}catch(t){throw on(t,"endAt()","Query.endAt()")}}isEqual(e){return uD(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=SN(this._delegate):e?.source==="server"?t=TN(this._delegate):t=IN(this._delegate),t.then(i=>new Od(this.firestore,new ui(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let t=jN(e),i=BN(e,r=>new Od(this.firestore,new ui(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return vD(this._delegate,t,i)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},ED=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Wo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Od=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Go(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ED(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Wo(this._firestore,i))})}isEqual(e){return gD(this._delegate,e._delegate)}},Wc=class n extends Go{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Vi(this.firestore,e):null}doc(e){try{return e===void 0?new Vi(this.firestore,kd(this._delegate)):new Vi(this.firestore,kd(this._delegate,e))}catch(t){throw on(t,"doc()","CollectionReference.doc()")}}add(e){return AN(this._delegate,e).then(t=>new Vi(this.firestore,t))}isEqual(e){return lD(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(qc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ho(n){return Ie(n,ze)}var CD=class n{constructor(...e){this._delegate=new li(...e)}static documentId(){return new n(dt.keyField().canonicalString())}isEqual(e){return e=et(e),e instanceof li?this._delegate._internalPath.isEqual(e._internalPath):!1}};var DD=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=kN();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=RN();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=ON(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=NN(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=FN(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var O6={Firestore:xm,GeoPoint:Vo,Timestamp:nt,Blob:Tm,Transaction:Am,WriteBatch:Mm,DocumentReference:Vi,DocumentSnapshot:qo,Query:Go,QueryDocumentSnapshot:Wo,QuerySnapshot:Od,CollectionReference:Wc,FieldPath:CD,FieldValue:DD,setLogLevel:k6,CACHE_SIZE_UNLIMITED:GO};function N6(n,e){n.INTERNAL.registerComponent(new Ps("firestore-compat",t=>{let i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},O6)))}function F6(n){N6(n,(e,t)=>new xm(e,t,new wD)),n.registerVersion(M6,P6)}F6(cn);function L6(n,e=dl){return new oe(t=>{let i;return e!=null?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}function UN(n,e){return L6(n,e)}function V6(n,e){return UN(n,e).pipe(Fs(void 0),gl(),Z(t=>{let[i,r]=t;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function xD(n,e){return UN(n,e).pipe(Z(t=>({payload:t,type:"query"})))}var Pm=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let i=this.ref.collection(e),{ref:r,query:s}=HN(i,t);return new km(r,s,this.afs)}snapshotChanges(){return V6(this.ref,this.afs.schedulers.outsideAngular).pipe(gn)}valueChanges(e={}){return this.snapshotChanges().pipe(Z(({payload:t})=>e.idField?Te($({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return xe(this.ref.get(e)).pipe(gn)}};function Rm(n,e){return xD(n,e).pipe(Fs(void 0),gl(),Z(t=>{let[i,r]=t,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,c)=>{let l=s.find(d=>d.doc.ref.isEqual(a.ref)),u=i?.payload.docs.find(d=>d.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function $N(n,e,t){return Rm(n,t).pipe(Ns((i,r)=>j6(i,r.map(s=>s.payload),e),[]),pl(),Z(i=>i.map(r=>({type:r.type,payload:r}))))}function j6(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=B6(n,i))}),n}function SD(n,e,t,...i){let r=n.slice();return r.splice(e,t,...i),r}function B6(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return SD(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return SD(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SD(n,e.oldIndex,1);break}return n}function zN(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var km=class{ref;query;afs;constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Rm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Z(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Fs(void 0),gl(),Tt(([i,r])=>r.length>0||!i),Z(([,i])=>i),gn)}auditTrail(e){return this.stateChanges(e).pipe(Ns((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=zN(e);return $N(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn)}valueChanges(e={}){return xD(this.query,this.afs.schedulers.outsideAngular).pipe(Z(t=>t.payload.docs.map(i=>e.idField?Te($({},i.data()),{[e.idField]:i.id}):i.data())),gn)}get(e){return xe(this.query.get(e)).pipe(gn)}add(e){return this.ref.add(e)}doc(e){return new Pm(this.ref.doc(e),this.afs)}},TD=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Rm(this.query,this.afs.schedulers.outsideAngular).pipe(gn):Rm(this.query,this.afs.schedulers.outsideAngular).pipe(Z(t=>t.filter(i=>e.indexOf(i.type)>-1)),Tt(t=>t.length>0),gn)}auditTrail(e){return this.stateChanges(e).pipe(Ns((t,i)=>[...t,...i],[]))}snapshotChanges(e){let t=zN(e);return $N(this.query,t,this.afs.schedulers.outsideAngular).pipe(gn)}valueChanges(e={}){return xD(this.query,this.afs.schedulers.outsideAngular).pipe(Z(i=>i.payload.docs.map(r=>e.idField?$({[e.idField]:r.id},r.data()):r.data())),gn)}get(e){return xe(this.query.get(e)).pipe(gn)}},U6=new q("angularfire2.enableFirestorePersistence"),$6=new q("angularfire2.firestore.persistenceSettings"),z6=new q("angularfire2.firestore.settings"),H6=new q("angularfire2.firestore.use-emulator");function HN(n,e=t=>t){return{query:e(n),ref:n}}var qN=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,i,r,s,o,a,c,l,u,d,h,f,p,g,m,y,v){this.schedulers=c;let b=Eu(t,a,i),E=u;d&&$b(b,a,h,p,g,m,f,y),[this.firestore,this.persistenceEnabled$]=Vp(`${b.name}.firestore`,"AngularFirestore",b.name,()=>{let C=a.runOutsideAngular(()=>b.firestore());if(s&&C.settings(s),E&&C.useEmulator(...E),r&&!no(o)){let D=()=>{try{return xe(C.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(A){return typeof console<"u"&&console.warn(A),X(!1)}};return[C,a.runOutsideAngular(D)]}else return[C,X(!1)]},[s,E,r])}collection(t,i){let r;typeof t=="string"?r=this.firestore.collection(t):r=t;let{ref:s,query:o}=HN(r,i),a=this.schedulers.ngZone.run(()=>s);return new km(a,o,this)}collectionGroup(t,i){let r=i||(o=>o),s=this.firestore.collectionGroup(t);return new TD(r(s),this)}doc(t){let i;typeof t=="string"?i=this.firestore.doc(t):i=t;let r=this.schedulers.ngZone.run(()=>i);return new Pm(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||n)(k(ec),k(tc,8),k(U6,8),k(z6,8),k(hn),k(Pe),k(Np),k($6,8),k(H6,8),k(mo,8),k(Fb,8),k(Lb,8),k(Vb,8),k(jb,8),k(Bb,8),k(Ub,8),k(go,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var ys=(()=>{let e=class e{constructor(i,r){this.afAuth=i,this.firestore=r}login(i,r){return x(this,null,function*(){try{yield this.afAuth.signInWithEmailAndPassword(i,r)}catch(s){throw s}})}logout(){return x(this,null,function*(){try{yield this.afAuth.signOut()}catch(i){throw i}})}isLoggedIn(){return new oe(i=>{this.afAuth.authState.subscribe(r=>{i.next(!!r),i.complete()})})}addUser(i,r){return this.firestore.collection("users").doc(i).set(r)}};e.\u0275fac=function(r){return new(r||e)(k(mo),k(qN))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function W6(n,e){if(n&1&&(_(0,"p",11),I(1),w()),n&2){let t=fn();U(1),Fe(t.errorMessage)}}var WN=(()=>{let e=class e{constructor(i,r){this.router=i,this.authService=r,this.email="",this.password="",this.errorMessage=null}login(){this.authService.login(this.email,this.password).then(()=>{console.log("User logged in"),this.router.navigate(["/home/homepage"])}).catch(i=>{this.errorMessage=i.message})}};e.\u0275fac=function(r){return new(r||e)(G(Ft),G(ys))},e.\u0275cmp=ae({type:e,selectors:[["app-login"]],standalone:!0,features:[ce],decls:17,vars:4,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["for","email"],["type","text","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit",1,"login-button",3,"disabled"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,s){if(r&1&&(_(0,"div",0)(1,"div",1)(2,"h2"),I(3,"Login"),w(),_(4,"form",2,3),je("ngSubmit",function(){return s.login()}),_(6,"div",4)(7,"label",5),I(8,"Email:"),w(),_(9,"input",6),je("ngModelChange",function(a){return s.email=a}),w()(),_(10,"div",4)(11,"label",7),I(12,"Password:"),w(),_(13,"input",8),je("ngModelChange",function(a){return s.password=a}),w()(),_(14,"button",9),I(15,"Login"),w(),tt(16,W6,2,1,"p",10),w()()()),r&2){let o=Mf(5);U(9),ve("ngModel",s.email),U(4),ve("ngModel",s.password),U(1),ve("disabled",!o.valid),U(2),ve("ngIf",s.errorMessage)}},dependencies:[le,jr,Za,kp,Gr,Xa,Pp,bu,po,_u],styles:[".login-container[_ngcontent-%COMP%]{background:linear-gradient(to right,#7b1fa2,#4a148c);display:flex;justify-content:center;align-items:center;height:100vh}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000004d}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4a148c;margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4a148c;font-weight:700}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{background-color:#4a148c;color:#fff;padding:10px 20px;font-size:1.2rem;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover{background-color:#7b1fa2}"]});let n=e;return n})();var G6=n=>({menuColorVisible:n}),K6=n=>({toggleSidebar:n}),Nm=(()=>{let e=class e{constructor(i,r){this.authService=i,this.router=r,this.isSidebarHidden=!1}logout(){this.authService.logout().then(()=>{console.log("User logged out"),this.router.navigate(["/"])}).catch(i=>{console.error("Logout error:",i)})}toggleSidebar(){if(this.isSidebarHidden){this.isSidebarHidden=!1;return}else{this.isSidebarHidden=!0;return}}};e.\u0275fac=function(r){return new(r||e)(G(ys),G(Ft))},e.\u0275cmp=ae({type:e,selectors:[["app-sidebar"]],standalone:!0,features:[ce],decls:35,vars:6,consts:[[1,"btn","hamburger-menu"],[1,"btn",3,"click"],[1,"bi","bi-list",3,"ngClass"],[3,"ngClass"],[1,"mt-5"],["routerLink","/home/homepage"],[1,"bi","bi-house"],["routerLink","/home/profile"],[1,"bi","bi-person"],["routerLink","/home/challenge"],[1,"bi","bi-lightning"],["routerLink","/home/tutorial"],[1,"bi","bi-backpack"],["routerLink","/home/admin"],[1,"bi","bi-person-lines-fill"],["routerLink","/home/ticketing"],[1,"bi","bi-balloon"],[3,"click"],[1,"bi","bi-box-arrow-left"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"button",1),je("click",function(){return s.toggleSidebar()}),Q(2,"i",2),w()(),_(3,"nav",3)(4,"ul",4)(5,"li")(6,"a",5),Q(7,"i",6),I(8," Home"),w()(),_(9,"li")(10,"a",7),Q(11,"i",8),I(12," Profile"),w()(),_(13,"li")(14,"a",9),Q(15,"i",10),I(16," Challenge"),w()(),_(17,"li")(18,"a",11),Q(19,"i",12),I(20," Tutorial"),w()(),Q(21,"hr"),_(22,"li")(23,"a",13),Q(24,"i",14),I(25," Admin"),w()(),_(26,"li")(27,"a",15),Q(28,"i",16),I(29," Ticketing"),w()(),Q(30,"hr"),_(31,"li")(32,"a",17),je("click",function(){return s.logout()}),Q(33,"i",18),I(34," Logout"),w()()()()),r&2&&(U(2),ve("ngClass",L_(2,G6,s.isSidebarHidden)),U(1),ve("ngClass",L_(4,K6,s.isSidebarHidden)))},dependencies:[le,kA,Ci],styles:["@media (max-width: 768px){nav[_ngcontent-%COMP%]{display:none;position:fixed}}.menuColorVisible[_ngcontent-%COMP%]{color:#fff}.toggleSidebar[_ngcontent-%COMP%]{display:block;z-index:1}.hamburger-menu[_ngcontent-%COMP%]{position:absolute;font-size:2rem;z-index:2}nav[_ngcontent-%COMP%]{width:200px;background:linear-gradient(to bottom,#7b1fa2,#4a148c);height:100vh;padding:20px;box-shadow:0 4px 8px #0000001a}nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer}nav[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{color:#fff}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:10px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;padding:10px;text-decoration:none;color:#fff;font-size:1.2rem;transition:background-color .3s}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#fff3;color:#fff}"]});let n=e;return n})();function Q6(n,e){if(n&1&&(_(0,"div")(1,"div",13),Q(2,"i",14),_(3,"div",15)(4,"div")(5,"h5",16),I(6),w(),_(7,"h6",17),I(8),w()(),I(9),w()()()),n&2){let t=e.$implicit;U(6),Fe(t.title),U(2),Fe(t.date),U(1),ti(" ",t.body," ")}}var GN=(()=>{let e=class e{constructor(){this.notification=[{id:1,title:"Notification 1",description:"Description 1",date:"2023-02-15",body:"jsidnbvsakjvaivjasvnasviknavikavf a"},{id:2,title:"Notification 2",description:"Description 2",date:"2022-07-31",body:"jsidnbvsakjvaivjasvnasviknavikavf a"},{id:3,title:"Notification 3",description:"Description 3",date:"2023-01-01",body:"jsidnbvsakjvaivjasvnasviknavikavf a"}]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-appbar"]],standalone:!0,features:[ce],decls:14,vars:1,consts:[[1,"appbar"],[1,"btn","btn-primary","mx-2"],[1,"bi","bi-moon-fill"],["routerLink","/home/settings",1,"btn","btn-primary","mx-2"],[1,"bi","bi-gear"],["data-bs-toggle","offcanvas","data-bs-target","#offcanvasNotification","aria-controls","offcanvasRight",1,"btn","btn-primary","mx-2"],[1,"bi","bi-bell"],["tabindex","-1","id","offcanvasNotification","aria-labelledby","offcanvasRightLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","offcanvasRightLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],[4,"ngFor","ngForOf"],[1,"card","m-2","d-flex","flex-row","justify-content-center","align-items-center"],[1,"bi","bi-envelope","mx-2"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle","mb-2","text-muted"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"button",1),Q(2,"i",2),w(),_(3,"button",3),Q(4,"i",4),w(),_(5,"button",5),Q(6,"i",6),w()(),_(7,"div",7)(8,"div",8)(9,"h5",9),I(10,"Notification"),w(),Q(11,"button",10),w(),_(12,"div",11),tt(13,Q6,10,3,"div",12),w()()),r&2&&(U(13),ve("ngForOf",s.notification))},dependencies:[le,pn,Ci],styles:[".appbar[_ngcontent-%COMP%]{padding:0 20px;display:flex;justify-content:end;align-items:center;height:80px;background-color:#6a1b9a}"]});let n=e;return n})();var KN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-home"]],standalone:!0,features:[ce],decls:5,vars:0,consts:[[1,"d-flex"],[1,"content-area"]],template:function(r,s){r&1&&(_(0,"div",0),Q(1,"app-sidebar"),_(2,"div",1),Q(3,"app-appbar")(4,"router-outlet"),w()())},dependencies:[le,Nm,iu,GN],styles:[".content-area[_ngcontent-%COMP%]{flex-grow:1}"]});let n=e;return n})();var QN=(()=>{let e=class e{constructor(i){this.http=i,this.apiUrl="https://api.pexels.com/v1/curated/"}getVideos(i){let r={Authorization:"piJBFBmlVPzcKe6VY43bsWlOqJ7M58uTEpCNmhBmHVWa48o96ChjR0jG"};return this.http.get(this.apiUrl,{headers:r})}};e.\u0275fac=function(r){return new(r||e)(k(Z_))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function X6(n,e){n&1&&(_(0,"div",4)(1,"div",5)(2,"span",6),I(3,"Loading..."),w()()())}function Z6(n,e){if(n&1&&(_(0,"div",7)(1,"div",8),Q(2,"img",9),_(3,"div",10)(4,"h5",11),I(5),w(),_(6,"p",12),I(7,"Some quick example text to build on the card title and make up the bulk of the card's content."),w(),_(8,"a",13),I(9,"Photographer link"),w()()()()),n&2){let t=e.$implicit;U(2),nr("src",t.src.original,kr),nr("alt",t.alt),U(3),Fe(t.photographer),U(3),nr("href",t.photographer_url,kr)}}var YN=(()=>{let e=class e{constructor(i){this.videoService=i,this.spinner=!0,this.photos=[]}ngOnInit(){setTimeout(()=>{this.videoService.getVideos("dogs").subscribe({next:i=>{this.spinner=!1,this.photos=i.photos},error:i=>{this.spinner=!1,console.error("There was an error!",i)}})},2e3)}};e.\u0275fac=function(r){return new(r||e)(G(QN))},e.\u0275cmp=ae({type:e,selectors:[["app-tutorial"]],standalone:!0,features:[ce],decls:4,vars:2,consts:[[1,"d-flex","justify-content-center","align-items-center"],["class","text-center",4,"ngIf"],[1,"photo-list"],["class","photo-item",4,"ngFor","ngForOf"],[1,"text-center"],["role","status",1,"spinner-grow"],[1,"visually-hidden"],[1,"photo-item"],[1,"card",2,"width","20rem"],[1,"card-img-top",2,"object-fit","cover","height","200px","width","100%",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["target","_blank",1,"btn","btn-primary",3,"href"]],template:function(r,s){r&1&&(_(0,"div",0),tt(1,X6,4,0,"div",1),_(2,"div",2),tt(3,Z6,10,4,"div",3),w()()),r&2&&(U(1),ve("ngIf",s.spinner),U(2),ve("ngForOf",s.photos))},dependencies:[le,pn,jr,Bf],styles:[".spinner-grow[_ngcontent-%COMP%]{width:3rem;height:3rem;color:#7b1fa2}.photo-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;overflow-y:scroll;height:100vh}.photo-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.photo-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(241,241,241,0);border-radius:6px}.photo-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#7b1fa2,#4a148c);border-radius:6px}.photo-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#9c27b0,#6a1b9a)}.photo-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{margin:20px}.photo-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;height:auto}"]});let n=e;return n})();var XN=(()=>{let e=class e{transform(i,r){return i?r?(r=r.toLowerCase(),i.filter(s=>JSON.stringify(s).toLowerCase().includes(r))):i:null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Xv({name:"search",type:e,pure:!0,standalone:!0});let n=e;return n})();var ji=(()=>{let e=class e{constructor(){}setCurrentRowData(i){this.currentRowData=i}getCurrentRowData(){return this.currentRowData}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function J6(n,e){n&1&&(_(0,"td",12),Q(1,"i",13),w())}function eG(n,e){n&1&&(_(0,"td",12),Q(1,"i",14),w())}function tG(n,e){n&1&&(_(0,"td",12),Q(1,"i",15),w())}function nG(n,e){if(n&1){let t=tr();_(0,"tr",9),je("click",function(){let s=Zi(t).$implicit,o=fn();return Ji(o.openDetailPage(s))}),_(1,"th",10),I(2),w(),_(3,"td"),I(4),w(),_(5,"td"),I(6),w(),_(7,"td"),I(8),w(),_(9,"td"),I(10),w(),tt(11,J6,2,0,"td",11)(12,eG,2,0,"td",11)(13,tG,2,0,"td",11),w()}if(n&2){let t=e.$implicit;U(2),ti("#",t.id,""),U(2),Fe(t.customerName),U(2),Fe(t.customerEmail),U(2),Fe(t.title),U(2),Fe(t.description),U(1),ve("ngIf",t.status==="open"),U(1),ve("ngIf",t.status==="closed"),U(1),ve("ngIf",t.status==="processing")}}var ZN=(()=>{let e=class e{constructor(i,r){this.router=i,this.dataService=r,this.tableData=[{id:1,customerName:"Mark",customerEmail:"mark@gmail.com",title:"New Ticket 3",description:"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",status:"open",messages:[{id:1,customerName:"Mark",customerEmail:"mark@gmail.com",user:"admin"},{id:2,customerName:"Mark",customerEmail:"mark@gmail.com",user:"user"},{id:3,customerName:"Mark",customerEmail:"",user:"admin"},{id:4,customerName:"Mark",customerEmail:"mark@gmail.com",user:"admin"},{id:5,customerName:"Mark",customerEmail:"mark@gmail.com",user:"user"},{id:6,customerName:"Mark",customerEmail:"",user:"admin"}]},{id:2,customerName:"Paul",customerEmail:"paul@gmail.com",title:"New ticket 2",description:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",status:"closed"},{id:3,customerName:"Claire",customerEmail:"claire@gmail.com",title:"New ticket 3",description:"ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",status:"processing"},{id:4,customerName:"Paul",customerEmail:"paul@gmail.com",title:"New ticket 2",description:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",status:"closed"},{id:5,customerName:"Claire",customerEmail:"claire@gmail.com",title:"New ticket 3",description:"ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",status:"processing"},{id:6,customerName:"Paul",customerEmail:"paul@gmail.com",title:"New ticket 2",description:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",status:"closed"},{id:7,customerName:"Claire",customerEmail:"claire@gmail.com",title:"New ticket 3",description:"ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",status:"processing"},{id:8,customerName:"Paul",customerEmail:"paul@gmail.com",title:"New ticket 2",description:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",status:"closed"},{id:9,customerName:"Claire",customerEmail:"claire@gmail.com",title:"New ticket 3",description:"ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",status:"processing"},{id:10,customerName:"Paul",customerEmail:"paul@gmail.com",title:"New ticket 2",description:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",status:"closed"},{id:11,customerName:"Claire",customerEmail:"claire@gmail.com",title:"New ticket 3",description:"ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",status:"processing"},{id:12,customerName:"Paul",customerEmail:"paul@gmail.com",title:"New ticket 2",description:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",status:"closed"},{id:13,customerName:"Claire",customerEmail:"claire@gmail.com",title:"New ticket 3",description:"ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",status:"processing"},{id:14,customerName:"Paul",customerEmail:"paul@gmail.com",title:"New ticket 2",description:"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb",status:"closed"},{id:15,customerName:"Claire",customerEmail:"claire@gmail.com",title:"New ticket 3",description:"ccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc",status:"processing"}],this.searchText=""}openDetailPage(i){this.dataService.setCurrentRowData(i),this.router.navigate(["/home/ticketing/"+i.id])}};e.\u0275fac=function(r){return new(r||e)(G(Ft),G(ji))},e.\u0275cmp=ae({type:e,selectors:[["app-ticketing"]],standalone:!0,features:[ce],decls:24,vars:5,consts:[[1,"d-flex","p-5","flex-column","justify-content-center","align-items-center"],[1,"d-flex","justify-content-end"],[1,"m-3"],["for","search",1,"form-label"],["id","search","type","text","placeholder","","aria-label","default input example",1,"form-control",3,"ngModel","ngModelChange"],[1,"table","m-4"],["scope","col"],[1,"table-group-divider"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["scope","row"],["style","color: rebeccapurple",4,"ngIf"],[2,"color","rebeccapurple"],[1,"bi","bi-circle"],[1,"bi","bi-circle-fill"],[1,"bi","bi-circle-half"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),I(4,"Search"),w(),_(5,"input",4),je("ngModelChange",function(a){return s.searchText=a}),w()()(),_(6,"table",5)(7,"thead")(8,"tr")(9,"th",6),I(10,"id"),w(),_(11,"th",6),I(12,"Name"),w(),_(13,"th",6),I(14,"Email"),w(),_(15,"th",6),I(16,"Title"),w(),_(17,"th",6),I(18,"Description"),w(),_(19,"th",6),I(20,"Status"),w()()(),_(21,"tbody",7),tt(22,nG,14,8,"tr",8),fA(23,"search"),w()()()),r&2&&(U(5),ve("ngModel",s.searchText),U(17),ve("ngForOf",pA(23,2,s.tableData,s.searchText)))},dependencies:[le,pn,jr,Za,Gr,Xa,po,XN]});let n=e;return n})();var JN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-admin"]],standalone:!0,features:[ce],decls:23,vars:0,consts:[[1,"container","text-center","vh-100"],[1,"mt-5"],[1,"row"],[1,"col-sm-6","mb-3","mb-sm-0"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["routerLink","user-management",1,"btn","btn-primary"],[1,"col-sm-6"],["routerLink","challenge-management",1,"btn","btn-primary"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"h1"),I(2,"Pannello amministrativo"),w(),_(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"h5",6),I(9,"Gestione Utenti"),w(),_(10,"p",7),I(11,"With supporting text below as a natural lead-in to additional content."),w(),_(12,"a",8),I(13,"Gestisci"),w()()()(),_(14,"div",9)(15,"div",4)(16,"div",5)(17,"h5",6),I(18,"Gestione Challenges"),w(),_(19,"p",7),I(20,"With supporting text below as a natural lead-in to additional content."),w(),_(21,"a",10),I(22,"Gestisci"),w()()()()()()())},dependencies:[le,Ci]});let n=e;return n})();function Vd(n){return n+.5|0}var vs=(n,e,t)=>Math.max(Math.min(n,t),e);function Fd(n){return vs(Vd(n*2.55),0,255)}function _s(n){return vs(Vd(n*255),0,255)}function gr(n){return vs(Vd(n/2.55)/100,0,1)}function eF(n){return vs(Vd(n*100),0,100)}var qn={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},MD=[..."0123456789ABCDEF"],iG=n=>MD[n&15],rG=n=>MD[(n&240)>>4]+MD[n&15],Fm=n=>(n&240)>>4===(n&15),sG=n=>Fm(n.r)&&Fm(n.g)&&Fm(n.b)&&Fm(n.a);function oG(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&qn[n[1]]*17,g:255&qn[n[2]]*17,b:255&qn[n[3]]*17,a:e===5?qn[n[4]]*17:255}:(e===7||e===9)&&(t={r:qn[n[1]]<<4|qn[n[2]],g:qn[n[3]]<<4|qn[n[4]],b:qn[n[5]]<<4|qn[n[6]],a:e===9?qn[n[7]]<<4|qn[n[8]]:255})),t}var aG=(n,e)=>n<255?e(n):"";function cG(n){var e=sG(n)?iG:rG;return n?"#"+e(n.r)+e(n.g)+e(n.b)+aG(n.a,e):void 0}var lG=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function rF(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function uG(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function dG(n,e,t){let i=rF(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function hG(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function PD(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,c,l,u;return s!==o&&(u=s-o,l=a>.5?u/(2-s-o):u/(s+o),c=hG(t,i,r,u,s),c=c*60+.5),[c|0,l||0,a]}function RD(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(_s)}function kD(n,e,t){return RD(rF,n,e,t)}function fG(n,e,t){return RD(dG,n,e,t)}function pG(n,e,t){return RD(uG,n,e,t)}function sF(n){return(n%360+360)%360}function gG(n){let e=lG.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Fd(+e[5]):_s(+e[5]));let r=sF(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=fG(r,s,o):e[1]==="hsv"?i=pG(r,s,o):i=kD(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function mG(n,e){var t=PD(n);t[0]=sF(t[0]+e),t=kD(t),n.r=t[0],n.g=t[1],n.b=t[2]}function yG(n){if(!n)return;let e=PD(n),t=e[0],i=eF(e[1]),r=eF(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${gr(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var tF={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},nF={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function vG(){let n={},e=Object.keys(nF),t=Object.keys(tF),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,tF[s]);s=parseInt(nF[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Lm;function _G(n){Lm||(Lm=vG(),Lm.transparent=[0,0,0,0]);let e=Lm[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var bG=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function wG(n){let e=bG.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?Fd(o):vs(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Fd(i):vs(i,0,255)),r=255&(e[4]?Fd(r):vs(r,0,255)),s=255&(e[6]?Fd(s):vs(s,0,255)),{r:i,g:r,b:s,a:t}}}function EG(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${gr(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var AD=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Gc=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function CG(n,e,t){let i=Gc(gr(n.r)),r=Gc(gr(n.g)),s=Gc(gr(n.b));return{r:_s(AD(i+t*(Gc(gr(e.r))-i))),g:_s(AD(r+t*(Gc(gr(e.g))-r))),b:_s(AD(s+t*(Gc(gr(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Vm(n,e,t){if(n){let i=PD(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=kD(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function oF(n,e){return n&&Object.assign(e||{},n)}function iF(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=_s(n[3]))):(e=oF(n,{r:0,g:0,b:0,a:1}),e.a=_s(e.a)),e}function DG(n){return n.charAt(0)==="r"?wG(n):gG(n)}var Ld=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=iF(e):t==="string"&&(i=oG(e)||_G(e)||DG(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=oF(this._rgb);return e&&(e.a=gr(e.a)),e}set rgb(e){this._rgb=iF(e)}rgbString(){return this._valid?EG(this._rgb):void 0}hexString(){return this._valid?cG(this._rgb):void 0}hslString(){return this._valid?yG(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=CG(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=_s(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Vd(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Vm(this._rgb,2,e),this}darken(e){return Vm(this._rgb,2,-e),this}saturate(e){return Vm(this._rgb,1,e),this}desaturate(e){return Vm(this._rgb,1,-e),this}rotate(e){return mG(this._rgb,e),this}};function $i(){}var yF=(()=>{let n=0;return()=>n++})();function Se(n){return n===null||typeof n>"u"}function He(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ee(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function it(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function vn(n,e){return it(n)?n:e}function de(n,e){return typeof n>"u"?e:n}var vF=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,LD=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function $e(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ke(n,e,t,i){let r,s,o;if(He(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(Ee(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function Ud(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function $m(n){if(He(n))return n.map($m);if(Ee(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=$m(n[t[r]]);return e}return n}function _F(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function IG(n,e,t,i){if(!_F(n))return;let r=e[n],s=t[n];Ee(r)&&Ee(s)?Qc(r,s,i):e[n]=$m(s)}function Qc(n,e,t){let i=He(e)?e:[e],r=i.length;if(!Ee(n))return n;t=t||{};let s=t.merger||IG,o;for(let a=0;a<r;++a){if(o=i[a],!Ee(o))continue;let c=Object.keys(o);for(let l=0,u=c.length;l<u;++l)s(c[l],n,o,t)}return n}function Xc(n,e){return Qc(n,e,{merger:SG})}function SG(n,e,t){if(!_F(n))return;let i=e[n],r=t[n];Ee(i)&&Ee(r)?Xc(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=$m(r))}var aF={"":n=>n,x:n=>n.x,y:n=>n.y};function TG(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function xG(n){let e=TG(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function vr(n,e){return(aF[e]||(aF[e]=xG(e)))(n)}function Wm(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Zc=n=>typeof n<"u",mr=n=>typeof n=="function",VD=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function bF(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var qe=Math.PI,We=2*qe,AG=We+qe,zm=Number.POSITIVE_INFINITY,MG=qe/180,ct=qe/2,Ko=qe/4,cF=qe*2/3,yr=Math.log10,di=Math.sign;function Jc(n,e,t){return Math.abs(n-e)<t}function jD(n){let e=Math.round(n);n=Jc(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(yr(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function wF(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function Xo(n){return!isNaN(parseFloat(n))&&isFinite(n)}function EF(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function BD(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Wn(n){return n*(qe/180)}function Gm(n){return n*(180/qe)}function UD(n){if(!it(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function $D(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*qe&&(s+=We),{angle:s,distance:r}}function Hm(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function PG(n,e){return(n-e+AG)%We-qe}function yn(n){return(n%We+We)%We}function el(n,e,t,i){let r=yn(n),s=yn(e),o=yn(t),a=yn(s-r),c=yn(o-r),l=yn(r-s),u=yn(r-o);return r===s||r===o||i&&s===o||a>c&&l<u}function St(n,e,t){return Math.max(e,Math.min(t,n))}function CF(n){return St(n,-32768,32767)}function zi(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function Km(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var Bi=(n,e,t,i)=>Km(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),DF=(n,e,t)=>Km(n,t,i=>n[i][e]>=t);function IF(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var SF=["push","pop","shift","splice","unshift"];function TF(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),SF.forEach(t=>{let i="_onData"+Wm(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function zD(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(SF.forEach(s=>{delete n[s]}),delete n._chartjs)}function HD(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var qD=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function WD(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,qD.call(window,()=>{i=!1,n.apply(e,t)}))}}function xF(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var Qm=n=>n==="start"?"left":n==="end"?"right":"center",Bt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,AF=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function GD(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,_parsed:a}=n,c=o.axis,{min:l,max:u,minDefined:d,maxDefined:h}=o.getUserBounds();d&&(r=St(Math.min(Bi(a,c,l).lo,t?i:Bi(e,c,o.getPixelForValue(l)).lo),0,i-1)),h?s=St(Math.max(Bi(a,o.axis,u,!0).hi+1,t?0:Bi(e,c,o.getPixelForValue(u),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function KD(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var jm=n=>n===0||n===1,lF=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*We/t)),uF=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*We/t)+1,Kc={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ct)+1,easeOutSine:n=>Math.sin(n*ct),easeInOutSine:n=>-.5*(Math.cos(qe*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>jm(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>jm(n)?n:lF(n,.075,.3),easeOutElastic:n=>jm(n)?n:uF(n,.075,.3),easeInOutElastic(n){return jm(n)?n:n<.5?.5*lF(n*2,.1125,.45):.5+.5*uF(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Kc.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Kc.easeInBounce(n*2)*.5:Kc.easeOutBounce(n*2-1)*.5+.5};function QD(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function YD(n){return QD(n)?n:new Ld(n)}function OD(n){return QD(n)?n:new Ld(n).saturate(.5).darken(.1).hexString()}var RG=["x","y","borderWidth","radius","tension"],kG=["color","borderColor","backgroundColor"];function OG(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:kG},numbers:{type:"number",properties:RG}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function NG(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var dF=new Map;function FG(n,e){e=e||{};let t=n+JSON.stringify(e),i=dF.get(t);return i||(i=new Intl.NumberFormat(n,e),dF.set(t,i)),i}function tl(n,e,t){return FG(e,t).format(n)}var MF={values(n){return He(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=LG(n,t)}let o=yr(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),tl(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(yr(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?MF.numeric.call(this,n,e,t):""}};function LG(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var $d={formatters:MF};function VG(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$d.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var ws=Object.create(null),Ym=Object.create(null);function jd(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function ND(n,e,t){return typeof e=="string"?Qc(jd(n,e),t):Qc(jd(n,""),e)}var FD=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>OD(r.backgroundColor),this.hoverBorderColor=(i,r)=>OD(r.borderColor),this.hoverColor=(i,r)=>OD(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return ND(this,e,t)}get(e){return jd(this,e)}describe(e,t){return ND(Ym,e,t)}override(e,t){return ND(ws,e,t)}route(e,t,i,r){let s=jd(this,e),o=jd(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[r];return Ee(c)?Object.assign({},l,c):de(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},rt=new FD({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[OG,NG,VG]);function jG(n){return!n||Se(n.size)||Se(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Bd(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function PF(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,u,d,h;for(c=0;c<a;c++)if(d=t[c],d!=null&&!He(d))o=Bd(n,r,s,o,d);else if(He(d))for(l=0,u=d.length;l<u;l++)h=d[l],h!=null&&!He(h)&&(o=Bd(n,r,s,o,h));n.restore();let f=s.length/2;if(f>t.length){for(c=0;c<f;c++)delete r[s[c]];s.splice(0,f)}return o}function Es(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function XD(n,e){e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function Xm(n,e,t,i){ZD(n,e,t,i,null)}function ZD(n,e,t,i,r){let s,o,a,c,l,u,d,h,f=e.pointStyle,p=e.rotation,g=e.radius,m=(p||0)*MG;if(f&&typeof f=="object"&&(s=f.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(m),n.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),n.restore();return}if(!(isNaN(g)||g<=0)){switch(n.beginPath(),f){default:r?n.ellipse(t,i,r/2,g,0,0,We):n.arc(t,i,g,0,We),n.closePath();break;case"triangle":u=r?r/2:g,n.moveTo(t+Math.sin(m)*u,i-Math.cos(m)*g),m+=cF,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*g),m+=cF,n.lineTo(t+Math.sin(m)*u,i-Math.cos(m)*g),n.closePath();break;case"rectRounded":l=g*.516,c=g-l,o=Math.cos(m+Ko)*c,d=Math.cos(m+Ko)*(r?r/2-l:c),a=Math.sin(m+Ko)*c,h=Math.sin(m+Ko)*(r?r/2-l:c),n.arc(t-d,i-a,l,m-qe,m-ct),n.arc(t+h,i-o,l,m-ct,m),n.arc(t+d,i+a,l,m,m+ct),n.arc(t-h,i+o,l,m+ct,m+qe),n.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*g,u=r?r/2:c,n.rect(t-u,i-c,2*u,2*c);break}m+=Ko;case"rectRot":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),n.moveTo(t-d,i-a),n.lineTo(t+h,i-o),n.lineTo(t+d,i+a),n.lineTo(t-h,i+o),n.closePath();break;case"crossRot":m+=Ko;case"cross":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"star":d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o),m+=Ko,d=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,h=Math.sin(m)*(r?r/2:g),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+h,i-o),n.lineTo(t-h,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Ui(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function zd(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Hd(n){n.restore()}function RF(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function kF(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function BG(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Se(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function UG(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,u=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,u),n.lineTo(a,u),n.stroke()}}function $G(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Cs(n,e,t,i,r,s={}){let o=He(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=r.string,BG(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&$G(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Se(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,i,s.maxWidth)),n.fillText(l,t,i,s.maxWidth),UG(n,t,i,l,s),i+=Number(r.lineHeight);n.restore()}function nl(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*qe,qe,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,qe,ct,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,ct,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-ct,!0),n.lineTo(t+o.topLeft,i)}var zG=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,HG=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function qG(n,e){let t=(""+n).match(zG);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var WG=n=>+n||0;function Zm(n,e){let t={},i=Ee(e),r=i?Object.keys(e):e,s=Ee(n)?i?o=>de(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=WG(s(o));return t}function JD(n){return Zm(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ds(n){return Zm(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ut(n){let e=JD(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Et(n,e){n=n||{},e=e||rt.font;let t=de(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=de(n.style,e.style);i&&!(""+i).match(HG)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:de(n.family,e.family),lineHeight:qG(de(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:de(n.weight,e.weight),string:""};return r.string=jG(r),r}function il(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&He(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function OF(n,e,t){let{min:i,max:r}=n,s=LD(e,(r-i)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function _r(n,e){return Object.assign(Object.create(n),e)}function Jm(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=LF("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Jm([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return NF(a,c,()=>e8(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return fF(a).includes(c)},ownKeys(a){return fF(a)},set(a,c,l){let u=a._storage||(a._storage=r());return a[c]=u[c]=l,delete a._keys,!0}})}function Yo(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:eI(n,i),setContext:s=>Yo(n,s,t,i),override:s=>Yo(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return NF(s,o,()=>KG(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function eI(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:mr(t)?t:()=>t,isIndexable:mr(i)?i:()=>i}}var GG=(n,e)=>n?n+Wm(e):e,tI=(n,e)=>Ee(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function NF(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];let i=t();return n[e]=i,i}function KG(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return mr(a)&&o.isScriptable(e)&&(a=QG(e,a,n,t)),He(a)&&a.length&&(a=YG(e,a,n,o.isIndexable)),tI(e,a)&&(a=Yo(a,r,s&&s[e],o)),a}function QG(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||i);return a.delete(n),tI(n,c)&&(c=nI(r._scopes,r,n,c)),c}function YG(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(Ee(e[0])){let c=e,l=r._scopes.filter(u=>u!==c);e=[];for(let u of c){let d=nI(l,r,n,u);e.push(Yo(d,s,o&&o[n],a))}}return e}function FF(n,e,t){return mr(n)?n(e,t):n}var XG=(n,e)=>n===!0?e:typeof n=="string"?vr(e,n):void 0;function ZG(n,e,t,i,r){for(let s of e){let o=XG(t,s);if(o){n.add(o);let a=FF(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function nI(n,e,t,i){let r=e._rootScopes,s=FF(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let c=hF(a,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=hF(a,o,s,c,i),c===null)?!1:Jm(Array.from(a),[""],r,s,()=>JG(e,t,i))}function hF(n,e,t,i,r){for(;t;)t=ZG(n,e,t,i,r);return t}function JG(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return He(r)&&Ee(t)?t:r||{}}function e8(n,e,t,i){let r;for(let s of e)if(r=LF(GG(s,n),t),typeof r<"u")return tI(n,r)?nI(t,i,n,r):r}function LF(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function fF(n){let e=n._keys;return e||(e=n._keys=t8(n._scopes)),e}function t8(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function iI(n,e,t,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,c,l,u;for(a=0,c=i;a<c;++a)l=a+t,u=e[l],o[a]={r:r.parse(vr(u,s),l)};return o}var n8=Number.EPSILON||1e-14,Yc=(n,e)=>e<n.length&&!n[e].skip&&n[e],VF=n=>n==="x"?"y":"x";function i8(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=Hm(s,r),c=Hm(o,s),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let d=i*l,h=i*u;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function r8(n,e,t){let i=n.length,r,s,o,a,c,l=Yc(n,0);for(let u=0;u<i-1;++u)if(c=l,l=Yc(n,u+1),!(!c||!l)){if(Jc(e[u],0,n8)){t[u]=t[u+1]=0;continue}r=t[u]/e[u],s=t[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[u]=r*o*e[u],t[u+1]=s*o*e[u])}}function s8(n,e,t="x"){let i=VF(t),r=n.length,s,o,a,c=Yc(n,0);for(let l=0;l<r;++l){if(o=a,a=c,c=Yc(n,l+1),!a)continue;let u=a[t],d=a[i];o&&(s=(u-o[t])/3,a[`cp1${t}`]=u-s,a[`cp1${i}`]=d-s*e[l]),c&&(s=(c[t]-u)/3,a[`cp2${t}`]=u+s,a[`cp2${i}`]=d+s*e[l])}}function o8(n,e="x"){let t=VF(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,c,l=Yc(n,0);for(o=0;o<i;++o)if(a=c,c=l,l=Yc(n,o+1),!!c){if(l){let u=l[e]-c[e];r[o]=u!==0?(l[t]-c[t])/u:0}s[o]=a?l?di(r[o-1])!==di(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}r8(n,r,s),s8(n,s,e)}function Bm(n,e,t){return Math.max(Math.min(n,t),e)}function a8(n,e){let t,i,r,s,o,a=Ui(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&Ui(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=Bm(r.cp1x,e.left,e.right),r.cp1y=Bm(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Bm(r.cp2x,e.left,e.right),r.cp2y=Bm(r.cp2y,e.top,e.bottom)))}function jF(n,e,t,i,r){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")o8(n,r);else{let l=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=i8(l,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&a8(n,t)}function rI(){return typeof window<"u"&&typeof document<"u"}function ey(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function qm(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var ty=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function c8(n,e){return ty(n).getPropertyValue(e)}var l8=["top","right","bottom","left"];function Qo(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=l8[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var u8=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function d8(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(u8(r,s,n.target))a=r,c=s;else{let l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function Is(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=ty(t),s=r.boxSizing==="border-box",o=Qo(r,"padding"),a=Qo(r,"border","width"),{x:c,y:l,box:u}=d8(n,t),d=o.left+(u&&a.left),h=o.top+(u&&a.top),{width:f,height:p}=e;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((c-d)/f*t.width/i),y:Math.round((l-h)/p*t.height/i)}}function h8(n,e,t){let i,r;if(e===void 0||t===void 0){let s=ey(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=ty(s),c=Qo(a,"border","width"),l=Qo(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,i=qm(a.maxWidth,s,"clientWidth"),r=qm(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||zm,maxHeight:r||zm}}var Um=n=>Math.round(n*10)/10;function BF(n,e,t,i){let r=ty(n),s=Qo(r,"margin"),o=qm(r.maxWidth,n,"clientWidth")||zm,a=qm(r.maxHeight,n,"clientHeight")||zm,c=h8(n,e,t),{width:l,height:u}=c;if(r.boxSizing==="content-box"){let h=Qo(r,"border","width"),f=Qo(r,"padding");l-=f.width+h.width,u-=f.height+h.height}return l=Math.max(0,l-s.width),u=Math.max(0,i?l/i:u-s.height),l=Um(Math.min(l,o,c.maxWidth)),u=Um(Math.min(u,a,c.maxHeight)),l&&!u&&(u=Um(l/2)),(e!==void 0||t!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,l=Um(Math.floor(u*i))),{width:l,height:u}}function sI(n,e,t){let i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var UF=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function oI(n,e){let t=c8(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function bs(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function $F(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function zF(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=bs(n,r,t),a=bs(r,s,t),c=bs(s,e,t),l=bs(o,a,t),u=bs(a,c,t);return bs(l,u,t)}var f8=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},p8=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Zo(n,e,t){return n?f8(e,t):p8()}function aI(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function cI(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function HF(n){return n==="angle"?{between:el,compare:PG,normalize:yn}:{between:zi,compare:(e,t)=>e-t,normalize:e=>e}}function pF({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function g8(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=HF(i),c=e.length,{start:l,end:u,loop:d}=n,h,f;if(d){for(l+=c,u+=c,h=0,f=c;h<f&&o(a(e[l%c][i]),r,s);++h)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:d,style:n.style}}function lI(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=HF(i),{start:u,end:d,loop:h,style:f}=g8(n,e,t),p=[],g=!1,m=null,y,v,b,E=()=>c(r,b,y)&&a(r,b)!==0,C=()=>a(s,y)===0||c(s,b,y),D=()=>g||E(),A=()=>!g||C();for(let M=u,B=u;M<=d;++M)v=e[M%o],!v.skip&&(y=l(v[i]),y!==b&&(g=c(y,r,s),m===null&&D()&&(m=a(y,r)===0?M:B),m!==null&&A()&&(p.push(pF({start:m,end:M,loop:h,count:o,style:f})),m=null),B=M,b=y));return m!==null&&p.push(pF({start:m,end:d,loop:h,count:o,style:f})),p}function uI(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=lI(i[r],n.points,e);s.length&&t.push(...s)}return t}function m8(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function y8(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%r];l.skip||l.stop?a.skip||(i=!1,s.push({start:e%r,end:(c-1)%r,loop:i}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function qF(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=m8(t,r,s,i);if(i===!0)return gF(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+r:a,l=!!n._fullLoop&&o===0&&a===r-1;return gF(n,y8(t,o,c,l),t,e)}function gF(n,e,t,i){return!i||!i.setContext||!t?e:v8(n,e,t,i)}function v8(n,e,t,i){let r=n._chart.getContext(),s=mF(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],u=s,d=e[0].start,h=d;function f(p,g,m,y){let v=a?-1:1;if(p!==g){for(p+=c;t[p%c].skip;)p-=v;for(;t[g%c].skip;)g+=v;p%c!==g%c&&(l.push({start:p%c,end:g%c,loop:m,style:y}),u=y,d=g%c)}}for(let p of e){d=a?d:p.start;let g=t[d%c],m;for(h=d+1;h<=p.end;h++){let y=t[h%c];m=mF(i.setContext(_r(r,{type:"segment",p0:g,p1:y,p0DataIndex:(h-1)%c,p1DataIndex:h%c,datasetIndex:o}))),_8(m,u)&&f(d,h-1,p.loop,u),g=y,u=m}d<h-1&&f(d,h-1,p.loop,u)}return l}function mF(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function _8(n,e){if(!e)return!1;let t=[],i=function(r,s){return QD(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}var bI=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=qD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},br=new bI,WF="transparent",b8={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=YD(n||WF),r=i.valid&&YD(e||WF);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},wI=class{constructor(e,t,i,r){let s=t[i];r=il([e.to,r,s,e.from]);let o=il([e.from,s,r]);this._active=!0,this._fn=e.fn||b8[e.type||typeof o],this._easing=Kc[e.easing]||Kc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=il([e.to,t,r,e.from]),this._from=il([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},dy=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ee(e))return;let t=Object.keys(rt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!Ee(s))return;let o={};for(let a of t)o[a]=s[a];(He(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=E8(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&w8(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let u=t[l],d=s[l],h=i.get(l);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[l]=u;continue}s[l]=d=new wI(h,e,l,u),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return br.add(this._chart,i),!0}};function w8(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function E8(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function GF(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function C8(n,e,t){if(t===!1)return!1;let i=GF(n,t),r=GF(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function D8(n){let e,t,i,r;return Ee(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function GL(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function KF(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,c,l;if(e!==null){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(i.all)continue;break}l=n.values[c],it(l)&&(s||e===0||di(e)===di(l))&&(e+=l)}return e}}function I8(n){let e=Object.keys(n),t=new Array(e.length),i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],t[i]={x:s,y:n[s]};return t}function QF(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function S8(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function T8(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function x8(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function YF(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function XF(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,u=S8(s,o,i),d=e.length,h;for(let f=0;f<d;++f){let p=e[f],{[c]:g,[l]:m}=p,y=p._stacks||(p._stacks={});h=y[l]=x8(r,u,g),h[a]=m,h._top=YF(h,o,!0,i.type),h._bottom=YF(h,o,!1,i.type);let v=h._visualValues||(h._visualValues={});v[a]=m}}function dI(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function A8(n,e){return _r(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function M8(n,e,t){return _r(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function qd(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var hI=n=>n==="reset"||n==="none",ZF=(n,e)=>e?n:Object.assign({},n),P8=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:GL(t,!0),values:null},Ts=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=QF(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&qd(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(h,f,p,g)=>h==="x"?f:h==="r"?g:p,o=i.xAxisID=de(r.xAxisID,dI(t,"x")),a=i.yAxisID=de(r.yAxisID,dI(t,"y")),c=i.rAxisID=de(r.rAxisID,dI(t,"r")),l=i.indexAxis,u=i.iAxisID=s(l,o,a,c),d=i.vAxisID=s(l,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&zD(this._data,this),t._stacked&&qd(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(Ee(i))this._data=I8(i);else if(r!==i){if(r){zD(r,this);let s=this._cachedMeta;qd(s),s._parsed=[]}i&&Object.isExtensible(i)&&TF(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=QF(i.vScale,i),i.stack!==r.stack&&(s=!0,qd(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&XF(this,i._parsed)}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,l=t===0&&i===s.length?!0:r._sorted,u=t>0&&r._parsed[t-1],d,h,f;if(this._parsing===!1)r._parsed=s,r._sorted=!0,f=s;else{He(s[t])?f=this.parseArrayData(r,s,t,i):Ee(s[t])?f=this.parseObjectData(r,s,t,i):f=this.parsePrimitiveData(r,s,t,i);let p=()=>h[c]===null||u&&h[c]<u[c];for(d=0;d<i;++d)r._parsed[d+t]=h=f[d],l&&(p()&&(l=!1),u=h);r._sorted=l}a&&XF(this,f)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,u=o.getLabels(),d=o===a,h=new Array(s),f,p,g;for(f=0,p=s;f<p;++f)g=f+r,h[f]={[c]:d||o.parse(u[g],g),[l]:a.parse(i[g],g)};return h}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,u,d,h;for(l=0,u=s;l<u;++l)d=l+r,h=i[d],c[l]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return c}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(s),d,h,f,p;for(d=0,h=s;d<h;++d)f=d+r,p=i[f],u[d]={x:o.parse(vr(p,c),f),y:a.parse(vr(p,l),f)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],c={keys:GL(s,!0),values:i._stacks[t.axis]._visualValues};return KF(c,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=KF(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,c=this._getOtherScale(t),l=P8(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=T8(c),f,p;function g(){p=s[f];let m=p[c.axis];return!it(p[t.axis])||d>m||h<m}for(f=0;f<a&&!(!g()&&(this.updateRangeFromParsed(u,t,p,l),o));++f);if(o){for(f=a-1;f>=0;--f)if(!g()){this.updateRangeFromParsed(u,t,p,l);break}}return u}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],it(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=D8(de(this.options.clip,C8(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(t,o,c,l),d=c;d<c+l;++d){let h=s[d];h.hidden||(h.active&&u?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=M8(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=A8(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,c=o[a],l=this.enableOptionSharing&&Zc(r);if(c)return ZF(c,l);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,t),h=s?[`${t}Hover`,"hover",t,""]:[t,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys(rt.elements[t]),g=()=>this.getContext(r,s,i),m=u.resolveNamedOptions(f,p,g,h);return m.$shared&&(m.$shared=l,o[a]=Object.freeze(ZF(m,l))),m}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),f=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(f,this.getContext(t,r,i))}let u=new dy(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||hI(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){hI(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!hI(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,c,l=u=>{for(u.length+=i,c=u.length-1;c>=a;c--)u[c]=u[c-i]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&qd(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function R8(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=HD(i.sort((r,s)=>r-s))}return n._cache.$bar}function k8(n){let e=n.iScale,t=R8(e,n.type),i=e._length,r,s,o,a,c=()=>{o===32767||o===-32768||(Zc(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),c();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),c();return i}function O8(n,e,t,i){let r=t.barThickness,s,o;return Se(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function N8(n,e,t,i){let r=e.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:t.barPercentage,start:l}}function F8(n,e,t,i){let r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}function KL(n,e,t,i){return He(n)?F8(n,e,t,i):e[t.axis]=t.parse(n,i),e}function JF(n,e,t,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,c=[],l,u,d,h;for(l=t,u=t+i;l<u;++l)h=e[l],d={},d[r.axis]=a||r.parse(o[l],l),c.push(KL(h,d,s,l));return c}function fI(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function L8(n,e,t){return n!==0?di(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function V8(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function j8(n,e,t,i){let r=e.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:u}=V8(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=l:(t._bottom||0)===i?r=u:(s[eL(u,o,a,c)]=!0,r=l)),s[eL(r,o,a,c)]=!0,n.borderSkipped=s}function eL(n,e,t,i){return i?(n=B8(n,e,t),n=tL(n,t,e)):n=tL(n,e,t),n}function B8(n,e,t){return n===e?t:n===t?e:n}function tL(n,e,t){return n==="start"?e:n==="end"?t:n}function U8(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var $8=(()=>{class n extends Ts{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,s){return JF(t,i,r,s)}parseArrayData(t,i,r,s){return JF(t,i,r,s)}parseObjectData(t,i,r,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=o.axis==="x"?c:l,d=a.axis==="x"?c:l,h=[],f,p,g,m;for(f=r,p=r+s;f<p;++f)m=i[f],g={},g[o.axis]=o.parse(vr(m,u),f),h.push(KL(vr(m,d),g,a,f));return h}updateRangeFromParsed(t,i,r,s){super.updateRangeFromParsed(t,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(t),a=o._custom,c=fI(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,s);for(let p=i;p<i+r;p++){let g=this.getParsed(p),m=o||Se(g[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),v=(g._stacks||{})[c.axis],b={horizontal:u,base:m.base,enableBorderRadius:!v||fI(g._custom)||a===v._top||a===v._bottom,x:u?m.head:y.center,y:u?y.center:m.head,height:u?y.size:Math.abs(m.size),width:u?Math.abs(m.size):y.size};f&&(b.options=h||this.resolveDataElementOptions(p,t[p].active?"active":s));let E=b.options||t[p].options;j8(b,E,v,a),U8(b,E,d.ratio),this.updateElement(t[p],p,b,s)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),o=r.options.stacked,a=[],c=l=>{let u=l.controller.getParsed(i),d=u&&u[l.vScale.axis];if(Se(d)||isNaN(d))return!0};for(let l of s)if(!(i!==void 0&&c(l))&&((o===!1||a.indexOf(l.stack)===-1||o===void 0&&l.stack===void 0)&&a.push(l.stack),l.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,r){let s=this._getStacks(t,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let c=t.barThickness;return{min:c||k8(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),u=l._custom,d=fI(u),h=l[i.axis],f=0,p=r?this.applyStack(i,l,r):h,g,m;p!==h&&(f=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&di(h)!==di(u.barEnd)&&(f=0),f+=h);let y=!Se(o)&&!d?o:f,v=i.getPixelForValue(y);if(this.chart.getDataVisibility(t)?g=i.getPixelForValue(f+p):g=v,m=g-v,Math.abs(m)<a){m=L8(m,i,c)*a,h===c&&(v-=m/2);let b=i.getPixelForDecimal(0),E=i.getPixelForDecimal(1),C=Math.min(b,E),D=Math.max(b,E);v=Math.max(Math.min(v,D),C),g=v+m,r&&!d&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(g)-i.getValueForPixel(v))}if(v===i.getPixelForValue(c)){let b=di(m)*i.getLineWidthForValue(c)/2;v+=b,m-=b}return{size:m,base:v,head:g,center:g+m/2}}_calculateBarIndexPixels(t,i){let r=i.scale,s=this.options,o=s.skipNull,a=de(s.maxBarThickness,1/0),c,l;if(i.grouped){let u=o?this._getStackCount(t):i.stackCount,d=s.barThickness==="flex"?N8(t,i,s,u):O8(t,i,s,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);c=d.start+d.chunk*h+d.chunk/2,l=Math.min(a,d.chunk*d.ratio)}else c=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,i.min*i.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&r[o].draw(this._ctx)}}return n})(),z8=(()=>{class n extends Ts{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,r,s){let o=super.parsePrimitiveData(t,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(t,i,r,s){let o=super.parseArrayData(t,i,r,s);for(let a=0;a<o.length;a++){let c=i[r+a];o[a]._custom=de(c[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(t,i,r,s){let o=super.parseObjectData(t,i,r,s);for(let a=0;a<o.length;a++){let c=i[r+a];o[a]._custom=de(c&&c.r&&+c.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let r=t.length-1;r>=0;--r)i=Math.max(i,t[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y),u=a._custom;return{label:r[t]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(i,s),d=a.axis,h=c.axis;for(let f=i;f<i+r;f++){let p=t[f],g=!o&&this.getParsed(f),m={},y=m[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(g[d]),v=m[h]=o?c.getBasePixel():c.getPixelForValue(g[h]);m.skip=isNaN(y)||isNaN(v),u&&(m.options=l||this.resolveDataElementOptions(f,p.active?"active":s),o&&(m.options.radius=0)),this.updateElement(p,f,m,s)}}resolveDataElementOptions(t,i){let r=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=de(r&&r._custom,o),s}}return n})();function H8(n,e,t){let i=1,r=1,s=0,o=0;if(e<We){let a=n,c=a+e,l=Math.cos(a),u=Math.sin(a),d=Math.cos(c),h=Math.sin(c),f=(b,E,C)=>el(b,a,c,!0)?1:Math.max(E,E*t,C,C*t),p=(b,E,C)=>el(b,a,c,!0)?-1:Math.min(E,E*t,C,C*t),g=f(0,l,d),m=f(ct,u,h),y=p(qe,l,d),v=p(qe+ct,u,h);i=(g-y)/2,r=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var UI=(()=>{class n extends Ts{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=l=>+r[l];if(Ee(r[t])){let{key:l="value"}=this._parsing;o=u=>+vr(r[u],l)}let a,c;for(a=t,c=t+i;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return Wn(this.options.rotation-90)}_getCircumference(){return Wn(this.options.circumference)}_getRotationExtents(){let t=We,i=-We;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+a)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(vF(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=H8(h,d,l),y=(r.width-a)/f,v=(r.height-a)/p,b=Math.max(Math.min(y,v)/2,0),E=LD(this.options.radius,b),C=Math.max(E*l,0),D=(E-C)/this._getVisibleDatasetWeightTotal();this.offsetX=g*E,this.offsetY=m*E,s.total=this.calculateTotal(),this.outerRadius=E-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*u,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/We)}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,d=(c.left+c.right)/2,h=(c.top+c.bottom)/2,f=o&&u.animateScale,p=f?0:this.innerRadius,g=f?0:this.outerRadius,{sharedOptions:m,includeOptions:y}=this._getSharedOptions(i,s),v=this._getRotation(),b;for(b=0;b<i;++b)v+=this._circumference(b,o);for(b=i;b<i+r;++b){let E=this._circumference(b,o),C=t[b],D={x:d+this.offsetX,y:h+this.offsetY,startAngle:v,endAngle:v+E,circumference:E,outerRadius:g,innerRadius:p};y&&(D.options=m||this.resolveDataElementOptions(b,C.active?"active":s)),v+=E,this.updateElement(C,b,D,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,r=0,s;for(s=0;s<i.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?We*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=tl(i._parsed[t],r.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0,r=this.chart,s,o,a,c,l;if(!t){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),t=a.data,c=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let r=0,s=t.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(t){return Math.max(de(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),q8=(()=>{class n extends Ts{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:c,count:l}=GD(i,s,a);this._drawStart=c,this._drawCount=l,KD(i)&&(c=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},t),this.updateElements(s,c,l,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,s),f=a.axis,p=c.axis,{spanGaps:g,segment:m}=this.options,y=Xo(g)?g:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||s==="none",b=i+r,E=t.length,C=i>0&&this.getParsed(i-1);for(let D=0;D<E;++D){let A=t[D],M=v?A:{};if(D<i||D>=b){M.skip=!0;continue}let B=this.getParsed(D),ee=Se(B[p]),se=M[f]=a.getPixelForValue(B[f],D),he=M[p]=o||ee?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,B,l):B[p],D);M.skip=isNaN(se)||isNaN(he)||ee,M.stop=D>0&&Math.abs(B[f]-C[f])>y,m&&(M.parsed=B,M.raw=u.data[D]),h&&(M.options=d||this.resolveDataElementOptions(D,A.active?"active":s)),v||this.updateElement(A,D,M,s),C=B}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),QL=(()=>{class n extends Ts{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=tl(i._parsed[t].r,r.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,r,s){return iI.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,r=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),c=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*qe,p=f,g,m=360/this.countVisibleElements();for(g=0;g<i;++g)p+=this._computeAngle(g,s,m);for(g=i;g<i+r;g++){let y=t[g],v=p,b=p+this._computeAngle(g,s,m),E=a.getDataVisibility(g)?u.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=b,o&&(l.animateScale&&(E=0),l.animateRotate&&(v=b=f));let C={x:d,y:h,innerRadius:0,outerRadius:E,startAngle:v,endAngle:b,options:this.resolveDataElementOptions(g,y.active?"active":s)};this.updateElement(y,g,C,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,r){return this.chart.getDataVisibility(t)?Wn(this.resolveDataElementOptions(t,i).angle||r):0}}return n})(),W8=(()=>{class n extends UI{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),G8=(()=>{class n extends Ts{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let i=this._cachedMeta.vScale,r=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(t,i,r,s){return iI.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,c,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let c=i;c<i+r;c++){let l=t[c],u=this.resolveDataElementOptions(c,l.active?"active":s),d=o.getPointPositionForValue(c,this.getParsed(c).r),h=a?o.xCenter:d.x,f=a?o.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(l,c,p,s)}}}return n})(),K8=(()=>{class n extends Ts{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:r[t]||"",value:"("+c+", "+l+")"}}update(t){let i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled,{start:o,count:a}=GD(i,r,s);if(this._drawStart=o,this._drawCount=a,KD(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=i;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=r;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:u},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(i,s),h=this.getSharedOptions(d),f=this.includeOptions(s,h),p=a.axis,g=c.axis,{spanGaps:m,segment:y}=this.options,v=Xo(m)?m:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||s==="none",E=i>0&&this.getParsed(i-1);for(let C=i;C<i+r;++C){let D=t[C],A=this.getParsed(C),M=b?D:{},B=Se(A[g]),ee=M[p]=a.getPixelForValue(A[p],C),se=M[g]=o||B?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,A,l):A[g],C);M.skip=isNaN(ee)||isNaN(se)||B,M.stop=C>0&&Math.abs(A[p]-E[p])>v,y&&(M.parsed=A,M.raw=u.data[C]),f&&(M.options=h||this.resolveDataElementOptions(C,D.active?"active":s)),b||this.updateElement(D,C,M,s),E=A}this.updateSharedOptions(h,s,d)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let c=0;for(let l=i.length-1;l>=0;--l)c=Math.max(c,i[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let r=t.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return n})(),Q8=Object.freeze({__proto__:null,BarController:$8,BubbleController:z8,DoughnutController:UI,LineController:q8,PieController:W8,PolarAreaController:QL,RadarController:G8,ScatterController:K8});function Jo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var EI=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Jo()}parse(){return Jo()}format(){return Jo()}add(){return Jo()}diff(){return Jo()}startOf(){return Jo()}endOf(){return Jo()}},Y8={_date:EI};function X8(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let c=a._reversePixels?DF:Bi;if(i){if(r._sharedOptions){let l=s[0],u=typeof l.getRange=="function"&&l.getRange(e);if(u){let d=c(s,e,t-u),h=c(s,e,t+u);return{lo:d.lo,hi:h.hi}}}}else return c(s,e,t)}return{lo:0,hi:s.length-1}}function th(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:u}=s[a],{lo:d,hi:h}=X8(s[a],e,o,r);for(let f=d;f<=h;++f){let p=u[f];p.skip||i(p,l,f)}}}function Z8(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function pI(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||th(n,t,e,function(a,c,l){!r&&!Ui(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function J8(n,e,t,i){let r=[];function s(o,a,c){let{startAngle:l,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:d}=$D(o,{x:e.x,y:e.y});el(d,l,u)&&r.push({element:o,datasetIndex:a,index:c})}return th(n,t,e,s),r}function e7(n,e,t,i,r,s){let o=[],a=Z8(t),c=Number.POSITIVE_INFINITY;function l(u,d,h){let f=u.inRange(e.x,e.y,r);if(i&&!f)return;let p=u.getCenterPoint(r);if(!(!!s||n.isPointInArea(p))&&!f)return;let m=a(e,p);m<c?(o=[{element:u,datasetIndex:d,index:h}],c=m):m===c&&o.push({element:u,datasetIndex:d,index:h})}return th(n,t,e,l),o}function gI(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?J8(n,e,t,r):e7(n,e,t,i,r,s)}function nL(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return th(n,t,e,(c,l,u)=>{c[o](e[t],r)&&(s.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:s}var t7={evaluateInteractionItems:th,modes:{index(n,e,t,i){let r=Is(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?pI(n,r,s,i,o):gI(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,d=l.data[u];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,i){let r=Is(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?pI(n,r,s,i,o):gI(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,i){let r=Is(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return pI(n,r,s,i,o)},nearest(n,e,t,i){let r=Is(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return gI(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=Is(e,n);return nL(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=Is(e,n);return nL(n,r,"y",t.intersect,i)}}},YL=["left","top","right","bottom"];function Wd(n,e){return n.filter(t=>t.pos===e)}function iL(n,e){return n.filter(t=>YL.indexOf(t.pos)===-1&&t.box.axis===e)}function Gd(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function n7(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function i7(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!YL.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function r7(n,e){let t=i7(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:c&&e.availableHeight)}return t}function s7(n){let e=n7(n),t=Gd(e.filter(l=>l.box.fullSize),!0),i=Gd(Wd(e,"left"),!0),r=Gd(Wd(e,"right")),s=Gd(Wd(e,"top"),!0),o=Gd(Wd(e,"bottom")),a=iL(e,"x"),c=iL(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:Wd(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function rL(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function XL(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function o7(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!Ee(r)){t.size&&(n[r]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&XL(o,s.getPadding());let a=Math.max(0,e.outerWidth-rL(o,n,"left","right")),c=Math.max(0,e.outerHeight-rL(o,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function a7(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function c7(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Yd(n,e,t,i){let r=[],s,o,a,c,l,u;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,c7(a.horizontal,e));let{same:d,other:h}=o7(e,t,a,i);l|=d&&r.length,u=u||h,c.fullSize||r.push(a)}return l&&Yd(r,e,t,i)||u}function ny(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function sL(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let d=e.w*u,h=l.size||c.height;Zc(l.start)&&(o=l.start),c.fullSize?ny(c,r.left,o,t.outerWidth-r.right-r.left,h):ny(c,e.left+l.placed,o,d,h),l.start=o,l.placed+=d,o=c.bottom}else{let d=e.h*u,h=l.size||c.width;Zc(l.start)&&(s=l.start),c.fullSize?ny(c,s,r.top,h,t.outerHeight-r.bottom-r.top):ny(c,s,e.top+l.placed,h,d),l.start=s,l.placed+=d,s=c.right}}e.x=s,e.y=o}var Xt={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=Ut(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=s7(n.boxes),c=a.vertical,l=a.horizontal;ke(n.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});let u=c.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),h=Object.assign({},r);XL(h,Ut(i));let f=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),p=r7(c.concat(l),d);Yd(a.fullSize,f,d,p),Yd(c,f,d,p),Yd(l,f,d,p)&&Yd(c,f,d,p),a7(f),sL(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,sL(a.rightAndBottom,f,d,p),n.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},ke(a.chartArea,g=>{let m=g.box;Object.assign(m,n.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},hy=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},CI=class extends hy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},ly="$chartjs",l7={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},oL=n=>n===null||n==="";function u7(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[ly]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",oL(r)){let s=oI(n,"width");s!==void 0&&(n.width=s)}if(oL(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=oI(n,"height");s!==void 0&&(n.height=s)}return n}var ZL=UF?{passive:!0}:!1;function d7(n,e,t){n.addEventListener(e,t,ZL)}function h7(n,e,t){n.canvas.removeEventListener(e,t,ZL)}function f7(n,e){let t=l7[n.type]||n.type,{x:i,y:r}=Is(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function fy(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function p7(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||fy(a.addedNodes,i),o=o&&!fy(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function g7(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||fy(a.removedNodes,i),o=o&&!fy(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var Zd=new Map,aL=0;function JL(){let n=window.devicePixelRatio;n!==aL&&(aL=n,Zd.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function m7(n,e){Zd.size||window.addEventListener("resize",JL),Zd.set(n,e)}function y7(n){Zd.delete(n),Zd.size||window.removeEventListener("resize",JL)}function v7(n,e,t){let i=n.canvas,r=i&&ey(i);if(!r)return;let s=WD((a,c)=>{let l=r.clientWidth;t(a,c),l<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||s(l,u)});return o.observe(r),m7(n,s),o}function mI(n,e,t){t&&t.disconnect(),e==="resize"&&y7(n)}function _7(n,e,t){let i=n.canvas,r=WD(s=>{n.ctx!==null&&t(f7(s,n))},n);return d7(i,e,r),r}var DI=class extends hy{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(u7(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[ly])return!1;let i=t[ly].initial;["height","width"].forEach(s=>{let o=i[s];Se(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[ly],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:p7,detach:g7,resize:v7}[t]||_7;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:mI,detach:mI,resize:mI}[t]||h7)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return BF(e,t,i,r)}isAttached(e){let t=ey(e);return!!(t&&t.isConnected)}};function b7(n){return!rI()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?CI:DI}var hi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Xo(this.x)&&Xo(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function w7(n,e){let t=n.options.ticks,i=E7(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?D7(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return I7(e,l,s,o/r),l;let u=C7(s,e,r);if(o>0){let d,h,f=o>1?Math.round((c-a)/(o-1)):null;for(iy(e,l,u,Se(f)?0:a-f,a),d=0,h=o-1;d<h;d++)iy(e,l,u,s[d],s[d+1]);return iy(e,l,u,c,Se(f)?e.length:c+f),l}return iy(e,l,u),l}function E7(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function C7(n,e,t){let i=S7(n),r=e.length/t;if(!i)return Math.max(r,1);let s=wF(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function D7(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function I7(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function iy(n,e,t,i,r){let s=de(i,0),o=Math.min(de(r,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),u=s;u<0;)a++,u=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===u&&(e.push(n[l]),a++,u=Math.round(s+a*t))}function S7(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var T7=n=>n==="left"?"right":n==="right"?"left":n,cL=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,lL=(n,e)=>Math.min(e||n,n);function uL(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function x7(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(t&&(i===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function A7(n,e){ke(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function Kd(n){return n.drawTicks?n.tickLength:0}function dL(n,e){if(!n.display)return 0;let t=Et(n.font,e),i=Ut(n.padding);return(He(n.text)?n.text.length:1)*t.lineHeight+i.height}function M7(n,e){return _r(n,{scale:e,type:"scale"})}function P7(n,e,t){return _r(n,{tick:t,index:e,type:"tick"})}function R7(n,e,t){let i=Qm(n);return(t&&e!=="right"||!t&&e==="right")&&(i=T7(i)),i}function k7(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:u}=c,d=0,h,f,p,g=o-r,m=a-s;if(n.isHorizontal()){if(f=Bt(i,s,a),Ee(t)){let y=Object.keys(t)[0],v=t[y];p=u[y].getPixelForValue(v)+g-e}else t==="center"?p=(l.bottom+l.top)/2+g-e:p=cL(n,t,e);h=a-s}else{if(Ee(t)){let y=Object.keys(t)[0],v=t[y];f=u[y].getPixelForValue(v)-m+e}else t==="center"?f=(l.left+l.right)/2-m+e:f=cL(n,t,e);p=Bt(i,o,r),d=t==="left"?-ct:ct}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var ta=class n extends hi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=vn(e,Number.POSITIVE_INFINITY),t=vn(t,Number.NEGATIVE_INFINITY),i=vn(i,Number.POSITIVE_INFINITY),r=vn(r,Number.NEGATIVE_INFINITY),{min:vn(e,i),max:vn(t,r),minDefined:it(e),maxDefined:it(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:vn(t,vn(i,t)),max:vn(i,vn(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){$e(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=OF(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?uL(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=w7(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){$e(this.options.afterUpdate,[this])}beforeSetDimensions(){$e(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){$e(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),$e(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){$e(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=$e(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){$e(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){$e(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=lL(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,c,l;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=St(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),c=this.maxHeight-Kd(e.grid)-t.padding-dL(e.title,this.chart.options.font),l=Math.sqrt(d*d+h*h),o=Gm(Math.min(Math.asin(St((u.highest.height+6)/a,-1,1)),Math.asin(St(c/l,-1,1))-Math.asin(St(h/l,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){$e(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){$e(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=dL(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Kd(s)+c):(e.height=this.maxHeight,e.width=Kd(s)+c),i.display&&this.ticks.length){let{first:l,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,p=Wn(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(a){let y=i.mirror?0:m*d.width+g*h.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{let y=i.mirror?0:g*d.width+m*h.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(l,u,m,g)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;c?l?(h=r*e.width,f=i*t.height):(h=i*e.height,f=r*t.width):s==="start"?f=t.width:s==="end"?h=e.width:s!=="inner"&&(h=e.width/2,f=t.width/2),this.paddingLeft=Math.max((h-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+o)*this.width/(this.width-d),0)}else{let u=t.height/2,d=e.height/2;s==="start"?(u=0,d=e.height):s==="end"&&(u=t.height,d=0),this.paddingTop=u+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){$e(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)Se(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=uL(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/lL(t,i)),l=0,u=0,d,h,f,p,g,m,y,v,b,E,C;for(d=0;d<t;d+=c){if(p=e[d].label,g=this._resolveTickFontOptions(d),r.font=m=g.string,y=s[m]=s[m]||{data:{},gc:[]},v=g.lineHeight,b=E=0,!Se(p)&&!He(p))b=Bd(r,y.data,y.gc,b,p),E=v;else if(He(p))for(h=0,f=p.length;h<f;++h)C=p[h],!Se(C)&&!He(C)&&(b=Bd(r,y.data,y.gc,b,C),E+=v);o.push(b),a.push(E),l=Math.max(b,l),u=Math.max(E,u)}A7(s,t);let D=o.indexOf(l),A=a.indexOf(u),M=B=>({width:o[B]||0,height:a[B]||0});return{first:M(0),last:M(t-1),widest:M(D),highest:M(A),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return CF(this._alignToPixels?Es(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=P7(this.getContext(),e,i))}return this.$context||(this.$context=M7(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Wn(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),h=Kd(s),f=[],p=a.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,y=function(N){return Es(i,N,g)},v,b,E,C,D,A,M,B,ee,se,he,Ge;if(o==="top")v=y(this.bottom),A=this.bottom-h,B=v-m,se=y(e.top)+m,Ge=e.bottom;else if(o==="bottom")v=y(this.top),se=e.top,Ge=y(e.bottom)-m,A=v+m,B=this.top+h;else if(o==="left")v=y(this.right),D=this.right-h,M=v-m,ee=y(e.left)+m,he=e.right;else if(o==="right")v=y(this.left),ee=e.left,he=y(e.right)-m,D=v+m,M=this.left+h;else if(t==="x"){if(o==="center")v=y((e.top+e.bottom)/2+.5);else if(Ee(o)){let N=Object.keys(o)[0],L=o[N];v=y(this.chart.scales[N].getPixelForValue(L))}se=e.top,Ge=e.bottom,A=v+m,B=A+h}else if(t==="y"){if(o==="center")v=y((e.left+e.right)/2);else if(Ee(o)){let N=Object.keys(o)[0],L=o[N];v=y(this.chart.scales[N].getPixelForValue(L))}D=v-m,M=D-h,ee=e.left,he=e.right}let $t=de(r.ticks.maxTicksLimit,d),Me=Math.max(1,Math.ceil(d/$t));for(b=0;b<d;b+=Me){let N=this.getContext(b),L=s.setContext(N),K=a.setContext(N),te=L.lineWidth,Ke=L.color,Zt=K.dash||[],ft=K.dashOffset,an=L.tickWidth,Oe=L.tickColor,Er=L.tickBorderDash||[],As=L.tickBorderDashOffset;E=x7(this,b,c),E!==void 0&&(C=Es(i,E,te),l?D=M=ee=he=C:A=B=se=Ge=C,f.push({tx1:D,ty1:A,tx2:M,ty2:B,x1:ee,y1:se,x2:he,y2:Ge,width:te,color:Ke,borderDash:Zt,borderDashOffset:ft,tickWidth:an,tickColor:Oe,tickBorderDash:Er,tickBorderDashOffset:As}))}return this._ticksLength=d,this._borderValue=v,f}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:d}=s,h=Kd(i.grid),f=h+u,p=d?-u:f,g=-Wn(this.labelRotation),m=[],y,v,b,E,C,D,A,M,B,ee,se,he,Ge="middle";if(r==="top")D=this.bottom-p,A=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+p,A=this._getXAxisLabelAlignment();else if(r==="left"){let Me=this._getYAxisLabelAlignment(h);A=Me.textAlign,C=Me.x}else if(r==="right"){let Me=this._getYAxisLabelAlignment(h);A=Me.textAlign,C=Me.x}else if(t==="x"){if(r==="center")D=(e.top+e.bottom)/2+f;else if(Ee(r)){let Me=Object.keys(r)[0],N=r[Me];D=this.chart.scales[Me].getPixelForValue(N)+f}A=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")C=(e.left+e.right)/2-f;else if(Ee(r)){let Me=Object.keys(r)[0],N=r[Me];C=this.chart.scales[Me].getPixelForValue(N)}A=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(c==="start"?Ge="top":c==="end"&&(Ge="bottom"));let $t=this._getLabelSizes();for(y=0,v=a.length;y<v;++y){b=a[y],E=b.label;let Me=s.setContext(this.getContext(y));M=this.getPixelForTick(y)+s.labelOffset,B=this._resolveTickFontOptions(y),ee=B.lineHeight,se=He(E)?E.length:1;let N=se/2,L=Me.color,K=Me.textStrokeColor,te=Me.textStrokeWidth,Ke=A;o?(C=M,A==="inner"&&(y===v-1?Ke=this.options.reverse?"left":"right":y===0?Ke=this.options.reverse?"right":"left":Ke="center"),r==="top"?l==="near"||g!==0?he=-se*ee+ee/2:l==="center"?he=-$t.highest.height/2-N*ee+ee:he=-$t.highest.height+ee/2:l==="near"||g!==0?he=ee/2:l==="center"?he=$t.highest.height/2-N*ee:he=$t.highest.height-se*ee,d&&(he*=-1),g!==0&&!Me.showLabelBackdrop&&(C+=ee/2*Math.sin(g))):(D=M,he=(1-se)*ee/2);let Zt;if(Me.showLabelBackdrop){let ft=Ut(Me.backdropPadding),an=$t.heights[y],Oe=$t.widths[y],Er=he-ft.top,As=0-ft.left;switch(Ge){case"middle":Er-=an/2;break;case"bottom":Er-=an;break}switch(A){case"center":As-=Oe/2;break;case"right":As-=Oe;break}Zt={left:As,top:Er,width:Oe+ft.width,height:an+ft.height,color:Me.backdropColor}}m.push({label:E,font:B,textOffset:he,options:{rotation:g,color:L,strokeColor:K,strokeWidth:te,textAlign:Ke,textBaseline:Ge,translation:[C,D],backdrop:Zt}})}return m}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Wn(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,u;return t==="left"?r?(u=this.right+s,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?r?(u=this.left+s,i==="near"?l="right":i==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,i==="near"?l="left":i==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let c=r[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,d,h;this.isHorizontal()?(l=Es(e,this.left,o)-o/2,u=Es(e,this.right,a)+a/2,d=h=c):(d=Es(e,this.top,o)-o/2,h=Es(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(u,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&zd(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,u=o.textOffset;Cs(i,l,0,u,c,a)}r&&Hd(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=Et(i.font),o=Ut(i.padding),a=i.align,c=s.lineHeight/2;t==="bottom"||t==="center"||Ee(t)?(c+=o.bottom,He(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:l,titleY:u,maxWidth:d,rotation:h}=k7(this,c,t,a);Cs(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:h,textAlign:R7(a,t,r),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=de(e.grid&&e.grid.z,-1),r=de(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Et(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},sl=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;F7(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,O7(e,o,i),this.override&&rt.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in rt[r]&&(delete rt[r][i],this.override&&delete ws[i])}};function O7(n,e,t){let i=Qc(Object.create(null),[t?rt.get(t):{},rt.get(e),n.defaults]);rt.set(e,i),n.defaultRoutes&&N7(e,n.defaultRoutes),n.descriptors&&rt.describe(e,n.descriptors)}function N7(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");rt.route(s,r,c,a)})}function F7(n){return"id"in n&&"defaults"in n}var II=class{constructor(){this.controllers=new sl(Ts,"datasets",!0),this.elements=new sl(hi,"elements"),this.plugins=new sl(Object,"plugins"),this.scales=new sl(ta,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):ke(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=Wm(e);$e(i["before"+r],[],i),t[e](i),$e(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},qi=new II,SI=class{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],c=[t,r,s.options];if($e(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Se(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=de(i.options&&i.options.plugins,{}),s=L7(i);return r===!1&&!t?[]:j7(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function L7(n){let e={},t=[],i=Object.keys(qi.plugins.items);for(let s=0;s<i.length;s++)t.push(qi.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function V7(n,e){return!e&&n===!1?null:n===!0?{}:n}function j7(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=V7(i[c],r);l!==null&&s.push({plugin:a,options:B7(n.config,{plugin:a,local:t[c]},l,o)})}return s}function B7(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function TI(n,e){let t=rt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function U7(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function $7(n,e){return n===e?"_index_":"_value_"}function hL(n){if(n==="x"||n==="y"||n==="r")return n}function z7(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function xI(n,...e){if(hL(n))return n;for(let t of e){let i=t.axis||z7(t.position)||n.length>1&&hL(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function fL(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function H7(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return fL(n,"x",t[0])||fL(n,"y",t[0])}return{}}function q7(n,e){let t=ws[n.type]||{scales:{}},i=e.scales||{},r=TI(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!Ee(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=xI(o,a,H7(o,n),rt.scales[a.type]),l=$7(c,r),u=t.scales||{};s[o]=Xc(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||TI(a,e),u=(ws[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=U7(d,c),f=o[h+"AxisID"]||h;s[f]=s[f]||Object.create(null),Xc(s[f],[{axis:h},i[f],u[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Xc(a,[rt.scales[a.type],rt.scale])}),s}function eV(n){let e=n.options||(n.options={});e.plugins=de(e.plugins,{}),e.scales=q7(n,e)}function tV(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function W7(n){return n=n||{},n.data=tV(n.data),eV(n),n}var pL=new Map,nV=new Set;function ry(n,e){let t=pL.get(n);return t||(t=e(),pL.set(n,t),nV.add(t)),t}var Qd=(n,e,t)=>{let i=vr(e,t);i!==void 0&&n.add(i)},AI=class{constructor(e){this._config=W7(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tV(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),eV(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return ry(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return ry(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return ry(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return ry(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(d=>Qd(c,e,d))),u.forEach(d=>Qd(c,r,d)),u.forEach(d=>Qd(c,ws[s]||{},d)),u.forEach(d=>Qd(c,rt,d)),u.forEach(d=>Qd(c,Ym,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),nV.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,ws[t]||{},rt.datasets[t]||{},{type:t},rt,Ym]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=gL(this._resolverCache,e,r),c=o;if(K7(o,t)){s.$shared=!1,i=mr(i)?i():i;let l=this.createResolver(e,i,a);c=Yo(o,i,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,i=[""],r){let{resolver:s}=gL(this._resolverCache,e,i);return Ee(t)?Yo(s,t,void 0,r):s}};function gL(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:Jm(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var G7=n=>Ee(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||mr(n[t]),!1);function K7(n,e){let{isScriptable:t,isIndexable:i}=eI(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(mr(a)||G7(a))||o&&He(a))return!0}return!1}var Q7="4.4.0",Y7=["top","bottom","left","right","chartArea"];function mL(n,e){return n==="top"||n==="bottom"||Y7.indexOf(n)===-1&&e==="x"}function yL(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function vL(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),$e(t&&t.onComplete,[n],e)}function X7(n){let e=n.chart,t=e.options.animation;$e(t&&t.onProgress,[n],e)}function iV(n){return rI()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var uy={},_L=n=>{let e=iV(n);return Object.values(uy).filter(t=>t.canvas===e).pop()};function Z7(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function J7(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function sy(n,e,t){return n.options.clip?n[t]:e[t]}function eK(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:sy(t,e,"left"),right:sy(t,e,"right"),top:sy(i,e,"top"),bottom:sy(i,e,"bottom")}:e}var xs=(()=>{class n{static defaults=rt;static instances=uy;static overrides=ws;static registry=qi;static version=Q7;static getChart=_L;static register(...t){qi.add(...t),bL()}static unregister(...t){qi.remove(...t),bL()}constructor(t,i){let r=this.config=new AI(i),s=iV(t),o=_L(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||b7(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,d=l&&l.width;if(this.id=yF(),this.ctx=c,this.canvas=l,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new SI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=xF(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],uy[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}br.listen(this,"complete",vL),br.listen(this,"progress",X7),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return Se(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return qi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sI(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return XD(this.canvas,this.ctx),this}stop(){return br.stop(this),this}resize(t,i){br.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,sI(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),$e(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};ke(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],l=xI(a,c),u=l==="r",d=l==="x";return{options:c,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),ke(o,a=>{let c=a.options,l=c.id,u=xI(l,c),d=de(c.type,a.dtype);(c.position===void 0||mL(c.position,u)!==mL(a.dposition))&&(c.position=a.dposition),s[l]=!0;let h=null;if(l in r&&r[l].type===d)h=r[l];else{let f=qi.getScale(d);h=new f({id:l,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(c,t)}),ke(s,(a,c)=>{a||delete r[c]}),ke(r,a=>{Xt.configure(this,a,a.options),Xt.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(yL("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||TI(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=qi.getController(c),{datasetElementType:u,dataElementType:d}=rt.datasets[c];Object.assign(l,{dataElementType:qi.getElement(d),datasetElementType:u&&qi.getElement(u)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){ke(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),f=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||ke(o,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(yL("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ke(this.scales,t=>{Xt.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!VD(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;Z7(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!VD(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Xt.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],ke(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,mr(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(br.has(this)?this.attached&&!br.running(this)&&br.start(this):(this.draw(),vL({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resize(r,s),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r=t._clip,s=!r.disabled,o=eK(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&zd(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),t.controller.draw(),s&&Hd(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Ui(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=t7.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=_r(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Zc(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),br.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),XD(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete uy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};ke(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(l,u)=>{i.addEventListener(this,l,u),t[l]=u},s=(l,u)=>{t[l]&&(i.removeEventListener(this,l,u),delete t[l])},o=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){ke(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},ke(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,c,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!Ud(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(l,u)=>l.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(i,t),c=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(t,s,r,a),l=bF(t),u=J7(t,this._lastEvent,r,l);r&&(this._lastEvent=null,$e(o.onHover,[t,c,this],this),l&&$e(o.onClick,[t,c,this],this));let d=!Ud(c,s);return(d||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=u,d}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function bL(){return ke(xs.instances,n=>n._plugins.invalidate())}function tK(n,e,t){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:c}=e,l=r/a;n.beginPath(),n.arc(s,o,a,i-l,t+l),c>r?(l=r/c,n.arc(s,o,c,t+l,i-l,!0)):n.arc(s,o,r,t+ct,i-ct),n.closePath(),n.clip()}function nK(n){return Zm(n,["outerStart","outerEnd","innerStart","innerEnd"])}function iK(n,e,t,i){let r=nK(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=c=>{let l=(t-Math.min(s,c))*i/2;return St(c,0,Math.min(s,l))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:St(r.innerStart,0,o),innerEnd:St(r.innerEnd,0,o)}}function rl(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function py(n,e,t,i,r,s){let{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,d=Math.max(e.outerRadius+i+t-l,0),h=u>0?u+i+t+l:0,f=0,p=r-c;if(i){let Me=u>0?u-i:0,N=d>0?d-i:0,L=(Me+N)/2,K=L!==0?p*L/(L+i):p;f=(p-K)/2}let g=Math.max(.001,p*d-t/qe)/d,m=(p-g)/2,y=c+m+f,v=r-m-f,{outerStart:b,outerEnd:E,innerStart:C,innerEnd:D}=iK(e,h,d,v-y),A=d-b,M=d-E,B=y+b/A,ee=v-E/M,se=h+C,he=h+D,Ge=y+C/se,$t=v-D/he;if(n.beginPath(),s){let Me=(B+ee)/2;if(n.arc(o,a,d,B,Me),n.arc(o,a,d,Me,ee),E>0){let te=rl(M,ee,o,a);n.arc(te.x,te.y,E,ee,v+ct)}let N=rl(he,v,o,a);if(n.lineTo(N.x,N.y),D>0){let te=rl(he,$t,o,a);n.arc(te.x,te.y,D,v+ct,$t+Math.PI)}let L=(v-D/h+(y+C/h))/2;if(n.arc(o,a,h,v-D/h,L,!0),n.arc(o,a,h,L,y+C/h,!0),C>0){let te=rl(se,Ge,o,a);n.arc(te.x,te.y,C,Ge+Math.PI,y-ct)}let K=rl(A,y,o,a);if(n.lineTo(K.x,K.y),b>0){let te=rl(A,B,o,a);n.arc(te.x,te.y,b,y-ct,B)}}else{n.moveTo(o,a);let Me=Math.cos(B)*d+o,N=Math.sin(B)*d+a;n.lineTo(Me,N);let L=Math.cos(ee)*d+o,K=Math.sin(ee)*d+a;n.lineTo(L,K)}n.closePath()}function rK(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a}=e,c=e.endAngle;if(s){py(n,e,t,i,c,r);for(let l=0;l<s;++l)n.fill();isNaN(a)||(c=o+(a%We||We))}return py(n,e,t,i,c,r),n.fill(),c}function sK(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=c,f=c.borderAlign==="inner";if(!l)return;n.setLineDash(d||[]),n.lineDashOffset=h,f?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let p=e.endAngle;if(s){py(n,e,t,i,p,r);for(let g=0;g<s;++g)n.stroke();isNaN(a)||(p=o+(a%We||We))}f&&tK(n,e,p),s||(py(n,e,t,i,p,r),n.stroke())}var MI=class extends hi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=$D(r,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=de(d,c-a)>=We||el(s,a,c),g=zi(o,l+h,u+h);return p&&g}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(r+s)/2,d=(o+a+l+c)/2;return{x:t+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>We?Math.floor(i/We):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let c=1-Math.sin(Math.min(qe,i||0)),l=r*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,rK(e,this,l,s,o),sK(e,this,l,s,o),e.restore()}};function rV(n,e,t=e){n.lineCap=de(t.borderCapStyle,e.borderCapStyle),n.setLineDash(de(t.borderDash,e.borderDash)),n.lineDashOffset=de(t.borderDashOffset,e.borderDashOffset),n.lineJoin=de(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=de(t.borderWidth,e.borderWidth),n.strokeStyle=de(t.borderColor,e.borderColor)}function oK(n,e,t){n.lineTo(t.x,t.y)}function aK(n){return n.stepped?RF:n.tension||n.cubicInterpolationMode==="monotone"?kF:oK}function sV(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,c=Math.max(r,o),l=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!u?i+l-c:l-c}}function cK(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:l}=sV(r,t,i),u=aK(s),{move:d=!0,reverse:h}=i||{},f,p,g;for(f=0;f<=l;++f)p=r[(a+(h?l-f:f))%o],!p.skip&&(d?(n.moveTo(p.x,p.y),d=!1):u(n,g,p,h,s.stepped),g=p);return c&&(p=r[(a+(h?l:0))%o],u(n,g,p,h,s.stepped)),!!c}function lK(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=sV(r,t,i),{move:c=!0,reverse:l}=i||{},u=0,d=0,h,f,p,g,m,y,v=E=>(o+(l?a-E:E))%s,b=()=>{g!==m&&(n.lineTo(u,m),n.lineTo(u,g),n.lineTo(u,y))};for(c&&(f=r[v(0)],n.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=r[v(h)],f.skip)continue;let E=f.x,C=f.y,D=E|0;D===p?(C<g?g=C:C>m&&(m=C),u=(d*u+E)/++d):(b(),n.lineTo(E,C),p=D,d=0,g=m=C),y=C}b()}function PI(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?lK:cK}function uK(n){return n.stepped?$F:n.tension||n.cubicInterpolationMode==="monotone"?zF:bs}function dK(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),rV(n,e.options),n.stroke(r)}function hK(n,e,t,i){let{segments:r,options:s}=e,o=PI(e);for(let a of r)rV(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var fK=typeof Path2D=="function";function pK(n,e,t,i){fK&&!e.options.segment?dK(n,e,t,i):hK(n,e,t,i)}var yy=(()=>{class n extends hi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;jF(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=qF(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=uI(this,{property:i,start:s,end:s});if(!a.length)return;let c=[],l=uK(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:f}=a[u],p=o[h],g=o[f];if(p===g){c.push(p);continue}let m=Math.abs((s-p[i])/(g[i]-p[i])),y=l(p,g,m,r.stepped);y[i]=t[i],c.push(y)}return c.length===1?c[0]:c}pathSegment(t,i,r){return PI(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=PI(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of s)a&=o(t,this,c,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),pK(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function wL(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var gK=(()=>{class n extends hi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return wL(this,t,"x",i)}inYRange(t,i){return wL(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!Ui(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,Xm(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function oV(n,e){let{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,d;return n.horizontal?(d=o/2,a=Math.min(t,r),c=Math.max(t,r),l=i-d,u=i+d):(d=s/2,a=t-d,c=t+d,l=Math.min(i,r),u=Math.max(i,r)),{left:a,top:l,right:c,bottom:u}}function Ss(n,e,t,i){return n?0:St(e,t,i)}function mK(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,s=JD(i);return{t:Ss(r.top,s.top,0,t),r:Ss(r.right,s.right,0,e),b:Ss(r.bottom,s.bottom,0,t),l:Ss(r.left,s.left,0,e)}}function yK(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=Ds(r),o=Math.min(e,t),a=n.borderSkipped,c=i||Ee(r);return{topLeft:Ss(!c||a.top||a.left,s.topLeft,0,o),topRight:Ss(!c||a.top||a.right,s.topRight,0,o),bottomLeft:Ss(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ss(!c||a.bottom||a.right,s.bottomRight,0,o)}}function vK(n){let e=oV(n),t=e.right-e.left,i=e.bottom-e.top,r=mK(n,t/2,i/2),s=yK(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function yI(n,e,t,i){let r=e===null,s=t===null,a=n&&!(r&&s)&&oV(n,i);return a&&(r||zi(e,a.left,a.right))&&(s||zi(t,a.top,a.bottom))}function _K(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function bK(n,e){n.rect(e.x,e.y,e.w,e.h)}function vI(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var RI=class extends hi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=vK(this),a=_K(o.radius)?nl:bK;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,vI(o,t,s)),e.clip(),a(e,vI(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,vI(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return yI(this,e,t,i)}inXRange(e,t){return yI(this,e,null,t)}inYRange(e,t){return yI(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},wK=Object.freeze({__proto__:null,ArcElement:MI,BarElement:RI,LineElement:yy,PointElement:gK}),kI=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],EL=kI.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function aV(n){return kI[n%kI.length]}function cV(n){return EL[n%EL.length]}function EK(n,e){return n.borderColor=aV(e),n.backgroundColor=cV(e),++e}function CK(n,e){return n.backgroundColor=n.data.map(()=>aV(e++)),e}function DK(n,e){return n.backgroundColor=n.data.map(()=>cV(e++)),e}function IK(n){let e=0;return(t,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof UI?e=CK(t,e):r instanceof QL?e=DK(t,e):r&&(e=EK(t,e))}}function CL(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function SK(n){return n&&(n.borderColor||n.backgroundColor)}var TK={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!t.forceOverride&&(CL(i)||SK(r)||s&&CL(s)))return;let o=IK(n);i.forEach(o)}};function xK(n,e,t,i,r){let s=r.samples||i;if(s>=t)return n.slice(e,e+t);let o=[],a=(t-2)/(s-2),c=0,l=e+t-1,u=e,d,h,f,p,g;for(o[c++]=n[u],d=0;d<s-2;d++){let m=0,y=0,v,b=Math.floor((d+1)*a)+1+e,E=Math.min(Math.floor((d+2)*a)+1,t)+e,C=E-b;for(v=b;v<E;v++)m+=n[v].x,y+=n[v].y;m/=C,y/=C;let D=Math.floor(d*a)+1+e,A=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:M,y:B}=n[u];for(f=p=-1,v=D;v<A;v++)p=.5*Math.abs((M-m)*(n[v].y-B)-(M-n[v].x)*(y-B)),p>f&&(f=p,h=n[v],g=v);o[c++]=h,u=g}return o[c++]=n[l],o}function AK(n,e,t,i){let r=0,s=0,o,a,c,l,u,d,h,f,p,g,m=[],y=e+t-1,v=n[e].x,E=n[y].x-v;for(o=e;o<e+t;++o){a=n[o],c=(a.x-v)/E*i,l=a.y;let C=c|0;if(C===u)l<p?(p=l,d=o):l>g&&(g=l,h=o),r=(s*r+a.x)/++s;else{let D=o-1;if(!Se(d)&&!Se(h)){let A=Math.min(d,h),M=Math.max(d,h);A!==f&&A!==D&&m.push(Te($({},n[A]),{x:r})),M!==f&&M!==D&&m.push(Te($({},n[M]),{x:r}))}o>0&&D!==f&&m.push(n[D]),m.push(a),u=C,s=0,p=g=l,d=h=f=o}}return m}function lV(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function DL(n){n.data.datasets.forEach(e=>{lV(e)})}function MK(n,e){let t=e.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(i=St(Bi(e,s.axis,o).lo,0,t-1)),l?r=St(Bi(e,s.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var PK={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){DL(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,c=n.getDatasetMeta(s),l=o||r.data;if(il([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:d,count:h}=MK(c,l),f=t.threshold||4*i;if(h<=f){lV(r);return}Se(o)&&(r._data=l,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(t.algorithm){case"lttb":p=xK(l,d,h,i,t);break;case"min-max":p=AK(l,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=p})},destroy(n){DL(n)}};function RK(n,e,t){let i=n.segments,r=n.points,s=e.points,o=[];for(let a of i){let{start:c,end:l}=a;l=$I(c,l,r);let u=OI(t,r[c],r[l],a.loop);if(!e.segments){o.push({source:a,target:u,start:r[c],end:r[l]});continue}let d=uI(e,u);for(let h of d){let f=OI(t,s[h.start],s[h.end],h.loop),p=lI(a,r,f);for(let g of p)o.push({source:g,target:h,start:{[t]:IL(u,f,"start",Math.max)},end:{[t]:IL(u,f,"end",Math.min)}})}}return o}function OI(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=yn(r),s=yn(s)),{property:n,start:r,end:s}}function kK(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=$I(o,a,r);let c=r[o],l=r[a];i!==null?(s.push({x:c.x,y:i}),s.push({x:l.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function $I(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function IL(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function uV(n,e){let t=[],i=!1;return He(n)?(i=!0,t=n):t=kK(n,e),t.length?new yy({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function SL(n){return n&&n.fill!==!1}function OK(n,e,t){let r=n[e].fill,s=[e],o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!it(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function NK(n,e,t){let i=jK(n);if(Ee(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return it(r)&&Math.floor(r)===r?FK(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function FK(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function LK(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Ee(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function VK(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:Ee(n)?i=n.value:i=e.getBaseValue(),i}function jK(n){let e=n.options,t=e.fill,i=de(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function BK(n){let{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=UK(e,t);a.push(uV({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){let l=s[c];for(let u=l.start;u<=l.end;u++)$K(r,o[u],a)}return new yy({points:r,options:{}})}function UK(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function $K(n,e,t){let i=[];for(let r=0;r<t.length;r++){let s=t[r],{first:o,last:a,point:c}=zK(s,e,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function zK(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let u=s[l],d=o[u.start][t],h=o[u.end][t];if(zi(r,d,h)){a=r===d,c=r===h;break}}return{first:a,last:c,point:i}}var gy=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:s,radius:o}=this;return t=t||{start:0,end:We},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function HK(n){let{chart:e,fill:t,line:i}=n;if(it(t))return qK(e,t);if(t==="stack")return BK(n);if(t==="shape")return!0;let r=WK(n);return r instanceof gy?r:uV(r,i)}function qK(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function WK(n){return(n.scale||{}).getPointPositionForValue?KK(n):GK(n)}function GK(n){let{scale:e={},fill:t}=n,i=LK(t,e);if(it(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function KK(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=VK(t,e,s),a=[];if(i.grid.circular){let c=e.getPointPositionForValue(0,s);return new gy({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)a.push(e.getPointPositionForValue(c,o));return a}function _I(n,e,t){let i=HK(e),{line:r,scale:s,axis:o}=e,a=r.options,c=a.fill,l=a.backgroundColor,{above:u=l,below:d=l}=c||{};i&&r.points.length&&(zd(n,t),QK(n,{line:r,target:i,above:u,below:d,area:t,scale:s,axis:o}),Hd(n))}function QK(n,e){let{line:t,target:i,above:r,below:s,area:o,scale:a}=e,c=t._loop?"angle":e.axis;n.save(),c==="x"&&s!==r&&(TL(n,i,o.top),xL(n,{line:t,target:i,color:r,scale:a,property:c}),n.restore(),n.save(),TL(n,i,o.bottom)),xL(n,{line:t,target:i,color:s,scale:a,property:c}),n.restore()}function TL(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,u=r[c],d=r[$I(c,l,r)];s?(n.moveTo(u.x,u.y),s=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function xL(n,e){let{line:t,target:i,property:r,color:s,scale:o}=e,a=RK(t,i,r);for(let{source:c,target:l,start:u,end:d}of a){let{style:{backgroundColor:h=s}={}}=c,f=i!==!0;n.save(),n.fillStyle=h,YK(n,o,f&&OI(r,u,d)),n.beginPath();let p=!!t.pathSegment(n,c),g;if(f){p?n.closePath():AL(n,i,d,r);let m=!!i.pathSegment(n,l,{move:p,reverse:!0});g=p&&m,g||AL(n,i,u,r)}n.closePath(),n.fill(g?"evenodd":"nonzero"),n.restore()}}function YK(n,e,t){let{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function AL(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var XK={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],s,o,a,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof yy&&(c={visible:n.isDatasetVisible(o),index:o,fill:NK(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=OK(r,o,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&_I(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;SL(s)&&_I(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!SL(i)||t.drawTime!=="beforeDatasetDraw"||_I(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},ML=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},ZK=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,my=class extends hi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=$e(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=Et(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=ML(i,s),l,u;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(o,s,a,c)+10):(u=this.maxHeight,l=this._fitCols(o,r,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+a,d=e;s.textAlign="left",s.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,g)=>{let m=i+t/2+s.measureText(p.text).width;(g===0||l[l.length-1]+m+2*a>o)&&(d+=u,l[l.length-(g>0?0:1)]=0,f+=u,h++),c[g]={left:0,top:f,row:h,width:m,height:r},l[l.length-1]+=m+a}),d}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=o-e,d=a,h=0,f=0,p=0,g=0;return this.legendItems.forEach((m,y)=>{let{itemWidth:v,itemHeight:b}=JK(i,t,s,m,r);y>0&&f+b+2*a>u&&(d+=h+a,l.push({width:h,height:f}),p+=h+a,g++,h=f=0),c[y]={left:p,top:f,col:g,width:v,height:b},h=Math.max(h,v),f+=b+a}),d+=h,l.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Zo(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=Bt(i,this.left+r,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Bt(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+r}else{let a=0,c=Bt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Bt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;zd(e,this),this._draw(),Hd(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=rt.color,c=Zo(e.rtl,this.left,this.width),l=Et(o.font),{padding:u}=o,d=l.size,h=d/2,f;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:p,boxHeight:g,itemHeight:m}=ML(o,d),y=function(D,A,M){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;r.save();let B=de(M.lineWidth,1);if(r.fillStyle=de(M.fillStyle,a),r.lineCap=de(M.lineCap,"butt"),r.lineDashOffset=de(M.lineDashOffset,0),r.lineJoin=de(M.lineJoin,"miter"),r.lineWidth=B,r.strokeStyle=de(M.strokeStyle,a),r.setLineDash(de(M.lineDash,[])),o.usePointStyle){let ee={radius:g*Math.SQRT2/2,pointStyle:M.pointStyle,rotation:M.rotation,borderWidth:B},se=c.xPlus(D,p/2),he=A+h;ZD(r,ee,se,he,o.pointStyleWidth&&p)}else{let ee=A+Math.max((d-g)/2,0),se=c.leftForLtr(D,p),he=Ds(M.borderRadius);r.beginPath(),Object.values(he).some(Ge=>Ge!==0)?nl(r,{x:se,y:ee,w:p,h:g,radius:he}):r.rect(se,ee,p,g),r.fill(),B!==0&&r.stroke()}r.restore()},v=function(D,A,M){Cs(r,M.text,D,A+m/2,l,{strikethrough:M.hidden,textAlign:c.textAlign(M.textAlign)})},b=this.isHorizontal(),E=this._computeTitleHeight();b?f={x:Bt(s,this.left+u,this.right-i[0]),y:this.top+u+E,line:0}:f={x:this.left+u,y:Bt(s,this.top+E+u,this.bottom-t[0].height),line:0},aI(this.ctx,e.textDirection);let C=m+u;this.legendItems.forEach((D,A)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;let M=r.measureText(D.text).width,B=c.textAlign(D.textAlign||(D.textAlign=o.textAlign)),ee=p+h+M,se=f.x,he=f.y;c.setWidth(this.width),b?A>0&&se+ee+u>this.right&&(he=f.y+=C,f.line++,se=f.x=Bt(s,this.left+u,this.right-i[f.line])):A>0&&he+C>this.bottom&&(se=f.x=se+t[f.line].width+u,f.line++,he=f.y=Bt(s,this.top+E+u,this.bottom-t[f.line].height));let Ge=c.x(se);if(y(Ge,he,D),se=AF(B,se+p+h,b?se+ee:this.right,e.rtl),v(c.x(se),he,D),b)f.x+=ee+u;else if(typeof D.text!="string"){let $t=l.lineHeight;f.y+=dV(D,$t)+u}else f.y+=C}),cI(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=Et(t.font),r=Ut(t.padding);if(!t.display)return;let s=Zo(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=i.size/2,l=r.top+c,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+l,d=Bt(e.align,d,this.right-h);else{let p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);u=l+Bt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let f=Bt(a,d,d+h);o.textAlign=s.textAlign(Qm(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,Cs(o,t.text,f,u,i)}_computeTitleHeight(){let e=this.options.title,t=Et(e.font),i=Ut(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(zi(e,this.left,this.right)&&zi(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],zi(e,r.left,r.left+r.width)&&zi(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!nQ(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=ZK(r,i);r&&!s&&$e(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&$e(t.onHover,[e,i,this],this)}else i&&$e(t.onClick,[e,i,this],this)}};function JK(n,e,t,i,r){let s=eQ(i,n,e,t),o=tQ(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function eQ(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function tQ(n,e,t){let i=n;return typeof e.text!="string"&&(i=dV(e,t)),i}function dV(n,e){let t=n.text?n.text.length:0;return e*t}function nQ(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var iQ={id:"legend",_element:my,start(n,e,t){let i=n.legend=new my({ctx:n.ctx,options:t,chart:n});Xt.configure(n,i,t),Xt.addBox(n,i)},stop(n){Xt.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Xt.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=Ut(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Jd=class extends hi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=He(i.text)?i.text.length:1;this._padding=Ut(i.padding);let s=r*Et(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,c=0,l,u,d;return this.isHorizontal()?(u=Bt(a,i,s),d=t+e,l=s-i):(o.position==="left"?(u=i+e,d=Bt(a,r,t),c=qe*-.5):(u=s-e,d=Bt(a,t,r),c=qe*.5),l=r-t),{titleX:u,titleY:d,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=Et(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);Cs(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:l,textAlign:Qm(t.align),textBaseline:"middle",translation:[o,a]})}};function rQ(n,e){let t=new Jd({ctx:n.ctx,options:e,chart:n});Xt.configure(n,t,e),Xt.addBox(n,t),n.titleBlock=t}var sQ={id:"title",_element:Jd,start(n,e,t){rQ(n,t)},stop(n){let e=n.titleBlock;Xt.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Xt.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},oy=new WeakMap,oQ={id:"subtitle",start(n,e,t){let i=new Jd({ctx:n.ctx,options:t,chart:n});Xt.configure(n,i,t),Xt.addBox(n,i),oy.set(n,i)},stop(n){Xt.removeBox(n,oy.get(n)),oy.delete(n)},beforeUpdate(n,e,t){let i=oy.get(n);Xt.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Xd={average(n){if(!n.length)return!1;let e,t,i=0,r=0,s=0;for(e=0,t=n.length;e<t;++e){let o=n[e].element;if(o&&o.hasValue()){let a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:i/s,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=Hm(e,l);u<r&&(r=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function Hi(n,e){return e&&(He(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function wr(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function aQ(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function PL(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=Et(e.bodyFont),l=Et(e.titleFont),u=Et(e.footerFont),d=s.length,h=r.length,f=i.length,p=Ut(e.padding),g=p.height,m=0,y=i.reduce((E,C)=>E+C.before.length+C.lines.length+C.after.length,0);if(y+=n.beforeBody.length+n.afterBody.length,d&&(g+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){let E=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;g+=f*E+(y-f)*c.lineHeight+(y-1)*e.bodySpacing}h&&(g+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let v=0,b=function(E){m=Math.max(m,t.measureText(E).width+v)};return t.save(),t.font=l.string,ke(n.title,b),t.font=c.string,ke(n.beforeBody.concat(n.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,ke(i,E=>{ke(E.before,b),ke(E.lines,b),ke(E.after,b)}),v=0,t.font=u.string,ke(n.footer,b),t.restore(),m+=p.width,{width:m,height:g}}function cQ(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function lQ(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function uQ(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),lQ(l,n,e,t)&&(l="center"),l}function RL(n,e,t){let i=t.yAlign||e.yAlign||cQ(n,t);return{xAlign:t.xAlign||e.xAlign||uQ(n,e,t,i),yAlign:i}}function dQ(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function hQ(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function kL(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=r+s,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Ds(o),p=dQ(e,a),g=hQ(e,c,l);return c==="center"?a==="left"?p+=l:a==="right"&&(p-=l):a==="left"?p-=Math.max(u,h)+r:a==="right"&&(p+=Math.max(d,f)+r),{x:St(p,0,i.width-e.width),y:St(g,0,i.height-e.height)}}function ay(n,e,t){let i=Ut(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function OL(n){return Hi([],wr(n))}function fQ(n,e,t){return _r(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function NL(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var hV={beforeTitle:$i,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:$i,beforeBody:$i,beforeLabel:$i,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Se(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:$i,afterBody:$i,beforeFooter:$i,footer:$i,afterFooter:$i};function _n(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?hV[e].call(t,i):r}var FL=(()=>{class n extends hi{static positioners=Xd;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new dy(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=fQ(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=_n(r,"beforeTitle",this,t),o=_n(r,"title",this,t),a=_n(r,"afterTitle",this,t),c=[];return c=Hi(c,wr(s)),c=Hi(c,wr(o)),c=Hi(c,wr(a)),c}getBeforeBody(t,i){return OL(_n(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return ke(t,o=>{let a={before:[],lines:[],after:[]},c=NL(r,o);Hi(a.before,wr(_n(c,"beforeLabel",this,o))),Hi(a.lines,_n(c,"label",this,o)),Hi(a.after,wr(_n(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return OL(_n(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=_n(r,"beforeFooter",this,t),o=_n(r,"footer",this,t),a=_n(r,"afterFooter",this,t),c=[];return c=Hi(c,wr(s)),c=Hi(c,wr(o)),c=Hi(c,wr(a)),c}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],l,u;for(l=0,u=i.length;l<u;++l)c.push(aQ(this.chart,i[l]));return t.filter&&(c=c.filter((d,h,f)=>t.filter(d,h,f,r))),t.itemSort&&(c=c.sort((d,h)=>t.itemSort(d,h,r))),ke(c,d=>{let h=NL(t.callbacks,d);s.push(_n(h,"labelColor",this,d)),o.push(_n(h,"labelPointStyle",this,d)),a.push(_n(h,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=Xd[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=PL(this,r),u=Object.assign({},c,l),d=RL(this.chart,r,u),h=kL(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:u,bottomLeft:d,bottomRight:h}=Ds(c),{x:f,y:p}=t,{width:g,height:m}=i,y,v,b,E,C,D;return o==="center"?(C=p+m/2,s==="left"?(y=f,v=y-a,E=C+a,D=C-a):(y=f+g,v=y+a,E=C-a,D=C+a),b=y):(s==="left"?v=f+Math.max(l,d)+a:s==="right"?v=f+g-Math.max(u,h)-a:v=this.caretX,o==="top"?(E=p,C=E-a,y=v-a,b=v+a):(E=p+m,C=E+a,y=v+a,b=v-a),D=E),{x1:y,x2:v,x3:b,y1:E,y2:C,y3:D}}drawTitle(t,i,r){let s=this.title,o=s.length,a,c,l;if(o){let u=Zo(r.rtl,this.x,this.width);for(t.x=ay(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=Et(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:u}=o,d=Et(o.bodyFont),h=ay(this,"left",o),f=s.x(h),p=l<d.lineHeight?(d.lineHeight-l)/2:0,g=i.y+p;if(o.usePointStyle){let m={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},y=s.leftForLtr(f,u)+u/2,v=g+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,Xm(t,m,y,v),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Xm(t,m,y,v)}else{t.lineWidth=Ee(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let m=s.leftForLtr(f,u),y=s.leftForLtr(s.xPlus(f,1),u-2),v=Ds(a.borderRadius);Object.values(v).some(b=>b!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,nl(t,{x:m,y:g,w:u,h:l,radius:v}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),nl(t,{x:y,y:g+1,w:u-2,h:l-2,radius:v}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(m,g,u,l),t.strokeRect(m,g,u,l),t.fillStyle=a.backgroundColor,t.fillRect(y,g+1,u-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:d}=r,h=Et(r.bodyFont),f=h.lineHeight,p=0,g=Zo(r.rtl,this.x,this.width),m=function(B){i.fillText(B,g.x(t.x+p),t.y+f/2),t.y+=f+o},y=g.textAlign(a),v,b,E,C,D,A,M;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,t.x=ay(this,y,r),i.fillStyle=r.bodyColor,ke(this.beforeBody,m),p=c&&y!=="right"?a==="center"?u/2+d:u+2+d:0,C=0,A=s.length;C<A;++C){for(v=s[C],b=this.labelTextColors[C],i.fillStyle=b,ke(v.before,m),E=v.lines,c&&E.length&&(this._drawColorBox(i,t,C,g,r),f=Math.max(h.lineHeight,l)),D=0,M=E.length;D<M;++D)m(E[D]),f=h.lineHeight;ke(v.after,m)}p=0,f=h.lineHeight,ke(this.afterBody,m),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,c;if(o){let l=Zo(r.rtl,this.x,this.width);for(t.x=ay(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=Et(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:d}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:g}=Ds(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+h,l),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(c+u-f,l),i.quadraticCurveTo(c+u,l,c+u,l+f),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(c+u,l+d-g),i.quadraticCurveTo(c+u,l+d,c+u-g,l+d),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(c+p,l+d),i.quadraticCurveTo(c,l+d,c,l+d-p),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(c,l+h),i.quadraticCurveTo(c,l,c+h,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=Xd[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=PL(this,t),l=Object.assign({},a,this._size),u=RL(i,t,l),d=kL(t,l,u,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Ut(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),aI(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),cI(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),o=!Ud(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),c=this._positionChanged(a,t),l=i||!Ud(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i;let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=Xd[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),pQ={id:"tooltip",_element:FL,positioners:Xd,afterInit(n,e,t){t&&(n.tooltip=new FL({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",Te($({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hV},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},gQ=Object.freeze({__proto__:null,Colors:TK,Decimation:PK,Filler:XK,Legend:iQ,SubTitle:oQ,Title:sQ,Tooltip:pQ}),mQ=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function yQ(n,e,t,i){let r=n.indexOf(e);if(r===-1)return mQ(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var vQ=(n,e)=>n===null?null:St(Math.round(n),0,e);function LL(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var _Q=(()=>{class n extends ta{static id="category";static defaults={ticks:{callback:LL}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(Se(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:yQ(r,t,de(i,t),this._addedLabels),vQ(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return LL.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function bQ(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:u,maxDigits:d,includeBounds:h}=n,f=s||1,p=u-1,{min:g,max:m}=e,y=!Se(o),v=!Se(a),b=!Se(l),E=(m-g)/(d+1),C=jD((m-g)/p/f)*f,D,A,M,B;if(C<1e-14&&!y&&!v)return[{value:g},{value:m}];B=Math.ceil(m/C)-Math.floor(g/C),B>p&&(C=jD(B*C/p/f)*f),Se(c)||(D=Math.pow(10,c),C=Math.ceil(C*D)/D),r==="ticks"?(A=Math.floor(g/C)*C,M=Math.ceil(m/C)*C):(A=g,M=m),y&&v&&s&&EF((a-o)/s,C/1e3)?(B=Math.round(Math.min((a-o)/C,u)),C=(a-o)/B,A=o,M=a):b?(A=y?o:A,M=v?a:M,B=l-1,C=(M-A)/B):(B=(M-A)/C,Jc(B,Math.round(B),C/1e3)?B=Math.round(B):B=Math.ceil(B));let ee=Math.max(UD(C),UD(A));D=Math.pow(10,Se(c)?ee:c),A=Math.round(A*D)/D,M=Math.round(M*D)/D;let se=0;for(y&&(h&&A!==o?(t.push({value:o}),A<o&&se++,Jc(Math.round((A+se*C)*D)/D,o,VL(o,E,n))&&se++):A<o&&se++);se<B;++se){let he=Math.round((A+se*C)*D)/D;if(v&&he>a)break;t.push({value:he})}return v&&h&&M!==a?t.length&&Jc(t[t.length-1].value,a,VL(a,E,n))?t[t.length-1].value=a:t.push({value:a}):(!v||M===a)&&t.push({value:M}),t}function VL(n,e,{horizontal:t,minRotation:i}){let r=Wn(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var ol=class extends ta{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Se(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=t?r:c,a=c=>s=i?s:c;if(e){let c=di(r),l=di(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=bQ(r,s);return e.bounds==="ticks"&&BD(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return tl(e,this.chart.options.locale,this.options.ticks.format)}},NI=class extends ol{static id="linear";static defaults={ticks:{callback:$d.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=it(e)?e:0,this.max=it(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Wn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},eh=n=>Math.floor(yr(n)),ea=(n,e)=>Math.pow(10,eh(n)+e);function jL(n){return n/Math.pow(10,eh(n))===1}function BL(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function wQ(n,e){let t=e-n,i=eh(t);for(;BL(n,e,i)>10;)i++;for(;BL(n,e,i)<10;)i--;return Math.min(i,eh(n))}function EQ(n,{min:e,max:t}){e=vn(n.min,e);let i=[],r=eh(e),s=wQ(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((e-c)*o)/o,u=Math.floor((e-c)/a/10)*a*10,d=Math.floor((l-u)/Math.pow(10,s)),h=vn(n.min,Math.round((c+u+d*Math.pow(10,s))*o)/o);for(;h<t;)i.push({value:h,major:jL(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),h=Math.round((c+u+d*Math.pow(10,s))*o)/o;let f=vn(n.max,h);return i.push({value:f,major:jL(f),significand:d}),i}var FI=class extends ta{static id="logarithmic";static defaults={ticks:{callback:$d.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=ol.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return it(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=it(e)?Math.max(0,e):null,this.max=it(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!it(this._userMin)&&(this.min=e===ea(this.min,0)?ea(this.min,-1):ea(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(ea(i,-1)),o(ea(r,1)))),i<=0&&s(ea(r,-1)),r<=0&&o(ea(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=EQ(t,this);return e.bounds==="ticks"&&BD(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":tl(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=yr(e),this._valueRange=yr(this.max)-yr(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(yr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function LI(n){let e=n.ticks;if(e.display&&n.display){let t=Ut(e.backdropPadding);return de(e.font&&e.font.size,rt.font.size)+t.height}return 0}function CQ(n,e,t){return t=He(t)?t:[t],{w:PF(n,e.string,t),h:t.length*e.lineHeight}}function UL(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function DQ(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?qe/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));r[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+r[c],a),d=Et(l.font),h=CQ(n.ctx,d,n._pointLabels[c]);i[c]=h;let f=yn(n.getIndexAngle(c)+a),p=Math.round(Gm(f)),g=UL(p,u.x,h.w,0,180),m=UL(p,u.y,h.h,90,270);IQ(t,e,f,g,m)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=xQ(n,i,r)}function IQ(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function SQ(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,i+r+o,s),l=Math.round(Gm(yn(c.angle+ct))),u=PQ(c.y,a.h,l),d=AQ(l),h=MQ(c.x,a.w,d);return{visible:!0,x:c.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function TQ(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(Ui({x:t,y:i},e)||Ui({x:t,y:s},e)||Ui({x:r,y:i},e)||Ui({x:r,y:s},e))}function xQ(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:LI(s)/2,additionalAngle:o?qe/r:0},l;for(let u=0;u<r;u++){c.padding=t[u],c.size=e[u];let d=SQ(n,u,c);i.push(d),a==="auto"&&(d.visible=TQ(d,l),d.visible&&(l=d))}return i}function AQ(n){return n===0||n===180?"center":n<180?"left":"right"}function MQ(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function PQ(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function RQ(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!Se(a)){let c=Ds(e.borderRadius),l=Ut(e.backdropPadding);n.fillStyle=a;let u=i-l.left,d=r-l.top,h=s-i+l.width,f=o-r+l.height;Object.values(c).some(p=>p!==0)?(n.beginPath(),nl(n,{x:u,y:d,w:h,h:f,radius:c}),n.fill()):n.fillRect(u,d,h,f)}}function kQ(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));RQ(t,o,s);let a=Et(o.font),{x:c,y:l,textAlign:u}=s;Cs(t,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:o.color,textAlign:u,textBaseline:"middle"})}}function fV(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,We);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function OQ(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),fV(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function NQ(n,e,t){return _r(n,{label:t,index:e,type:"pointLabel"})}var VI=class extends ol{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$d.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Ut(LI(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=it(e)&&!isNaN(e)?e:0,this.max=it(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/LI(this.options))}generateTickLabels(e){ol.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=$e(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?DQ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=We/(this._pointLabels.length||1),i=this.options.startAngle||0;return yn(e*t+Wn(i))}getDistanceFromCenterForValue(e){if(Se(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Se(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return NQ(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-ct+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),fV(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&kQ(this,o),r.display&&this.ticks.forEach((u,d)=>{if(d!==0){c=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=r.setContext(h),p=s.setContext(h);OQ(this,f,c,o,p)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&!t.reverse)return;let l=i.setContext(this.getContext(c)),u=Et(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let d=Ut(l.backdropPadding);e.fillRect(-o/2-d.left,-s-u.size/2-d.top,o+d.width,u.size+d.height)}Cs(e,a.label,0,-s,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},vy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bn=Object.keys(vy);function $L(n,e){return n-e}function zL(n,e){if(Se(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),it(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Xo(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function HL(n,e,t,i){let r=bn.length;for(let s=bn.indexOf(n);s<r-1;++s){let o=vy[bn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return bn[s]}return bn[r-1]}function FQ(n,e,t,i,r){for(let s=bn.length-1;s>=bn.indexOf(t);s--){let o=bn[s];if(vy[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return bn[t?bn.indexOf(t):0]}function LQ(n){for(let e=bn.indexOf(n)+1,t=bn.length;e<t;++e)if(vy[bn[e]].common)return bn[e]}function qL(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=Km(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function VQ(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function WL(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:VQ(n,i,r,t)}var jI=(()=>{class n extends ta{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new Y8._date(t.adapters.date);s.init(i),Xc(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:zL(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(s=Math.min(s,u.min)),!c&&!isNaN(u.max)&&(o=Math.max(o,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=it(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=it(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=IF(s,o,a);return this._unit=i.unit||(r.autoSkip?HL(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):FQ(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:LQ(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),WL(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=St(i,0,a),r=St(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||HL(o.minUnit,i,r,this._getLabelCapacity(i)),c=de(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,u=Xo(l)||l===!0,d={},h=i,f,p;if(u&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,u?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let g=s.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+t.add(f,c,a),p++)qL(d,f,g);return(f===r||s.bounds==="ticks"||p===1)&&qL(d,f,g),Object.keys(d).sort($L).map(m=>+m)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return $e(a,[t,i,r],this);let c=o.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&c[l],h=u&&c[u],f=r[i],p=u&&h&&f&&f.major;return this._adapter.format(t,s||(p?h:d))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=Wn(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,WL(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(zL(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return HD(t.sort($L))}}return n})();function cy(n,e,t){let i=0,r=n.length-1,s,o,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=Bi(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=Bi(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var BI=class extends jI{static id="timeseries";static defaults=jI.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=cy(t,this.min),this._tableRange=cy(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,c,l,u;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],c=r[o-1],l=r[o],Math.round((u+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(cy(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return cy(this._table,i*this._tableRange+this._minPos,!0)}},jQ=Object.freeze({__proto__:null,CategoryScale:_Q,LinearScale:NI,LogarithmicScale:FI,RadialLinearScale:VI,TimeScale:jI,TimeSeriesScale:BI}),nh=[Q8,wK,gQ,jQ];var BQ=["myRadarChart"];xs.register(...nh);var pV=(()=>{let e=class e{constructor(){xs.register(...nh)}ngAfterViewInit(){this.myRadarChart&&this.myRadarChart.nativeElement&&this.createRadarChart()}createRadarChart(){let r={type:"radar",data:{labels:["Marketing","Risk assessment","Managing supplies","Accounting","Management","Logistics","Communication","Pitching"],datasets:[{label:"Skills developed",data:[20,12,28,18,26,24,13,20],fill:!0,backgroundColor:"rgba(221,99,255,0.2)",borderColor:"rgb(203,99,255)",pointBackgroundColor:"rgb(203,99,255)",pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:"rgb(193,99,255)"}]},options:{scales:{r:{suggestedMin:0,suggestedMax:100}}}};new xs(this.myRadarChart.nativeElement,r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-homepage"]],viewQuery:function(r,s){if(r&1&&mA(BQ,5),r&2){let o;j_(o=B_())&&(s.myRadarChart=o.first)}},standalone:!0,features:[ce],decls:20,vars:0,consts:[[1,"d-flex","flex-wrap","justify-content-center"],[1,"m-2","col-md-4","text-center"],["id","carouselExampleIndicators",1,"carousel","slide","d-flex","flex-column","justify-content-between","align-content-center"],[1,"carousel-inner"],[1,"carousel-item","active"],["myRadarChart",""],[1,"text-center","m-2","col-xl-6","col-lg-7","col-md-12","col-sm-8"],[1,"card","m-2","text-center"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["href","#",1,"btn","btn-primary"],["role","progressbar","aria-label","Basic example","aria-valuenow","75","aria-valuemin","0","aria-valuemax","100",1,"progress"],[1,"progress-bar",2,"width","75%","background-color","#7b1fa2"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),Q(5,"canvas",null,5),w()()()(),_(7,"div",6)(8,"div",7)(9,"div",8),I(10," \u{1F680} Challenge of the week \u{1F680} "),w(),_(11,"div",9)(12,"h5",10),I(13,"Challenge title"),w(),_(14,"p",11),I(15,"Description of the challenge."),w(),_(16,"a",12),I(17,"Start! \u{1F680}"),w()(),_(18,"div",13),Q(19,"div",14),w()()()())},dependencies:[le],styles:[".carousel[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{height:500px}.carousel[_ngcontent-%COMP%]   .carousel-indicators[_ngcontent-%COMP%]   [data-bs-target][_ngcontent-%COMP%]{border-top:10px solid #b00dfd}.card-header[_ngcontent-%COMP%]{background-color:#b00dfd;color:#fff}"]});let n=e;return n})();function UQ(n,e){n&1&&(_(0,"p",5),Q(1,"i",6),I(2," Ticket opened"),w())}function $Q(n,e){n&1&&(_(0,"p",5),Q(1,"i",7),I(2," Ticket closed"),w())}function zQ(n,e){n&1&&(_(0,"p",5),Q(1,"i",8),I(2," Ticket in process"),w())}function HQ(n,e){if(n&1&&(_(0,"p",23),I(1),w()),n&2){let t=fn().$implicit;U(1),Fe(t.customerName)}}function qQ(n,e){n&1&&(_(0,"p",24),I(1,"Admin"),w())}function WQ(n,e){if(n&1&&(_(0,"div",17)(1,"div",18),tt(2,HQ,2,1,"p",19)(3,qQ,2,0,"p",20),w(),_(4,"div",21),Q(5,"div",22),w()()),n&2){let t=e.$implicit;U(2),ve("ngIf",t.user==="user"),U(1),ve("ngIf",t.user==="admin")}}function GQ(n,e){if(n&1&&(_(0,"div",9)(1,"h2"),I(2,"Chat"),w(),_(3,"div",10),tt(4,WQ,6,2,"div",11),w(),_(5,"form",12)(6,"div",13),Q(7,"input",14),w(),_(8,"button",15),Q(9,"i",16),I(10," Send"),w()()()),n&2){let t=fn();U(4),ve("ngForOf",t.rowData.messages)}}var gV=(()=>{let e=class e{constructor(i){this.dataService=i}ngOnInit(){this.rowData=this.dataService.getCurrentRowData(),console.log(this.rowData)}};e.\u0275fac=function(r){return new(r||e)(G(ji))},e.\u0275cmp=ae({type:e,selectors:[["app-ticketing-detail"]],standalone:!0,features:[ce],decls:31,vars:8,consts:[[1,"d-flex","m-5"],[1,"ticket-details"],[1,"detail-item"],["style","color: rebeccapurple",4,"ngIf"],["class","ticket-details d-flex flex-column justify-content-between",4,"ngIf"],[2,"color","rebeccapurple"],[1,"bi","bi-circle"],[1,"bi","bi-circle-fill"],[1,"bi","bi-circle-half"],[1,"ticket-details","d-flex","flex-column","justify-content-between"],[2,"overflow-y","scroll","height","55vh"],["class","card m-2",4,"ngFor","ngForOf"],[2,"text-align","end"],[1,"mb-3"],["type","email","id","exampleInputEmail1","aria-describedby","emailHelp",1,"form-control",2,"text-align","end"],["type","submit",1,"btn","btn-primary"],[1,"bi","bi-send"],[1,"card","m-2"],[1,"card-header"],["style","text-align: start; font-weight: bold",4,"ngIf"],["style","text-align: end; font-weight: bold",4,"ngIf"],[1,"card-body"],[1,"card-text"],[2,"text-align","start","font-weight","bold"],[2,"text-align","end","font-weight","bold"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"div",1)(2,"h2"),I(3,"Ticket Detail"),w(),_(4,"div",2)(5,"h3"),I(6,"Title:"),w(),_(7,"p"),I(8),w()(),_(9,"div",2)(10,"h3"),I(11,"Description:"),w(),_(12,"p"),I(13),w()(),_(14,"div",2)(15,"h3"),I(16,"Status:"),w(),tt(17,UQ,3,0,"p",3)(18,$Q,3,0,"p",3)(19,zQ,3,0,"p",3),w(),_(20,"div",2)(21,"h3"),I(22,"Customer Name:"),w(),_(23,"p"),I(24),w()(),_(25,"div",2)(26,"h3"),I(27,"Customer Email:"),w(),_(28,"p"),I(29),w()()(),tt(30,GQ,11,1,"div",4),w()),r&2&&(U(8),Fe(s.rowData.title),U(5),Fe(s.rowData.description),U(4),ve("ngIf",s.rowData.status==="open"),U(1),ve("ngIf",s.rowData.status==="closed"),U(1),ve("ngIf",s.rowData.status==="processing"),U(5),Fe(s.rowData.customerName),U(5),Fe(s.rowData.customerEmail),U(1),ve("ngIf",s.rowData.messages))},dependencies:[le,pn,jr],styles:[".ticket-details[_ngcontent-%COMP%]{width:40%;height:85vh;margin:0 auto;padding:20px;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 4px #0000001a}.ticket-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;color:#333;margin-bottom:20px}.ticket-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]{margin-bottom:15px}.ticket-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1em;color:#555;margin-bottom:5px}.ticket-details[_ngcontent-%COMP%]   .detail-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1em;color:#666;margin-left:10px;word-break:break-word}"]});let n=e;return n})();xs.register(...nh);var mV=xs;function KQ(n,e){if(n&1){let t=tr();_(0,"div")(1,"li")(2,"a",15),je("click",function(){let r=Zi(t),s=r.$implicit,o=r.index,a=fn();return Ji(a.selectSubject(s.name,o))}),I(3),w()()()}if(n&2){let t=e.$implicit;U(3),Fe(t.name)}}function QQ(n,e){if(n&1){let t=tr();_(0,"div")(1,"li")(2,"a",15),je("click",function(){let r=Zi(t),s=r.$implicit,o=r.index,a=fn();return Ji(a.selectMonth(s.month,o))}),I(3),w()()()}if(n&2){let t=e.$implicit;U(3),Fe(t.month)}}var yV=(()=>{let e=class e{constructor(){this.marks=[{month:"January",subjects:[{name:"Maths",marks:[9,4,8,5,7,10,4,5,6,2]},{name:"Science",marks:[6,4,5,8,9,10]}]},{month:"February",subjects:[{name:"Maths",marks:[9,4]},{name:"Science",marks:[6,4,6]}]},{month:"March",subjects:[{name:"Maths",marks:[9,4,5,7]},{name:"Science",marks:[6,4,6,9,4]}]}],this.buttonTitle={subject:"Select Subject",month:"Select Month"},this.selectedSubject={month:{name:"",number:0},subject:{name:"",number:0},labels:[],dataSets:[],name:""},this.chart=[],this.destroyChart=!0}ngOnInit(){this.createChart()}createChart(){this.chart=new mV("canvas",{type:"line",data:{labels:this.selectedSubject.labels,datasets:[{label:"# of Votes",data:this.selectedSubject.dataSets,borderWidth:3,backgroundColor:"rgba(221,99,255,0.2)",borderColor:"rgba(221,99,255,0.2)"}]},options:{scales:{y:{beginAtZero:!0}}}})}selectMonth(i,r){this.buttonTitle.month=i,this.selectedSubject.labels=[],this.chart.destroy(),this.selectedSubject.month.name=i,this.selectedSubject.month.number=r,this.selectedSubject.dataSets=this.marks[this.selectedSubject.month.number].subjects[this.selectedSubject.subject.number].marks,this.selectedSubject.labels=this.createLabels(),this.createChart(),console.log("mese selezionato",this.selectedSubject.month),console.log("materia selezionata",this.selectedSubject.subject),console.log("-----------------",this.selectedSubject.dataSets)}selectSubject(i,r){this.buttonTitle.subject=i,this.selectedSubject.labels=[],this.chart.destroy(),this.selectedSubject.subject.name=i,this.selectedSubject.subject.number=r,this.selectedSubject.dataSets=this.marks[this.selectedSubject.month.number].subjects[this.selectedSubject.subject.number].marks,this.selectedSubject.labels=this.createLabels(),this.createChart(),console.log("mese selezionato",this.selectedSubject.month),console.log("materia selezionata",this.selectedSubject.subject),console.log(this.selectedSubject.dataSets)}createLabels(){for(let i=0;i<this.selectedSubject.dataSets.length;i++)this.selectedSubject.labels.push("Challenge"+(i+1));return this.selectedSubject.labels}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-profile"]],standalone:!0,features:[ce],decls:28,vars:5,consts:[[1,"container","mt-5","profile-container"],[1,"row"],[1,"col-md-4","mb-3"],[1,"card"],["src","","alt","Profile Picture",1,"card-img-top"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"col-md-8"],[1,"d-flex"],[1,"dropdown","m-2"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["id","canvas"],[1,"dropdown-item",3,"click"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Q(4,"img",4),_(5,"div",5)(6,"h5",6),I(7,"Username"),w(),_(8,"p",7),I(9,"Short bio or description."),w()()()(),_(10,"div",8)(11,"div",3)(12,"div",5)(13,"h5",6),I(14,"Marks"),w(),_(15,"div",9)(16,"div",10)(17,"button",11),I(18),w(),_(19,"ul",12),tt(20,KQ,4,1,"div",13),w()(),_(21,"div",10)(22,"button",11),I(23),w(),_(24,"ul",12),tt(25,QQ,4,1,"div",13),w()()(),_(26,"canvas",14),I(27),w()()()()()()),r&2&&(U(18),ti(" ",s.buttonTitle.subject," "),U(2),ve("ngForOf",s.marks[0].subjects),U(3),ti(" ",s.buttonTitle.month," "),U(2),ve("ngForOf",s.marks),U(2),Fe(s.chart))},dependencies:[le,pn],styles:[".profile-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-radius:.5rem;box-shadow:0 4px 8px #0000001a}.profile-container[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{height:200px;object-fit:cover;border-top-left-radius:.5rem;border-top-right-radius:.5rem}.profile-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   h5.card-title[_ngcontent-%COMP%]{color:#c163ff}.profile-container[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:5px}.profile-container[_ngcontent-%COMP%]   .activity-feed[_ngcontent-%COMP%]   .feed-item[_ngcontent-%COMP%]{border-bottom:1px solid #e9ecef;padding:10px 0}.profile-container[_ngcontent-%COMP%]   .activity-feed[_ngcontent-%COMP%]   .feed-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.profile-container[_ngcontent-%COMP%]   .activity-feed[_ngcontent-%COMP%]   .feed-item[_ngcontent-%COMP%]   .feed-date[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d}.profile-container[_ngcontent-%COMP%]   .activity-feed[_ngcontent-%COMP%]   .feed-item[_ngcontent-%COMP%]   .feed-content[_ngcontent-%COMP%]{margin-top:5px}"]});let n=e;return n})();function YQ(n,e){if(n&1){let t=tr();_(0,"div",2)(1,"div",3),Q(2,"img",4),_(3,"div",5)(4,"h5",6),I(5),w(),_(6,"p",7),I(7),w(),_(8,"button",8),je("click",function(){let s=Zi(t).$implicit,o=fn();return Ji(o.openDetailPage(s))}),I(9,"Photographer link"),w()()()()}if(n&2){let t=e.$implicit;U(2),nr("src",t.src,kr),U(3),Fe(t.name),U(2),Fe(t.description)}}var vV=(()=>{let e=class e{constructor(i,r){this.router=i,this.dataService=r,this.challenge=[{id:1,name:"Challenge 1",description:"Description 1",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:2,name:"Challenge 2",description:"Description 2",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:3,name:"Challenge 3",description:"Description 3",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:4,name:"Challenge 4",description:"Description 4",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:5,name:"Challenge 5",description:"Description 5",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:6,name:"Challenge 6",description:"Description 6",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}]}openDetailPage(i){this.dataService.setCurrentRowData(i),console.log(i),this.router.navigate(["/home/challenge/"+i.id])}};e.\u0275fac=function(r){return new(r||e)(G(Ft),G(ji))},e.\u0275cmp=ae({type:e,selectors:[["app-challenge"]],standalone:!0,features:[ce],decls:2,vars:1,consts:[[1,"challenge-list"],["class","photo-item",4,"ngFor","ngForOf"],[1,"photo-item"],[1,"card",2,"width","20rem"],["alt","photo",1,"card-img-top",2,"object-fit","cover","height","200px","width","100%",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"btn","btn-primary",3,"click"]],template:function(r,s){r&1&&(_(0,"div",0),tt(1,YQ,10,3,"div",1),w()),r&2&&(U(1),ve("ngForOf",s.challenge))},dependencies:[le,pn],styles:[".challenge-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;overflow-y:scroll;height:100vh}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(241,241,241,0);border-radius:6px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#7b1fa2,#4a148c);border-radius:6px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#9c27b0,#6a1b9a)}.challenge-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{margin:20px}.challenge-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;height:auto}"]});let n=e;return n})();var _V=(()=>{let e=class e{constructor(i){this.dataService=i}ngOnInit(){this.rowData=this.dataService.getCurrentRowData(),console.log(this.rowData)}};e.\u0275fac=function(r){return new(r||e)(G(ji))},e.\u0275cmp=ae({type:e,selectors:[["app-challenge-detail"]],standalone:!0,features:[ce],decls:1,vars:0,consts:[[1,"d-flex","m-5"]],template:function(r,s){r&1&&Q(0,"div",0)},dependencies:[le]});let n=e;return n})();var bV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-privacy-policy"]],standalone:!0,features:[ce],decls:2,vars:0,template:function(r,s){r&1&&(_(0,"p"),I(1,"privacy-policy works!"),w())},dependencies:[le]});let n=e;return n})();var wV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-settings"]],standalone:!0,features:[ce],decls:2,vars:0,template:function(r,s){r&1&&(_(0,"p"),I(1,"settings works!"),w())},dependencies:[le]});let n=e;return n})();var EV=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-user-management"]],standalone:!0,features:[ce],decls:44,vars:0,consts:[[1,"container"],[1,"text-center"],[1,"mt-4","d-flex","justify-content-end"],[1,"btn","btn-primary"],[1,"my-4"],[1,"table","table-bordered"],["scope","col"],["scope","row"],["colspan","2"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"h1",1),I(2,"Gestione Utenti"),w(),_(3,"div",2)(4,"button",3),I(5,"Aggiungi utente"),w()(),_(6,"div",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th",6),I(11,"#"),w(),_(12,"th",6),I(13,"First"),w(),_(14,"th",6),I(15,"Last"),w(),_(16,"th",6),I(17,"Handle"),w()()(),_(18,"tbody")(19,"tr")(20,"th",7),I(21,"1"),w(),_(22,"td"),I(23,"Mark"),w(),_(24,"td"),I(25,"Otto"),w(),_(26,"td"),I(27,"@mdo"),w()(),_(28,"tr")(29,"th",7),I(30,"2"),w(),_(31,"td"),I(32,"Jacob"),w(),_(33,"td"),I(34,"Thornton"),w(),_(35,"td"),I(36,"@fat"),w()(),_(37,"tr")(38,"th",7),I(39,"3"),w(),_(40,"td",8),I(41,"Larry the Bird"),w(),_(42,"td"),I(43,"@twitter"),w()()()()()())},dependencies:[le]});let n=e;return n})();function XQ(n,e){if(n&1){let t=tr();_(0,"div",6)(1,"div",7),Q(2,"img",8),_(3,"div",9)(4,"h5",10),I(5),w(),_(6,"p",11),I(7),w(),_(8,"div",12)(9,"button",13),je("click",function(){let s=Zi(t).$implicit,o=fn();return Ji(o.openDetailPage(s))}),I(10,"Visualizza"),w(),_(11,"button",14),I(12,"Modifica"),w(),_(13,"button",3),I(14,"Rimuovi"),w()()()()()}if(n&2){let t=e.$implicit;U(2),nr("src",t.src,kr),U(3),Fe(t.name),U(2),Fe(t.description)}}var CV=(()=>{let e=class e{constructor(i,r){this.router=i,this.dataService=r,this.challenge=[{id:1,name:"Challenge 1",description:"Description 1",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:2,name:"Challenge 2",description:"Description 2",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:3,name:"Challenge 3",description:"Description 3",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:4,name:"Challenge 4",description:"Description 4",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:5,name:"Challenge 5",description:"Description 5",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"},{id:6,name:"Challenge 6",description:"Description 6",src:"https://images.pexels.com/photos/943096/pexels-photo-943096.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"}]}openDetailPage(i){this.dataService.setCurrentRowData(i),console.log(i),this.router.navigate(["/home/challenge/"+i.id])}};e.\u0275fac=function(r){return new(r||e)(G(Ft),G(ji))},e.\u0275cmp=ae({type:e,selectors:[["app-challenge-management"]],standalone:!0,features:[ce],decls:8,vars:1,consts:[[1,"container"],[1,"text-center"],[1,"mt-5","justify-content-center","d-flex"],[1,"btn","btn-primary"],[1,"challenge-list"],["class","photo-item",4,"ngFor","ngForOf"],[1,"photo-item"],[1,"card",2,"width","20rem"],["alt","photo",1,"card-img-top",2,"object-fit","cover","height","200px","width","100%",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"justify-content-center","d-flex"],[1,"btn","btn-primary","me-2",3,"click"],[1,"btn","btn-primary","me-2"]],template:function(r,s){r&1&&(_(0,"div",0)(1,"h1",1),I(2,"Gestione Challenges"),w(),_(3,"div",2)(4,"button",3),I(5,"Aggiungi Challenge"),w()(),_(6,"div",4),tt(7,XQ,15,3,"div",5),w()()),r&2&&(U(7),ve("ngForOf",s.challenge))},dependencies:[le,pn],styles:[".challenge-list[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-wrap:wrap;overflow-y:scroll;height:100vh}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:12px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(241,241,241,0);border-radius:6px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(to bottom,#7b1fa2,#4a148c);border-radius:6px}.challenge-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(to bottom,#9c27b0,#6a1b9a)}.challenge-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{margin:20px}.challenge-list[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%;height:auto}"]});let n=e;return n})();var DV=(()=>{let e=class e{constructor(i,r,s){this.router=i,this.afAuth=r,this.authService=s}register(){this.displayName&&this.email&&this.password?this.afAuth.createUserWithEmailAndPassword(this.email,this.password).then(i=>{let r=i.user;r?.updateProfile({displayName:this.displayName}).then(()=>{console.log("Registered successfully!"),this.authService.addUser(r.uid,{displayName:this.displayName,email:this.email,userUID:r.uid,admin:!1}).then(()=>{console.log("User added to Firestore successfully!")}).catch(s=>{console.error("Error adding user to Firestore:",s)}),this.router.navigate(["/login"])}).catch(s=>{console.error("Error updating display name:",s)})}).catch(i=>{console.error("Error registering:",i)}):console.error("Display name, email, and password are required.")}};e.\u0275fac=function(r){return new(r||e)(G(Ft),G(mo),G(ys))},e.\u0275cmp=ae({type:e,selectors:[["app-register"]],standalone:!0,features:[ce],decls:20,vars:4,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit"],["loginForm","ngForm"],[1,"form-group"],["for","displayName"],["type","text","id","displayName","name","displayName","required","",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","email","name","email","required","",3,"ngModel","ngModelChange"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModel","ngModelChange"],["type","submit",1,"login-button",3,"disabled"]],template:function(r,s){if(r&1&&(_(0,"div",0)(1,"div",1)(2,"h2"),I(3,"Register user"),w(),_(4,"form",2,3),je("ngSubmit",function(){return s.register()}),_(6,"div",4)(7,"label",5),I(8,"Name:"),w(),_(9,"input",6),je("ngModelChange",function(a){return s.displayName=a}),w()(),_(10,"div",4)(11,"label",7),I(12,"Email:"),w(),_(13,"input",8),je("ngModelChange",function(a){return s.email=a}),w()(),_(14,"div",4)(15,"label",9),I(16,"Password:"),w(),_(17,"input",10),je("ngModelChange",function(a){return s.password=a}),w()(),_(18,"button",11),I(19,"Register"),w()()()()),r&2){let o=Mf(5);U(9),ve("ngModel",s.displayName),U(4),ve("ngModel",s.email),U(4),ve("ngModel",s.password),U(1),ve("disabled",!o.valid)}},dependencies:[le,Za,kp,Gr,Xa,Pp,bu,po,_u],styles:[".login-container[_ngcontent-%COMP%]{background:linear-gradient(to right,#7b1fa2,#4a148c);display:flex;justify-content:center;align-items:center;height:100vh}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]{background-color:#fff;padding:20px;border-radius:5px;box-shadow:0 0 10px #0000004d}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4a148c;margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:20px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#4a148c;font-weight:700}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:5px}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{background-color:#4a148c;color:#fff;padding:10px 20px;font-size:1.2rem;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.login-container[_ngcontent-%COMP%]   .login-card[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]:hover{background-color:#7b1fa2}"]});let n=e;return n})();var IV=(()=>{let e=class e{constructor(i,r){this.authService=i,this.router=r,this.canActivate=()=>this.authService.isLoggedIn().pipe(Qn(1),Z(s=>s?!0:(this.router.navigate(["/login"]),!1)))}};e.\u0275fac=function(r){return new(r||e)(k(ys),k(Ft))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var SV=[{path:"",component:fP},{path:"login",component:WN},{path:"register",component:DV},{path:"home",component:KN,canActivate:[IV],children:[{path:"sidebar",component:Nm},{path:"settings",component:wV},{path:"homepage",component:pV},{path:"profile",component:yV},{path:"challenge",component:vV},{path:"challenge/:id",component:_V},{path:"tutorial",component:YN},{path:"ticketing",component:ZN},{path:"ticketing/:id",component:gV},{path:"admin",component:JN},{path:"admin/user-management",component:EV},{path:"admin/challenge-management",component:CV}]},{path:"privacy",component:bV}];var TV={providers:[RM(SV),uP(),h_([YP.initializeApp(kM.firebase),XP])]};var xV=(()=>{let e=class e{constructor(){this.title="frontend"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ae({type:e,selectors:[["app-root"]],standalone:!0,features:[ce],decls:1,vars:0,template:function(r,s){r&1&&Q(0,"router-outlet")},dependencies:[le,iu,Bf]});let n=e;return n})();XA(xV,TV).catch(n=>console.error(n));
